<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>toolkit on Guto Carvalho Archives</title>
    <link>https://archives.gutocarvalho.net/tags/toolkit/</link>
    <description>Recent content in toolkit on Guto Carvalho Archives</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Thu, 16 Apr 2020 11:02:49 +0000</lastBuildDate>
    
	<atom:link href="https://archives.gutocarvalho.net/tags/toolkit/index.xml" rel="self" type="application/rss+xml" />
    
    
    
    <item>
      <title>#NotaMental Quarkus.io</title>
      <link>https://archives.gutocarvalho.net/post/notamental-quarkus-io/</link>
      <pubDate>Thu, 16 Jul 2020 12:56:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/notamental-quarkus-io/</guid>
      <description>&lt;p&gt;Projeto interessante que promete muito em termos de JVM em K8S.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://quarkus.io/&#34;&gt;https://quarkus.io/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A Kubernetes Native Java stack tailored for OpenJDK HotSpot and GraalVM, crafted from the best of breed Java libraries and standards.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;iframe width=&#34;480&#34; height=&#34;270&#34; src=&#34;https://www.youtube.com/embed/DYcEQs-9sb0?feature=oembed&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Bora estudar!&lt;/p&gt;
&lt;p&gt;[s]&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Palestra Campus Party 2020</title>
      <link>https://archives.gutocarvalho.net/post/palestra-campus-party-2020/</link>
      <pubDate>Fri, 10 Jul 2020 13:06:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/palestra-campus-party-2020/</guid>
      <description>&lt;p&gt;Opa, palestrei na Campus Party 2020 falando sobre Cloud Native e a revolução do Kubernetes!&lt;/p&gt;
&lt;iframe width=&#34;480&#34; height=&#34;270&#34; src=&#34;https://www.youtube.com/embed/DitZp-CBEWs?feature=oembed&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;p&gt;[s]&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#Mindnote Cabot</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-cabot/</link>
      <pubDate>Thu, 02 Jul 2020 21:40:09 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-cabot/</guid>
      <description>&lt;p&gt;Projetinhooooo muito jóia, alternativa open source ao UptimeRobot. Já instalei aqui e estou gostando!&lt;/p&gt;
&lt;figure&gt;&lt;img src=&#34;__GHOST_URL__/content/images/2020/07/Screen-Shot-2020-07-01-at-22.42.54.png&#34;/&gt;
&lt;/figure&gt;

&lt;figure&gt;&lt;img src=&#34;__GHOST_URL__/content/images/2020/07/Screen-Shot-2020-07-01-at-19.08.14.png&#34;/&gt;
&lt;/figure&gt;

&lt;figure&gt;&lt;img src=&#34;__GHOST_URL__/content/images/2020/07/Screen-Shot-2020-07-01-at-19.10.14.png&#34;/&gt;
&lt;/figure&gt;

&lt;p&gt;Recomendo que você dê uma olhadinha.&lt;/p&gt;
&lt;p&gt;A Stack é composta por Python, Django, Celery, RabbitMQ e Caddy.Preciso estudar mais sobre ele e ver os plugins adicionais.- &lt;a href=&#34;https://cabotapp.com/qs/quickstart.html&#34;&gt;https://cabotapp.com/qs/quickstart.html&lt;/a&gt;[s]&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Campus Party BSB 2020, lá vou eu de novo ;)</title>
      <link>https://archives.gutocarvalho.net/post/campus-party-bsb-2020-la-vou-eu/</link>
      <pubDate>Thu, 02 Jul 2020 21:31:02 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/campus-party-bsb-2020-la-vou-eu/</guid>
      <description>&lt;p&gt;Recebi a informação de que eu vou palestrar na Campus de BSB esse ano, uhu!&lt;/p&gt;
&lt;p&gt;Estou bastante contente.&lt;/p&gt;
&lt;p&gt;O tema será: &lt;strong&gt;Cloud Native APPs e a revolução do Kubernetes na Tecnologia&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;A palestra vai acontecer no dia 10/07 às 19:35.Nos vemos lá.Link para a programação- &lt;a href=&#34;https://brasilia-digital.campus-party.org/campusero/?page=page-agenda&amp;amp;slugEvent=campus-party-digital-edition-2020-brasilia&#34;&gt;https://brasilia-digital.campus-party.org/campusero/?page=page-agenda&amp;amp;slugEvent=campus-party-digital-edition-2020-brasilia&lt;/a&gt;[s]&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Pesquisa DevSecOps Latino Americana</title>
      <link>https://archives.gutocarvalho.net/post/pesquisa-devsecops-2020/</link>
      <pubDate>Fri, 26 Jun 2020 01:13:18 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/pesquisa-devsecops-2020/</guid>
      <description>&lt;p&gt;Lançamento do 1º estudo sobre o estado da arte do DevSecOps na América Latina.&lt;/p&gt;
&lt;p&gt;O objetivo desta pesquisa é abrir a série de estudos sobre o estado da arte do DevSecOps na região da América Latina, e procura investigar a adoção das práticas do DevSecOps, e o papel que essa mudança cultural tem na segurança das organizações. Tudo isso, do ponto de vista acadêmico somando todos os papéis envolvidos desde a necessidade do cliente até a produção.&lt;/p&gt;
&lt;p&gt;Estimamos que sua participação respondendo o questionário (&lt;a href=&#34;https://pt.surveymonkey.com/r/dsoestadodalarte&#34;&gt;https://pt.surveymonkey.com/r/dsoestadodalarte&lt;/a&gt;) não levará mais do que 10 minutos, e estará disponível para sua resposta até sábado, 18 de julho. Os resultados serão publicados no evento DSO LATAM 2020 no dia 31 de julho&lt;/p&gt;
&lt;p&gt;As respostas ou outras informações que você fornecer não serão associadas ao seu nome ou ao da sua organização em nenhum relatório resultante deste estudo.&lt;/p&gt;
&lt;p&gt;Muito obrigado pela sua colaboração!Organização: &lt;a href=&#34;https://devsecops-latam.org/&#34;&gt;https://devsecops-latam.org/&lt;/a&gt;[s]&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#Mindnote GenioDesks</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-geniodesks/</link>
      <pubDate>Sun, 21 Jun 2020 17:00:31 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-geniodesks/</guid>
      <description>&lt;p&gt;Quer uma mesa que muda de altura, uma onde você possa trabalhar em pé ou sentado, com acionamento elétrico?&lt;/p&gt;
&lt;p&gt;Olha que bacana essa empresa brazuca!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.geniodesks.com.br/&#34;&gt;https://www.geniodesks.com.br/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Made in Brazil, com bons preços :)&lt;/p&gt;
&lt;p&gt;Eu já tô juntando as moedinhas para comprar uma :P&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#Mindnote awesome-web-hacking</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-awesome-web-hack/</link>
      <pubDate>Wed, 17 Jun 2020 01:46:09 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-awesome-web-hack/</guid>
      <description>&lt;p&gt;Vi esse link voando em algum lugar do telegram, é um repo do Infoslack muito bacana com links de tópicos de segurança divididos em book, docs, tools e muitos outros links bacanas.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/infoslack/awesome-web-hacking&#34;&gt;https://github.com/infoslack/awesome-web-hacking&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tenho que voltar lá e dar uma zapeada.&lt;/p&gt;
&lt;p&gt;Ah, visita lá o site do Daniel Romero, a.k.a Infoslack.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://infoslack.com/about/&#34;&gt;https://infoslack.com/about/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#Mindnote  keel.sh</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-keel-sh/</link>
      <pubDate>Wed, 17 Jun 2020 01:33:44 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-keel-sh/</guid>
      <description>&lt;p&gt;Outro projetinho interessante que parece facilitar o upgrade de deployments no kubernetes e pacotes helm. A promessa é scannear todos os releases do kubernetes e helm charts e mostrar o que está desatualizado.&lt;/p&gt;
&lt;p&gt;Testar issaí pq parece ser legal e útil.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://keel.sh/&#34;&gt;https://keel.sh/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#Mindnote rash.sh</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-rash-sh/</link>
      <pubDate>Wed, 17 Jun 2020 01:28:30 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-rash-sh/</guid>
      <description>&lt;p&gt;Me mostraram esse projetinho para facilitar a construção de imagens com promessa reduzir a complexidade dos entrypoints. Ele usa YAML como linguagem declarativa e vários templates para fazer o serviço sujo.&lt;/p&gt;
&lt;p&gt;Preciso testar e ver se vale a pena inserir no toolkit&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://rash.sh/&#34;&gt;https://rash.sh/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Ghost&#43;Mysql via Docker-Compose</title>
      <link>https://archives.gutocarvalho.net/post/ghost-mysql-via-docker/</link>
      <pubDate>Sat, 13 Jun 2020 11:48:15 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/ghost-mysql-via-docker/</guid>
      <description>&lt;p&gt;Aqui vamos mostrar como instalar um Ghost via Docker, usando banco MySQL em poucos minutos.&lt;/p&gt;
&lt;h3 id=&#34;prereq&#34;&gt;PreReq&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu &amp;gt;= 18.04&lt;/li&gt;
&lt;li&gt;Docker &amp;gt;= 19
&lt;ul&gt;
&lt;li&gt;Ghost&lt;/li&gt;
&lt;li&gt;MySQL&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;instalando-docker&#34;&gt;Instalando Docker&lt;/h3&gt;
&lt;p&gt;Vamos instalar o docker com o script fornecido pelo projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -fsSL https://get.docker.com -o get-docker.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Saída esperada&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Executing docker install script, commit: 442e66405c304fa92af8aadaa1d9b31bf4b0ad94
+ sh -c &#39;apt-get update -qq &amp;gt;/dev/null&#39;
+ sh -c &#39;DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &amp;gt;/dev/null&#39;
+ sh -c &#39;curl -fsSL &amp;quot;https://download.docker.com/linux/ubuntu/gpg&amp;quot; | apt-key add -qq - &amp;gt;/dev/null&#39;
Warning: apt-key output should not be parsed (stdout is not a terminal)
+ sh -c &#39;echo &amp;quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable&amp;quot; &amp;gt; /etc/apt/sources.list.d/docker.list&#39;
+ sh -c &#39;apt-get update -qq &amp;gt;/dev/null&#39;
+ &#39;[&#39; -n &#39;&#39; &#39;]&#39;
+ sh -c &#39;apt-get install -y -qq --no-install-recommends docker-ce &amp;gt;/dev/null&#39;
+ sh -c &#39;docker version&#39;
Client: Docker Engine - Community
 Version:           19.03.8
 API version:       1.40
 Go version:        go1.12.17
 Git commit:        afacb8b7f0
 Built:             Wed Mar 11 01:25:46 2020
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.8
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.12.17
  Git commit:       afacb8b7f0
  Built:            Wed Mar 11 01:24:19 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.2.13
  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429
 runc:
  Version:          1.0.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683
If you would like to use Docker as a non-root user, you should now consider
adding your user to the &amp;quot;docker&amp;quot; group with something like:

  sudo usermod -aG docker your-user

Remember that you will have to log out and back in for this to take effect!

WARNING: Adding a user to the &amp;quot;docker&amp;quot; group will grant the ability to run
         containers which can be used to obtain root privileges on the
         docker host.
         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface
         for more information.
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;instalando-docker-compose&#34;&gt;Instalando docker compose&lt;/h3&gt;
&lt;p&gt;Faça download do binário&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -L “https://github.com/docker/compose/releases/download/1.25.5/docker-compose-$(uname -s)-$(uname -m)” -o /usr/local/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ajuste a permissão para execução&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod +x /usr/local/bin/docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto docker e docker-compose instalados, agora vamos ativar o docker no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl enable docker
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feito, agora vamos iniciar o serviço do docker&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl start docker
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;instalando-ghost&#34;&gt;Instalando Ghost&lt;/h3&gt;
&lt;p&gt;Crie um diretório para servir de volume para mysql e ghost.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /srv/sites/guto/ghost/content
mkdir -p /srv/sites/guto/ghost/config
mkdir -p /srv/sites/guto/ghost/mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo config.json em ghost/config&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://mindnotes.sh&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;port&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2368&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;host&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0.0.0.0&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;database&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;client&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;mysql&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;connection&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;host&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;db&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;port&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3306&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;root&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;password&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;sua senha&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;database&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ghost&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;ssl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
     &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;mail&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ghost@mindnotes.sh&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;transport&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;SMTP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;options&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;service&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;sendinblue&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;host&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;smtp-relay.sendinblue.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;port&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;587&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;secureConnection&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;auth&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;user&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;seu_user&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;pass&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;sua_senha&amp;#34;&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;paths&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;contentPath&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/ghost/content&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Vamos agora criar do docker-compose.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /srv/sites/guto/ghost/
vim docker-compose.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Insira o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;version: &#39;3&#39;
services:

  ghost:
    image: ghost:latest
    container_name: mindnotes_ghost_app
    restart: always
    depends_on:
      - db
    environment:
      url: https://mindnotes.sh
      database__client: mysql
      database__connection__host: db
      database__connection__user: root
      database__connection__password: sua_senha
      database__connection__database: ghost
    volumes:
      - /srv/sites/guto/ghost/site/content:/var/lib/ghost/content
      - /srv/sites/guto/ghost/site/config/config.json:/var/lib/ghost/config.production.json
    ports:
      - 80:2368

  db:
    image: mysql:5.7
    container_name: mindnotes_ghost_mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: sua_senha
    volumes:
      -  /srv/sites/guto/ghost/site/mysql:/var/lib/mysql
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Execute o docker-compose&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker-compose up -d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E pronto, acesse seu ghost pelo navegador e finalize a instalação :)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://coloque-seu-ip-aqui/
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;dicas-soltas&#34;&gt;Dicas soltas&lt;/h3&gt;
&lt;p&gt;Caso queira reiniciar os containers&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker-compose restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queria matar os containers&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker-compose kill
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queira ver o log de um dos containers&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker-compose logs -f mindnotes_ghost_app
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queria entrar em um dos containers&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker exec -ti mindnotes_ghost_app sh
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;amarrando-as-pontas&#34;&gt;Amarrando as pontas&lt;/h3&gt;
&lt;p&gt;Instalar qualquer coisa via docker-compose é muito fácil, especialmente quando você quer testar algo ou conhecer alguma tecnologia.&lt;/p&gt;
&lt;p&gt;Neste cenário criamos um ambiente ghost composto por 1 container com a aplicação, e outro container rodando o banco &lt;strong&gt;MySQL&lt;/strong&gt;. Ambos containers persistem os dados em disco, no &lt;strong&gt;HOST&lt;/strong&gt;, utilizando o diretório &lt;strong&gt;/srv/sites/guto/ghost&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Observe que eu monto um volume para os dados, outro para o banco e outro para o arquivo de configuração, assim fica fácil alterar qualquer coisa e reiniciar o container em seguida.&lt;/p&gt;
&lt;p&gt;Com a persistência de dados você pode reiniciar o seu containers e não perderá seus dados.&lt;/p&gt;
&lt;p&gt;Usar docker em produção requer alguns cuidados além deste, como o uso de um orquestrador mais eficiente que ofereça &lt;em&gt;&lt;strong&gt;alta disponibilidade&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;resiliência&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;escalabilidade&lt;/strong&gt;&lt;/em&gt; e &lt;em&gt;&lt;strong&gt;persistência&lt;/strong&gt;&lt;/em&gt;, além de claro, um sólido &lt;em&gt;&lt;strong&gt;plano de backup&lt;/strong&gt;&lt;/em&gt; dos dados além de um procedimento bem claro para &lt;em&gt;&lt;strong&gt;Disaster Recovery&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Bye!&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Reinstalando o Macbook Pro</title>
      <link>https://archives.gutocarvalho.net/post/reinstalando-o-mac/</link>
      <pubDate>Wed, 10 Jun 2020 23:43:08 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/reinstalando-o-mac/</guid>
      <description>&lt;p&gt;Eu precisei reinstalar o Macbook Pro esses dias, aproveite para anotar tudo e fazer um passo a passo. Tentei usar o Homebrew para 90% das coisas, acho que deu bom.&lt;/p&gt;
&lt;p&gt;Mais um dump mental, assim eu limpo o HD, alivio o LOAD, e libero a mente para rodar o processo &lt;strong&gt;criatividade&lt;/strong&gt; com mais recursos :)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MACOS Catalina 10.15.5&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;xcode&#34;&gt;xcode&lt;/h2&gt;
&lt;p&gt;precisamos instalar esta dependência antes de instalar o brew&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;xcode-select --install 
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;package-managers&#34;&gt;package managers&lt;/h2&gt;
&lt;p&gt;Instalando o Homebrew&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/bin/bash -c &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Habilitando o repo Cask&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;brew tap caskroom/cask
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Instalando o MAS (mac app software)&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;    brew install mas
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;mas-apps&#34;&gt;mas apps&lt;/h2&gt;
&lt;p&gt;Xcode 11.5&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 497799835
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;CheatSheet 1.03&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 529456740
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The Unarchiver 4.2.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 425424353 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Twitter 8.21&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 1482454543
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Keynote 10.0&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 409183694 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Mactracker 7.9.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 430255202
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Istat Mini 1.1&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 927292435 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;MagicanRest 1.0.1&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 634255909
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pomodorable 1.0.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 503406673
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tweetbot 3.3.3&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 1384080005
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Display Menu 2.2.3&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 549083868
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Money 5.6.10&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 1185488696
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;SSH Tunnel Manager 2.1.4&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 424470626 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Disk Speed Test 3.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 425264550
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Moom 3.2.17&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 419330170
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;SubnetCalc 1.5&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 412946682
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Amphetamine 5.0.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 937984704
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Speedtest 1.11&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 1153157709
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Shazam 2.10.0&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mas install 897118787
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;brew&#34;&gt;brew&lt;/h2&gt;
&lt;h3 id=&#34;most-recent-versions-of-macos-tools&#34;&gt;most recent versions of macos tools&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;brew install coreutils
brew install vim
brew install grep
brew install openssh
brew install screen
brew install curl
brew install wget
brew install bash bash-completion2
brew install zsh
brew install screen
brew install git git-lfs
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;terminal&#34;&gt;terminal&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install iterm2
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;1password-gerenciador-de-senhas&#34;&gt;1password (gerenciador de senhas)&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install 1password
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;little-snitch-firewall&#34;&gt;little snitch (firewall)&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install litte-snitch
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;next-cloud-storage-remoto&#34;&gt;next cloud (storage remoto)&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install nextcloud
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;browsers&#34;&gt;browsers&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install firefox google-chrome vivaldi brave-browser
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;torrent&#34;&gt;torrent&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install tranmission
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;remote-management&#34;&gt;remote management&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew install anydesk teamviewer
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;vpn&#34;&gt;vpn&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install forticlient viscosity
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;gpg&#34;&gt;gpg&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt; brew install gpg-suite
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;k8s-kubernetes-tools&#34;&gt;k8s (kubernetes tools)&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew install rke kubectl kustomize helm

brew cask install lens

brew install derailed/k9s/k9s
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;chat&#34;&gt;chat&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew install mattermost slack rocket-chat microsoft-teams discord
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;im&#34;&gt;im&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install keynote weechat whatsapp telegram telegram-desktop
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;videconf&#34;&gt;videconf&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew install zoom jitsi joinme skype 
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;docker&#34;&gt;docker&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install docker

brew install docker-compose
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;editors&#34;&gt;editors&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install libreoffice

brew cask install visual-studio-code macdown
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;documentations&#34;&gt;documentations&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew install dash
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;virtualization&#34;&gt;virtualization&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install virtualbox vagrant
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;automation&#34;&gt;automation&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew install terraform packer ansible
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;video-players&#34;&gt;video players&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew cask install vlc mpv
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;terminal-utils&#34;&gt;terminal utils&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;brew install moreutils findutils

brew install ripgrep the_silver_searcher ack fzf

brew install tree

brew install asciinema

brew install tmux

brew install links 

brew install mtr

brew install nmap

brew install wget

brew install watch

brew install telnet

brew install netcat

brew install iperf

brew instll ipcalc

brew install geoip

brew install htop

brew install jq

brew install ffmpeg imagemagick

brew install unrar xz p7zip

brew install gnupg

brew install tcpdump tcptrace tcpflow tcping tcpreplay
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;fonts&#34;&gt;fonts&lt;/h2&gt;
&lt;h3 id=&#34;fonts-from-brew&#34;&gt;fonts from brew&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;brew cask install font-ubuntu font-ubuntu-mono-derivative-powerline font-ubuntu-nerd-font font-ubuntumono-nerd-font font-fontawesome font-montserrat font-source-sans-pro font-roboto font-roboto-condensed font-roboto-mono font-roboto-slab font-roboto-mono-for-powerline font-robotomono-nerd-font font-open-sans font-open-sans-condensed font-open-sans font-open-sans-condensed
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;fonts-from-web&#34;&gt;fonts from web&lt;/h3&gt;
&lt;p&gt;the bold font&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://dl.dafont.com/dl/?f=the_bold_font
unzip the_bold_font.zip
mv theboldfont.ttf  $HOME/Library/Fonts
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;calibri font&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://www.downloadfonts.io/wp-content/uploads/2018/12/calibri-font-sv.zip
unzip calibri-font-sv.zip
cd calibri\ font\ sv/
unzip Calibri\ Bold\ Italic.zip
unzip Calibri\ Bold.zip
unzip Calibri\ Italic.zip
unzip Calibri\ Light.zip
unzip Calibri\ Light\ Italic.zip
unzip Calibri\ Regular.zip
mv *.ttf $HOME/Library/Fonts
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;powerline-fonts&#34;&gt;powerline fonts&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/powerline/fonts
cd fonts
bash install.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;vim&#34;&gt;vim&lt;/h2&gt;
&lt;h3 id=&#34;vundle-vim&#34;&gt;vundle vim&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;vimrc-minimal&#34;&gt;vimrc minimal&lt;/h3&gt;
&lt;p&gt;Edite o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim ~/.vimrc
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Insira o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;syntax on
filetype off                  &amp;quot; required
filetype plugin on
filetype indent on

set nocompatible              &amp;quot; be iMproved, required
set autoread
set encoding=utf8
set ffs=unix,dos,mac
set expandtab
set smarttab
set backspace=2
set laststatus=2

&amp;quot; Vundle

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

Plugin &#39;VundleVim/Vundle.vim&#39;

Plugin &#39;vim-airline/vim-airline&#39;
Plugin &#39;vim-airline/vim-airline-themes&#39;
Plugin &#39;edkolev/promptline.vim&#39;
Plugin &#39;dracula/vim&#39;

Plugin &#39;bash-support.vim&#39;
Plugin &#39;elzr/vim-json&#39;
Plugin &#39;chase/vim-ansible-yaml&#39;
Plugin &#39;rodjek/vim-puppet&#39;

Plugin &#39;tpope/vim-surround&#39;
Plugin &#39;tpope/vim-fugitive&#39;

call vundle#end()            &amp;quot; required

colorscheme dracula

&amp;quot; Brief help
&amp;quot; :PluginList       - lists configured plugins
&amp;quot; :PluginInstall    - installs plugins; append `!` to update or just :PluginUpdate
&amp;quot; :PluginSearch foo - searches for foo; append `!` to refresh local cache
&amp;quot; :PluginClean      - confirms removal of unused plugins; append `!` to auto-approve removal
&amp;quot;
&amp;quot; see :h vundle for more details or wiki for FAQ
&amp;quot; Put your non-Plugin stuff after this line
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;abra o vim e digite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:PluginInstall
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;promptline-shell-for-bash&#34;&gt;promptline shell for bash&lt;/h2&gt;
&lt;p&gt;Depois de instalar o airline abra o vim e digite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:PromptlineSnapshot ~/.promptline.sh airline
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E insira isso na inicialização do bash&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo source ~/.promptline.sh &amp;gt; ~/.bash_profile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;para testar digite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bash
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;gitignore&#34;&gt;gitignore&lt;/h2&gt;
&lt;p&gt;Crie o arquivo .gitignore (global)&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vim ~/.gitignore
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Adicione o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# General
.DS_Store
.AppleDouble
.LSOverride

# Thumbnails
._*

# Files that might appear in the root of a volume
.DocumentRevisions-V100
.fseventsd
.Spotlight-V100
.TemporaryItems
.Trashes
.VolumeIcon.icns
.com.apple.timemachine.donotpresent

# Directories potentially created on remote AFP share
.AppleDB
.AppleDesktop
Network Trash Folder
Temporary Items
.apdisk
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;gitconfig&#34;&gt;gitconfig&lt;/h2&gt;
&lt;p&gt;Crie o arquivo .gitconfi&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vim ~/.gitconfig
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Adicione o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[user]
  name = Guto Carvalho
  email = gutocarvalho@gmail.com
[alias]
  co = checkout
  ci = commit
  st = status
  br = branch
  d = diff
  ds = diff --stat
  dc = diff --cached
  s = status -s
  ls = log --pretty=format:&amp;quot;%C(yellow)%h%Cred%d\\ %Creset%s%Cblue\\ [%cn]&amp;quot; --decorate
  ll = log --pretty=format:&amp;quot;%C(yellow)%h%Cred%d\\ %Creset%s%Cblue\\ [%cn]&amp;quot; --decorate --numstat
  rao = remote add origin
  ac = !git add . &amp;amp;&amp;amp; git commit -am
  pushitgood = push -u origin --all
  undo-commit = reset --soft HEAD~1
[core]
  editor = vim
  whitespace = fix,-indent-with-non-tab,trailing-space,cr-at-eol
  excludesfile = ~/.gitignore
[color]
  ui = auto
[color &amp;quot;branch&amp;quot;]
  current = yellow bold
  local = green bold
  remote = cyan bold
[color &amp;quot;diff&amp;quot;]
  meta = yellow bold
  frag = magenta bold
  old = red bold
  new = green bold
  whitespace = red reverse
[color &amp;quot;status&amp;quot;]
  added = green bold
  changed = yellow bold
  untracked = red bold
[diff]
  tool = vimdiff
[filter &amp;quot;lfs&amp;quot;]
  clean = git-lfs clean %f
  smudge = git-lfs smudge %f
  required = true
#[http]
#  sslVerify = false
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;editorconfig&#34;&gt;editorconfig&lt;/h2&gt;
&lt;p&gt;Crie o arquivo .editorconfig&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vim ~/.editorconfig
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Adicione o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# editorconfig.org
root = true

[*]
charset = utf-8
indent_style = space
indent_size = 2
tab_width = 2
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;screenrc&#34;&gt;screenrc&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vim ~/.screenrc
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Adicione o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# GNU Screen - main configuration file
# All other .screenrc files will source this file to inherit settings.
# Author: Christian Wills - cwills.sys@gmail.com

startup_message off

# Allow bold colors - necessary for some reason
attrcolor b &amp;quot;.I&amp;quot;

# Tell screen how to set colors. AB = background, AF=foreground
termcapinfo xterm &#39;Co#256:AB=\E[48;5;%dm:AF=\E[38;5;%dm&#39;

# Enables use of shift-PgUp and shift-PgDn
termcapinfo xterm|xterms|xs|rxvt ti@:te@

# Erase background with current bg color
defbce &amp;quot;on&amp;quot;

# Enable 256 color term
term xterm-256color

# Cache 30000 lines for scroll back
defscrollback 30000

hardstatus alwayslastline
# Very nice tabbed colored hardstatus line
hardstatus string &#39;%{= Kd} %{= Kd}%-w%{= Kr}[%{= KW}%n %t%{= Kr}]%{= Kd}%+w %-= %{KG} %H%{KW}|%{KY}%101`%{KW}|%D %M %d %Y%{= Kc} %C%A%{-}&#39;

# Hide hardstatus: ctrl-a f
bind f eval &amp;quot;hardstatus ignore&amp;quot;

# Show hardstatus: ctrl-a F
bind F eval &amp;quot;hardstatus alwayslastline&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;curlrc&#34;&gt;curlrc&lt;/h2&gt;
&lt;p&gt;Crie o arquivo .curlrc&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vim ~/.curlrc
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Insira o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;connect-timeout = 60
insecure
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;wgetrc&#34;&gt;wgetrc&lt;/h2&gt;
&lt;p&gt;Crie o arquivo .wgetrc&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vim ~/.wgetrc
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Insira o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;timeout = 60
check-certificate = off
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;oh-my-zsh&#34;&gt;oh my zsh&lt;/h2&gt;
&lt;p&gt;instalando projeto&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sh -c &amp;quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;instalando plugins via brew&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew install zsh-syntax-highlighting zsh-autosuggestions
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;zshrc-minimal&#34;&gt;zshrc minimal&lt;/h3&gt;
&lt;p&gt;edite o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim ~/.zshrc
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Insira o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;export ZSH=&amp;quot;/Users/gutocarvalho/.oh-my-zsh&amp;quot;
ZSH_THEME=&amp;quot;agnoster&amp;quot;
CASE_SENSITIVE=&amp;quot;true&amp;quot;
ENABLE_CORRECTION=&amp;quot;true&amp;quot;
HIST_STAMPS=&amp;quot;mm/dd/yyyy&amp;quot;
plugins=(
  osx
  git
  brew
  docker
  docker-compose
  history
  vagrant
  zsh-syntax-highlighting
  zsh-autosuggestions
)
source $ZSH/oh-my-zsh.sh
export MANPATH=&amp;quot;/usr/local/man:$MANPATH&amp;quot;
export LANG=en_US.UTF-8
if [[ -n $SSH_CONNECTION ]]; then
   export EDITOR=&#39;vim&#39;
 else export EDITOR=&#39;atom&#39;
fi
export PATH=&amp;quot;$PATH:$HOME/.rvm/bin&amp;quot;
export VAGRANT_HOME=&amp;quot;~/Storage/vagrant.d&amp;quot;
export VAGRANT_FORCE_COLOR=true
export PATH=&amp;quot;/usr/local/sbin:$PATH&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;dracula-theme&#34;&gt;dracula theme&lt;/h2&gt;
&lt;p&gt;Acesse o site do projeto &lt;a href=&#34;https://draculatheme.com/&#34;&gt;https://draculatheme.com/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;dracula-iterm&#34;&gt;dracula iterm&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/dracula/iterm.git
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;dracula-macdown&#34;&gt;dracula macdown&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/dracula/macdown.git
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;dracula-vscode&#34;&gt;dracula vscode&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;instale via vscode extensions
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;mac-tweaks&#34;&gt;mac tweaks&lt;/h2&gt;
&lt;h3 id=&#34;screen-ux-ui&#34;&gt;screen, ux, ui&lt;/h3&gt;
&lt;h4 id=&#34;diretório-de-screenshots&#34;&gt;diretório de screenshots&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.screencapture location /Users/gutocarvalho/screenshots
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;seta-png-para-screenshost&#34;&gt;seta png para screenshost&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.screencapture type -string &amp;quot;png&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;desabilita-sombra-nos-screenshots&#34;&gt;desabilita sombra nos screenshots&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.screencapture disable-shadow -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;solicita-senha-no-protetor-de-tela-imediatamente&#34;&gt;solicita senha no protetor de tela imediatamente&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.screensaver askForPassword -int 1
defaults write com.apple.screensaver askForPasswordDelay -int 0
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;desabilita-transparencias-no-macos&#34;&gt;desabilita transparencias no macos&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.universalaccess reduceTransparency -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;habilita-gesto-com-scroll-ˆ-para-dar-zoom&#34;&gt;habilita gesto com scroll (ˆ) para dar zoom&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.universalaccess closeViewScrollWheelToggle -bool true
defaults write com.apple.universalaccess HIDScrollZoomModifierMask -int 262144
defaults write com.apple.universalaccess closeViewZoomFollowsFocus -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;desabilita-o-press-n-hold-em-favor-da-repetição-do-teclado&#34;&gt;desabilita o &amp;ldquo;press-n-hold&amp;rdquo; em favor da repetição do teclado&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write -g ApplePressAndHoldEnabled -bool false
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;sempre-mosta-os-scrollbars&#34;&gt;sempre mosta os scrollbars&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write -g AppleShowScrollBars -string Always
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;desliga-o-diálogo-r-u-sure-u-want-to-open-this-app&#34;&gt;desliga o diálogo &amp;ldquo;R U sure U want to open this app?”&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.LaunchServices LSQuarantine -bool false
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;permite-apps-from-anyware&#34;&gt;permite apps &amp;ldquo;from anyware&amp;rdquo;&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;defaults write /Library/Preferences/com.apple.security GKAutoRearm -bool NO
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;finder--desktop&#34;&gt;finder &amp;amp; desktop&lt;/h3&gt;
&lt;h4 id=&#34;mostra-icones-adicionais-no-desktop&#34;&gt;mostra icones adicionais no desktop&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool true
defaults write com.apple.finder ShowHardDrivesOnDesktop -bool true
defaults write com.apple.finder ShowMountedServersOnDesktop -bool true
defaults write com.apple.finder ShowRemovableMediaOnDesktop -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostrando-arquivos-ocultos-por-default-no-finder&#34;&gt;mostrando arquivos ocultos por default no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder AppleShowAllFiles -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostrando-extensões-de-arquivos-no-finder&#34;&gt;mostrando extensões de arquivos no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write NSGlobalDomain AppleShowAllExtensions -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostrando-status-bar-no-finder&#34;&gt;mostrando status bar no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder ShowStatusBar -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostrando-path-bar-no-finder&#34;&gt;mostrando path bar no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder ShowPathbar -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostra-path-posix-no-título-da-janela&#34;&gt;mostra path POSIX no título da janela&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder _FXShowPosixPathInTitle -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mantém-pastas-no-topo-da-listagem-do-finder&#34;&gt;mantém pastas no topo da listagem do finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder _FXSortFoldersFirst -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;quando-fizer-buscas-foca-na-pasta-atual&#34;&gt;quando fizer buscas, foca na pasta atual&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder FXDefaultSearchScope -string &amp;quot;SCcf&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;desabilita-o-warning-quando-for-limpar-o-lixo&#34;&gt;desabilita o warning quando for limpar o lixo&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder WarnOnEmptyTrash -bool false
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;desabilita-o-warning-quando-vai-mudar-a-extensão-de-arquivos&#34;&gt;desabilita o warning quando vai mudar a extensão de arquivos&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;desabilita-warning-quando-apaga-algo-do-icloud-drive&#34;&gt;desabilita warning quando apaga algo do Icloud Drive&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder FXEnableRemoveFromICloudDriveWarning -bool false
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;evita-criar-arquivos-ds_store-em-volumes-e-shares-em-rede&#34;&gt;evita criar arquivos .DS_Store em volumes e shares em rede&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
defaults write com.apple.desktopservices DSDontWriteUSBStores -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;abre-uma-janela-finder-quando-um-volume-é-montado&#34;&gt;abre uma janela finder quando um volume é montado&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.frameworks.diskimages auto-open-ro-root -bool true
defaults write com.apple.frameworks.diskimages auto-open-rw-root -bool true
defaults write com.apple.finder OpenWindowForNewRemovableDisk -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;usa-o-list-view-como-padrão-no-finder&#34;&gt;usa o &amp;lsquo;list view&amp;rsquo; como padrão no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.finder FXPreferredViewStyle -string &amp;quot;Nlsv&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostra-o-diretorio-library-no-finder&#34;&gt;mostra o diretorio /Library no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;sudo chflags nohidden /Library
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostra-o-diretório-volumes-no-finder&#34;&gt;mostra o diretório /Volumes no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;sudo chflags nohidden /Volumes
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostra-o-diretorio-library-no-finder-1&#34;&gt;mostra o diretorio ~/Library no finder&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;chflags nohidden ~/Library
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;dock&#34;&gt;Dock&lt;/h3&gt;
&lt;h4 id=&#34;ativa-o-hide-do-dock&#34;&gt;ativa o hide do dock&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.dock autohide -bool true
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;misc&#34;&gt;Misc&lt;/h3&gt;
&lt;h4 id=&#34;muda-o-tempo-padrão-de-eventos-para-30-minutos-no-ical&#34;&gt;muda o tempo padrão de eventos para 30 minutos no ical&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.iCal &amp;quot;Default duration in minutes for new event&amp;quot; 30
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;mostra-ip-host-e-os-version-ao-clicar-em-clock-na-tela-de-login&#34;&gt;mostra ip, host e os-version ao clicar em clock na tela de login&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;seta-apenas-utf8-no-terminal-padrão-do-mac&#34;&gt;seta apenas UTF8 no terminal padrão do mac&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;defaults write com.apple.terminal StringEncodings -array 4
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;seta-timezone&#34;&gt;seta timezone&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;sudo systemsetup -settimezone &amp;quot;America/Sao_Paulo&amp;quot; &amp;gt; /dev/null
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;refs&#34;&gt;refs&lt;/h2&gt;
&lt;p&gt;projetos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://formulae.brew.sh/&#34;&gt;https://formulae.brew.sh/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Homebrew/homebrew-cask&#34;&gt;https://github.com/Homebrew/homebrew-cask&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://formulae.brew.sh/cask/&#34;&gt;https://formulae.brew.sh/cask/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://formulae.brew.sh/formula/mas&#34;&gt;https://formulae.brew.sh/formula/mas&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mas-cli/mas&#34;&gt;https://github.com/mas-cli/mas&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://pawelgrzybek.com/change-macos-user-preferences-via-command-line/&#34;&gt;https://pawelgrzybek.com/change-macos-user-preferences-via-command-line/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mathiasbynens/dotfiles/blob/master/.macos&#34;&gt;https://github.com/mathiasbynens/dotfiles/blob/master/.macos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://br-mac.org/index-117.html&#34;&gt;https://br-mac.org/index-117.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://br-mac.org/2011/02/agenda-no-mac-mude-a-duracao-default-dos-compromissos-no-ical.html&#34;&gt;https://br-mac.org/2011/02/agenda-no-mac-mude-a-duracao-default-dos-compromissos-no-ical.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gomex.me/2020/01/02/o-que-instalar-em-um-mac-de-algu%C3%A9m-de-infra/&#34;&gt;https://gomex.me/2020/01/02/o-que-instalar-em-um-mac-de-algu%C3%A9m-de-infra/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;E ainda vem mais&amp;hellip;..[s]Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>GitLab 13 chegou !</title>
      <link>https://archives.gutocarvalho.net/post/gitlab-13-chegou/</link>
      <pubDate>Fri, 22 May 2020 16:29:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/gitlab-13-chegou/</guid>
      <description>&lt;p&gt;Confira as novidades sobre a nova versão.&lt;a href=&#34;https://about.gitlab.com/releases/2020/05/22/gitlab-13-0-released/&#34;&gt;https://about.gitlab.com/releases/2020/05/22/gitlab-13-0-released/&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Convertendo PKCS12 para PEM</title>
      <link>https://archives.gutocarvalho.net/post/convertendo-pkcs12-para-pem-sem-senha/</link>
      <pubDate>Thu, 21 May 2020 16:46:13 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/convertendo-pkcs12-para-pem-sem-senha/</guid>
      <description>&lt;h2 id=&#34;cenário&#34;&gt;Cenário&lt;/h2&gt;
&lt;p&gt;Pedi o certificado do cliente e ele me mandou um aquivo em formato PKCS12, e ainda por cima com senha :)&lt;/p&gt;
&lt;p&gt;Eu preciso usar esse cert em NGINX e sem a senha de preferência.&lt;/p&gt;
&lt;p&gt;Esse é o típico post nota mental para não ter que memorizar esses comandos.&lt;/p&gt;
&lt;h2 id=&#34;como-faz-para-separar-tudo&#34;&gt;Como Faz para separar tudo?&lt;/h2&gt;
&lt;p&gt;Primeiro vamos extrair a chave privada do arquivo P12 para formato PEM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl pkcs12 -in certificate.p12 -nocerts -out certificate.key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos extrair o certificado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl pkcs12 -in certificate.p12 -clcerts -nokeys -out certificate.crt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos extrair a cadeia (caso precise)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl pkcs12 -in certificate.p12 -cacerts -nokeys -chain &amp;gt; ca.crt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para remover a senha da chave execute&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl rsa -in certificate.key -out certificate_nopass.key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Concatenando CA com CRT para ter um certificado &lt;em&gt;&lt;strong&gt;chained/fullchain&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat certificate.crt ca.crt &amp;gt; fullchain.crt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto agora você pode utilizar os arquivos PEM em seus serviços numa boa!&lt;/p&gt;
&lt;h2 id=&#34;como-faz-para-checar-tudo&#34;&gt;Como faz para checar tudo?&lt;/h2&gt;
&lt;p&gt;A checagem mais simples para ver se tá tudo bem&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl verify certificate.crt
openssl verify certificate.key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verificando uma chave privada&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl rsa -in privateKey.key -check
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verificando um certificado pem&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl x509 -in certificate.crt -text -noout
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verificando um arquivo p12&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl pkcs12 -info -in certificate.p12
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verificando um certificado já no ar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl s_client -connect mindnotes.sh:443
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;erros-comuns&#34;&gt;Erros comuns&lt;/h2&gt;
&lt;p&gt;Se você estiver tomando esse erro no NGINX&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Nginx SSL: error:0B080074:x509 certificate routines: X509_check_private_key:key values mismatch
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Você provavelmente concatenou o CA com o CRT de forma errada. Para conectenar corretamente siga essa ordem:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Your Primary SSL certificate (your_domain_name.crt)
  -&amp;gt; Your Intermediate certificate 
    -&amp;gt; Your Root certificate 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A estrutura interna deve ser algo como:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;-----BEGIN CERTIFICATE-----
(Your Primary SSL certificate: domain.crt)
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
(Your Intermediate certificate: intermediate.crt)
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
(Your Root certificate: root.crt)
-----END CERTIFICATE-----
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Se concatenar corretamente não haverá problemas com o NGINX ou outro reverse proxy/webserver.&lt;/p&gt;
&lt;h2 id=&#34;debugando-os-certificados&#34;&gt;Debugando os certificados&lt;/h2&gt;
&lt;p&gt;Se voce ainda assim está tomando erros nos logs do seu NGINX, verifique se a chave privada dá &lt;em&gt;&lt;strong&gt;match&lt;/strong&gt;&lt;/em&gt; com o certificado, faça isso usando o openssl.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# openssl x509 -noout -modulus -in certificate.crt | openssl md5
(stdin)= 9b728f2acad237e350fc67ce750fa51d

# openssl rsa -noout -modulus -in certificate.key | openssl md5
(stdin)= 9b728f2acad237e350fc67ce750fa51d
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A saída tem que ser a mesma se os certificado estiverem bacanas, se estiver diferente verifique se não pulou algum passo e se está com os arquivos certos.&lt;/p&gt;
&lt;h2 id=&#34;refs&#34;&gt;Refs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://nginx.org/en/docs/http/configuring_https_servers.html&#34;&gt;http://nginx.org/en/docs/http/configuring_https_servers.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.sslshopper.com/article-most-common-openssl-commands.html&#34;&gt;https://www.sslshopper.com/article-most-common-openssl-commands.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.digicert.com/kb/ssl-support/pem-ssl-creation.htm&#34;&gt;https://www.digicert.com/kb/ssl-support/pem-ssl-creation.htm&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#MindNote wordpress url update</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-wordpress-url-upate/</link>
      <pubDate>Mon, 11 May 2020 16:59:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-wordpress-url-upate/</guid>
      <description>&lt;p&gt;Se você precisa alterar a URL do seu blog wordpress, ou você usa um plugin maroto para fazer o serviço sujo, ou você mesmo vai lá no banco e arruma :)&lt;/p&gt;
&lt;p&gt;Aqui um exemplo em que mudo &lt;strong&gt;gutocarvalho.net&lt;/strong&gt; para &lt;strong&gt;archive.gutocarvalho.net&lt;/strong&gt;.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;UPDATE wp_options SET option_value = replace(option_value, ‘http://gutocarvalho.net&#39;, &#39;http://archive.gutocarvalho.net’) WHERE option_name = ‘home’ OR option_name = ‘siteurl’;

UPDATE wp_posts SET guid = replace(guid, ‘http://gutocarvalho.net&#39;,&#39;http://archive.gutocarvalho.net’);

UPDATE wp_posts SET post_content = replace(post_content, ‘http://gutocarvalho.net&#39;, &#39;http://archive.gutocarvalho.net’);

UPDATE wp_postmeta SET meta_value = replace(meta_value,’http://gutocarvalho.net&#39;,&#39;http://archive.gutocarvalho.net’);

UPDATE wp_usermeta SET meta_value = replace(meta_value, ‘http://gutocarvalho.net&#39;,&#39;http://archive.gutocarvalho.net’);

UPDATE wp_comments SET comment_content = replace(comment_content , ‘http://gutocarvalho.net&#39;,&#39;http://archive.gutocarvalho.net’);

UPDATE wp_links SET link_url = replace(link_url, ‘http://gutocarvalho.net&#39;,&#39;http://archive.gutocarvalho.net’);

UPDATE wp_links SET link_image = replace(link_image, ‘http://gutocarvalho.net&#39;,&#39;http://archive.gutocarvalho.net’);

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Tá vendo? Nem é tão difícil :)&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Zabbix 5.0 lançado!</title>
      <link>https://archives.gutocarvalho.net/post/zabbix-5-0-lancado/</link>
      <pubDate>Mon, 11 May 2020 16:40:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/zabbix-5-0-lancado/</guid>
      <description>&lt;p&gt;Veja as novidades da versão&lt;a href=&#34;https://www.zabbix.com/rn/rn5.0.0&#34;&gt;https://www.zabbix.com/rn/rn5.0.0&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#Mindnote  Shlink.io</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-shlinkio/</link>
      <pubDate>Tue, 05 May 2020 17:13:25 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-shlinkio/</guid>
      <description>&lt;p&gt;Guto instala issaí, é um encurtador de urls Open Source, que legal :)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://shlink.io/&#34;&gt;https://shlink.io/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Podia criar um &lt;strong&gt;go&lt;/strong&gt;.gutocarvalho.net , vai ficar duca!&lt;/p&gt;
&lt;p&gt;Faz um post bonitão depois.&lt;/p&gt;
&lt;p&gt;Fui!&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#MindNote Instalando RancherOS</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-instalando-rancheros/</link>
      <pubDate>Tue, 05 May 2020 16:53:58 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-instalando-rancheros/</guid>
      <description>&lt;p&gt;Esse post é pq o HD do tio já tá bem cheio.&lt;/p&gt;
&lt;p&gt;Baixar a ISO daqui:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/rancher/os/releases/&#34;&gt;https://github.com/rancher/os/releases/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Não use a ISO &amp;ldquo;autoformat&amp;rdquo;, para ProxMox use a iso abaixo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;rancheros-proxmoxve.iso&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;criando-a-vm&#34;&gt;Criando a VM&lt;/h2&gt;
&lt;p&gt;Beleza, procedimento no ProxMox&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cria a VM&lt;/li&gt;
&lt;li&gt;Boota a VM&lt;/li&gt;
&lt;li&gt;Abre o console no Proxmox&lt;/li&gt;
&lt;li&gt;Define uma senha para o usuário rancher&lt;/li&gt;
&lt;li&gt;Seta o IP na mão (ifconfig eth0&amp;hellip;, route add default gw&amp;hellip;)&lt;/li&gt;
&lt;li&gt;Acessa por SSH, por fora do proxmox, usando a senha&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;cloud-init&#34;&gt;Cloud Init&lt;/h2&gt;
&lt;p&gt;Crie o arquivo de configuração com &lt;em&gt;&lt;strong&gt;vi&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/var/lib/rancher/conf/cloud-config.d/user_config.yml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com o conteúdo similar ao abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;hostname: ros01.jac.bsb.br
rancher:
  network:
    interfaces:
      dns:
        addresses:
        - 8.8.8.8
        - 8.8.4.4
        nameservers: null
        search:
        - jac.bsb.br
      eth0:
        address: 51.91.xxx.xxx/xx
        gateway: 51.91.xxx.xxx
        dhcp: false
        mtu: 1500
      eth1:
        address: 192.168.122.10/24
  services_include:
    open-iscsi: true
    qemu-guest-agent: true
    volume-nfs: true
ssh_authorized_keys:
- ssh-ed25519 sua-chave-marota-aqui guto@jac.bsb.br
- ssh-ed25519 sua-chave-marota-aqui dirceu@jac.bsb.br
- ssh-ed25519 sua-chave-marota-aqui ruan@jac.bsb.br
- ssh-ed25519 sua-chave-marota-aqui pedro@jac.bsb.br
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Quer saber mais sobre essa config?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://rancher.com/docs/os/v1.2/en/configuration/&#34;&gt;https://rancher.com/docs/os/v1.2/en/configuration/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;instalando&#34;&gt;Instalando&lt;/h2&gt;
&lt;p&gt;Rode o comando abaixo como root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ros install -c /var/lib/rancher/conf/cloud-init.d/user-config.yml -d /dev/sda
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reboot, e pronto, RancherOS rodando lindamente.&lt;/p&gt;
&lt;p&gt;Agora crie um template por favor :)&lt;/p&gt;
&lt;p&gt;Nota Mental da Nota Mental, colocar tudo isso em uma role Ansible.&lt;/p&gt;
&lt;h2 id=&#34;tem-videzinho-guto&#34;&gt;Tem videzinho guto?&lt;/h2&gt;
&lt;p&gt;Tem de um pedaço :)&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://asciinema.org/a/326818&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://asciinema.org/a/326818.svg&#34; width=&#34;700&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Review TP-LINK DECO M4 e M5 MESH</title>
      <link>https://archives.gutocarvalho.net/post/review-tp-link-deco-m4-e-m5-mesh/</link>
      <pubDate>Sun, 26 Apr 2020 15:43:32 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/review-tp-link-deco-m4-e-m5-mesh/</guid>
      <description>&lt;p&gt;Depois de muitos anos utilizando roteadores &lt;strong&gt;Apple Airport Extreme&lt;/strong&gt;, resolvi procurar um novo tipo de roteador – buscando sempre equipamentos com excelente custo e ótimo benefício. Meu único requisito era que ter a tecnologia &lt;strong&gt;MESH&lt;/strong&gt;. Depois de alguma pesquisa eu cheguei nos dispositivos TP-LINK da série DECO.&lt;/p&gt;
&lt;p&gt;Vou passar minhas impressões aqui de 7 meses usando estes dispositivos no escritório e em casa.&lt;/p&gt;
&lt;h2 id=&#34;série-deco&#34;&gt;Série Deco&lt;/h2&gt;
&lt;p&gt;Todos os equipamentos da série DECO utilizam a tecnologia MESH. Essa tecnologia propaga sua rede sem fio entre vários dispositivos eliminando as &amp;ldquo;dead zones&amp;rdquo; em seu escritório ou residência.&lt;/p&gt;
&lt;p&gt;Mas veja, ela não funciona como os replicadores ou retransmissores de sinal, ela funciona com uma única rede sem fio, distribuída por vários dispostivos conectados entre si. Isso acaba com aquele problema de múltiplos roteadores e múltiplas redes – wifi escritorio, wifi sala, wifi quarto.&lt;/p&gt;
&lt;p&gt;Além de tudo isso, a rede MESH é inteligente, seu dispositivo sem fio transita entre as unidades deco de forma transparente, você não precisa mudar de rede, pois todos os dispostivos estão servindo a mesma rede.&lt;/p&gt;
&lt;h3 id=&#34;configuração-wan&#34;&gt;Configuração WAN&lt;/h3&gt;
&lt;p&gt;Toda a configuração é feita pelo smartphone, de forma simples e direta, sem complicação.&lt;/p&gt;
&lt;p&gt;No Smartphone você configura rede wifi principal, convidado, ativa/desativa rede 2.4 Ghz ou 5 Ghz. O Deco oferece 2 SSIDs – principal e convidado.&lt;/p&gt;
&lt;p&gt;Nas configurações de rede você pode definir as configurações de WAN, ativando IPv4 e IPv6. Os tipos de conexão suportados são &lt;strong&gt;IP DINAMICO, IP ESTATICO, PPoE, L2TP, PPTP e DS-Lite.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;configuração-lan&#34;&gt;Configuração LAN&lt;/h3&gt;
&lt;p&gt;Nas configuraçÕes de LAN –  sua rede interna, você vai definir sua rede, configurar &lt;strong&gt;DHCP SERVER&lt;/strong&gt; – apenas em modo router, &lt;strong&gt;VLAN&lt;/strong&gt; – mode, id, priority e 802.1q, &lt;strong&gt;IPTV&lt;/strong&gt; e &lt;strong&gt;MAC CLONE&lt;/strong&gt; – caso seu provedor libere apenas acesso via mac.&lt;/p&gt;
&lt;p&gt;Podemos também configurar &lt;strong&gt;IPs Fixos&lt;/strong&gt; para dispositivos, &lt;strong&gt;Encaminhamento&lt;/strong&gt; de portas, &lt;strong&gt;DDNS&lt;/strong&gt; – nome.tplinkdns.com –, configurações &lt;strong&gt;SIP&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;É possível ativar e desativar &lt;strong&gt;Fast Roaming&lt;/strong&gt;, &lt;strong&gt;Beamforming&lt;/strong&gt;, controlar a &lt;strong&gt;luz dos leds&lt;/strong&gt; e desligá-las a noite e definir &lt;strong&gt;operation mode&lt;/strong&gt; (router, ap).&lt;/p&gt;
&lt;h3 id=&#34;rede-mesh&#34;&gt;Rede Mesh&lt;/h3&gt;
&lt;p&gt;A conectividade entre as unidades pode ocorrer via WIFI – o qual é o padrão ou via cabo ethernet – backhaul.&lt;/p&gt;
&lt;h3 id=&#34;configuração-extras&#34;&gt;Configuração Extras&lt;/h3&gt;
&lt;p&gt;É possível configurar &lt;strong&gt;QOS&lt;/strong&gt; para os dispostivos, definindo quais dispositivos tem maior &lt;strong&gt;prioridade de banda&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Podemos cadastrar dispostivos em uma &lt;strong&gt;lista de bloqueio&lt;/strong&gt;, estes não conseguiram se conectar na rede.&lt;/p&gt;
&lt;p&gt;Tem suporte a &lt;strong&gt;WPS&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Oferece &lt;strong&gt;relatórios mensais de uso da rede&lt;/strong&gt; e dos dispositivos.&lt;/p&gt;
&lt;p&gt;Oferece &lt;strong&gt;atualização do firmware&lt;/strong&gt; diretamente no APP do smartphone.&lt;/p&gt;
&lt;p&gt;Permite cadastrar &lt;strong&gt;diferentes administradores&lt;/strong&gt; para rede no App.&lt;/p&gt;
&lt;p&gt;Suporte a &lt;strong&gt;assistente de voz&lt;/strong&gt; usando &lt;strong&gt;Alexa&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;segurança&#34;&gt;Segurança&lt;/h3&gt;
&lt;p&gt;Dispositivo&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DSI Firewall&lt;/li&gt;
&lt;li&gt;Home Care Trendmicro Antivirus (alguns modelos)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Rede sem fio&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;WPA PSK&lt;/li&gt;
&lt;li&gt;WPA2 PSK&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;status-page&#34;&gt;Status Page&lt;/h3&gt;
&lt;p&gt;É possível acesar também uma página com &lt;strong&gt;status dos dispositivos&lt;/strong&gt; pelo navegador. Nessa página além de status da rede podemos visualizar as &lt;strong&gt;informações das redes sem fio&lt;/strong&gt;, incluindo &lt;strong&gt;senhas&lt;/strong&gt;, e pode configurar &lt;strong&gt;timezone&lt;/strong&gt;, &lt;strong&gt;atualizar&lt;/strong&gt; o firmeware e &lt;strong&gt;reiniciar&lt;/strong&gt; as unidades.&lt;/p&gt;
&lt;h3 id=&#34;controles-parentais&#34;&gt;Controles Parentais&lt;/h3&gt;
&lt;p&gt;Os controles parentais tem vários profiles (child, pre-teen, teen, adult). Em todos voce pode bloquear ou liberar sites adicionais além da lista pré-definda pela TP-Link.&lt;/p&gt;
&lt;p&gt;Podemos definir também quantas horas por dia cada perfil pode navegar nos dias de semana e nos finais de semana. E podemos também definir o horário limite para uso de internet a noite.&lt;/p&gt;
&lt;h3 id=&#34;compatibilidade-deco&#34;&gt;Compatibilidade Deco&lt;/h3&gt;
&lt;p&gt;Todos os modelos DECOs são compatíveis entre si para criar um rede MESH, independente do modelo ou firmware.&lt;/p&gt;
&lt;h3 id=&#34;notificações&#34;&gt;Notificações&lt;/h3&gt;
&lt;p&gt;Você pode ativar a notificação, e quando algum novo dispositivo entra na rede você é notificado em seu smartphone.&lt;/p&gt;
&lt;iframe width=&#34;480&#34; height=&#34;270&#34; src=&#34;https://www.youtube.com/embed/fzjtCYUnER4?feature=oembed&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h3 id=&#34;deco-m4&#34;&gt;DECO M4&lt;/h3&gt;
&lt;img src=&#34;https://www.tp-link.com/res/images/vi/deco-m4_2_pack_v1/a.jpg&#34; width=&#34;750&#34; alt=&#34;&#34;&gt;
&lt;p&gt;Potência de transmissão &amp;lt;30dBm&lt;/p&gt;
&lt;p&gt;Cobertura de até 510 metros quadrados.&lt;/p&gt;
&lt;p&gt;Suporta &lt;strong&gt;até&lt;/strong&gt; 100 dispositivos conectados.&lt;/p&gt;
&lt;p&gt;Single CPU Qualcomm&lt;/p&gt;
&lt;p&gt;Velocidade de até 1167 Mbps&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;300&lt;/strong&gt; Mbits 2.4 GHz (n/g/b)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;867&lt;/strong&gt; Mbits 5 Ghz (ac/n/a)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Mais infos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.tp-link.com/us/home-networking/deco/deco-m4/#specifications&#34;&gt;https://www.tp-link.com/us/home-networking/deco/deco-m4/#specifications&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;deco-m5&#34;&gt;DECO M5&lt;/h3&gt;
&lt;img src=&#34;https://www.tp-link.com/res/images/vi/deco/overview/photo4.jpg&#34; width=&#34;750&#34; alt=&#34;&#34;&gt;
&lt;p&gt;Potência de transmissão &amp;lt;30dBm&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;20 dBm 2.4 Ghz&lt;/li&gt;
&lt;li&gt;23 dBm 5 Ghz&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cobertura de até 510 metros quadrados.&lt;/p&gt;
&lt;p&gt;Suporta &lt;strong&gt;mais de&lt;/strong&gt; 100 dispositivos conectados.&lt;/p&gt;
&lt;p&gt;Home Care - TrendMicro - Antivirus.&lt;/p&gt;
&lt;p&gt;Teste de velocidade integrado ao APP Mobile.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Quad-Core&lt;/strong&gt; CPU&lt;/p&gt;
&lt;p&gt;Velocidade de até 1167 Mbps&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;400&lt;/strong&gt; Mbits 2.4 GHz (n/g/b)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;867&lt;/strong&gt; Mbits 5 Ghz (ac/n/a)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Oferece teste de velocidade direto no APP Deco para smartphones.&lt;/p&gt;
&lt;p&gt;Mais infos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.tp-link.com/us/home-networking/deco/deco-m5/#specifications&#34;&gt;https://www.tp-link.com/us/home-networking/deco/deco-m5/#specifications&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;impressões&#34;&gt;Impressões&lt;/h3&gt;
&lt;p&gt;O primeiro que eu adquiri foi o Deco M4 (2 unidades) que usei em casa por muitos meses em uma casa térrea de 200m2 de área construída. Paredes de alvenaria. Funcionava muito bem na casa toda e nas áreas externas 654m de terreno no total. Até uns 20mts na rua abaixo ou acima também pegava sinal suficiente para notificações do celular.&lt;/p&gt;
&lt;p&gt;Em dezembro levei o M4 (2 unidades) para o escritório e ele segurou 28 computadores + dispositivos móveis. 1/3 do time era composto por desenvolvedores, hard users de internet e rede. Fiquei surpreso com o desempenho do M4.&lt;/p&gt;
&lt;p&gt;Em janeiro comprei as unidades M5 para o escritório e fiz a substituição, o número de desktops e dispositivos móveis aumentou 30% em janeiro e o M5 continua atendendo com tranquilidade. Todos elogiaram a nova rede WIFI, a maioria até largou a conexão cabeada. A média de velocidade entre meu macbook pro e as unidades DECO era de 800Mbits dentro do escritório.&lt;/p&gt;
&lt;p&gt;Em janeiro eu me mudei para um prédio – voltando a vida de solteiro – e levei o M4 para meu novo apartamento, 100m2 de área, paredes de alvenaria. Uma unidade fica na sala e o outro no escritório. Em qualquer lugar da casa é possível utilizar WIFI com pelo menos 100Mbps de velocidade entre o dispostivo e a unidade Deco. O lugar com menor sinal é a cozinha, duas paredes de concreto após o roteador, mesmo assim ainda consigo de 90 a 100mbits de velocidade entre o note e o deco, nos demais locais da casa a velocidade varia entre 450 e 800 Mbits. Como moro no primeiro andar, o sinal pega na piscina do prédio e também na churrasqueira :)&lt;/p&gt;
&lt;p&gt;No escritório a rede mesh do M5 foi configurada apenas via WIFI sem backbone de cabo.&lt;/p&gt;
&lt;p&gt;Em casa o M4 está ligado ponto a ponto via cabo.&lt;/p&gt;
&lt;h2 id=&#34;testes&#34;&gt;Testes&lt;/h2&gt;
&lt;p&gt;Você pode assistir até vídeos 4K via rede WIFI que segura bem, testei 1 dispositivo mandando pra TV 4K.&lt;/p&gt;
&lt;p&gt;Já testei até 3 pontos assistindo Netflix via WIFI a 720p e 1080p + macbooks/iphones/ipads/iwatchs ligados e também funcionou legal.&lt;/p&gt;
&lt;p&gt;Usando IPERF de um notebook para outro consegui mais de 800Mbits nominais.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Se você tiver dificuldades ao conectar os DECOS via Ethernet, isso realmente pode acontecer, especialmente com switchs D-LINK 8 Portas. Isto ocorre pois a conexão Backhaul utiliza o protocolo IEEE 1905.1 e alguns modelos de D-LINK não encaminham esses pacotes corretamente. Na dúvida utilize um Switch TP-LINK como por exempo o modelo TISG-1008D de 8 Portas Gigabit.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Fiz todos os testes utilizando um link de fibra da vivo de 300/150.&lt;/p&gt;
&lt;h2 id=&#34;amarrando-as-pontas&#34;&gt;Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Posso dizer que estou bem satisfeito com os dispositivos DECO M4 e M5, do escritório e de casa.&lt;/p&gt;
&lt;p&gt;Valeu o investimento mesmo com dólar na casa dos 4 reais na época, o M5 custa cerca de 198 dólares com 3 unidades e o M4 cerca de 108 dólares com 2 unidades.&lt;/p&gt;
&lt;p&gt;Uma coisa boa é que você pode adquirir mais unidades M4 e M5 avulso e ir aumentando gradativamente seus nodes e consequentemente a abrangência da sua rede sem fio.&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
&lt;h3 id=&#34;referências&#34;&gt;Referências&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.tp-link.com/us/home-networking/deco/&#34;&gt;https://www.tp-link.com/us/home-networking/deco/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.tp-link.com/us/home-networking/deco/deco-m4/&#34;&gt;https://www.tp-link.com/us/home-networking/deco/deco-m4/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.tp-link.com/us/home-networking/deco/deco-m5/&#34;&gt;https://www.tp-link.com/us/home-networking/deco/deco-m5/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.tp-link.com/us/support/faq/1794/&#34;&gt;https://www.tp-link.com/us/support/faq/1794/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando Ghost com Docker</title>
      <link>https://archives.gutocarvalho.net/post/ghost-via-docker/</link>
      <pubDate>Mon, 20 Apr 2020 22:37:30 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/ghost-via-docker/</guid>
      <description>&lt;p&gt;Aqui vamos mostrar como instalar um Ghost via Docker em poucos minutos.&lt;/p&gt;
&lt;h3 id=&#34;prereq&#34;&gt;PreReq&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu &amp;gt;= 18.04&lt;/li&gt;
&lt;li&gt;Docker &amp;gt;= 19
&lt;ul&gt;
&lt;li&gt;Ghost&lt;/li&gt;
&lt;li&gt;Sqlite3&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;instalando-docker&#34;&gt;Instalando Docker&lt;/h3&gt;
&lt;p&gt;Vamos instalar o docker com o script fornecido pelo projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -fsSL https://get.docker.com -o get-docker.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Saída esperada&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Executing docker install script, commit: 442e66405c304fa92af8aadaa1d9b31bf4b0ad94
+ sh -c &#39;apt-get update -qq &amp;gt;/dev/null&#39;
+ sh -c &#39;DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl &amp;gt;/dev/null&#39;
+ sh -c &#39;curl -fsSL &amp;quot;https://download.docker.com/linux/ubuntu/gpg&amp;quot; | apt-key add -qq - &amp;gt;/dev/null&#39;
Warning: apt-key output should not be parsed (stdout is not a terminal)
+ sh -c &#39;echo &amp;quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu bionic stable&amp;quot; &amp;gt; /etc/apt/sources.list.d/docker.list&#39;
+ sh -c &#39;apt-get update -qq &amp;gt;/dev/null&#39;
+ &#39;[&#39; -n &#39;&#39; &#39;]&#39;
+ sh -c &#39;apt-get install -y -qq --no-install-recommends docker-ce &amp;gt;/dev/null&#39;
+ sh -c &#39;docker version&#39;
Client: Docker Engine - Community
 Version:           19.03.8
 API version:       1.40
 Go version:        go1.12.17
 Git commit:        afacb8b7f0
 Built:             Wed Mar 11 01:25:46 2020
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.8
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.12.17
  Git commit:       afacb8b7f0
  Built:            Wed Mar 11 01:24:19 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.2.13
  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429
 runc:
  Version:          1.0.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683
If you would like to use Docker as a non-root user, you should now consider
adding your user to the &amp;quot;docker&amp;quot; group with something like:

  sudo usermod -aG docker your-user

Remember that you will have to log out and back in for this to take effect!

WARNING: Adding a user to the &amp;quot;docker&amp;quot; group will grant the ability to run
         containers which can be used to obtain root privileges on the
         docker host.
         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface
         for more information.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Pronto docker instalado, agora vamos ativar no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl enable docker
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feito, agora vamos iniciar o serviço do docker&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl start docker
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Assista o vídeo&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://asciinema.org/a/rEWIog4Ll67ey0kKCJ06HvPNL&#34;&gt;&lt;img src=&#34;https://asciinema.org/a/rEWIog4Ll67ey0kKCJ06HvPNL.svg&#34; width=&#34;700&#34;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;instalando-ghost&#34;&gt;Instalando Ghost&lt;/h3&gt;
&lt;p&gt;Crie um diretório para servir de volume para mysql e ghost.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /srv/sites/guto/ghost/content
mkdir -p /srv/sites/guto/ghost/config
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo config.json em ghost/config&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;port&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2368&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;host&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0.0.0.0&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;database&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;client&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;sqlite3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;connection&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;filename&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/ghost/content/data/ghost.db&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;mail&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;transport&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Direct&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;logging&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;transports&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;file&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;stdout&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;process&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;systemd&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;paths&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;contentPath&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/ghost/content&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Execute o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker run --restart always --name guto-ghost -v /srv/sites/guto/ghost/content:/var/lib/ghost/content:z -v /srv/sites/guto/ghost/config/config.json:/var/lib/ghost/config.production.json:z -d -p 80:80 ghost:latest
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E pronto, acesse seu ghost pelo navegador e finalize a instalação :)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://coloque-seu-ip-aqui/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Assista o vídeo&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://asciinema.org/a/rUFIP58JbdUVfp5cLW4v095YA&#34; target=&#34;_blank&#34;&gt;&lt;img src=&#34;https://asciinema.org/a/rUFIP58JbdUVfp5cLW4v095YA.svg&#34; width=&#34;700&#34;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;dicas-soltas&#34;&gt;Dicas soltas&lt;/h3&gt;
&lt;p&gt;Caso queira reiniciar o container&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker restart guto-ghost
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queria parar o container&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker kill guto-ghost
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queira ver o log do container&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker logs -f guto-ghost
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queria entrar no container&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker exec -ti guto-ghost bash
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;amarrando-as-pontas&#34;&gt;Amarrando as pontas&lt;/h3&gt;
&lt;p&gt;Instalar qualquer coisa via docker é muito fácil, especialmente quando você quer testar algo ou conhecer alguma tecnologia.&lt;/p&gt;
&lt;p&gt;Neste cenário criamos um ambiente ghost composto por 1 container com a aplicação rodando internamente o banco &lt;strong&gt;SQLite3&lt;/strong&gt;. O container persiste os dados em disco, no &lt;strong&gt;HOST&lt;/strong&gt;, utilizando o diretório &lt;strong&gt;/srv/sites/guto/ghost&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Observe que eu monto um volume para os dados e outro volume para o arquivo de configuração, assim fica fácil alterar qualquer coisa e reiniciar o container em seguida.&lt;/p&gt;
&lt;p&gt;Com a persistência de dados você pode reiniciar o seu containers e não perderá seus dados.&lt;/p&gt;
&lt;p&gt;Vale lembrar que o projeto &lt;strong&gt;GHOST&lt;/strong&gt; recomenda o uso do &lt;strong&gt;MySQL&lt;/strong&gt; em produção, SQLite só deve ser utilizado em desenvolvimento ou se você sabe o que está fazendo.&lt;/p&gt;
&lt;p&gt;Usar docker em produção requer alguns cuidados além deste, como o uso de um orquestrador mais eficiente que ofereça &lt;em&gt;&lt;strong&gt;alta disponibilidade&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;resiliência&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;escalabilidade&lt;/strong&gt;&lt;/em&gt; e &lt;em&gt;&lt;strong&gt;persistência&lt;/strong&gt;&lt;/em&gt;, além de claro, um sólido &lt;em&gt;&lt;strong&gt;plano de backup&lt;/strong&gt;&lt;/em&gt; dos dados além de um procedimento bem claro para &lt;em&gt;&lt;strong&gt;Disaster Recovery&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Integrando DISQUS e GHOST</title>
      <link>https://archives.gutocarvalho.net/post/intregrando-disqus-e-ghost/</link>
      <pubDate>Sun, 19 Apr 2020 17:16:22 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/intregrando-disqus-e-ghost/</guid>
      <description>&lt;h3 id=&#34;contexto&#34;&gt;Contexto&lt;/h3&gt;
&lt;p&gt;Comentários podem ser construtivos e somarem ao seu blog, mas podem ser também um grande aborrecimento. Contudo, eu prefiro que falem mais do que prefiro que fiquem calados.&lt;/p&gt;
&lt;p&gt;Para comentários eu escolhi o &lt;strong&gt;DISQUS&lt;/strong&gt; pois força a pessoa a ter uma conta e se identificar minimente para comentar. É uma camada a mais, um filtro mínimo, sei que não garante muito, mas já é melhor que deixar comentários anônimos ;)&lt;/p&gt;
&lt;h3 id=&#34;procedimento-de-integração&#34;&gt;Procedimento de integração&lt;/h3&gt;
&lt;p&gt;Edite o aquivo &lt;em&gt;&lt;strong&gt;post.hbs&lt;/strong&gt;&lt;/em&gt; do seu tema &lt;em&gt;&lt;strong&gt;CASPER&lt;/strong&gt;&lt;/em&gt; e procure as seguintes linhas&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{{!--
&amp;lt;section class=&amp;quot;post-full-comments&amp;quot;&amp;gt;
&amp;lt;/section&amp;gt;
--}}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Provavelmente estão depois da linha 115, agora remova as tags de comentários&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;section class=&amp;quot;post-full-comments&amp;quot;&amp;gt;
&amp;lt;/section&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Feito isto, insira o código universal do DISQUS para integração&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;section class=&amp;quot;post-full-comments&amp;quot;&amp;gt;

&amp;lt;div id=&amp;quot;disqus_thread&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;script&amp;gt;

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = &#39;{{url absolute=&amp;quot;true&amp;quot;}}&#39;;  // Replace PAGE_URL with your page&#39;s canonical URL variable
this.page.identifier = &#39;ghost-{{comment_id}}&#39;; // Replace PAGE_IDENTIFIER with your page&#39;s unique identifier variable
};
*/
(function() { // DON&#39;T EDIT BELOW THIS LINE
var d = document, s = d.createElement(&#39;script&#39;);
s.src = &#39;https://USERNAME.disqus.com/embed.js&#39;;
s.setAttribute(&#39;data-timestamp&#39;, +new Date());
(d.head || d.body).appendChild(s);
})();
&amp;lt;/script&amp;gt;
&amp;lt;noscript&amp;gt;Please enable JavaScript to view the &amp;lt;a href=&amp;quot;https://disqus.com/?ref_noscript&amp;quot;&amp;gt;comments powered by Disqus.&amp;lt;/a&amp;gt;&amp;lt;/noscript&amp;gt;

&amp;lt;/section&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Troque &lt;strong&gt;USERNAME&lt;/strong&gt; pelo seu usuário no &lt;strong&gt;DISQUS&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Reinicie o seu GHOST e pronto, comentários funcionando.&lt;/p&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Integrando Certbot com DNS da Cloudflare</title>
      <link>https://archives.gutocarvalho.net/post/integrando-certbot-com-dns-da-cloudflare/</link>
      <pubDate>Sat, 18 Apr 2020 20:04:28 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/integrando-certbot-com-dns-da-cloudflare/</guid>
      <description>&lt;h2 id=&#34;heading&#34;&gt;&lt;/h2&gt;
&lt;p&gt;Certificados do tipo WILDCARD são um pouco diferentes de serem emitidos via certbot. Uma vez que você tenha emitido usando os parâmetros &lt;em&gt;&lt;strong&gt;&amp;ndash;manual &amp;ndash;preferred-challenges dns&lt;/strong&gt;&lt;/em&gt;, em toda a renovação você precisa atualizar o conteúdo de um entrada TXT em sua zona de DNS.&lt;/p&gt;
&lt;p&gt;Isso pode ser complicado de automatizar, dependendo da tecnologia escolhida ou de seu provedor de DNS, se estiver usando um SaaS.&lt;/p&gt;
&lt;p&gt;Aqui vamos mostrar como automatizar a atualização da entrada TXT de DNS para um domínio wildcard hospedado no provedor CloudFlare.&lt;/p&gt;
&lt;h3 id=&#34;prereqs&#34;&gt;PreReqs&lt;/h3&gt;
&lt;p&gt;Ambiente&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ProxMox 6.1
&lt;ul&gt;
&lt;li&gt;CentOS 7
&lt;ul&gt;
&lt;li&gt;Cerbot 1.3&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dependências&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DNS rodando na Cloudflare&lt;/li&gt;
&lt;li&gt;Entrada de DNS Wildcard na Cloudflare&lt;/li&gt;
&lt;li&gt;Token Global da Cloudflare&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Se você ainda não criou sua entrada wildcard, veja o post abaixo&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;__GHOST_URL__/blog/letsencrypt-wildcard&#34;&gt;blog/letsencrypt-wildcard&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;instalando-plugin-cloudflare&#34;&gt;Instalando plugin cloudflare&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;yum install python2-certbot-dns-cloudflare-1.3.0-2.el7.noarch
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;criando-arquivo-de-configuração-cloudflare&#34;&gt;Criando arquivo de configuração cloudflare&lt;/h3&gt;
&lt;p&gt;Vamos criar o seguinte arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/letsencrypt/cloudflareapi.cfg
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Insira o conteúdo abaixo, ajustando seu e-mail e o token&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dns_cloudflare_email = guto@gutocarvalho.net
dns_cloudflare_api_key = LKJHliugoIULkjKUHIOLhuLIHU
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O token você vai pegar na página da cloudflare.&lt;/p&gt;
&lt;h3 id=&#34;renovando-o-certificado-existente&#34;&gt;Renovando o certificado existente&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;certbot certonly --dns-cloudflare --dns-cloudflare-credentials /etc/letsencrypt/cloudflare.ini -d gutocarvalho.net,*.gutocarvalho.net --preferred-challenges dns-01
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;criando-entrada-no-cron&#34;&gt;Criando entrada no cron&lt;/h3&gt;
&lt;p&gt;Edite o cront do root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;crontab -e
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E insira a linha abaixo ajustando minuto, hora e domínio.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;15 3 * * * certbot certonly --noninteractive --cert-name gutocarvalho.net --dns-cloudflare --dns-cloudflare-credentials /etc/letsencrypt/cloudflareapi.cfg --server https://acme-v02.api.letsencrypt.org/directory -d gutocarvalho.net,*.gutocarvalho.net
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, a renovação de certificados está configurada, o setup agora está completo.&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Criando certificados LetsEncrypt Wildcard com o Certbot</title>
      <link>https://archives.gutocarvalho.net/post/letsencrypt-wildcard/</link>
      <pubDate>Sat, 18 Apr 2020 16:17:43 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/letsencrypt-wildcard/</guid>
      <description>&lt;h3 id=&#34;o-que-é-um-certificado-wildcard&#34;&gt;O que é um certificado wildcard?&lt;/h3&gt;
&lt;p&gt;Em resumo é um certificado &lt;em&gt;&lt;strong&gt;coringa&lt;/strong&gt;&lt;/em&gt; que vai funcionar com qualquer entrada em primeiro nível.&lt;/p&gt;
&lt;p&gt;Por exemplo, se eu criar um certificado wildcard como o abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;*.gutocarvalho.net
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Qualquer domínio em primeiro nível vai conseguir utilizar os certificados, exemplos:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gitlab.gutocarvalho.net
jitsi.gutocarvalho.net
mattermost.gutocarvalho.net
nextcloud.gutocarvalho
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora veja, wildcard só funciona em primeiro nível, se voce tentar usar em níveis abaixo, em segundo nível como o exemplo abaixo&amp;hellip;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;app.dev.gutocarvalho.net
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;hellip; não vai dar bom, neste caso você precisaria criar um certificado wildcard para *&lt;em&gt;&lt;strong&gt;.dev.gutocarvalho.net&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;É isso, chega de teoria, vamos colocar a mão na massa. ;)&lt;/p&gt;
&lt;h3 id=&#34;ambiente&#34;&gt;Ambiente&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ProxMox 6.1
&lt;ul&gt;
&lt;li&gt;CentOS 7
&lt;ul&gt;
&lt;li&gt;Certbot 1.3.0&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;prereqs&#34;&gt;PreReqs&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Crie um entrada *.seudominio.com.br em seu provedor de DNS&lt;/li&gt;
&lt;li&gt;Essa entrada deve apontar para seu balanceador ou reverse proxy.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;preparando-a-coisa&#34;&gt;Preparando a coisa&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;yum install -y epel-release
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;instalando-o-certbot&#34;&gt;Instalando o certbot&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;yum install -y certbot python2-certbot-dns-cloudflare-1.3.0-2.el7.noarch
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;gerando-o-cerfificado-wildcard&#34;&gt;Gerando o cerfificado wildcard&lt;/h3&gt;
&lt;p&gt;Vamos rodar o comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;certbot --server https://acme-v02.api.letsencrypt.org/directory -d gutocarvalho.net,*.gutocarvalho.net --manual --preferred-challenges dns-01 certonly
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja que eu passo &lt;em&gt;&lt;strong&gt;gutocarvalho.net&lt;/strong&gt;&lt;/em&gt;,*&lt;em&gt;&lt;strong&gt;.gutocarvalho.net&lt;/strong&gt;&lt;/em&gt; no parâmetro &lt;em&gt;&lt;strong&gt;-d&lt;/strong&gt;&lt;/em&gt;, isso é essencial, não esqueça de colocar o domínio principal junto ao wildcard.&lt;/p&gt;
&lt;p&gt;Agora vamos ver a saída esperada.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator manual, Installer None
Starting new HTTPS connection (1): acme-v02.api.letsencrypt.org
Obtaining a new certificate
Performing the following challenges:
dns-01 challenge for gutocarvalho.net

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
NOTE: The IP of this machine will be publicly logged as having requested this
certificate. If you&#39;re running certbot in manual mode on a machine that is not
your server, please ensure you&#39;re okay with that.

Are you OK with your IP being logged?
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(Y)es/(N)o: y

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Please deploy a DNS TXT record under the name
_acme-challenge.gutocarvalho.net with the following value:

glkhjdljlJKDlkdjksdhlkshjd-_ctdL5ve8Vn2Nnd0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;OK, aqui precisamos ir no nosso provedor de DNS e criar a entrada abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;_acme-challenge.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;com o seguinte conteúdo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;glkhjdljlJKDlkdjksdhlkshjd-_ctdL5ve8Vn2Nnd0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Beleza, depois mandar um ENTER e continue&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Before continuing, verify the record is deployed.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Press Enter to Continue
Waiting for verification...
Cleaning up challenges

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   /etc/letsencrypt/live/gutocarvalho.net-0001/fullchain.pem
   Your key file has been saved at:
   /etc/letsencrypt/live/gutocarvalho.net-0001/privkey.pem
   Your cert will expire on 2020-07-17. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot
   again. To non-interactively renew *all* of your certificates, run
   &amp;quot;certbot renew&amp;quot;
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let&#39;s Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O certificados foram gerados em /etc/letsencrypt/live/gutocarvalho.net&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[root@lb conf.d]# ls /etc/letsencrypt/live/gutocarvalho.net/ -1
cert.pem
chain.pem
fullchain.pem
privkey.pem
README
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Certificados gerados, agora você pode usar em seu NGINX, Apache HTTPd ou qualquer outro serviço que deseje utilizar SSL.&lt;/p&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Se você precisa de ajuda para começar a utilizar certificados LetsEncrypt, fale com a JAC, nosso braço de projetos e consultoria!A JAC oferece um atendimento diferenciado e profissionais bem antenados, pode confiar :)[contato@jac.bsb.br]&lt;a href=&#34;https://jac.bsb.br&#34;&gt;https://jac.bsb.br&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#MindNote Caddy</title>
      <link>https://archives.gutocarvalho.net/post/mindnote-caddy/</link>
      <pubDate>Fri, 17 Apr 2020 20:47:49 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnote-caddy/</guid>
      <description>&lt;p&gt;O @dirceu me falou desse projeto, Caddy Web Server, feito em GO, preciso ver com calma e tentar substituir os NGINX de sites estáticos por ele, acho que vai ser bacana a experiência. Preciso fazer um post sobre o projeto e seus recursos!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://caddyserver.com&#34;&gt;https://caddyserver.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>#MindNote Dotfiles</title>
      <link>https://archives.gutocarvalho.net/post/mindnotes-dotfiles-mathiasbynens/</link>
      <pubDate>Fri, 17 Apr 2020 20:41:50 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/mindnotes-dotfiles-mathiasbynens/</guid>
      <description>&lt;p&gt;Achei os dotfiles desse rapaz muito bacanas, preciso ver com calma.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mathiasbynens/dotfiles&#34;&gt;https://github.com/mathiasbynens/dotfiles&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meu Toolkit em 2020</title>
      <link>https://archives.gutocarvalho.net/post/meu-toolkit-2020/</link>
      <pubDate>Thu, 16 Apr 2020 11:02:49 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/meu-toolkit-2020/</guid>
      <description>&lt;p&gt;No twitter tá rolando uma thread sobre APPs e tecnologias que usamos em nosso cotidiano diário, vou ter que blogar isso pq a lista é grande :)&lt;/p&gt;
&lt;h2 id=&#34;notebook-pessoal&#34;&gt;Notebook Pessoal&lt;/h2&gt;
&lt;p&gt;Apps essenciais que eu uso no meu MBP.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MacOS Catalina 10.15.3
&lt;ul&gt;
&lt;li&gt;Browsers
&lt;ul&gt;
&lt;li&gt;Vivaldi (principal navegador)&lt;/li&gt;
&lt;li&gt;Brave (security browser)&lt;/li&gt;
&lt;li&gt;Chrome (projetos clientes jac)
&lt;ul&gt;
&lt;li&gt;Extension Website IP&lt;/li&gt;
&lt;li&gt;Extension Reticle&lt;/li&gt;
&lt;li&gt;Extension Tabs SlideShow by FredZvt&lt;/li&gt;
&lt;li&gt;Extension Passbolt&lt;/li&gt;
&lt;li&gt;Extension 1Password&lt;/li&gt;
&lt;li&gt;Extension Trello Labels&lt;/li&gt;
&lt;li&gt;Extension Trello Card Numbers&lt;/li&gt;
&lt;li&gt;Extension Grammarly&lt;/li&gt;
&lt;li&gt;Extension Fireshot&lt;/li&gt;
&lt;li&gt;Extension ADBlock Ultimate&lt;/li&gt;
&lt;li&gt;Extension Screencastfy (novo)&lt;/li&gt;
&lt;li&gt;Extension Jitsi&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Firefox (projetos jac)
&lt;ul&gt;
&lt;li&gt;Addon Server IP&lt;/li&gt;
&lt;li&gt;Addon Ruler&lt;/li&gt;
&lt;li&gt;Addon TAB Slideshow WE&lt;/li&gt;
&lt;li&gt;Addon Passbolt&lt;/li&gt;
&lt;li&gt;Addon 1Password&lt;/li&gt;
&lt;li&gt;Addon Trello Super Powers&lt;/li&gt;
&lt;li&gt;Addon Grammarly&lt;/li&gt;
&lt;li&gt;Addon Easy Screenshot&lt;/li&gt;
&lt;li&gt;Addon Adblock Ultimate&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Opera (uso aleatório)&lt;/li&gt;
&lt;li&gt;Safari (uso aleatório)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Mail Client
&lt;ul&gt;
&lt;li&gt;Spark (principal)&lt;/li&gt;
&lt;li&gt;Airmail (novo)&lt;/li&gt;
&lt;li&gt;Canary Mail (novo)&lt;/li&gt;
&lt;li&gt;Apple Mail&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Terminal
&lt;ul&gt;
&lt;li&gt;Iterm2
&lt;ul&gt;
&lt;li&gt;Bash
&lt;ul&gt;
&lt;li&gt;Prompline Bash&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ZSH
&lt;ul&gt;
&lt;li&gt;OH MY ZSH!
&lt;ul&gt;
&lt;li&gt;Plugins
&lt;ul&gt;
&lt;li&gt;osx&lt;/li&gt;
&lt;li&gt;git&lt;/li&gt;
&lt;li&gt;brew&lt;/li&gt;
&lt;li&gt;docker&lt;/li&gt;
&lt;li&gt;docker-compose&lt;/li&gt;
&lt;li&gt;history&lt;/li&gt;
&lt;li&gt;vagrant&lt;/li&gt;
&lt;li&gt;zsh-syntax-highlighting&lt;/li&gt;
&lt;li&gt;zsh-autosuggestions&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Theme
&lt;ul&gt;
&lt;li&gt;agnoster&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SSH&lt;/li&gt;
&lt;li&gt;GIT&lt;/li&gt;
&lt;li&gt;VIM
&lt;ul&gt;
&lt;li&gt;vim-airline&lt;/li&gt;
&lt;li&gt;vundle&lt;/li&gt;
&lt;li&gt;promptline&lt;/li&gt;
&lt;li&gt;dracula/vim (theme)&lt;/li&gt;
&lt;li&gt;vim-puppet&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Gerenciador de pacotes
&lt;ul&gt;
&lt;li&gt;Homebrew&lt;/li&gt;
&lt;li&gt;Homebrew Cask&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Editors
&lt;ul&gt;
&lt;li&gt;VSCode&lt;/li&gt;
&lt;li&gt;MacDown&lt;/li&gt;
&lt;li&gt;Mobirise (novo)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Documentação
&lt;ul&gt;
&lt;li&gt;Dash&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;IM
&lt;ul&gt;
&lt;li&gt;WhatsAPP&lt;/li&gt;
&lt;li&gt;Telegram&lt;/li&gt;
&lt;li&gt;Textual (IRC)&lt;/li&gt;
&lt;li&gt;Slack&lt;/li&gt;
&lt;li&gt;Teams&lt;/li&gt;
&lt;li&gt;MatterMost&lt;/li&gt;
&lt;li&gt;RocketChat&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Videconf
&lt;ul&gt;
&lt;li&gt;Zoom&lt;/li&gt;
&lt;li&gt;ClickMeeting&lt;/li&gt;
&lt;li&gt;GotoMeeting&lt;/li&gt;
&lt;li&gt;Join.me&lt;/li&gt;
&lt;li&gt;Jitsi&lt;/li&gt;
&lt;li&gt;Skype&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Social Networks
&lt;ul&gt;
&lt;li&gt;TweetBot&lt;/li&gt;
&lt;li&gt;Twitter&lt;/li&gt;
&lt;li&gt;Tweetdeck&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Multiple IM Client
&lt;ul&gt;
&lt;li&gt;Franz&lt;/li&gt;
&lt;li&gt;Station&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Secrets
&lt;ul&gt;
&lt;li&gt;1Password&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Utils
&lt;ul&gt;
&lt;li&gt;IstatMenus&lt;/li&gt;
&lt;li&gt;Unclutter&lt;/li&gt;
&lt;li&gt;Alfred&lt;/li&gt;
&lt;li&gt;Bartender&lt;/li&gt;
&lt;li&gt;Paragon NTFS&lt;/li&gt;
&lt;li&gt;Amphetamine&lt;/li&gt;
&lt;li&gt;Display Menu&lt;/li&gt;
&lt;li&gt;TripMode (Controle de banda Mobile)&lt;/li&gt;
&lt;li&gt;CleanMyMac&lt;/li&gt;
&lt;li&gt;Little Snitch (Firewall)&lt;/li&gt;
&lt;li&gt;SubnetCalc&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Remote Connect
&lt;ul&gt;
&lt;li&gt;AnyDesk&lt;/li&gt;
&lt;li&gt;Teamviewer&lt;/li&gt;
&lt;li&gt;MS RDP&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Multimedia
&lt;ul&gt;
&lt;li&gt;VLC&lt;/li&gt;
&lt;li&gt;Subtitles&lt;/li&gt;
&lt;li&gt;Shazam&lt;/li&gt;
&lt;li&gt;Piezo&lt;/li&gt;
&lt;li&gt;Screenflow&lt;/li&gt;
&lt;li&gt;Isky Video Converter&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;VPN
&lt;ul&gt;
&lt;li&gt;Viscosity&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Finances
&lt;ul&gt;
&lt;li&gt;Chronicle Pro&lt;/li&gt;
&lt;li&gt;Money&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;File transfer
&lt;ul&gt;
&lt;li&gt;Transmission (p2p)&lt;/li&gt;
&lt;li&gt;Resilio Sync (p2p)&lt;/li&gt;
&lt;li&gt;Transmit&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Cloud Storage
&lt;ul&gt;
&lt;li&gt;NextCloud Agent&lt;/li&gt;
&lt;li&gt;Onedrive&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Hypervisors
&lt;ul&gt;
&lt;li&gt;Parallels
&lt;ul&gt;
&lt;li&gt;Chrome (for windows)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;VirtualBox&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Automation
&lt;ul&gt;
&lt;li&gt;Vagrant&lt;/li&gt;
&lt;li&gt;Packer&lt;/li&gt;
&lt;li&gt;Puppet&lt;/li&gt;
&lt;li&gt;Ansible&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Containers
&lt;ul&gt;
&lt;li&gt;Docker&lt;/li&gt;
&lt;li&gt;Docker Compose&lt;/li&gt;
&lt;li&gt;Lens&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Office
&lt;ul&gt;
&lt;li&gt;Fantastical&lt;/li&gt;
&lt;li&gt;Apple Keynote&lt;/li&gt;
&lt;li&gt;Apple Reminders&lt;/li&gt;
&lt;li&gt;Apple Notes&lt;/li&gt;
&lt;li&gt;Office 365&lt;/li&gt;
&lt;li&gt;Grammarly&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Database Client
&lt;ul&gt;
&lt;li&gt;PSequel (Postgres)&lt;/li&gt;
&lt;li&gt;Workbench (MySQL)&lt;/li&gt;
&lt;li&gt;Robo3T (Mongo)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;API Rest
&lt;ul&gt;
&lt;li&gt;PostMan&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;hardware&#34;&gt;Hardware&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;IMAC 21&#39; 8GB (office e videconfs)&lt;/li&gt;
&lt;li&gt;Intel NUC 16GB (laboratorios e testes)&lt;/li&gt;
&lt;li&gt;Notebook MPB 13&#39; 16GB (note principal)&lt;/li&gt;
&lt;li&gt;Notebook MPB 11&#39; 4GB (reuniões e viagens curtas)&lt;/li&gt;
&lt;li&gt;iPhone 8 Plus 256 GB + Apple Watch 3º Geração
&lt;ul&gt;
&lt;li&gt;Bateria Anker Powercore 26.800Mah&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Kit Conferência, webinários e treinamentos
&lt;ul&gt;
&lt;li&gt;Mesa de som Behringer USB U-PHORIA UM2&lt;/li&gt;
&lt;li&gt;Microfone Behringer C-3&lt;/li&gt;
&lt;li&gt;WebCam FullHD Logitech C920&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Network
&lt;ul&gt;
&lt;li&gt;Vivo Fibra 300/150 Mbits&lt;/li&gt;
&lt;li&gt;1 Switch TP-Link 8 Ports Gigabit&lt;/li&gt;
&lt;li&gt;2 TP-Link Powerline Kit 4220 (conexão da SmartTV)&lt;/li&gt;
&lt;li&gt;2 Roteadores TP-Link DECO M4 MESH Gigabit&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Desk
&lt;ul&gt;
&lt;li&gt;2 Monitores AOC 24&#39; Widescreen Freesync&lt;/li&gt;
&lt;li&gt;Mesa digitalizador WACOM ONE&lt;/li&gt;
&lt;li&gt;HD Western Digital USB 3.0 4TB para TimeMachine&lt;/li&gt;
&lt;li&gt;Carregador ANKER USB A2133 10 portas&lt;/li&gt;
&lt;li&gt;Headphone Samsung Level On Bluetooth with Noise Canceling&lt;/li&gt;
&lt;li&gt;HP OfficeJet J4580 All-in-one&lt;/li&gt;
&lt;li&gt;Régua Clone 8 Outlets&lt;/li&gt;
&lt;li&gt;Luminária Led 15W Inspire Moss Branco 120cm ( acima do monitor )&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;nuvem-pessoal&#34;&gt;Nuvem Pessoal&lt;/h2&gt;
&lt;p&gt;Serviços que contrato em nuvem, para uso pessoal&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Office 365&lt;/li&gt;
&lt;li&gt;1Password&lt;/li&gt;
&lt;li&gt;NetFlix&lt;/li&gt;
&lt;li&gt;Apple Music&lt;/li&gt;
&lt;li&gt;Gmail Storage&lt;/li&gt;
&lt;li&gt;Icloud Storage&lt;/li&gt;
&lt;li&gt;Envato Elements&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;para-projetos-pessoais-ou-em-clientes-jac&#34;&gt;Para projetos pessoais ou em clientes JAC&lt;/h2&gt;
&lt;p&gt;As tecnologias essenciais&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linux (Ubuntu e CentOS)
&lt;ul&gt;
&lt;li&gt;BASH&lt;/li&gt;
&lt;li&gt;ZSH&lt;/li&gt;
&lt;li&gt;SSH&lt;/li&gt;
&lt;li&gt;GIT&lt;/li&gt;
&lt;li&gt;VIM&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Automação&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ansible&lt;/li&gt;
&lt;li&gt;Puppet&lt;/li&gt;
&lt;li&gt;Terraform&lt;/li&gt;
&lt;li&gt;Rundeck&lt;/li&gt;
&lt;li&gt;Certbot&lt;/li&gt;
&lt;li&gt;Curl&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Linguagens, ferramentas, estruturas e modelo de dados&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Shell&lt;/li&gt;
&lt;li&gt;Ruby&lt;/li&gt;
&lt;li&gt;Python&lt;/li&gt;
&lt;li&gt;YAML&lt;/li&gt;
&lt;li&gt;JSON&lt;/li&gt;
&lt;li&gt;REST&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Console tools&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;| (pipe)&lt;/li&gt;
&lt;li&gt;tcpdump&lt;/li&gt;
&lt;li&gt;net-tools (netstat, route)&lt;/li&gt;
&lt;li&gt;ip&lt;/li&gt;
&lt;li&gt;top, vmstat&lt;/li&gt;
&lt;li&gt;htop, iotop&lt;/li&gt;
&lt;li&gt;screen&lt;/li&gt;
&lt;li&gt;wget, curl&lt;/li&gt;
&lt;li&gt;rsync&lt;/li&gt;
&lt;li&gt;iperf&lt;/li&gt;
&lt;li&gt;cat, grep, egrep&lt;/li&gt;
&lt;li&gt;tar, gzip, bzip2&lt;/li&gt;
&lt;li&gt;cut, awk, sed&lt;/li&gt;
&lt;li&gt;more, less, head, tail&lt;/li&gt;
&lt;li&gt;df, du, mount&lt;/li&gt;
&lt;li&gt;lvm&lt;/li&gt;
&lt;li&gt;lynx, elinks&lt;/li&gt;
&lt;li&gt;nmap&lt;/li&gt;
&lt;li&gt;telnet&lt;/li&gt;
&lt;li&gt;netcat&lt;/li&gt;
&lt;li&gt;traceroute&lt;/li&gt;
&lt;li&gt;strace&lt;/li&gt;
&lt;li&gt;jq&lt;/li&gt;
&lt;li&gt;asciinema&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Metodologias, culturas e técnicas&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kanban&lt;/li&gt;
&lt;li&gt;Scrum&lt;/li&gt;
&lt;li&gt;Agile&lt;/li&gt;
&lt;li&gt;IaC&lt;/li&gt;
&lt;li&gt;DevOps&lt;/li&gt;
&lt;li&gt;SRE&lt;/li&gt;
&lt;li&gt;GitOPS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bancos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MariaDB/MySQL&lt;/li&gt;
&lt;li&gt;PostgreSQL&lt;/li&gt;
&lt;li&gt;SQLite&lt;/li&gt;
&lt;li&gt;MongoDB (novo)&lt;/li&gt;
&lt;li&gt;Elastic&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Brokers&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RabbitMQ&lt;/li&gt;
&lt;li&gt;ApacheMQ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Containers&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Docker&lt;/li&gt;
&lt;li&gt;Docker Compose&lt;/li&gt;
&lt;li&gt;Rancher
&lt;ul&gt;
&lt;li&gt;RancherOS&lt;/li&gt;
&lt;li&gt;K3S&lt;/li&gt;
&lt;li&gt;K3OS&lt;/li&gt;
&lt;li&gt;RKE&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Kubernetes
&lt;ul&gt;
&lt;li&gt;Kubectl&lt;/li&gt;
&lt;li&gt;Etcdctl&lt;/li&gt;
&lt;li&gt;Helm&lt;/li&gt;
&lt;li&gt;k9s&lt;/li&gt;
&lt;li&gt;Lens&lt;/li&gt;
&lt;li&gt;Kustomize&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Monitoração&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Zabbix&lt;/li&gt;
&lt;li&gt;Grafana&lt;/li&gt;
&lt;li&gt;Prometheus&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Centralização de logs e eventos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Beats&lt;/li&gt;
&lt;li&gt;Logstash&lt;/li&gt;
&lt;li&gt;Elastic Search&lt;/li&gt;
&lt;li&gt;Kibana&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Virtualização em Cluster&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ProxMox&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Storage remoto&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NextCloud&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gerenciamento de senhas entre times&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Passbolt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ChatOPS e Videconferência&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MatterMost (chatops)&lt;/li&gt;
&lt;li&gt;Jitsi (video)
&lt;ul&gt;
&lt;li&gt;Etherpad (notes)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gerenciamento de código fonte e CI/CD&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GitLab
&lt;ul&gt;
&lt;li&gt;GitLab CI&lt;/li&gt;
&lt;li&gt;GitLab Runner&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gerenciamento de artefatos e registry docker&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nexus Repo&lt;/li&gt;
&lt;li&gt;Harbour (novo)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sistema de correio eletrônico&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Zimbra&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sistema de VPN&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OpenVPN&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Reverse Proxy, LB e Cache&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NGINX&lt;/li&gt;
&lt;li&gt;HAProxy&lt;/li&gt;
&lt;li&gt;Apache HTTPd&lt;/li&gt;
&lt;li&gt;Caddy (novo)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nuvens que normalmente utilizo em projetos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AWS&lt;/li&gt;
&lt;li&gt;GCP&lt;/li&gt;
&lt;li&gt;OVH&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Virtualização &amp;amp; Baremetal&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OVH&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Provedor de DNS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cloudflare&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Domain Registrar&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Namecheap&lt;/li&gt;
&lt;li&gt;Registro.br&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Monitoramento Externo tipo SaaS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UptimeRobot&lt;/li&gt;
&lt;li&gt;StatusCake (novo)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Documentação&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GitHub Markdown&lt;/li&gt;
&lt;li&gt;Dokuwiki&lt;/li&gt;
&lt;li&gt;GitLab Wiki&lt;/li&gt;
&lt;li&gt;Etherpad&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Blog&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ghost (novo)
&lt;ul&gt;
&lt;li&gt;Disqus&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Hugo (legado)&lt;/li&gt;
&lt;li&gt;Wordpress (legado)&lt;/li&gt;
&lt;li&gt;Octopress (legado)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gerenciamento de atividades do time&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Trello&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Onde estou trabalhando?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JAC.bsb.br :)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Acho que é isso, daqui um ano a gente compara!&lt;/p&gt;
&lt;p&gt;Se você fizer um post como esse, comenta aí e deixa a URL :)&lt;/p&gt;
&lt;p&gt;;)&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
&lt;hr&gt;
</description>
    </item>
    
    
    
    <item>
      <title>ProxMox Migration Aborted</title>
      <link>https://archives.gutocarvalho.net/post/proxmox-migration-aborted/</link>
      <pubDate>Tue, 14 Apr 2020 09:50:32 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/proxmox-migration-aborted/</guid>
      <description>&lt;p&gt;As vezes quando estamos migrando uma VM de um Node para outro em nosso Cluster ProxMox, pode ser que a gente se depare com esse erro:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/usr/bin/ssh -e none -o &#39;BatchMode=yes&#39; -o &#39;HostKeyAlias=node_name&#39; root@node-ipv4 /bin/true
 Host key verification failed.
 ERROR: migration aborted (duration 00:00:00): Can&#39;t connect to destination address using public key
TASK ERROR: migration aborted
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Olhando mais de perto:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Host key verification failed.
 ERROR: migration aborted (duration 00:00:00): Can&#39;t connect to destination address using public key
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O que ocorre é o seguinte, cada node do seu cluster Proxmox tem dentro do arquivo &lt;strong&gt;&lt;em&gt;/etc/ssh/ssh_known_hosts&lt;/em&gt;&lt;/strong&gt; chaves que permitem essa migração entre nodes. Eventualmente, devido a alguma reconfiguração ou atualização isso pode ser modificado e perder a referência.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;root@netuno:~# cat /etc/ssh/ssh_known_hosts

|1|pgRxKKlBvP6k+PHM9qzUFjkUurI=|jL2i1JDwEUwqYGTKZeSzyj+yDdo= ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBKnEUasTFGpYfuHHHxTi8G8X6GtX+OK0H9f45FK08lFqzDqp1bYyAAt9NR2mZAnS15TnggMg8ecGuSI1ukVLlA8=

|1|Ah1gr9RovFPuTWIRB+vQ4PqMvYo=|cDQ8Vgh8ZxASIPu6cPSm2uup+Cw= ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBKnEUasTFGpYfuHHHxTi8G8X6GtX+OK0H9f45FK08lFqzDqp1bYyAAt9NR2mZAnS15TnggMg8ecGuSI1ukVLlA8=
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Para resolver se conecte ao node onde está rodando a VM na qual que deseja migrar e rode o seguinte comando:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/usr/bin/ssh -e none -o &#39;HostKeyAlias=node_name root@node_ip /bin/true

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Substitua &lt;strong&gt;node_name&lt;/strong&gt; e &lt;strong&gt;node_ip&lt;/strong&gt; pelos valores corretos e aceite a fingerprint. Depois disso tente rodar a migração novamente, você vai ver que ela voltará a funcionar :)Não conseguiu resolver? Quer saber mais de ProxMox? [s]Guto&lt;/p&gt;
&lt;hr&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Monitoramento Externo</title>
      <link>https://archives.gutocarvalho.net/post/monitoramento-externo/</link>
      <pubDate>Mon, 13 Apr 2020 14:55:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/monitoramento-externo/</guid>
      <description>&lt;p&gt;Fala galerinha, tudo bacana?&lt;/p&gt;
&lt;p&gt;Hoje o Tio Guto trouxe algumas dicas de monitoramento.&lt;/p&gt;
&lt;p&gt;Bom, muita gente da minha geração curte o &lt;strong&gt;Zabbix&lt;/strong&gt;, &lt;strong&gt;Nagios&lt;/strong&gt;, &lt;strong&gt;Monit&lt;/strong&gt; e outras ferramentas que podemos instalar &amp;ldquo;&lt;em&gt;&lt;strong&gt;in house&lt;/strong&gt;&lt;/em&gt;&amp;rdquo;. São ferramentas fantásticas, fazem o que se propõe e quando bem utilizadas se integram perfeitamente em nossa stack e aos nossos procedimentos de automação.&lt;/p&gt;
&lt;p&gt;Vale lembrar que o foco dessas ferramentas é a Infraestrutura, então podemos dizer que elas nos dão a visão da &amp;ldquo;&lt;em&gt;Infraestrutura pela Infraestrutura&lt;/em&gt;&amp;rdquo;.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Ixe, Infraestrutrua pela Infraestrutura? Agora complicou hein...

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Nem tanto, vamos entender isso.&lt;/p&gt;
&lt;p&gt;Apesar de serem ferramentas de monitoramento, elas nos dão um monitoramento do ponto de vista interno na maioria dos casos, e as vezes até mesmo do ponto de vista externo – geralmente partindo de um local/ip &amp;ldquo;conhecido&amp;rdquo; e &amp;ldquo;seguro&amp;rdquo;, o famoso monitoramento via &lt;em&gt;caminho feliz&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Entenda, é um monitoramento válido e importante, mas pode ocorrer aquela situação de o Monitoramento estar todo &amp;ldquo;&lt;em&gt;Ok&lt;/em&gt;&amp;rdquo; ou &amp;ldquo;&lt;em&gt;Green&lt;/em&gt;&amp;rdquo; e alguém te mandar um ZAP assim:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;quot;Hey, você viu que seus sites estão fora?&amp;quot;

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;E você vai falar:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;quot;What, WTF?&amp;quot;

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;É acontece né&amp;hellip;. mas porquê isso acontece?&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Por que nós não temos uma visão de fora realmente confiável.

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Para a gente ter uma visão de fora – exercitando a experiência do usuário, precisamos utilizar alguma ferramenta que nos dê esse ponto de vista diferenciado. Essa ferramenta precisa nos responder algumas coisas, entre elas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Uma conexão externa vê meu site/serviços corretamente?&lt;/li&gt;
&lt;li&gt;Qual a tempo médio de carregamento de meus sites e serviços?&lt;/li&gt;
&lt;li&gt;Qual a taxa de disponibilidade destes sites/serviços?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;São perguntas simples e não valem o esforço ficar espalhando agentes de alguma ferramenta, ou então proxys Zabbix – por exemplo – em várias regiões da Amazon/Azure/GCP.&lt;/p&gt;
&lt;p&gt;Então, Como eu posso resolver isso rápido e com baixo custo?&lt;/p&gt;
&lt;p&gt;A resposta é SaaS!&lt;/p&gt;
&lt;p&gt;Temos vários sistemas de monitoramento SaaS bem bacanas, em especial eu trouxe 2 serviços bem práticos e gratuitos que fazem esse trabalho sem custo pra gente, vamos a eles:&lt;/p&gt;
&lt;h3 id=&#34;uptimerobotcom&#34;&gt;Uptimerobot.com&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;50 alertas&lt;/li&gt;
&lt;li&gt;Gráficos de SLA&lt;/li&gt;
&lt;li&gt;Intervalos de 5 minutos&lt;/li&gt;
&lt;li&gt;Checagens: HTTTP, HTTPS, TCP, UDP, PING&lt;/li&gt;
&lt;li&gt;Integrações diversas (email, telegram, twitter, slack, etc.)&lt;/li&gt;
&lt;li&gt;Status Pages Diversas&lt;/li&gt;
&lt;li&gt;API ( &lt;a href=&#34;https://uptimerobot.com/api&#34;&gt;https://uptimerobot.com/api&lt;/a&gt; )&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;statuscake&#34;&gt;StatusCake&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;10 alertas&lt;/li&gt;
&lt;li&gt;1 Check Speedtest a cada 24 horas&lt;/li&gt;
&lt;li&gt;Gráficos de SLA&lt;/li&gt;
&lt;li&gt;Intervalos de 5 minutos nos alertas&lt;/li&gt;
&lt;li&gt;Checagens: HTTTP, HTTPS, DNS, SMTP, SSH, TCP, UDP, PING, PUSH&lt;/li&gt;
&lt;li&gt;Integrações diversas (email, telegram, twitter, slack, etc.)&lt;/li&gt;
&lt;li&gt;1 Status Page&lt;/li&gt;
&lt;li&gt;API ( &lt;a href=&#34;https://www.statuscake.com/api&#34;&gt;https://www.statuscake.com/api&lt;/a&gt; )&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;conclusão&#34;&gt;Conclusão&lt;/h2&gt;
&lt;p&gt;Ambas são excelentes, eu já tenho bastante intimidade com o UptimeRobot, uso há alguns anos, me dou bem especialmente com sua API, contudo, o StatusCake tem provado ser uma boa alternativa.&lt;/p&gt;
&lt;p&gt;Ambas ferramentas nos planos pagos oferecem uma gama de recursos extras como SSL Check, relatórios mais detalhados, janela de manutenção, monitoramento de domínios, alertas personalizados com sua logo e muito mais.&lt;/p&gt;
&lt;p&gt;Se você tem budget para queimar, manda ver e assina as ferramentas, se não tem dá para se virar bem com as versões &amp;ldquo;free tier&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Tá esperando oq? Vai lá conhecer!&lt;/p&gt;
&lt;h2 id=&#34;dica-da-dica&#34;&gt;Dica da dica&lt;/h2&gt;
&lt;p&gt;Uma boa ferramenta para automar os dois em sua infraestrutura – colocando tudo junto com o provisionamento de sites ou deployment – é o tronitor, conheça o projeto, recomendo.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/christronyxyocum/tronitor&#34;&gt;https://github.com/christronyxyocum/tronitor&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]Guto&lt;/p&gt;
&lt;hr&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meu site está no ar?</title>
      <link>https://archives.gutocarvalho.net/post/meu-site-esta-no-ar/</link>
      <pubDate>Mon, 13 Apr 2020 13:30:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/meu-site-esta-no-ar/</guid>
      <description>&lt;p&gt;Continuando a linha de posts de monitoramento, descobri uma ferramenta bacana para validar isto em mais de 40 localidades diferentes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.uptrends.com/tools/uptime&#34;&gt;https://www.uptrends.com/tools/uptime&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Basta acessar o uptrends, colocar só URL desejada e aguardar a validação.&lt;/p&gt;
&lt;figure&gt;&lt;img src=&#34;__GHOST_URL__/blog/content/images/2020/04/Screen-Shot-2020-04-13-at-09.47.39.png&#34;/&gt;
&lt;/figure&gt;

&lt;p&gt;É isso, site validado!Bom né? Eu gostei.&lt;/p&gt;
&lt;p&gt;[s]Guto&lt;/p&gt;
&lt;hr&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Ajudando o Folding@Home</title>
      <link>https://archives.gutocarvalho.net/post/folding-home-covid-19/</link>
      <pubDate>Sun, 12 Apr 2020 23:07:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/folding-home-covid-19/</guid>
      <description>&lt;p&gt;E aê galerinha, tudo na paz?Passando para dar uma dica bacana.Sabia que você pode ajudar no combate ao COVID-19 ou SARS2-nCoV-2?Sim, você pode!Sabe aquele monte de VMs que você tem rodando em sua organização?Das quais você não usa quase nada de processamento das 00 às 06 da manhã?Que tal colocar esse processamento ocioso para ajudar a combater o Covid-19?Existe um projeto chamado Folding@Home, bem antigo – criado nos anos 2000. Esse projeto é utilizado para combinar o processamento de milhões de computadores ao redor do mundo.Isso mesmo, ele combina a capacidade de processamento de todos os computadores conectados ao projeto. E o melhor, ele faz isso quando seu computador está ocioso, você nem vai perceber.O projeto de computação distribuída foi criado em Outubro de 2000 com o objetivo de realizar simulações moleculares de proteínas, mapeando seu funcionamento. Esse trabalho é essencial para a compreensão de doenças como Cancer, Alzheimer, Huntingtons, Parkisons dentre outras doenças.No momento os esforços principais estão voltados para mapear o funcionamento da proteína do COVID-19 ou também conhecida como SARS2-nCoV-2. Ao entender o funcionando da proteína os cientistas podem criar meios de inibir seu contágio.E ai, bora compartilhar processadores?Entra aí e faz o download e instale o agente.- &lt;a href=&#34;https://foldingathome.org/start-folding/&#34;&gt;https://foldingathome.org/start-folding/&lt;/a&gt;Use o ID abaixo, ele é do grupo covid-19-br- 246420Veja status dos grupos disponíveis em :- &lt;a href=&#34;https://stats.foldingathome.org/team/246420&#34;&gt;https://stats.foldingathome.org/team/246420&lt;/a&gt;Pode marcar todas as doenças pois o COVID-19 está com prioridade de processamento.Ao configurar seu cliente defina para uso processamento apenas quando seu computador estiver em Idle.Use sempre o navegador para gerenciar o agente através da URL- &lt;a href=&#34;http://client.foldingathome.orgO&#34;&gt;http://client.foldingathome.org&lt;/a&gt;O esquema de times é uma gamificação do Folding@Home , se quiser saber mais sobre como montar o time e começar a disputar veja os detalhes no site.Ajude se puder! :)[s]Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Consultoria presencial em Brasília e região</title>
      <link>https://archives.gutocarvalho.net/post/2019-04-16-consultoria-bsb/</link>
      <pubDate>Tue, 16 Apr 2019 07:56:15 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2019-04-16-consultoria-bsb/</guid>
      <description>&lt;p&gt;Pessoal como informei no último post, estou retornando ao mercado de BSB como consultor, portanto, estou a disposição para novos desafios e projetos, segue abaixo alguns dos serviços que estou executando para empresas da região:&lt;/p&gt;
&lt;p&gt;Atividades técnicas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Consultoria sobre DevOps, Infra as Code, Containers, Cloud;&lt;/li&gt;
&lt;li&gt;Implantação de ambientes Puppet, GitLab, Nexus, MatterMost, Jenkins, Rancher, ProxMox;&lt;/li&gt;
&lt;li&gt;Automação de serviços e sistemas com Puppet, Ansible e Gitlab CI;&lt;/li&gt;
&lt;li&gt;Migração de aplicação para containers;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Atividades de capacitação:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Treinamentos sob medida para clientes nos temas DevOps, Infra As Code, Git/GitLab, CI/CD, Containers, Puppet;&lt;/li&gt;
&lt;li&gt;Workshops sob medida nos temas DevOps, Infra As Code, Git/GitLab, CI/CD, Containers;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Atividades voltadas a comercial e pré-vendas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Elaboração de especificação técnica de projetos CI/CD e DevOps;&lt;/li&gt;
&lt;li&gt;Elaboração de apresentações/slides e defesas de projetos em seus clientes;&lt;/li&gt;
&lt;li&gt;Acompanhamento de visitas a clientes para análise e definições técnicas;&lt;/li&gt;
&lt;li&gt;Análise de RFPs e elaboração de proposta técnica a partir destes documentos;&lt;/li&gt;
&lt;li&gt;Análise de TRs e elaboração de proposta técnica a partir destes documentos;&lt;/li&gt;
&lt;li&gt;Sugestão e redação de proposta especificação técnica para TRs.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Todos os serviços também podem ser executados remotamente.&lt;/p&gt;
&lt;p&gt;Mais informações sobre meus skills, projetos e experiência em:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/page/curriculo/&#34;&gt;http://gutocarvalho.net/page/curriculo/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Rebootando a vida :)</title>
      <link>https://archives.gutocarvalho.net/post/2019-04-15-life-reboot/</link>
      <pubDate>Mon, 15 Apr 2019 14:45:15 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2019-04-15-life-reboot/</guid>
      <description>&lt;p&gt;Bom pessoal, estou aqui aproveitando para retomar o blog e tirar algumas teias de aranha do site ;)&lt;/p&gt;
&lt;p&gt;Vamos começar com a grande novidade de 2019.&lt;/p&gt;
&lt;p&gt;Depois de quase 5 anos me aventurando como empreendedor, trabalhando nos mais diversos clientes e projetos, neste ano retomo a vida de consultor em Brasília. Em resumo, eu não sou mais sócio e nem faço mais parte do corpo técnico da empresa Instruct.com.br.&lt;/p&gt;
&lt;p&gt;Em 2019 estou fazendo um verdadeiro reboot em minha vida profissional e pessoal. A partir de agora atuo como consultor independente em Brasília ajudando empresas e governo a adotar a cultura DevOPs, CI/CD e Infra as Code.&lt;/p&gt;
&lt;p&gt;Estou na pista, se você precisa de consultoria, projetos, capacitação, treinamentos ou workshops nestas áreas entre em contato ;)&lt;/p&gt;
&lt;p&gt;Estou também retomando a minha participação em comunidades opensource, devops, infra as code, docker, dentre outras. E quero o quanto antes retomar os meetups e eventos DevOps em Brasília.&lt;/p&gt;
&lt;p&gt;A experiência de fazer parte da organização de dois DevOpsDays em BSB (2016 e 2017) foi muito boa, em 2019 eu quero agitar essa cidade mais uma vez, reunindo nossa comunidade para mais uma sessão de compartilhamento de conhecimento.&lt;/p&gt;
&lt;p&gt;Sobre eventos em breve trarei novidades quentinhas para vocês de BSB e região.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Modulos do forge atualizados</title>
      <link>https://archives.gutocarvalho.net/post/2017-09-26-modulos-forge-atualizados/</link>
      <pubDate>Tue, 26 Sep 2017 10:03:33 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2017-09-26-modulos-forge-atualizados/</guid>
      <description>&lt;p&gt;Atualizei meus módulos no Puppet Forge :)&lt;/p&gt;
&lt;h3 id=&#34;1-puppet-agent&#34;&gt;1. Puppet Agent&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://forge.puppet.com/gutocarvalho/puppetagent&#34;&gt;https://forge.puppet.com/gutocarvalho/puppetagent&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nova versão do módulo 1.2.0.&lt;/p&gt;
&lt;p&gt;Testado e homologado com puppet 5.2.&lt;/p&gt;
&lt;p&gt;Adicionei suporte ao CentOS 5 e Debian 9.&lt;/p&gt;
&lt;h3 id=&#34;2-puppet-server&#34;&gt;2. Puppet Server&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://forge.puppet.com/gutocarvalho/puppetserver&#34;&gt;https://forge.puppet.com/gutocarvalho/puppetserver&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nova versão do módulo 1.2.0.&lt;/p&gt;
&lt;p&gt;Testado e homologado com puppetserver 5.1, puppetdb 5.1 e puppet agent 5.2.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Novas boxes vagrant com puppet 5.2 e puppetserver 5.1</title>
      <link>https://archives.gutocarvalho.net/post/2017-09-25-novas-boxes-puppet52-puppetserver51/</link>
      <pubDate>Mon, 25 Sep 2017 11:39:57 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2017-09-25-novas-boxes-puppet52-puppetserver51/</guid>
      <description>&lt;p&gt;Novas boxes lançadas com Puppet 5.2!&lt;/p&gt;
&lt;p&gt;Todas as boxes estão com pacotes atualizados até o dia 24 de Setembro, foram construídas a partir da ISO &lt;code&gt;netinstall&lt;/code&gt; e vem com os seguintes pacotes instalados:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;git&lt;/li&gt;
&lt;li&gt;vim-enhanced&lt;/li&gt;
&lt;li&gt;wget&lt;/li&gt;
&lt;li&gt;rsync&lt;/li&gt;
&lt;li&gt;screen&lt;/li&gt;
&lt;li&gt;bind-utils&lt;/li&gt;
&lt;li&gt;nc&lt;/li&gt;
&lt;li&gt;telnet&lt;/li&gt;
&lt;li&gt;puppet-agent&lt;/li&gt;
&lt;li&gt;elinks&lt;/li&gt;
&lt;li&gt;lynx&lt;/li&gt;
&lt;li&gt;bzip2&lt;/li&gt;
&lt;li&gt;unzip&lt;/li&gt;
&lt;li&gt;tcpdump&lt;/li&gt;
&lt;li&gt;ccze&lt;/li&gt;
&lt;li&gt;htop&lt;/li&gt;
&lt;li&gt;traceroute&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;h2 id=&#34;boxes-puppet-server-51&#34;&gt;Boxes Puppet server 5.1&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CentOS 7&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppetserver5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppetserver5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;boxes-puppet-agent-52&#34;&gt;Boxes Puppet agent 5.2&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Debian 9&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/debian9x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/debian9x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Debian 8&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/debian8x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/debian8x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Debian 7&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/debian7x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/debian7x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CentOS 7&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CentOS 6&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CentOS 5&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ubuntu 16.04&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1604x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1604x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ubuntu 14.04&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1404x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1404x64puppet5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Novas boxes com Puppet 5 e mais</title>
      <link>https://archives.gutocarvalho.net/post/2017-07-01-novas-boxes-puppet5/</link>
      <pubDate>Sat, 01 Jul 2017 21:26:07 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2017-07-01-novas-boxes-puppet5/</guid>
      <description>&lt;h2 id=&#34;vagrant-boxes-with-puppet-5&#34;&gt;Vagrant boxes with Puppet 5&lt;/h2&gt;
&lt;p&gt;Boxes com Puppet 5.0.0 instalado, prontas para fazer quaisquer tipos de testes e desenvolvimento.&lt;/p&gt;
&lt;h3 id=&#34;centos&#34;&gt;CentOS&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos6x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos6x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;scientific&#34;&gt;Scientific&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/scientific7x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/scientific7x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/scientific6x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/scientific6x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;debian&#34;&gt;Debian&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/debian7x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/debian7x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/debian8x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/debian8x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ubuntu&#34;&gt;Ubuntu&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1404x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1404x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1604x64puppet5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1604x64puppet5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;nova-box-puppetserver-5&#34;&gt;Nova box Puppetserver 5&lt;/h3&gt;
&lt;p&gt;Se quiser fazer testes com o puppetserver 5.0.0, basta usar essa box.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppetserver5&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64puppetserver5&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;novas-boxes-com-puppet-4-latest&#34;&gt;Novas boxes com Puppet 4 Latest&lt;/h3&gt;
&lt;p&gt;Nem todos os OSes são compatíveis com Puppet 5, para aqueles que não são, fiz um update da box com a última versão disponível da série 4.10.x&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/debian6x64puppet4&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/debian6x64puppet4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos5x64puppet4&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos5x64puppet4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1204x64puppet4&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1204x64puppet4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;nova-box-gitlab-ce&#34;&gt;Nova box GitLab CE&lt;/h2&gt;
&lt;p&gt;Essa vem com o GitLab 9.3.3 instalado em um CentOS 7&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64gitlab&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64gitlab&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;novas-boxes-nocm&#34;&gt;Novas boxes NOCM&lt;/h2&gt;
&lt;p&gt;Essas boxes vem sem Puppet instalado&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64nocm&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/centos7x64nocm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1604x64nocm&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/ubuntu1604x64nocm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://app.vagrantup.com/gutocarvalho/boxes/debian8x64nocm&#34;&gt;https://app.vagrantup.com/gutocarvalho/boxes/debian8x64nocm&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Nova iniciativa infraascode.slack.com</title>
      <link>https://archives.gutocarvalho.net/post/2017-06-24-nova-iniciativa-slack-infraascode/</link>
      <pubDate>Sat, 24 Jun 2017 21:18:21 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2017-06-24-nova-iniciativa-slack-infraascode/</guid>
      <description>&lt;p&gt;Galera,&lt;/p&gt;
&lt;p&gt;Fiz um &lt;a href=&#34;http://gutocarvalho.net/hugo/2017/06/21/saindo-do-telegram/&#34;&gt;post&lt;/a&gt; recente dizendo que estou de saída do Telegram, detalhando as razões e os motivos que me levaram a tomar essa decisão.&lt;/p&gt;
&lt;p&gt;O fato é que eu não vou mais investir meu tempo &amp;ldquo;mantendo&amp;rdquo; as comunidades e grupos que eu criei no telegram.&lt;/p&gt;
&lt;p&gt;Estou descontinuando os seguintes grupos nas próximas semanas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;puppet-br&lt;/li&gt;
&lt;li&gt;ansible-br&lt;/li&gt;
&lt;li&gt;gitlab-br&lt;/li&gt;
&lt;li&gt;rancher-br&lt;/li&gt;
&lt;li&gt;elastic-br&lt;/li&gt;
&lt;li&gt;vagrant-br&lt;/li&gt;
&lt;li&gt;jenkins-br&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Portanto, venho aqui convidar o pessoal que participa destes grupos para esta nova plataforma, chama-se Slack. Lá teremos mais autonomia para gerir as comunidades de TI e mais segurança pois podemos ter vários owners — garantindo a continuidade da iniciativa — e vários admins ajudando a fomentar os temas e a cuidar de toda a comunidade.&lt;/p&gt;
&lt;p&gt;Não vamos perder nada, vamos na verdade ganhar mais recursos, integrações e controles.&lt;/p&gt;
&lt;p&gt;Quem quiser participar da nova iniciativa segue o link.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://join.slack.com/infraascode/shared_invite/MjAzMDM1NzEzOTIzLTE0OTgzNDc1MTItM2VmOTRkYjQ3Nw&#34;&gt;https://join.slack.com/infraascode/shared_invite/MjAzMDM1NzEzOTIzLTE0OTgzNDc1MTItM2VmOTRkYjQ3Nw&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A URL de nossa comunidade é:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;infraascode.slack.com
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A ideia é ter papo técnico, sem ideologia, alto nível, no estilo “show me the code”.&lt;/p&gt;
&lt;p&gt;O foco é Infra as Code ou Infraestrutura como código, todos os canais que forem criados sempre estarão relacionados com esse contexto.&lt;/p&gt;
&lt;p&gt;Queremos focar nas tecnologias e métodos em especial CI/CD, automação, gconf, orquestração, provisionamento, versionamento, etc.&lt;/p&gt;
&lt;p&gt;Queremos fomentar discussões, aprofundar nossos conhecimentos, produzir código, criar projetos opensource, gerar posts e artigos de referência para comunidade de TI no Brasil.&lt;/p&gt;
&lt;p&gt;Já temos os seguintes canais por lá:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ansible&lt;/li&gt;
&lt;li&gt;puppet&lt;/li&gt;
&lt;li&gt;git&lt;/li&gt;
&lt;li&gt;containers&lt;/li&gt;
&lt;li&gt;jenkins&lt;/li&gt;
&lt;li&gt;ci_cd&lt;/li&gt;
&lt;li&gt;python&lt;/li&gt;
&lt;li&gt;ruby&lt;/li&gt;
&lt;li&gt;terraform&lt;/li&gt;
&lt;li&gt;testing&lt;/li&gt;
&lt;li&gt;vagas&lt;/li&gt;
&lt;li&gt;vault&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Se quiser trazer sua comunidade venha pra cá, todos são bem vindos!&lt;/p&gt;
&lt;p&gt;Nos vemos lá.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Código de Conduta atualizado e ampliado</title>
      <link>https://archives.gutocarvalho.net/post/2017-06-23-codigo-de-conduta-ampliado/</link>
      <pubDate>Fri, 23 Jun 2017 10:29:14 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2017-06-23-codigo-de-conduta-ampliado/</guid>
      <description>&lt;p&gt;No dia 21 de Julho de 2016 eu decidi criar um código de conduta para servir de referência para algumas comunidades que eu estava mantendo no telegram. Eu queria proteger os usuários dos grupos, orientar e garantir um convívio sadio dentro dos grupos do telegram. Em especial, eu queria garantir que era um lugar de inclusão, sem assédio ou preconceitos.&lt;/p&gt;
&lt;p&gt;O código nasceu, recebeu muitas contribuições e ontem eu decidi ampliá-lo para que possa atender não só o Telegram, mais quaisquer comunidades de TI Brazucas que utilizam algum mecanismo de chat para se comunicar.&lt;/p&gt;
&lt;p&gt;O nome do grupo também mudou, antes era &amp;ldquo;telegram-it-groups&amp;rdquo;, agora é &amp;ldquo;brazil-it-groups&amp;rdquo;.&lt;/p&gt;
&lt;h2 id=&#34;coc-em-nova-url&#34;&gt;COC em Nova URL&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;https://github.com/brazil-it-groups/code-of-conduct
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Hoje temos cerca de 42 grupos no telegram que adotaram o código de conduta em suas comunidades. No Slack já temos 1 grupo:)&lt;/p&gt;
&lt;p&gt;Fico feliz em ter ajudado a melhorar o convívio de profissionais de TI, eu vou continuar mantendo esse projeto com muito carinho.&lt;/p&gt;
&lt;p&gt;Aceitamos contribuições, envie seu PR.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Saindo do telegram</title>
      <link>https://archives.gutocarvalho.net/post/2017-06-21-saindo_do_telegram/</link>
      <pubDate>Wed, 21 Jun 2017 15:43:34 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2017-06-21-saindo_do_telegram/</guid>
      <description>&lt;p&gt;Pessoas, informo que eu to saindo do telegram — por tempo indeterminado — pois a coisa está ficando caótica para gerir comunidades, cresceu além da conta, além da expectativa, está muito difícil administrar tudo.&lt;/p&gt;
&lt;p&gt;Hoje eu mantenho as seguinte comunidades no telegram:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;puppet-br&lt;/li&gt;
&lt;li&gt;vagrant-br&lt;/li&gt;
&lt;li&gt;elastic-br&lt;/li&gt;
&lt;li&gt;gitlab-br&lt;/li&gt;
&lt;li&gt;rancher-br&lt;/li&gt;
&lt;li&gt;ansible-br&lt;/li&gt;
&lt;li&gt;mac-users-br&lt;/li&gt;
&lt;li&gt;jenkins-br&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Apóio como admin nas seguintes comunidades:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker-br&lt;/li&gt;
&lt;li&gt;devops-br&lt;/li&gt;
&lt;li&gt;openshift-br&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;motivos&#34;&gt;Motivos&lt;/h2&gt;
&lt;p&gt;O Telegram não me permite separar contatos de grupos e pessoas, agrupar interesses, contextos, dentre outras funcionalidades que tem me deixado muito desconfortável.&lt;/p&gt;
&lt;p&gt;Além disto, recentemente o owner de um das maiores comunidades faleceu. Investigando aqui eu vi que simplesmente não tem como passar uma comunidade de uma pessoa pessoa para outra, não dá para ter um backup, um co-owner ou alguém que siga tocando o projeto criado por este amigo que nos deixou.&lt;/p&gt;
&lt;p&gt;Fora isso, integrações e recursos importantes, canais privados — de fato, videoconferência em grupo e outras coisas me fazem falta.&lt;/p&gt;
&lt;h2 id=&#34;atitudes&#34;&gt;Atitudes&lt;/h2&gt;
&lt;p&gt;Por equanto eu vou dar um tempo do telegram, estou estudando a melhor forma de gerir todas as essas comunidades fora do telegram, em um lugar que me ofereça os recursos que eu preciso.&lt;/p&gt;
&lt;p&gt;Em breve, quando tudo estiver pronto, soltarei outro post para convidar os interessados a participar de uma nova iniciativa, em uma nova plataforma.&lt;/p&gt;
&lt;p&gt;A entrada se dará por convites e apenas por convites, prezando manter o papo em alto nível, sem ideologia.&lt;/p&gt;
&lt;p&gt;O mesmo código de conduta de sempre — agora ampliado — será utilizado.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/brazil-it-groups/code-of-conduct&#34;&gt;https://github.com/brazil-it-groups/code-of-conduct&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;É isso, informei!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Novas boxes vagrant publicadas</title>
      <link>https://archives.gutocarvalho.net/post/2017-02-05-novas-boxes-vagrant/</link>
      <pubDate>Sun, 05 Feb 2017 11:48:39 -0200</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2017-02-05-novas-boxes-vagrant/</guid>
      <description>&lt;p&gt;Publiquei novas boxes vagrant em meu repositório do atlas, são elas GitLab-CE, Puppetserver e PCP.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Essas boxes foram criadas utilizando Packer 0.12.2, Virtualbox 5.14.1, Vagrant 1.9.0 e CentOS 7.3.1611.&lt;/p&gt;
&lt;h3 id=&#34;box-gitlab-ce-v100&#34;&gt;Box GitLab CE v1.0.0&lt;/h3&gt;
&lt;p&gt;Essa box é traz o GitLab CE instalado em um CentOS 7 para facilitar testes do GitLab.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64-gitlab-ce/versions/1.0.0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Versões:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CentOS 7.3.1611&lt;/li&gt;
&lt;li&gt;Puppet Agent 1.9.0&lt;/li&gt;
&lt;li&gt;GitLab CE 8.16.4&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para instalar a box digite o comando abaixo no terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add gutocarvalho/centos7x64-gitlab-ce
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um diretório para o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir gitlab-ce; cd gitlab-ce
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um arquivo Vagrantfile no diretorio com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; # -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.hostname = &amp;quot;gitlab.hacklab&amp;quot;
  config.vm.box = &amp;quot;gutocarvalho/centos7x64-gitlab-ce&amp;quot;
  config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.250.45&amp;quot;
  config.vm.provider &amp;quot;virtualbox&amp;quot; do |virtualbox|
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;2&amp;quot; ]
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;2048&amp;quot; ]
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Suba a vm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois que a VM subir acesse o endereço e siga as instruções.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://192.168.250.45 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Info sobre o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/packer-centos-gitlab-ce
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;box-puppetserver-v200&#34;&gt;Box PuppetServer v2.0.0&lt;/h3&gt;
&lt;p&gt;Essa box é traz o Puppet Server 2.7 instalado em um CentOS 7 para facilitar testes do Puppet e Puppetserver.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64-puppetserver/versions/2.0.0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Versões:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CentOS 7.3.1611&lt;/li&gt;
&lt;li&gt;Puppet Server 2.7.2&lt;/li&gt;
&lt;li&gt;Puppet Agent 1.9.0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para instalar a box digite o comando abaixo no terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add gutocarvalho/centos7x64-puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um diretório para o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir puppetserver; cd puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um arquivo Vagrantfile no diretorio com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.hostname = &amp;quot;puppetserver.hacklab&amp;quot;
  config.vm.box = &amp;quot;gutocarvalho/centos7x64-puppetserver&amp;quot;
  config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.250.46&amp;quot;
  config.vm.provider &amp;quot;virtualbox&amp;quot; do |virtualbox|
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;2&amp;quot; ]
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;4096&amp;quot; ]
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Info sobre o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/packer-centos7-puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;box-pcp-v300&#34;&gt;Box PCP v3.0.0&lt;/h3&gt;
&lt;p&gt;Essa box contém o projeto PCP que traz uma implementação completa do Puppet 4 com todos os serviços integrados.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64-pcp/versions/3.0.0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Versões:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CentOS 7.3.1611&lt;/li&gt;
&lt;li&gt;Puppet Server 2.7.2&lt;/li&gt;
&lt;li&gt;Puppet Agent 1.9.0&lt;/li&gt;
&lt;li&gt;Mcollective 2.10.0&lt;/li&gt;
&lt;li&gt;Hiera 3.3.0&lt;/li&gt;
&lt;li&gt;Facter 3.6.0&lt;/li&gt;
&lt;li&gt;PuppetDB 4.2.4&lt;/li&gt;
&lt;li&gt;PostgreSQL 9.5.5&lt;/li&gt;
&lt;li&gt;Puppet Explorer 2.0.0&lt;/li&gt;
&lt;li&gt;Puppet Board 0.2.0&lt;/li&gt;
&lt;li&gt;ActiveMQ 5.14.0&lt;/li&gt;
&lt;li&gt;R10k 2.5.2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para instalar a box digite o comando abaixo no terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add gutocarvalho/centos7x64-pcp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um diretório para o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir pcp; cd pcp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um arquivo Vagrantfile no diretorio com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|


  if Vagrant.has_plugin?(&amp;quot;vagrant-hosts&amp;quot;)
    config.vm.provision :hosts do |provisioner|
      provisioner.add_localhost_hostnames = false
      provisioner.autoconfigure = true
      provisioner.sync_hosts = true
      provisioner.add_host &#39;192.168.250.35&#39;, [&#39;puppet&#39;]
      provisioner.add_host &#39;192.168.250.35&#39;, [&#39;puppetdb&#39;]
    end
  end

  config.vm.box = &amp;quot;gutocarvalho/centos7x64-pcp&amp;quot;

  # puppet server + puppet agent
  config.vm.define &amp;quot;puppetserver&amp;quot; do |puppetserver|
    puppetserver.vm.hostname = &amp;quot;puppet-pcpm.hacklab&amp;quot;
    puppetserver.vm.network :private_network, ip: &amp;quot;192.168.250.35&amp;quot;
    puppetserver.hostsupdater.aliases = [&amp;quot;puppetboard.hacklab&amp;quot;, &amp;quot;puppetexplorer.hacklab&amp;quot;]
    puppetserver.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
      v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;2&amp;quot; ]
      v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;6144&amp;quot; ]
      v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--name&amp;quot;, &amp;quot;puppet-pcpm.hacklab&amp;quot; ]
    end
  end

end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Instale os seguintes plugins&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant plugin install vagrant-hosts
vagrant plugin install vagrant-hostsupdater
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a vm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Info sobre o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/packer-centos-pcp
https://gitlab.com/puppet-br/pcp
https://gitlab.com/puppet-br/pcp-controlrepo
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet em Sampa no dia 29 de Setembro</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-24-meetup-puppet-sp-29-set/</link>
      <pubDate>Sat, 24 Sep 2016 16:17:29 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-24-meetup-puppet-sp-29-set/</guid>
      <description>&lt;p&gt;Faça sua inscrição!&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.meetup.com/pt-BR/puppet-br/events/232969711/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos conversar sobre DevOps, Infra as Code, Infra Ágil, Puppet e tecnologias como GitLab, Docker e Rancher.&lt;/p&gt;
&lt;p&gt;Será um encontro informal no formato Q/A, alguém lança uma pergunta para que os presentes respondam. Vale puxar o notebook, carregar site, demo, hands on, a ideia é ter um bate-papo descontraído sobre esses assuntos.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Nova Vagrant BOX com CentOS 7.2.1511 e GitLab CE 8.12.0</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-24-vagrant-box-gitlab-812/</link>
      <pubDate>Sat, 24 Sep 2016 11:07:06 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-24-vagrant-box-gitlab-812/</guid>
      <description>&lt;p&gt;Divulgando nova box CentOS 7.2 com GitLab CE 8.12.0 no atlas. Agora fica mais fácil testar a última versão do Gitlab com o menor esforço possível :)&lt;/p&gt;
&lt;h2 id=&#34;1-instalando-a-box&#34;&gt;1. Instalando a box&lt;/h2&gt;
&lt;p&gt;Se você usa vagrant 1.8.x para fazer download da box digite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add gutocarvalho/centos7x64-gitlab-ce
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um diretório para o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir centos7-gitlab-ce; cd centos7-gitlab-ce
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um arquivo Vagrantfile no diretorio com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.hostname = &amp;quot;gitlab.hacklab&amp;quot;
  config.vm.box = &amp;quot;gutocarvalho/centos7x64-gitlab-ce&amp;quot;
  config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.250.44&amp;quot;
  config.vm.provider &amp;quot;virtualbox&amp;quot; do |virtualbox|
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;2048&amp;quot; ]
    virtualbox.gui = true
  end
  if Vagrant.has_plugin?(&amp;quot;vagrant-cachier&amp;quot;)
    config.cache.scope = :box
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Inicie o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a vm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse o GitLab&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://192.168.250.44   
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-refs&#34;&gt;2. Refs&lt;/h2&gt;
&lt;p&gt;Para acessar a box no atlas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64-gitlab-ce   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O repo git com o código para build da box&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/packer-centos-gitlab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É isso, divirta-se.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vagrant 1.8.5 ssh retrying bugfix</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-24-vagrant-185-ssh-retrying-bugfix/</link>
      <pubDate>Sat, 24 Sep 2016 10:31:29 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-24-vagrant-185-ssh-retrying-bugfix/</guid>
      <description>&lt;p&gt;O Vagrant 1.8.5 tem um bug crítico em guests linux, o vagrant simplesmente não consegue terminar o vagrant up por causa de um bug na geração do arquivo authorized_keys que contém as chaves permitidas para acesso ssh por chaves no guest. O problema é que o vagrant está gerando o arquivo com a permissão errada e o subsistema ssh — neste casos — ignora o arquivo por questões de segurança.&lt;/p&gt;
&lt;p&gt;Você provavelmente está tendo uma saíde similar após atualizar para o 1.8.5&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;centos: Waiting for machine to boot. This may take a few minutes...
    centos: SSH address: 127.0.0.1:2222
    centos: SSH username: vagrant
    centos: SSH auth method: private key
    centos: Warning: Remote connection disconnect. Retrying...
    centos:
    centos: Vagrant insecure key detected. Vagrant will automatically replace
    centos: this with a newly generated keypair for better security.
    centos:
    centos: Inserting generated public key within guest...
    centos: Removing insecure key from the guest if it&#39;s present...
    centos: Key inserted! Disconnecting and reconnecting using new SSH key...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...
    centos: Warning: Authentication failure. Retrying...

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A solução é simples edite o arquivo public_key.rb&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/opt/vagrant/embedded/gems/gems/vagrant-1.8.5/plugins/guests/linux/cap/public_key.rb    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Procure a linha&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mv ~/.ssh/authorized_keys.tmp ~/.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione abaixo dela&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod 0600 ~/.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Salve, e suba a VM novamente, isso deve resolver o problema.&lt;/p&gt;
&lt;h2 id=&#34;refs&#34;&gt;Refs&lt;/h2&gt;
&lt;p&gt;No vagrant 1.8.6 isto estará resolvido, mais info sobre o bug abaixo&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/mitchellh/vagrant/issues/7610&#34;&gt;https://github.com/mitchellh/vagrant/issues/7610&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Rsync Unicode entre Mac e Linux</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-21-rsync-utf8-mac-linux/</link>
      <pubDate>Wed, 21 Sep 2016 19:37:56 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-21-rsync-utf8-mac-linux/</guid>
      <description>&lt;h2 id=&#34;o-problema&#34;&gt;O problema&lt;/h2&gt;
&lt;p&gt;Case você use MacOS para trabalhar — com é o meu caso, e também para publicar sites em servidores Linux utilizando rsync, tenho uma dica preciosa para vocês.&lt;/p&gt;
&lt;p&gt;Há alguns meses eu criei um novo blog utilizando Hugo, neste blog quando eu criava posts com palavras com acento eu percebia que o link no site quebrava após a cópia para o servidor linux. Inicialmente eu achei que era um problema no Apache HTTPd, eu até setei default chartset e nada de resolver, estava quase jogando a toalha quando resolvi usar o Google de verdade, após alguma pesquisa entendi o problema.&lt;/p&gt;
&lt;p&gt;No FAQ ( &lt;a href=&#34;https://rsync.samba.org/FAQ.html&#34;&gt;https://rsync.samba.org/FAQ.html&lt;/a&gt; ) do projeto RSYNC já tem a dica de como resolver isso, mas é um pouco obscuro de entender.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;rsync recopies the same files

Some people occasionally report that rsync copies too many files when they expect it to copy only a few. In most cases the explanation is that you forgot to include the --times (-t) option in the original copy, so rsync is forced to (efficiently) transfer every file that differs in its modified time to discover what data (if any) has changed.

Another common cause involves sending files to an Microsoft filesystem: if the file&#39;s modified time is an odd value but the receiving filesystem can only store even values, then rsync will re-transfer too many files. You can avoid this by specifying the --modify-window=1 option.

Yet another periodic case can happen when daylight-savings time changes if your OS+filesystem saves file times in local time instead of UTC. For a full explanation of this and some suggestions on how to avoid them problem, see this document.

Something else that can trip up rsync is a filesystem changeing the filename behind the scenes. This can happen when a filesystem changes an all-uppercase name into lowercase, or when it decomposes UTF-8 behind your back.

An example of the latter can occur with HFS+ on Mac OS X: if you copy a directory with a file that has a UTF-8 character sequence in it, say a 2-byte umlaut-u (\0303\0274), the file will get that character stored by the filesystem using 3 bytes (\0165\0314\0210), and rsync will not know that these differing filenames are the same file (it will, in fact, remove a prior copy of the file if --delete is enabled, and then recreate it).

You can avoid a charset problem by passing an appropriate --iconv option to rsync that tells it what character-set the source files are, and what character-set the destination files get stored in. For instance, the above Mac OS X problem would be dealt with by using --iconv=UTF-8,UTF8-MAC (UTF8-MAC is a pseudo-charset recognized by Mac OS X iconv in which all characters are decomposed).

If you think that rsync is copying too many files, look at the itemized output (-i) to see why rsync is doing the update (e.g. the &#39;t&#39; flag indicates that the time differs, or all pluses indicates that rsync thinks the file doesn&#39;t exist). You can also look at the stats produced with -v and see if rsync is really sending all the data. See also the --checksum (-c) option for one way to avoid the extra copying of files that don&#39;t have synchronized modified times (but keep in mind that the -c option eats lots of disk I/O, and can be rather slow).
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Em resumo, quando você copia um arquivo do MacOS que usa sistema de arquivos HFS+ para um sistema linux há um problema pois o MacOS usa Unicode do tipo NFD enquanto o Linux usa Unicode do tipo NFC, com isso, dependendo do nome do arquivo, o Linux pode não reconhecer, em especial no meu caso em que um arquivo HTML possuia caracteres especiais.&lt;/p&gt;
&lt;h2 id=&#34;como-resolver&#34;&gt;Como resolver?&lt;/h2&gt;
&lt;p&gt;Eu copiava os arquivos dessa forma entre meu mac e o servidor linux&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rsync -avz --stats --progress --delete /Mac/origem/* usuario@fqdn:/Linux/destino/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O segredo é acrescentar alguns parametros de conversão ao comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;--iconv=utf-8-mac,utf-8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O comando final ficará assim&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rsync -avz --stats --progress --delete --iconv=utf-8-mac,utf-8 /Mac/origem/* usuario@fqdn:/Linux/destino/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com isso meus arquivos são convertidos e transferidos corretamente.&lt;/p&gt;
&lt;p&gt;Agora posso usar acento nos títulos dos posts sem receio de quebrar os links.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Inscreva-se no DevOpsDays Brasília</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-20-devopsdays-brasilia-inscricoes-abertas/</link>
      <pubDate>Tue, 20 Sep 2016 07:08:29 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-20-devopsdays-brasilia-inscricoes-abertas/</guid>
      <description>&lt;p&gt;É isto mesmo que você leu, vai ter DevOpsDays em Brasília e as inscrições para o evento já estão abertas, são apenas 280 vagas a venda, não perca a oportunidade de participar do evento que criou o termo &amp;ldquo;devops&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Site do evento&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://brasilia.devopsdays.com.br
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agenda no site devopsdays.org&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.devopsdays.org/events/2016-brasilia/welcome/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queira palestrar no evento o CFP também está aberto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://brasilia.devopsdays.com.br/about/cfp/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Site para inscrições (eventize)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://brasilia.devopsdays.com.br/post/registration_open/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Use o código &lt;strong&gt;DC61975969&lt;/strong&gt; para ganhar 20% de desconto na inscrição (Early Bird), esse desconto é limitado, aproveite!&lt;/p&gt;
&lt;h2 id=&#34;o-que-é-o-devopsdays&#34;&gt;O que é o DevOpsDays?&lt;/h2&gt;
&lt;p&gt;O DevOpsDays Brasília, associado e reconhecido pelo DevOpsDays.org, tem como objetivo reunir os interessados no assunto DevOps através da apresentação de palestras, painéis, minicursos e outras atividades. Considerando o aumento do interesse no desenvolvimento de software e cultura Ágil no Brasil, acreditamos que falar sobre DevOps é uma necessidade. O DevOpsDays Brasília 2016 vem preencher essa lacuna, uma vez que esse assunto ainda não foi tratado de forma sistemática em um evento próprio, mesmo com a atual e crescente demanda no Brasil. Pretendemos para esse evento convidar profissionais de empresas e organizações conhecidas no cenário de tecnologia da informação, para assim motivar a ampla participação, não somente de pessoas que já conhecem a cultura DevOps, mas também despertar o interesse daqueles que ainda não conhecem.&lt;/p&gt;
&lt;p&gt;Nos vemos lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Box vagrant para projeto PCP</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-18-projeto-pcp-box-atlas/</link>
      <pubDate>Sun, 18 Sep 2016 20:51:42 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-18-projeto-pcp-box-atlas/</guid>
      <description>&lt;p&gt;Criei uma box vagrant para facilitar o uso do PCP.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64-pcp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Essa box contém o PCP com os pacotes nas seguintes versões&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pupper Agent 4.6.2&lt;/li&gt;
&lt;li&gt;Mcollective 2.9.0&lt;/li&gt;
&lt;li&gt;Hiera 3.2.1&lt;/li&gt;
&lt;li&gt;Facter 3.4.1&lt;/li&gt;
&lt;li&gt;Puppet Server 2.6.0&lt;/li&gt;
&lt;li&gt;PuppetDB 4.2.2&lt;/li&gt;
&lt;li&gt;R10k 2.4.3&lt;/li&gt;
&lt;li&gt;PostgreSQL 9.5.4&lt;/li&gt;
&lt;li&gt;PuppetBoard 0.2.0&lt;/li&gt;
&lt;li&gt;ActiveMQ 5.14.0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Recomendo usar o vagrant 1.8.4 e virtualbox 5.0.26.&lt;/p&gt;
&lt;h2 id=&#34;1-instalando-a-box&#34;&gt;1. Instalando a box&lt;/h2&gt;
&lt;p&gt;Para instalar a box digite o comando abaixo no terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add gutocarvalho/centos7x64-pcp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um diretório para o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir pcp; cd pcp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um arquivo Vagrantfile no diretorio com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  if Vagrant.has_plugin?(&amp;quot;vagrant-hosts&amp;quot;)
    config.vm.provision :hosts do |provisioner|
      provisioner.add_localhost_hostnames = false
      provisioner.autoconfigure = true
      provisioner.sync_hosts = true
      provisioner.add_host &#39;192.168.250.35&#39;, [&#39;puppet&#39;]
      provisioner.add_host &#39;192.168.250.35&#39;, [&#39;puppetdb&#39;]
    end
  end

  config.vm.box = &amp;quot;centos7-pcp&amp;quot;

  # puppet community platform

  config.vm.define &amp;quot;puppetserver&amp;quot; do |puppetserver|
    puppetserver.vm.hostname = &amp;quot;puppet-pcpm.hacklab&amp;quot;
    puppetserver.vm.network :private_network, ip: &amp;quot;192.168.250.35&amp;quot;
    puppetserver.hostsupdater.aliases = [&amp;quot;puppetboard.hacklab&amp;quot;, &amp;quot;puppetexplorer.hacklab&amp;quot;]
    puppetserver.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
      v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;2&amp;quot; ]
      v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;3072&amp;quot; ]
      v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--name&amp;quot;, &amp;quot;puppet-pcpm.hacklab&amp;quot; ]
    end
  end

end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Instale os seguintes plugins&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant plugin install vagrant-hosts
vagrant plugin install vagrant-hostsupdater
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a vm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Divirta-se.&lt;/p&gt;
&lt;h2 id=&#34;2-refs&#34;&gt;2. refs&lt;/h2&gt;
&lt;p&gt;Box source&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gitlab.com/gutocarvalho/packer-centos-pcp&#34;&gt;https://gitlab.com/gutocarvalho/packer-centos-pcp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Project PCP&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gitlab.com/puppet-br/pcp&#34;&gt;https://gitlab.com/puppet-br/pcp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gitlab.com/puppet-br/pcp-controlrepo&#34;&gt;https://gitlab.com/puppet-br/pcp-controlrepo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Novo PCP liberado com muitas novidades</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-18-pcp-puppet-462-puppetserver260/</link>
      <pubDate>Sun, 18 Sep 2016 12:15:29 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-18-pcp-puppet-462-puppetserver260/</guid>
      <description>&lt;p&gt;O time do PCP acaba de finalizar uma atualização que traz as últimas versões de pacotes disponíveis.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pupper Agent 4.6.2&lt;/li&gt;
&lt;li&gt;Mcollective 2.9.0&lt;/li&gt;
&lt;li&gt;Hiera 3.2.1&lt;/li&gt;
&lt;li&gt;Facter 3.4.1&lt;/li&gt;
&lt;li&gt;Puppet Server 2.6.0&lt;/li&gt;
&lt;li&gt;PuppetDB 4.2.2&lt;/li&gt;
&lt;li&gt;R10k 2.4.3&lt;/li&gt;
&lt;li&gt;PostgreSQL 9.5.4&lt;/li&gt;
&lt;li&gt;PuppetBoard 0.2.0&lt;/li&gt;
&lt;li&gt;ActiveMQ 5.14.0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O PCP agora está de casa nova, a partir dessa versão estamos usando o GitLab.com como repositório.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gitlab.com/puppet-br/pcp&#34;&gt;https://gitlab.com/puppet-br/pcp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gitlab.com/puppet-br/pcp-controlrepo&#34;&gt;https://gitlab.com/puppet-br/pcp-controlrepo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Se tiver dúvidas entre na comunidade PCP no telegram&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://bit.ly/telegram-pcp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Divirta-se!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Nova box vagrant com Puppet Server 2.6.0 em CentOS 7</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-18-puppetserver-centos7-box-atlas/</link>
      <pubDate>Sun, 18 Sep 2016 12:08:56 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-18-puppetserver-centos7-box-atlas/</guid>
      <description>&lt;p&gt;Divulgando nova box CentOS 7.2 com Puppet 4.6.2 e Puppet Server 2.6.0 no atlas. Agora fica mais fácil testar a última versão do Puppet Server com o menor esforço possível :)&lt;/p&gt;
&lt;h2 id=&#34;1-instalando-a-box&#34;&gt;1. Instalando a box&lt;/h2&gt;
&lt;p&gt;Se você usa vagrant 1.8.x para fazer download da box digite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add gutocarvalho/centos7x64-puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um diretório para o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir centos7-puppetserver; cd centos7-puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie um arquivo Vagrantfile no diretorio com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.hostname = &amp;quot;puppetserver.hacklab&amp;quot;
  config.vm.box = &amp;quot;gutocarvalho/centos7x64-puppetserver&amp;quot;
  config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.250.47&amp;quot;
  config.vm.provider &amp;quot;virtualbox&amp;quot; do |virtualbox|
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
    virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;3072&amp;quot; ]
    virtualbox.gui = true
  end
  if Vagrant.has_plugin?(&amp;quot;vagrant-cachier&amp;quot;)
    config.cache.scope = :box
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Inicie o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a vm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-refs&#34;&gt;2. Refs&lt;/h2&gt;
&lt;p&gt;Para acessar dados da box&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64-puppetserver   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O repo git com o código para build da box&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/packer-centos7-puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É isso, divirta-se.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Criando instalador USB do MacOS Sierra</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-12-criando-instalador-usb-macos-sierra/</link>
      <pubDate>Mon, 12 Sep 2016 10:06:03 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-12-criando-instalador-usb-macos-sierra/</guid>
      <description>&lt;p&gt;Para quem leu o último artigo e ficou curioso sobre como criar um instalador do Sierra para o MacOS, segue um tutorial em pt_BR para te ajudar.&lt;/p&gt;
&lt;h2 id=&#34;requisitos&#34;&gt;Requisitos&lt;/h2&gt;
&lt;p&gt;É requisito desse tutorial ter o App que instala o MacOS Sierra em seu sistema, esse instalador deve aparecer no Launchpad ou no diretório de aplicativos.&lt;/p&gt;
&lt;p&gt;Se você quiser baixar a versão GM use o link abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://beta.apple.com/sp/betaprogram/guide
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É necessário ter um dispositivo USB.&lt;/p&gt;
&lt;h2 id=&#34;1-dispostivo-usb&#34;&gt;1. Dispostivo USB&lt;/h2&gt;
&lt;p&gt;Reserve um dispositivo USB de 16 GB para utilizar como instalador, de preferência USB 3 — quanto mais rápido melhor.&lt;/p&gt;
&lt;p&gt;Se existem arquivos importantes copie para outro local pois o processo de criação do instalador irá apagar todos os dados do USB Stick.&lt;/p&gt;
&lt;h2 id=&#34;2-rename-no-dispositivo&#34;&gt;2. Rename no dispositivo&lt;/h2&gt;
&lt;p&gt;Insira seu USB Stick e liste os dispositivo conectados no terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;diskutil list
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois de identificar o nome do seu dispositivo faça o rename&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo diskutil rename &amp;quot;GUTO 16G&amp;quot; SierraInstaller
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O comando acima foi um exemplo, troque &amp;ldquo;GUTO 16G&amp;rdquo; pelo nome real do seu dispositivo&lt;/p&gt;
&lt;h2 id=&#34;3-criando-o-instalador&#34;&gt;3. Criando o instalador&lt;/h2&gt;
&lt;p&gt;Este é o processo que irá criar o instalador&lt;/p&gt;
&lt;h3 id=&#34;31-gm-build&#34;&gt;3.1 GM Build&lt;/h3&gt;
&lt;p&gt;Se estiver usando a versão GM rode o comando abaixo no seu terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo /Applications/Install\ macOS\ Sierra.app/Contents/Resources/createinstallmedia --volume /Volumes/SierraInstaller --applicationpath /Applications/Install\ macOS\ Sierra.app --nointeraction &amp;amp;&amp;amp;say Done
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A versão GM já é um build fechado, muito próximo do que será apresentado no dia 20, apenas pequenas correções serão adicionadas até dia 20 na versão definitiva.&lt;/p&gt;
&lt;h3 id=&#34;32-public-beta-build&#34;&gt;3.2 Public Beta Build&lt;/h3&gt;
&lt;p&gt;Se estiver usando a versão Public Beta, rode o comando abaixo no terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo /Applications/Install\ macOS\ Sierra\ Public\ Beta.app/Contents/Resources/createinstallmedia --volume /Volumes/SierraInstaller --applicationpath /Applications/Install\ macOS\ Sierra\ Public\ Beta.app --nointeraction &amp;amp;&amp;amp;say Done
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;33-developer-preview-beta-build&#34;&gt;3.3 Developer Preview Beta Build&lt;/h3&gt;
&lt;p&gt;Se estiver usando a versão Developer Preview Beta, rode o comando abaixo no terminal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo /Applications/Install\ 10.12\ Developer\ Preview.app/Contents/Resources/createinstallmedia --volume /Volumes/SierraInstaller --applicationpath /Applications/Install\ 10.12\ Developer\ Preview.app --nointeraction &amp;amp;&amp;amp;say Done
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-processo-de-criação&#34;&gt;4. Processo de criação&lt;/h2&gt;
&lt;p&gt;Após rodar o comando você terá uma saída similar a esta&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Erasing Disk: 0%… 10%… 20%… 30%…100%…
Copying installer files to disk…
Copy complete.
Making disk bootable…
Copying boot files…
Copy complete.
Done.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Isso pode demorar dependendo da velocidade do seu USB Stick.&lt;/p&gt;
&lt;h2 id=&#34;5-instalando-via-usb&#34;&gt;5. Instalando via USB&lt;/h2&gt;
&lt;p&gt;Após a criação do instalador, você verá no Finder o instalador disponível como dispositivo externo, agora você só precisa reiniciar segurando OPTION e escolher o instalador USB na hora do boot.&lt;/p&gt;
&lt;h3 id=&#34;refs&#34;&gt;Refs&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://osxdaily.com/2016/06/15/make-macos-sierra-beta-usb-boot-drive/&#34;&gt;http://osxdaily.com/2016/06/15/make-macos-sierra-beta-usb-boot-drive/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Aquecimento para o MacOS Sierra</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-10-aquecimento-para-o-mac-sierra/</link>
      <pubDate>Sat, 10 Sep 2016 09:49:31 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-10-aquecimento-para-o-mac-sierra/</guid>
      <description>&lt;h2 id=&#34;1-compatibilidade&#34;&gt;1. Compatibilidade&lt;/h2&gt;
&lt;h3 id=&#34;11-hardware&#34;&gt;1.1 Hardware&lt;/h3&gt;
&lt;p&gt;A primeira coisa que você precisa saber é que o MacOS Sierra vai funcionar com Macs late 2009 pra frente. Clique em &amp;ldquo;/About&amp;rdquo; e veja se seu computador será compatível com o Sierra.&lt;/p&gt;
&lt;h3 id=&#34;modelo-mínimo&#34;&gt;Modelo mínimo&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;MacBook: late 2009 and later&lt;/li&gt;
&lt;li&gt;MacBook Air: 2010 and later&lt;/li&gt;
&lt;li&gt;MacBook Pro: 2010 and later&lt;/li&gt;
&lt;li&gt;iMac: late 2009 and later&lt;/li&gt;
&lt;li&gt;Mac Mini: 2010 and later&lt;/li&gt;
&lt;li&gt;Mac Pro: 2010 and later&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;12-software&#34;&gt;1.2 Software&lt;/h3&gt;
&lt;p&gt;Vale conferir se todos os softwares que você usa para trabalho ou lazer funcionarão no MacOS Sierra, acesse o site do fabricante, pesquise no google, acompanhe a galera que já está usando o Beta, isso é importante, é melhor adiar o upgrade do que atualizar e ficar sem um recurso importante no seu sistema.&lt;/p&gt;
&lt;p&gt;Eu por exemplo atualizei pro El Capitan cedo demais e fiquei sem o TotalFinder, meu Bartender ficou funcionando parcialmente, as libs que eu usava para gerar PDFs no terminal não funcionavam mais, o discador da Huawei que eu usava para conectar meu modem USB 4G da Vivo não funcionava mais, muita coisa parou e me pegou de surpresa, eu tive que fazer downgrade, foi um grande tempo perdido. Tome todas as medidas para checar se tudo que usa é realmente compatível com o Sierra, fica a dica!&lt;/p&gt;
&lt;h2 id=&#34;2-atualize-seus-apps&#34;&gt;2. Atualize seus Apps&lt;/h2&gt;
&lt;p&gt;Nos dias próximos ao lançamento praticamente todos os seus Apps principais vão te informar de atualizações relacionadas a compatibilidade com o Sierra, aceite e faça todas as atualizações antes do upgrade.&lt;/p&gt;
&lt;h2 id=&#34;3-faxina&#34;&gt;3. Faxina&lt;/h2&gt;
&lt;p&gt;Aproveite para fazer aquela faxina no disco para liberar espaço para o upgrade, o El Capitan — por exemplo — necessita de 8.8 GB do disco livre para instalação, portanto, recomendo que tenha pelo menos 15 GB livre no disco para fazer esse upgrade pro Sierra com tranquilidade, remover aplicativos que você não usa ajuda bastante.&lt;/p&gt;
&lt;p&gt;Se você não reinicia o seu MacOS há muitos dias, semanas ou meses — como eu faço — é uma boa pedida reiniciar para limpar caches e arquivos temporários do disco.&lt;/p&gt;
&lt;p&gt;Você pode usar um App como o CleanMyMac3 para rodar uma rotina completa de limpeza e manutenção do MacOS e pode até remover APPs por ele. Caso não use o CleanMyMac, o Magican é uma opção free muito boa que tem inclusive scanner anti-trojan.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.magicansoft.com/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Recomendo também rodar um antimalware para remover qualquer traço de softwares indesejados no seu sistema, a malwarebytes oferece um free que é muito eficaz.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.malwarebytes.com/mac-download/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se você desligou o rootless do El Capitan — csrutil — ative novamente antes do upgrade.&lt;/p&gt;
&lt;p&gt;Por fim, rode uma rotina de verificação do disco usando o disk utility e com isso você estará quase pronto.&lt;/p&gt;
&lt;h2 id=&#34;4-backup&#34;&gt;4. Backup&lt;/h2&gt;
&lt;p&gt;Antes de pensar em fazer o upgrade faça um backup completo no Time Machine, isso vai te dar segurança caso algo não funcione como deveria, com o backup você poderá fazer o restore do seu ambiente.&lt;/p&gt;
&lt;p&gt;Eu faço sempre dois backups, um com o Time Machine e outro como CCC (Carbon Copy Cloner).&lt;/p&gt;
&lt;h2 id=&#34;5-conta-no-apple-id&#34;&gt;5. Conta no Apple ID&lt;/h2&gt;
&lt;p&gt;Após o upgrade o Sierra vai te pedir sua conta do iCloud, a partir do Sierra isso vai ser obrigatório devido a integrações com o Universal Clipboard e auto-unlock do MacOS — por proximidade — com Apple Watch, então, se você ainda não criou uma conta, crie antes da instalação.&lt;/p&gt;
&lt;h2 id=&#34;6-atualização-limpa&#34;&gt;6. Atualização Limpa&lt;/h2&gt;
&lt;p&gt;As dicas acima foram para aqueles que vão realizar o upgrade do El Capitan para o Sierra, preservando os dados, contudo, há quem prefira fazer uma instalação limpa através de um usb stick. Eu normalmente opto por essa técnica. Para uma instalação limpa é necessário criar um instalador USB.&lt;/p&gt;
&lt;p&gt;Abaixo alguns bons tutoriais que ensinam a fazer isso:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.macworld.com/article/3092900/macs/how-to-create-a-bootable-macos-sierra-installer-drive.html
http://www.imore.com/how-make-bootable-macos-sierra-installer-drive
http://michaelcrump.net/create-macos-sierra-boot-disk/
http://osxdaily.com/2016/06/15/make-macos-sierra-beta-usb-boot-drive/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça seu backup, crie o instalador e depois faça a instalação.&lt;/p&gt;
&lt;h2 id=&#34;7-refs&#34;&gt;7. Refs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://support.apple.com/macos/sierra&#34;&gt;https://support.apple.com/macos/sierra&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Minhas imagens no Docker Hub</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-09-docker-hub-imagens/</link>
      <pubDate>Fri, 09 Sep 2016 19:52:42 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-09-docker-hub-imagens/</guid>
      <description>&lt;p&gt;Criando minhas primeiras imagens para começar a estudar Docker de verdade.&lt;/p&gt;
&lt;h2 id=&#34;hub-do-guto&#34;&gt;Hub do Guto&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;https://hub.docker.com/u/gutocarvalho/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As duas imagens &amp;ldquo;&lt;em&gt;-systemd&amp;rdquo; são bases para as imagens &amp;ldquo;&lt;/em&gt;-puppet&amp;rdquo;. A ideia é utilizar essas imagens para validar módulos Puppet dentro um pipeline que vai envolver dentre outras coisas do GitLab + GitLab CI.&lt;/p&gt;
&lt;h3 id=&#34;imagens-disponíveis&#34;&gt;Imagens disponíveis&lt;/h3&gt;
&lt;p&gt;Centos 7 + Puppet 4.6.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://hub.docker.com/r/gutocarvalho/centos-puppet/    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ubuntu 16.04 + Puppet 4.6.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  https://hub.docker.com/r/gutocarvalho/ubuntu-puppet/    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vou postando minhas aventuras por aqui.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Atalhos no MacOS</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-09-atalhos-uteis-macos/</link>
      <pubDate>Fri, 09 Sep 2016 17:50:28 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-09-atalhos-uteis-macos/</guid>
      <description>&lt;p&gt;Resolvi dar uma pesquisada sobre como fazer travessão e numerais e acabei descobrindo mais coisas, compartilho aqui minhas descobertas.&lt;/p&gt;
&lt;h2 id=&#34;travessão&#34;&gt;Travessão&lt;/h2&gt;
&lt;p&gt;Muitas pessoas tem dúvidas sobre como fazer o travessão no MacOs — eu também tinha.&lt;/p&gt;
&lt;p&gt;Para fazer o travessão pressione SHIFT + ALT + hífen&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;—
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;números-ordinais&#34;&gt;Números ordinais&lt;/h2&gt;
&lt;p&gt;Outra coisa que eu queria aprender era fazer numerais ou números ordinais.&lt;/p&gt;
&lt;p&gt;Para fazer o numeral (zero) pressione ALT + 0&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1º
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para fazer o numeral (a) pressione ALT + 9&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;2ª
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;grau&#34;&gt;Grau&lt;/h2&gt;
&lt;p&gt;SHIFT + ALT + 8&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;20°    
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;copyright&#34;&gt;Copyright&lt;/h2&gt;
&lt;p&gt;OPTION + g&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;©
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;registred&#34;&gt;Registred&lt;/h2&gt;
&lt;p&gt;SHIFT + OPTION + r&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;®     
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;team&#34;&gt;Team&lt;/h2&gt;
&lt;p&gt;OPTION + 2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;™
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;não-igual&#34;&gt;Não igual&lt;/h2&gt;
&lt;p&gt;OPTION + =&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;≠
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;menor-igual&#34;&gt;Menor igual&lt;/h2&gt;
&lt;p&gt;OPTION ,&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;≤
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;maior-igual&#34;&gt;Maior igual&lt;/h2&gt;
&lt;p&gt;OPTION .&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;≥
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;apple&#34;&gt;Apple&lt;/h2&gt;
&lt;p&gt;SHIFT + OPTION + K&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pesquisando e aprendendo sempre.&lt;/p&gt;
&lt;h3 id=&#34;refs&#34;&gt;Refs&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://pt.wikihow.com/Fazer-S&#34;&gt;http://pt.wikihow.com/Fazer-S&lt;/a&gt;ímbolos-no-Mac&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blogflanar.blogspot.com.br/2010/12/numerais-no-mac.html&#34;&gt;http://blogflanar.blogspot.com.br/2010/12/numerais-no-mac.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://br-mac.org/2012/02/caracteres-especiais-uma-cola-para-os-simbolos-do-teclado-do-mac.html&#34;&gt;http://br-mac.org/2012/02/caracteres-especiais-uma-cola-para-os-simbolos-do-teclado-do-mac.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Criando ubuntu usb installer no MacOS</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-07-criando-ubuntu-usb-installer-no-macos.md/</link>
      <pubDate>Wed, 07 Sep 2016 08:37:02 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-07-criando-ubuntu-usb-installer-no-macos.md/</guid>
      <description>&lt;p&gt;Post #notamental que ensina como criar um usbstick no MacOS para instalar o Ubuntu 16.04.1.&lt;/p&gt;
&lt;h2 id=&#34;1-processo-manual&#34;&gt;1. Processo manual&lt;/h2&gt;
&lt;h3 id=&#34;11-download-da-imagem&#34;&gt;1.1 Download da imagem&lt;/h3&gt;
&lt;p&gt;Abra seu terminal e crie um diretório tmp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir tmp; cd tmp/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça download da imagem&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://releases.ubuntu.com/16.04/ubuntu-16.04.1-desktop-amd64.iso
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;12-convertendo-imagem&#34;&gt;1.2 Convertendo imagem&lt;/h3&gt;
&lt;p&gt;Precisamos converter essa imagem para conseguir criar o usb installer&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hdiutil convert -format UDRW -o ubuntu-16.04.1-desktop-amd64.img ubuntu-16.04.1-desktop-amd64.iso
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;13-detectando-dispositivo-usb&#34;&gt;1.3 Detectando dispositivo usb&lt;/h3&gt;
&lt;p&gt;Insira o usb stick que você pretende usar e logo após faça a detecção de discos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;diskutil list
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Você verá uma saída como esta&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/dev/disk0 (internal, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *500.3 GB   disk0
   1:                        EFI EFI                     209.7 MB   disk0s1
   2:          Apple_CoreStorage Macross                 499.4 GB   disk0s2
   3:                 Apple_Boot Recovery HD             650.0 MB   disk0s3
/dev/disk1 (internal, virtual):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:                  Apple_HFS Macross                +499.0 GB   disk1
                                 Logical Volume on disk0s2
                                 9FE0CB11-FC20-4BB4-9353-E115CB1FBF94
                                 Unencrypted
/dev/disk2 (external, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *1.0 TB     disk2
   1:                        EFI EFI                     209.7 MB   disk2s1
   2:                  Apple_HFS WD1TB                   999.8 GB   disk2s2
/dev/disk3 (external, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:     FDisk_partition_scheme                        *7.9 GB     disk3
   1:               Windows_NTFS GUTO                    7.9 GB     disk3s1
/dev/disk4 (disk image):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        +29.2 MB    disk4
   1:                  Apple_HFS UNetbootin              29.1 MB    disk4s1    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;No meu caso vou usar o dispositivo /dev/disk3 de 8GB.&lt;/p&gt;
&lt;h3 id=&#34;14-desmontando-dispositivo&#34;&gt;1.4 Desmontando dispositivo&lt;/h3&gt;
&lt;p&gt;Precisamos desmontar para gravar a imagem no dispositivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;diskutil unmountDisk /dev/disk3
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;15-criando-o-instalador&#34;&gt;1.5 Criando o instalador&lt;/h3&gt;
&lt;p&gt;Agora vamos transferir a imagem para o usb stick usando o dd&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo dd if=ubuntu-16.04.1-desktop-amd64.img.dmg of=/dev/disk3 bs=1m
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Esse processo pode demorar, dependerá da velocidade do usb stick, no final a saída será similar a esta&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;1443+1 records in
1443+1 records out
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ignore qualquer popup do finder que aparecer após a conclusão.&lt;/p&gt;
&lt;h3 id=&#34;16-ejetando-o-instalador&#34;&gt;1.6 Ejetando o instalador&lt;/h3&gt;
&lt;p&gt;Ao final do processo ejete o usb stick&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;diskutil eject /dev/disk3
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, agora você pode instalar o Ubuntu em qualquer computador com esse USB Stick.&lt;/p&gt;
&lt;h2 id=&#34;processo-via-script&#34;&gt;Processo via script&lt;/h2&gt;
&lt;p&gt;Abaixo um exemplo de script para agilizar.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/bash

ISONAME=&amp;quot;ubuntu-16.04.1-desktop-amd64&amp;quot;
DEVICE=&amp;quot;/dev/disk3&amp;quot;

echo &amp;quot;convertendo imagem $ISONAME...&amp;quot;

hdiutil convert -format UDRW -o /Users/gutocarvalho/storage/isos/$ISONAME.img /Users/gutocarvalho/storage/isos/$ISONAME.iso

echo &amp;quot;desmontando dispositivo usb $DEVICE...&amp;quot;

diskutil unmountDisk $DEVICE

echo &amp;quot;Criando instalador usb no dispositivo $DEVICE...&amp;quot;

sudo dd if=/Users/gutocarvalho/storage/isos/$ISONAME.img.dmg of=$DEVICE bs=1m

echo &amp;quot;desmontando dispositivo usb $DEVICE...&amp;quot;

diskutil eject $DEVICE

echo &amp;quot;criacao de disco finalizada.&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Criei um snippet no GitLab para facilitar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/snippets/25673
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Por onde iniciar os estudos sobre DevOps?</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-06-estudos-devops-dicas.md/</link>
      <pubDate>Tue, 06 Sep 2016 15:24:45 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-06-estudos-devops-dicas.md/</guid>
      <description>&lt;p&gt;Muitas pessoas perguntam o que devem estudar ou quais cursos devem fazer para entrar de cabeça no mundo DevOps.&lt;/p&gt;
&lt;p&gt;Não é uma resposta fácil, mas tenho algumas indicações para ajudar quem está começando.&lt;/p&gt;
&lt;h2 id=&#34;1-vídeos&#34;&gt;1. Vídeos&lt;/h2&gt;
&lt;h3 id=&#34;10-deploys-per-day-at-flickr&#34;&gt;10 Deploys per day at Flickr&lt;/h3&gt;
&lt;p&gt;Esse palestra foi a ignição que faltava para a criação do movimento/cultura DevOps em 2009.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.youtube.com/watch?v=LdOe18KhtT4
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;entenda-as-origens-devops&#34;&gt;Entenda as origens DevOps&lt;/h3&gt;
&lt;p&gt;Vídeo rápido de Damon Edwards (devopsdays core member) acerca das origens do movimento, recomendo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.youtube.com/watch?v=o7-IuYS0iSE
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;what-is-devops---in-simple-english&#34;&gt;What is DevOps? - In Simple English&lt;/h3&gt;
&lt;p&gt;Vídeo curtinho do rackspace que também ajuda.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.youtube.com/watch?v=_I94-tJlovg
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;devopsconf---devops-state-of-the-union-john-willis&#34;&gt;DevOpsConf - DevOps State of the Union (John Willis)&lt;/h3&gt;
&lt;p&gt;Palestra do John Willis (devopsdays core member) na DevOpsCon 2015 sobre o estado do DevOps após 5 anos de seu surgimento.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.youtube.com/watch?v=8rM8lYaMVBE
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;five-years-of-devops-patrick-debois&#34;&gt;Five Years of DevOps (Patrick Debois)&lt;/h3&gt;
&lt;p&gt;Patrick Debois o criador do DevOpsDays e do termo DevOps fala o que achou dos últimos 5 anos de DevOps.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.youtube.com/watch?v=uRMV6tT_mu0
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-acrônimos&#34;&gt;2. Acrônimos&lt;/h2&gt;
&lt;p&gt;Entenda o que é CAMS&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://devopsdictionary.com/wiki/CAMS
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Entenda o que é CALMS&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://whatis.techtarget.com/definition/CALMS
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Entenda o que é ICE&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://radar.oreilly.com/2015/01/devops-keeps-it-cool-with-ice.html
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Entenda o que é DevSecOps&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; http://www.devsecops.org/blog/2015/2/15/what-is-devsecops    
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-roteiro-de-estudos&#34;&gt;3. Roteiro de estudos&lt;/h2&gt;
&lt;p&gt;Essa sugestão de estudos é baseada na estrutura CAMS do Willis e Edwards.&lt;/p&gt;
&lt;h3 id=&#34;31--cultura&#34;&gt;3.1  Cultura&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Estude a metodologia ágil de desenvovlimento&lt;/li&gt;
&lt;li&gt;Estude metodologias ágeis em geral&lt;/li&gt;
&lt;li&gt;Estude Scrum&lt;/li&gt;
&lt;li&gt;Estude Kanban&lt;/li&gt;
&lt;li&gt;Estude Lean&lt;/li&gt;
&lt;li&gt;Entenda o que é uma cultura de colaboração e feedback.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Faça um exercicio e tente enxergar os principais problemas culturais do
seu time/organização e encontre uma forma corrigir tais problemas adaptando esses métodos.&lt;/p&gt;
&lt;h3 id=&#34;32-automação&#34;&gt;3.2 Automação&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Estude virtualização&lt;/li&gt;
&lt;li&gt;Estude cloud computing&lt;/li&gt;
&lt;li&gt;Estude Mark Burgess e gerência de configurações&lt;/li&gt;
&lt;li&gt;Estude infraestrutura como código&lt;/li&gt;
&lt;li&gt;Conheça pelo menos duas ferramentas de Gerência de Configuração (CFEngine e Puppet)&lt;/li&gt;
&lt;li&gt;Conheça pelo menos duas ferramentas de Orquestração (Fabric e Ansible)&lt;/li&gt;
&lt;li&gt;Entenda o que é VCS (Version Control System)&lt;/li&gt;
&lt;li&gt;Estude GIT pra valer&lt;/li&gt;
&lt;li&gt;Estude workflows de desenvolvimento usando GIT (olhe os projetos opensource)&lt;/li&gt;
&lt;li&gt;Estude Continuous Integration&lt;/li&gt;
&lt;li&gt;Estude Continuous Delivery&lt;/li&gt;
&lt;li&gt;Estude Continious Deployment&lt;/li&gt;
&lt;li&gt;Estude TDD/BDD/ATDD&lt;/li&gt;
&lt;li&gt;Estude Load Testing&lt;/li&gt;
&lt;li&gt;Estude Stress Testing&lt;/li&gt;
&lt;li&gt;Estude Security Testing&lt;/li&gt;
&lt;li&gt;Estude Containers e Docker&lt;/li&gt;
&lt;li&gt;Estude Microservicos&lt;/li&gt;
&lt;li&gt;Estude ferramentas para fazer provisionamento automatizado&lt;/li&gt;
&lt;li&gt;Estude ferramentas de autoserviço&lt;/li&gt;
&lt;li&gt;Estude sistemas Unix e Linux&lt;/li&gt;
&lt;li&gt;Estude networking&lt;/li&gt;
&lt;li&gt;Estude e domine pelo menos 2 linguagens interpretadas (Ruby e Python)&lt;/li&gt;
&lt;li&gt;Conheça pelo menos 1 stack de cada linguagem&lt;/li&gt;
&lt;li&gt;Estude a linguagem shell&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Labs sugeridos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tente subir uma stack full de automação (ex. puppet)
&lt;ul&gt;
&lt;li&gt;Tente automatizar confs simples do OS (ex. centos)&lt;/li&gt;
&lt;li&gt;Tente automatizar a instalacao e configuracao de um APP (ex. apache)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Tente provisionar VMs ou Containers de forma automatizada via autoserviço&lt;/li&gt;
&lt;li&gt;Tente construir um pipeline de entrega
&lt;ul&gt;
&lt;li&gt;Indo desde o commit, passando por build, testes até o deploy em vm e container&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;33-avaliaçãométricas&#34;&gt;3.3 Avaliação/Métricas&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Entenda o que são métricas e pq são importantes&lt;/li&gt;
&lt;li&gt;Estude real-time-metrics&lt;/li&gt;
&lt;li&gt;Estude ferramentas APM&lt;/li&gt;
&lt;li&gt;Conheca bem pelo menos duas ferramentas de monitoramento (Nagios/Zabbix)&lt;/li&gt;
&lt;li&gt;Estude algum stack para tratamento de logs (ELK)&lt;/li&gt;
&lt;li&gt;Estude algum stack para coleta e armazenamento métricas (Collectd/Statsd/Graphite/Graphana)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Labs sugeridos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tente subir uma stack full de gestao de logs (ex. ELK)
&lt;ul&gt;
&lt;li&gt;Coloque diversos APPs para jogar dados lá&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Tente subir um stack full de gestao de dados
&lt;ul&gt;
&lt;li&gt;Gere dados, colete, armazene e visualize com essa stack&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;34-compartilhamento&#34;&gt;3.4 Compartilhamento&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Entenda a cultura de dividir responsabilidades&lt;/li&gt;
&lt;li&gt;Entenda a cultura Blameless&lt;/li&gt;
&lt;li&gt;Aprenda a compartilhar ferramentas entre todos os times&lt;/li&gt;
&lt;li&gt;Aprenda a compartilhar código entre todos os times&lt;/li&gt;
&lt;li&gt;Aprenda a compartilhar informações e dados&lt;/li&gt;
&lt;li&gt;Procure sempre melhorar o processo de comunicação&lt;/li&gt;
&lt;li&gt;Entenda como funcionam times de produtos&lt;/li&gt;
&lt;li&gt;Ofereça feedback constante entre os times&lt;/li&gt;
&lt;li&gt;Volte pra cultura  e reinicie o ciclo até aqui&lt;/li&gt;
&lt;li&gt;Entenda e pratique Dojos&lt;/li&gt;
&lt;li&gt;Entenda os Hackerspaces&lt;/li&gt;
&lt;li&gt;Entenda os Hackatons&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;Cada eixo desse do roteiro de estudos tem cursos disponíveis no mercado, documentação farta online, artigos variados na rede.&lt;/p&gt;
&lt;p&gt;Evite procurar por uma formação DevOps no mercado, o ideal é que você mesmo crie um roteiro de estudos.&lt;/p&gt;
&lt;p&gt;Se encontrar alguma formação DevOps no mercado, fique alerta, tome muito cuidado para não ser uma empresa inventando algo só para faturar em cima da Buzzword DevOps, não invista seu dinheiro nesses cursos mágicos, como voce viu DevOps é algo amplo, difícil de colocar em um curso de 24 ou 40 horas, procure cursos especializados em centros reconhecidos ou oficiais, vá passando um assunto por vez, um curso por vez se você for da linha dos cursos, se for da linha da autodidaxia, mergulhe nas comunidades, leia, pergunte, compartilhe e aprenda junto conosco.&lt;/p&gt;
&lt;p&gt;Coloquei esse guia no GitLab para receber contribs, mande PRs quando quiser.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gitlab.com/gutocarvalho/devops-tips&#34;&gt;https://gitlab.com/gutocarvalho/devops-tips&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Agora é começar os estudos, divirta-se!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Conhece o projeto rancher?</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-06-conheca-o-projeto-rancher/</link>
      <pubDate>Tue, 06 Sep 2016 15:11:17 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-06-conheca-o-projeto-rancher/</guid>
      <description>&lt;p&gt;Rancher é uma plataforma de gerenciamento para containers (funciona com docker).&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://rancher.com
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O gerenciador é todo web/gráfico, com interface bem polida e fácil de usar.&lt;/p&gt;
&lt;p&gt;Posso até dizer que parece um VMWare para Docker.&lt;/p&gt;
&lt;p&gt;O Rancher fala de fábrica Swarm, Kubernetes, Mesos e Cattle (cluster de containers nativo do rancher).&lt;/p&gt;
&lt;p&gt;Ele consegue criar clusters em qualquer uma dessas tecnologias.&lt;/p&gt;
&lt;p&gt;Para criar um cluster você usa a interface web, ele abstrai tudo pro administrador.&lt;/p&gt;
&lt;p&gt;Voce só escolhe qual o tipo de cluster e clica em criar e pronto, cluster rodando, sem dores.&lt;/p&gt;
&lt;p&gt;Ele tem Load Balancer, HA, Discovery e tudo que uma ferramenta corporativa de gerenciamento de containers precisa.&lt;/p&gt;
&lt;p&gt;Olhando por outro aspecto, ele parece até uma AWS nativa rodando na sua infra (ou no seu notebook).&lt;/p&gt;
&lt;p&gt;E tem API para configurar e gerenciar tudo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://docs.rancher.com/rancher/v1.2/en/api/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ele tem um CLI também.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://docs.rancher.com/rancher/v1.2/en/cli/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Eles criaram o RancherOS para voce instalar um SO Rancher dedicado em BareMetal.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://rancher.com/rancher-os/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É um OS um tanto quanto diferente, pois tirando o kernel, todo o resto roda em containers.&lt;/p&gt;
&lt;p&gt;Fizemos um meetup de docker aqui em Brasília e escolhemos o Rancher para estudar, subimos o rancher server usando docker 1.12 e criamos um cluster de 8 hosts rancher em menos de 15 minutos, esforço mínimo. Após subir o cluster, gastamos mais 5 minutos para fazer o deploy de um APP wordpress+mysql distribuído com LB + discovery entre esses 8 hosts, só não deu tempo de testar o HA, mas pelo que li é tão fácil quanto.&lt;/p&gt;
&lt;p&gt;Pra mim esse é o projeto que tem mais futuro nesse mundo dos containers&lt;/p&gt;
&lt;p&gt;Se curtiu entre na comunidade ranche-br no telegram&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://telegram.me/rancherbr
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;#ficaadica #acompanhe #radar-do-guto&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Obs.1: Nosso teste com o wordpress utilizou persistência simples de banco mysql, sem HA no banco containerizado, nosso foco foi distribuir o frontend entre vários hosts, somente isso, nem entramos no detalhe de compartilhar um volume para servir o wp-content entre todos os containers (usando convoy-nfs ou gluster-fs). Tem documentação farta para fazer esse lab completo com todos esses detalhes, só não deu tempo de fazer tudo isso no meetup. Enfim, é um projeto promissor, recomendo dar uma acompanhada.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meus dotfiles para osx</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-05-dotfiles-osx/</link>
      <pubDate>Mon, 05 Sep 2016 12:37:56 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-05-dotfiles-osx/</guid>
      <description>&lt;p&gt;Post #notamental, segue abaixo meu repo dotfiles!&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/dotfiles
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;.bash_profile&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/dotfiles/blob/master/bash_profile.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;.gitconfig&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/dotfiles/blob/master/gitconfig
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;.vimrc&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://gitlab.com/gutocarvalho/dotfiles/blob/master/vimrc
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Boxes vagrant atualizadas no atlas</title>
      <link>https://archives.gutocarvalho.net/post/2016-09-03-vagrant-box-atualizadas/</link>
      <pubDate>Sat, 03 Sep 2016 08:46:18 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-09-03-vagrant-box-atualizadas/</guid>
      <description>&lt;p&gt;Meu repositório de box para vagrant foi atualizado ontem, agora todas as box tem Puppet 4 na última versão disponível para aquele sistema operacional.&lt;/p&gt;
&lt;h1 id=&#34;repositório-atlas&#34;&gt;Repositório Atlas&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;centos&#34;&gt;CentOS&lt;/h2&gt;
&lt;h3 id=&#34;centos-511&#34;&gt;CentOS 5.11&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos5x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;centos-68&#34;&gt;CentOS 6.8&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos6x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;centos-721511&#34;&gt;CentOS 7.2.1511&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;debian&#34;&gt;Debian&lt;/h2&gt;
&lt;h3 id=&#34;debian-6010&#34;&gt;Debian 6.0.10&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/debian6x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.4.1&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;debian-711&#34;&gt;Debian 7.11&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/debian7x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;debian-85&#34;&gt;Debian 8.5&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/debian8x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ubuntu&#34;&gt;Ubuntu&lt;/h2&gt;
&lt;h3 id=&#34;ubuntu-12045&#34;&gt;Ubuntu 12.04.5&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/ubuntu1204x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ubuntu-14045&#34;&gt;Ubuntu 14.04.5&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/ubuntu1404x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ubuntu-16041&#34;&gt;Ubuntu 16.04.1&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/ubuntu1604x64
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Puppet 4.6.2&lt;/li&gt;
&lt;li&gt;Virtualbox Guest 5.0.26&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para adicionar qualquer box digite o comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add gutocarvalho/nome-da-box
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Origens da Infra Ágil</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-15-infra-agil-origens/</link>
      <pubDate>Fri, 15 Jul 2016 18:27:11 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-15-infra-agil-origens/</guid>
      <description>&lt;p&gt;Após o lançamento do site &lt;a href=&#34;http://infraagil.io&#34;&gt;infraagil.io&lt;/a&gt; algumas
pessoas me perguntaram sobre suas origens e sobre as motivações que levaram a criação do site e desse modelo.&lt;/p&gt;
&lt;p&gt;Esse texto foi parte da versão &amp;ldquo;alpha&amp;rdquo; do site infraagil.io, hoje ele não está mais lá, foi retirado para deixar o conteúdo mais objetivo, contudo, seu contexto cabe neste blog.&lt;/p&gt;
&lt;h3 id=&#34;origens&#34;&gt;Origens&lt;/h3&gt;
&lt;p&gt;Em 2011 eu dividi uma palestra com o colega Daniel Sobral (a.k.a Gandalf) no CONSEGI em Brasília/DF, o tema central da palestra era a gerência de configurações e os benefícios deste modelo para o Governo Federal. Tivemos um excelente quórum e o tema começou a se espalhar pela Esplanada de Ministérios, muitos profissionais queriam saber mais deste conceito e das tecnologias envolvidas.&lt;/p&gt;
&lt;p&gt;Creio que aquela foi a primeira oportunidade que eu tive para abordar o momento em que eu vivia como sysadmin. O movimento DevOps estava no início da formação de sua cultura, não fazia nem um ano que John Willis e Damon Edwards haviam criado o acrônimo CAMS, iniciativa que deu norte para a comunidade DevOps. Sem nem saber ou conhecer direito este modelo, o time em que eu trabalhava já havia começado a estudar e experimentar algumas técnicas e métodos ágeis na operação, algo inovador dentro do governo brasileiro e principalmente inovador para a organização que havia nos contratado.&lt;/p&gt;
&lt;h4 id=&#34;marco-zero&#34;&gt;Marco Zero&lt;/h4&gt;
&lt;p&gt;Naquela época trabalhei em um time fantástico, pude aprender muito com profissionais experientes como Fernando Ike (@fernandoike), José Eufrásio Júnior (@coredump), Daniel Capó Sobral (@dcsobral), Daniel Negri (@danielnegri), Douglas Andrade (@douglasandrade) dentre outros.&lt;/p&gt;
&lt;p&gt;Nós estudávamos constantemente, estávamos sempre experimentando e compartilhando experiências dentro e fora dos times. O @FernandoIke trabalhava na integração de todos os times de TI da organização, focando na comunicação, no compartilhamento de responsabilidades, na garantia de entrega e na disponibilidade de recursos para o time devel trabalhar traquilo e entregar o que o cliente precisava. Ele era o escudo da TI e nos ajudava a manter o foco. O @Coredump era o líder do time de infra, seu foco era inovação e autonomia, graças a ele nosso time começou a estudar automação de infraestrutura no final de 2010, testamos e usamos ali versões primitivas do Puppet e Chef. No final dos testes acabamos optando pelo Puppet e fizemos a primeira implantação em escala de centenas de nós no governo brasileiro.&lt;/p&gt;
&lt;p&gt;Em 2010 nós já estávamos trabalhando com infraestrutura como código, gerência de configuração, orquestração, pipeline de deploys e métricas avançadas, respirávamos inovação dia-a-dia, e tudo isso foi construído em uma curta janela de um ano e meio.   Foi um período fantástico da minha vida em que aprendi muito com todo o time.&lt;/p&gt;
&lt;p&gt;Após a conclusão do projeto, cada um seguiu um rumo diferente , alguns foram morar no exterior, outros mudaram de área, outros se tornaram empresários, a vida seguiu seus rumos. Acredito que aquela experiência marcou todos daquele time, no meu caso foi um divisor claro, eu era um sysadmin artesão e comecei a dar os primeiros passos para um modelo de trabalho mais eficiente e autônomo.&lt;/p&gt;
&lt;h4 id=&#34;novos-caminhos-novas-parcerias&#34;&gt;Novos caminhos, novas parcerias&lt;/h4&gt;
&lt;p&gt;Alguns anos depois desta experiência, no início de 2014, depois de muitas aventuras pelo Governo Federal, eu conheci  pessoalmente o Miguel Di Ciurcio Filho (@mciurcio), outro desses profissionais que pensam bem a frente do seu tempo. Enquanto eu desbravava datacenters na esplanada dos ministérios entre 2010 e 2014, na mesma época Miguel atuava com startups e incubadoras na região de Campinas e Barueri no estado de São Paulo. Ele trabalhou com tecnologias modernas e inovadoras na área de automação, banco de dados e virtualização.  Sua experiência com desenvolvimento, em especial no Google Summer of Code, no qual ele atuou com o projeto QEMU, lhe deram um olhar único relativo a administração e gestão de infraestrutura de TI das organizações em que passou.&lt;/p&gt;
&lt;p&gt;Todos esses caminhos , interesses comuns, a participação nas mesmas comunidades, os projetos que acompanhamos, tudo isto foi importante para o início de nossa parceria na
Instruct, empresa que ele fundou em 2011 e empresa na qual faço parte desde 2014 após o seu convite.&lt;/p&gt;
&lt;p&gt;Trabalhando com ele o espaço e o alcance que tive para estudar e aprimorar este modelo - dentro da Instruct - foi inimaginável, afinal, ambos tivemos experiências muito parecidas, seguimos escolas similares como sysadmins e através da Instruct encontramos as empresas que podiam se beneficiar da soma de nossas experiências.&lt;/p&gt;
&lt;p&gt;De lá para cá temos construído e evoluído juntos essa abordagem da infra ágil que organizamos no site infraagil.io.&lt;/p&gt;
&lt;p&gt;Não estamos mais sozinhos neste projeto, nós convidamos alguns parceiros que tem nos ajudado (Alliance Members) a organizar e melhorar esse modelo. O objetivo é fazer com o modelo cresça e alcance aqueles profissionais que precisam de uma referência clara para começar a transformar seus times e sua infraestrutura.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>DevOpsDays POA Resumo</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-15-devopsdays-poa-resumo/</link>
      <pubDate>Fri, 15 Jul 2016 14:01:34 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-15-devopsdays-poa-resumo/</guid>
      <description>&lt;p&gt;‪Galera o #‎DevOpsDays de ‪#‎PortoAlegre‬ foi um dos melhores eventos que participei nos últimos anos, focado, com público alinhado, tinha apenas 130 pessoas presentes, todos muito interessados, o evento manteve um alto nível em todas as suas palestras, teve humor, ignites, open spaces, fishbowl, networking e muito compartilhamento. ‪&lt;/p&gt;
&lt;p&gt;#‎Recomendo‬&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Monitorama e Automacon</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-15-eventos/</link>
      <pubDate>Fri, 15 Jul 2016 13:58:33 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-15-eventos/</guid>
      <description>&lt;p&gt;Dois eventos interessantes para por no radar, recomendo para a galera DevOps e Infra Ágil.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://monitorama.com&#34;&gt;http://monitorama.com&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;http://automacon.io&#34;&gt;http://automacon.io&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Novo parceiro GitLab no Brasil</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-15-gitlab_parceiros_brazil/</link>
      <pubDate>Fri, 15 Jul 2016 13:54:18 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-15-gitlab_parceiros_brazil/</guid>
      <description>&lt;p&gt;Agora a GitLab tem parceira no Brasil para licenças e treinamentos.&lt;/p&gt;
&lt;p&gt;Acessem esse post para saber mais.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://instruct.com.br/gitlab-parceria-brasil/&#34;&gt;http://instruct.com.br/gitlab-parceria-brasil/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Novo livro sobre Docker</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-15-livro_docker/</link>
      <pubDate>Fri, 15 Jul 2016 13:51:13 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-15-livro_docker/</guid>
      <description>&lt;p&gt;Passando para divulgar o livre do Rafael Gomes (@gomex) sobre Docker.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://leanpub.com/dockerparadesenvolvedores&#34;&gt;https://leanpub.com/dockerparadesenvolvedores&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Aproveitem o excelente material.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Novo projeto infraagil.io</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-15-infraagil/</link>
      <pubDate>Fri, 15 Jul 2016 13:44:42 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-15-infraagil/</guid>
      <description>&lt;p&gt;Durante o TDC fizemos o lançamento do site &lt;a href=&#34;infraagil.io&#34;&gt;infraagil.io&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Este site organiza boas práticas para serem aplicadas no
seu time de operação e infraestrutura.&lt;/p&gt;
&lt;p&gt;Recomendo a visita!&lt;/p&gt;
&lt;p&gt;[]s&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Grupos de TI no Telegram</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-14-telegram-grupos-ti/</link>
      <pubDate>Thu, 14 Jul 2016 18:48:42 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-14-telegram-grupos-ti/</guid>
      <description>&lt;p&gt;No Brasil o Telegram acolheu grupos de comunidades
de TI que discutem diversas tecnologias, seu crescimento tem sido espantoso e formidável, tem aproximado pessoas e ajudado a diminuir a curva de aprendizado de muitas tecnologias.&lt;/p&gt;
&lt;p&gt;As listas de discussão ainda
continuam vivas mas não são orgânicas e dinâmicas como o Telegram, talvez esse seja o segredo de seu sucesso somado ao seu conjunto incrível de recursos.&lt;/p&gt;
&lt;p&gt;Grupos no telegram que eu recomendo!&lt;/p&gt;
&lt;p&gt;Tecnologias&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://telegram.me/puppetbr&#34;&gt;https://telegram.me/puppetbr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/gitlabbr&#34;&gt;https://telegram.me/gitlabbr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/vagrantbr&#34;&gt;https://telegram.me/vagrantbr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/dockerbr&#34;&gt;https://telegram.me/dockerbr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/ansiblebr&#34;&gt;https://telegram.me/ansiblebr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/chefbr&#34;&gt;https://telegram.me/chefbr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/rancherbr&#34;&gt;https://telegram.me/rancherbr&lt;/a&gt;﻿&lt;br&gt;
&lt;a href=&#34;https://telegram.me/openshiftbr&#34;&gt;https://telegram.me/openshiftbr&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://telegram.me/joinchat/AejjFUGKEceZvWrBaazTeA&#34;&gt;elastic-users-br&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/joinchat/AejjFT67s-ATqOO5Yt_E-w&#34;&gt;mac-users-brasil&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Comunidades&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://telegram.me/devopsbr&#34;&gt;devops-br&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/joinchat/AejjFT67s-ATqOO5Yt_E-w&#34;&gt;infraagil.io&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Linguagens&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://telegram.me/go_br&#34;&gt;https://telegram.me/go_br&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/rubybrasil&#34;&gt;https://telegram.me/rubybrasil&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/pythonbr&#34;&gt;https://telegram.me/pythonbr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://telegram.me/PyCoding&#34;&gt;https://telegram.me/PyCoding&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Participe!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Resumo TDC-SP</title>
      <link>https://archives.gutocarvalho.net/post/2016-07-12-tdcsp-resumo/</link>
      <pubDate>Tue, 12 Jul 2016 14:22:58 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-07-12-tdcsp-resumo/</guid>
      <description>&lt;p&gt;Passando para informar que foi um prazer participar do TCP SP na trilha infra ágil. Este ano
além de ajudar a coordenadar a trilha eu palestrei e abri o evento na sexta-feira em parceira com o Miguel Filho.  Aproveitamos para lançar o site &lt;a href=&#34;infraagil.io&#34;&gt;infragil.io&lt;/a&gt; durante a palestra, foi intenso
e o feedback do pessoal foi bastante positivo.&lt;/p&gt;
&lt;p&gt;Palestras apresentadas:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Infra Ágil do conceito a prática (Guto e Miguel)&lt;br&gt;&lt;/li&gt;
&lt;li&gt;Equipes Ágeis de infraestrutura (Guto)&lt;br&gt;&lt;/li&gt;
&lt;li&gt;Gerência de Configuração vs Orquestração (Miguel)&lt;br&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Gostei bastante de participar de um evento tão plural e diverso.&lt;/p&gt;
&lt;p&gt;#‎Recomendo‬&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vagas DevOps fazem sentido? Entenda!</title>
      <link>https://archives.gutocarvalho.net/post/2016-06-03-vagas-devops-nao-fazem-sentido/</link>
      <pubDate>Fri, 03 Jun 2016 12:25:25 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-06-03-vagas-devops-nao-fazem-sentido/</guid>
      <description>&lt;p&gt;Esse post foi escrito para tentar ajudar — em especial recrutadores — que recorrentemente postam vagas &amp;ldquo;DevOps&amp;rdquo; em diversos grupos e canais de TI, sem trazer junto com a vaga qualquer tipo de informação que dê uma pista mínima do que ele espera do profissional que deseja recrutar.&lt;/p&gt;
&lt;p&gt;Respondendo a pergunta do título:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Não, não fazem!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E quem diz isso são apenas os criadores do movimento DevOps e core members do DevOpsDays, dentre eles Patrick Debois, Damon Edwards, John Willis e outros.&lt;/p&gt;
&lt;p&gt;Hoje o mundo está tomado por vagas Arquiteto DevOps, Engenheiro DevOps, Especialista DevOps ou simplesmente &amp;ldquo;DevOps&amp;rdquo;, além de ser um &amp;ldquo;cargo&amp;rdquo; abstrato, a informação sobre as vagas é muito ruim ou inexistente, simplesmente está lá o nome do cargo e cabe a nós de forma mágica tentar entender o que o recrutador está buscando.&lt;/p&gt;
&lt;p&gt;Certa vez estava ministrando uma palestra e perguntei para 6 pessoas em pontos diferentes do auditório o que cada um entendia como DevOps, recebi 6 respostas completamente diferentes, agora imagina alguém colocando esse termo em uma vaga, cada interessado vai entender uma coisa, será uma confusão.&lt;/p&gt;
&lt;p&gt;Entenda que DevOps é essencialmente uma CULTURA, fica difícil você colocar anúncio para contratar uma cultura, um modelo, um movimento, uma metodologia.&lt;/p&gt;
&lt;p&gt;Faça uma comparação com desenvolvimento, você não vê por ai vagas para &amp;ldquo;desenvolvedores ágeis&amp;rdquo;, afinal o &amp;ldquo;ágil&amp;rdquo; em questão é um modelo, uma metodologia, você vê vagas para desenvolvedores nas quais dentro dos requisitos esperados está &amp;ldquo;Metodologia ágil de desenvolvimento&amp;rdquo;. DevOps é o mesmo caso, você não deveria procurar um Engenheiro DevOps, você deveria procurar um Engenheiro e dentro dos requisitos deve colocar &amp;ldquo;Cultura DevOps/Metodologia DevOps&amp;rdquo;, isso faz sentido.&lt;/p&gt;
&lt;h2 id=&#34;confusões-e-esclarecimentos&#34;&gt;Confusões e esclarecimentos&lt;/h2&gt;
&lt;p&gt;No Brasil especialmente a confusão sobre DevOps é terrível, tem gente que acha que DevOps é um programador que sabe infra, ou que é um sysadmin que sabe programar. O fato é que DevOps não é um cargo, não é uma pessoa, DevOps é uma CULTURA.&lt;/p&gt;
&lt;p&gt;Outra confusão que vejo com muita frequência é sobre CI (Continuous Integration) e CD (Continuos Delivery/Deployment) serem DevOps ou não.&lt;/p&gt;
&lt;p&gt;Tem gente que fala:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- Amanhã vou em um evento DevOps, discutir CD em plataforma Java e .Net.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ok, dentro da Cultura DevOps você pode sim utilizar CD e CI, certamente vai usar, mas isso é uma ferramenta/metodologia que você traz para ajudar a resolver problemas culturais em uma organização, isso sozinho não pode ser considerado DevOps, na verdade é injusto pegar algo tão amplo, tão importante e reduzir a um simples pipeline de commit, build, test e deploy.&lt;/p&gt;
&lt;p&gt;Sim, DevOps foi criado para entregar software melhor, mais rápido, com menor risco, de forma automatizada e controlada, ele é fundamentado nisso, mas antes de tudo, a Cultura estabelece uma série de eixos para resolver os problemas internos da organização que a IMPEDEM de entregar softwares melhores, mais rápidos, com menor risco de forma automatizada.&lt;/p&gt;
&lt;p&gt;Antes da tecnologia vem o problema a ser assumido, resolvido, uma cultura a ser mudada para que todas as tecnologias e métodos possam ajudar.&lt;/p&gt;
&lt;p&gt;CULTURA, guarde essa palavra, se não houver mudança de CULTURA não adianta querer trazer as tecnologias ou métodos para seu time ou organização. A tecnologia não vai resolver seu problema se a sua CULTURA está QUEBRADA.&lt;/p&gt;
&lt;h2 id=&#34;como-contratar-alguém-que-saiba-essa-cultura&#34;&gt;Como contratar alguém que saiba essa cultura?&lt;/h2&gt;
&lt;p&gt;Eu — recrutador — preciso contratar um entusiasta da cultura DevOps, eu quero começar a transformar a minha organização, esse cara será o agente de mudanças, qual o nome dele?&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;CONSULTOR
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tá, mas eu quero alguém técnico para trabalhar já bebendo na fonte dessa cultura, e ai como divulgo?&lt;/p&gt;
&lt;p&gt;Segue um exemplo:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Nome da vaga (sem devops no meio)&lt;/p&gt;
&lt;p&gt;Estamos buscando um profissional que consiga trabalhar em times multidisciplinares, que tenha sólidos conhecimentos de programacao na plataforma/linguagem X, e bons fundamentos de sistemas operacionais e redes, que tenha condições de trabalhar com metodos ágeis, com processos e tecnologias de automação. Este profissional deve ter facilidade para adaptar metodos ágeis para uso interno do seu time e de suas atividades.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Procuramos essencialmente profissionais que consigam se relacionar bem com o seu time, que saibam fazer parte de um time, que respeitem o time, que saibam dividir e compartilhar responsabilidades com o time, que gostem de estudar e aprender novas tecnologias e que gostem de compartilhar o seu conhecimento.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Precisamos de profissionais que entendam que sua função é fazer com que o negócio da organização flua, ou seja, o foco do trabalho é oferecer suporte e sustentação as necessidades das pessoas que estão pensando, criando, escrevendo, desenvolvendo e publicando os produtos para atender as necessidades dos clientes desta organização.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Nesta organização enxergamos a TI como uma unidade orgânica composta por pessoas, as pessoas são importantes para nós, nosso entendimento é que a TI é um time monolítico que compartilha seus sucessos e aprendizados.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Queremos que você agregue valor ao nosso time e a nossa organização, e queremos que a organização agrege valor a você.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Tecnologias com as quais trabalhamos:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Linguagens&lt;/li&gt;
&lt;li&gt;Sistemas operacionais&lt;/li&gt;
&lt;li&gt;Serviços&lt;/li&gt;
&lt;li&gt;Plataformas de desenvolvimento&lt;/li&gt;
&lt;li&gt;Plataformas de automação&lt;/li&gt;
&lt;li&gt;Plataformas de monitoramento&lt;/li&gt;
&lt;li&gt;Plataformas de segurança&lt;/li&gt;
&lt;li&gt;Plataformas de nuvem e virtualização&lt;/li&gt;
&lt;li&gt;Plataformas de armazenamento&lt;/li&gt;
&lt;li&gt;Plataformas de rede&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Métodos que utilizamos em nossos times:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Método A&lt;/li&gt;
&lt;li&gt;Método B&lt;/li&gt;
&lt;li&gt;Método C&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;O que esperamos de você?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Esperamos que nos ajude a identificar as melhores tecnologias que possam ser utilizadas por novos produtos&lt;/li&gt;
&lt;li&gt;Esperemos que nos ajude a identificar tecnologias que possam melhorar a performance de produtos existentes&lt;/li&gt;
&lt;li&gt;Esperamos que nos ajude a acompanhar a performance e o funcionamento das aplicações&lt;/li&gt;
&lt;li&gt;Esperamos que nos ajude a melhorar nossos processos de provisionamento de vms e containers&lt;/li&gt;
&lt;li&gt;Esperamos que nos ajude a melhorar e agilizar o processo e o tempo necessário para criação de novos ambientes&lt;/li&gt;
&lt;li&gt;Esperamos que nos ajude a oferecer mecanismos de autoserviço entregando recursos diretamente aos desenvolvedores&lt;/li&gt;
&lt;li&gt;Esperamos que nos ajude a automatizar e otimizar nossa infra ao máximo&lt;/li&gt;
&lt;li&gt;Esperamos que nos ajude a registrar mudanças e eventos, gerando relatórios que possibilitem auditoria se preciso&lt;/li&gt;
&lt;li&gt;Esperamos que nos ajude a manter e evoluir nosso processo de deploy para que  possamos entregar sempre e entregar rápido&lt;/li&gt;
&lt;li&gt;Esperamos que você possa ir além, propondo, criando, mudando, construindo e evoluindo junto conosco.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Se você acha que as características necessárias para participar de nossos projetos e de nosso time, entre em contato!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Veja que é muito mais simples e claro dizer o que você espera da pessoa usando a cultura DevOps como referência e não como nome de cargo. Não há necessidade de enfiar o termo DevOps no meio da vaga. Infelizmente muito recrutadores fazem isso pois esperam que magicamente apareça aquele candidato que vai se encaixar na vaga e resolver a vida dele, isso não acontece, acredite.&lt;/p&gt;
&lt;h2 id=&#34;mais-esclarecimentos&#34;&gt;Mais esclarecimentos&lt;/h2&gt;
&lt;p&gt;Antes que perguntem sobre sysadmin programar, sim, todo o profissional de TI deveria saber programar, isso não é exatamente Rocket Science, é uma qualidade fundamental para qualquer tipo de vaga de TI hoje em dia, principalmente se a organização se fundamenta pela cultura DevOps que tem automação como um dos seus pilares (CAMS/ICE).&lt;/p&gt;
&lt;p&gt;É sempre bom lembrar que saber programar e ser um desenvolvedor ou engenheiro de software são coisas bem diferentes, normalmente não é isso que as pessoas estão buscando quando divulgam esse tipo de vaga.&lt;/p&gt;
&lt;p&gt;Se precisa de um desenvolvedor, divulgar isso não tem mistério.&lt;/p&gt;
&lt;h2 id=&#34;momento-reflexão&#34;&gt;Momento &amp;ldquo;Reflexão&amp;rdquo;&lt;/h2&gt;
&lt;p&gt;Puxa eu — demandante da vaga — não preciso de nada disso, minha organização tem uma hierarquia bem vertical e engessada, tem vários silos e as pessoas não vão topar esse modelo ou essa mudança de cultura.&lt;/p&gt;
&lt;p&gt;Se for esse o caso então sua necessidade não tem nada a ver com DevOps, talvez o que você esteja procurando seja um profissional de &lt;strong&gt;operação&lt;/strong&gt; que use métodos &lt;strong&gt;ágeis&lt;/strong&gt;, alguém que saiba aplicar métodos + automação em um silo como por exemplo uma equipe de sustentação ou infraestrutura.&lt;/p&gt;
&lt;p&gt;Neste cenário tal profissional conseguirá melhorar processos ali, naquele time, e fazer uma transformação naquela realidade local — isso também é possível. A isso temos (Eu e Miguel Filho) dado o nome de &lt;strong&gt;infra ágil&lt;/strong&gt;, que é uma necessidade e característica mais próxima do que temos visto no Brasil, seja em governo, seja em iniciativa privada.&lt;/p&gt;
&lt;p&gt;Eu falarei mais disso em outro post ou em outro blog ;)&lt;/p&gt;
&lt;p&gt;Espero ter ajudado.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>DevOps in simple english</title>
      <link>https://archives.gutocarvalho.net/post/2016-06-02-devops-in-simple-english-rackspace/</link>
      <pubDate>Thu, 02 Jun 2016 16:55:39 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-06-02-devops-in-simple-english-rackspace/</guid>
      <description>&lt;p&gt;Abaixo coloco mais um vídeo bem simples para explicar DevOps feito pela Rackspace, muito bacana ;)&lt;/p&gt;
&lt;iframe width=&#34;660&#34; height=&#34;330&#34; src=&#34;https://www.youtube.com/embed/_I94-tJlovg&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Cinco anos de DevOps</title>
      <link>https://archives.gutocarvalho.net/post/2016-06-02-state-of-devops-2015/</link>
      <pubDate>Thu, 02 Jun 2016 16:41:51 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-06-02-state-of-devops-2015/</guid>
      <description>&lt;p&gt;Duas palestras para demonstrar o atual estado do movimento e da cultura DevOps nos últimos 5 anos, uma do John Willis (criador da metodologia CAMS) e outra do Patrick Debois (criador do devopsdays).&lt;/p&gt;
&lt;iframe width=&#34;660&#34; height=&#34;330&#34; src=&#34;https://www.youtube.com/embed/8rM8lYaMVBE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;660&#34; height=&#34;330&#34; src=&#34;https://www.youtube.com/embed/uRMV6tT_mu0&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Ambas dão uma noção de onde veio e como está o movimento hoje.&lt;/p&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Origens da cultura DevOps</title>
      <link>https://archives.gutocarvalho.net/post/2016-06-02-origens-devops/</link>
      <pubDate>Thu, 02 Jun 2016 16:36:50 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-06-02-origens-devops/</guid>
      <description>&lt;p&gt;Damon Edwards faz um excelente vídeo sobre as origens do DevOps, recomendo a todos que querem entender melhor esse movimento e cultura.&lt;/p&gt;
&lt;iframe width=&#34;660&#34; height=&#34;330&#34; src=&#34;https://www.youtube.com/embed/o7-IuYS0iSE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet vs Ansible?</title>
      <link>https://archives.gutocarvalho.net/post/2016-06-02-ansible-e-puppet/</link>
      <pubDate>Thu, 02 Jun 2016 11:55:19 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-06-02-ansible-e-puppet/</guid>
      <description>&lt;p&gt;Essa é uma questão recorrente nas comunidades que participo e portanto vou registrar aqui no blog a minha visão para facilitar a resposta.&lt;/p&gt;
&lt;h2 id=&#34;definições&#34;&gt;Definições&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;O Puppet é uma ferramenta de &lt;strong&gt;gerência de configurações&lt;/strong&gt; e estados que vem da escola de GCONF do Mark Burgess, criador do CFEngine e destes princípios que vem sendo contruídos desde os anos 90.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;O Ansible é uma ferramenta que faz o que chamamos de &lt;strong&gt;orquestração&lt;/strong&gt;, ele não segue os princípios fundamentais de CCONF e o seu desenho não segue a escola do Mark Burgess.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;1-como-funciona-o-ansible&#34;&gt;1. Como funciona o Ansible&lt;/h2&gt;
&lt;p&gt;Imagine que você tem uma VM com o ansible instalado.&lt;/p&gt;
&lt;p&gt;Nessa VM voce cria um playbook (código que vai executar alguma ação em um sistema operacional).&lt;/p&gt;
&lt;p&gt;Você diz pro ansible a lista de máquinas em que ele vai se conectar para rodar aquele playbook.&lt;/p&gt;
&lt;p&gt;A VM que roda o ansible converte aquele playbook em um código python e se conecta (faz o PUSH do código) em N máquinas utilizando sua rede para aplicá-lo. Na VM de destino é necessário ter o python e as python-libs exigidas pelo playbook.&lt;/p&gt;
&lt;p&gt;O Ansible se conecta nestas máquinas utilizando o conhecido protocolo SSH, ele depende disso para funcionar, portanto é necessário ter credenciais de acesso ou chaves que te possibilitem chegar nestas VMs, se não houver serviço SSH rodando ou credenciais de acesso, não será possível fazer a orquestração.&lt;/p&gt;
&lt;p&gt;Para se conectar as todas essas VMs, a máquina com Ansible tem que ter acesso a todas as redes em que as VMs estão rodando para poder orquestrá-las, portanto, você terá que fazer algumas regras de firewall para garantir o acesso a todos os pontos de sua infraestrutura.&lt;/p&gt;
&lt;p&gt;Se você for aplicar um playbook em centenas ou milhares de máquinas paralelamente há de se tomar um cuidado extra pois ele pode gerar throughtput além das capacidades do seu switch/roteador no momento em que for tentar alcançar todos OSs simultâneamente ou dentro do paralelismo que você definir.&lt;/p&gt;
&lt;p&gt;Nem tudo no Ansible tem controles rídigos ou é idempotente, algumas coisas são, outras não, idempotência não é uma pedra fundamental em seu desenho, além disto, ele não foi feito para gerar um relatório detalhado, garantir o sucesso ou ter um rídido controle da execução do playbook, no final ele executa o playbook onde você pede - o foco da orquestração é esse - mas a visibilidade é pequena, você não tem como saber de forma precisa se atingiu o seu objetivo ou se tudo o que você queria foi realizado em todas as VMs. No momento, ele não tem o melhor dos feedbacks para o administrador, mesmo assim, como orquestrador ele é uma ferramenta muito interessante e poderosa.&lt;/p&gt;
&lt;h3 id=&#34;11-orquestração-em-poucas-palavras&#34;&gt;1.1 Orquestração em poucas palavras&lt;/h3&gt;
&lt;p&gt;Orquestração consiste em executar algo de forma paralela ou não em tempo real em um sistema operacional ou em um grupo de sistemas operacionais.&lt;/p&gt;
&lt;p&gt;Quando falarem orquestração, pelo menos do ponto de vista de automação de infraestrutura, tenha em mente alguém que se conecta em N sistemas operacionais e executa algo, pontualmente, sem exigência rígidas ou grandes controles.&lt;/p&gt;
&lt;h2 id=&#34;2-como-funciona-o-puppet&#34;&gt;2. Como funciona o Puppet?&lt;/h2&gt;
&lt;p&gt;O puppet foi desenhado dentro dos conceitos fundamentais da &amp;ldquo;gerência de configurações&amp;rdquo;, e por isso não tem a característica PUSH. Esses conceitos foram criados em 1993 pelo Professor Mark Burgess da universidade de OSLO. Suas principais características são o drift, convergência, idempotência, gerência de estados e uso de agentes nos &amp;ldquo;nodes&amp;rdquo; (termo que usamos para descrever um sistema operacional com um agente instalado).&lt;/p&gt;
&lt;p&gt;O conceito GCONF (Gerência de Configurações) foi estabelecido de forma mais concisa em 2004 com a criação da teoria Promisse do Mark Burgess que serviu de norte para a criação de todas as ferramentas modernas de CGCOF como Puppet, Salt, Chef e CFENGINE.&lt;/p&gt;
&lt;p&gt;Na CGONF você define um estado desejado através de uma linguagem declarativa chamada DSL (Domain specific language), armazena isso em um local central (neste caso no puppetmaster). Nas pontas temos os agentes rodando nos nodes, esses agentes vão buscar essa configuração e aplicar no node.&lt;/p&gt;
&lt;p&gt;Primeiro o agente verifica o estado atual do node, compara com o estado desejado, se houver divergência ele converge o node para o estado desejado. Todo esse processo gera um relatório robusto que registra todas as mudanças e eventos daquela drift/convergência.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Em resumo se alguém alterar algo que o puppet está gerenciando, o puppet detecta e corrige sem necessidade de intervenção humana, é o que chamamos de auto-healing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Quaisquer ações ou recursos utilizados no Puppet tem como premissa a idempotência e o rídigo controle durante a aplicação, esse é um princípio fundamental do seu desenho. O agente roda como serviço no sistema operacional, portanto, a cada N minutos ele acorda e executa essa checagem em todo o sistema para garantir o compliance e o estado desejado, essa é sua missão, ele é o guardião dos estados e da integridade do node.&lt;/p&gt;
&lt;p&gt;O servidor nunca se conecta nos nós, apenas os nós de conectam no servidor. O servidor que contém as configurações pode ser facilmente replicado e colocado atrás de um balanceador. Você difícilmente tem problemas com throughput em sua rede como aqueles que podem acontecer com orquestradores e praticamente não precisa de preocupar com regras firewall, os nodes precisam se conectar à porta 8140 TCP do master ou do seu LB, apenas isto.&lt;/p&gt;
&lt;p&gt;O Puppet não depende de serviços de terceiros como SSH para funcionar, ele utiliza seu próprio agente e a comunicação ocorre através de uma API REST que é utilizada pelo agente para se comunicar com o master.&lt;/p&gt;
&lt;p&gt;Toda a comunicação é criptografada ponta-a-ponta e o custo disso para rede é baixíssimo se comparado com outros médotos.&lt;/p&gt;
&lt;p&gt;Outra grande vantagem desse modelo é que mesmo que o servidor esteja fora, os agentes continuam funcionando e aplicando a última configuração recebida.&lt;/p&gt;
&lt;h3 id=&#34;21-gerência-de-configurações-em-poucas-palavras&#34;&gt;2.1 Gerência de configurações em poucas palavras&lt;/h3&gt;
&lt;p&gt;Ferramentas de gerência de configuração funcionam em arquitetura agente e servidor, o servidor armazena as configurações dos nodes. O agente que roda no node, busca as configurações e aplica localmente.&lt;/p&gt;
&lt;p&gt;O agente funciona com o conceito de gerência de estados. Você usa uma linguagem declarativa para descrever os estados desejados nos nodes de sua rede.&lt;/p&gt;
&lt;p&gt;Idempotência é uma princípio fundamental do agente. Há um robusto sistema de relatórios e registro de eventos e mudanças. O servidor nunca se conecta nos nós, apenas os nós se conectam ao servidor.&lt;/p&gt;
&lt;h2 id=&#34;3-conclusão&#34;&gt;3. Conclusão&lt;/h2&gt;
&lt;p&gt;No final ambas são ferramentas de gerência, o Puppet faz a gerência de configurações e estados e o Ansible faz gerência por orquestração. Tais ferramentas atuam de formas distintas e tem objetivos e usos diferentes.&lt;/p&gt;
&lt;p&gt;Acima de tudo é importante entender que elas não são concorrentes.&lt;/p&gt;
&lt;p&gt;É bom ter as duas no seu cinto de utilidades, dependendo do projeto você terá uso para uma ou para outra.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Plugins que uso no ATOM</title>
      <link>https://archives.gutocarvalho.net/post/2016-05-26-atom-plugins/</link>
      <pubDate>Thu, 26 May 2016 20:33:30 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-05-26-atom-plugins/</guid>
      <description>&lt;p&gt;Sempre me perguntam quais plugins eu uso no ATOM para desenvolvimento Puppet, segue a lista:&lt;/p&gt;
&lt;p&gt;De linguagem:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;language-puppet do atom&lt;/li&gt;
&lt;li&gt;language-yaml do atom&lt;/li&gt;
&lt;li&gt;language-ruby do tom&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;De linter:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;linter do atom-community&lt;/li&gt;
&lt;li&gt;linter-puppet-lint do atom-community&lt;/li&gt;
&lt;li&gt;linter-puppet-parser do asquelt&lt;/li&gt;
&lt;li&gt;linter-ruby do atomcommunity&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;De align:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;aligner do adrianlee44&lt;/li&gt;
&lt;li&gt;aligner-puppet do bigbrozer&lt;/li&gt;
&lt;li&gt;aligner-ruby do adrianlee44&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Outros:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;file-icons do DanBrooker&lt;/li&gt;
&lt;li&gt;git-control do jacogr&lt;/li&gt;
&lt;li&gt;open-recent do zren&lt;/li&gt;
&lt;li&gt;minimap do atom-minimap&lt;/li&gt;
&lt;li&gt;remote-edit do sveale&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Normalmente monto - via sshfs - o diretório com o código que está em alguma VM de desenvolvimento e trabalho no conforto do ATOM.&lt;/p&gt;
&lt;p&gt;Meus alunos preferem que eu mostre o código no ATOM e eles sempre falam muito bem do linter.&lt;/p&gt;
&lt;p&gt;#ficaadica&lt;/p&gt;
&lt;p&gt;Se você tiver dica de plugins pro ATOM manda nos comentários ;)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Estarei no DevOpsDays 2016 em Porto Alegre</title>
      <link>https://archives.gutocarvalho.net/post/2016-05-26-participacao-devopsdays/</link>
      <pubDate>Thu, 26 May 2016 20:33:05 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-05-26-participacao-devopsdays/</guid>
      <description>&lt;p&gt;Galera fui convidado para apresentar alguns cases de automação de infraestrutura no DevOpsDays de Porto Alegre, será no dia 09 de julho de 2016. Ainda não sei o horário, mas fica a dica do evento.&lt;/p&gt;
&lt;p&gt;Faça sua inscrição!&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.devopsdays.org/events/2016-portoalegre/welcome/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vejo vocês lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Estarei no TDC SP 2016 :)</title>
      <link>https://archives.gutocarvalho.net/post/2016-05-26-participacao-tdcsp/</link>
      <pubDate>Thu, 26 May 2016 20:32:59 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-05-26-participacao-tdcsp/</guid>
      <description>&lt;p&gt;Fui convidado para ajudar a coordenar a trilha de &amp;ldquo;Infra Ágil&amp;rdquo; no &amp;ldquo;The Developers Conference São Paulo&amp;rdquo; que vai acontecer em Julho de 2016.&lt;/p&gt;
&lt;p&gt;Devo apresentar uma palestra de nome homônimo no evento. A trilha deve acontecer no dia 08 de Julho, ainda não está definido o horário, aviso por aqui assim que souber.&lt;/p&gt;
&lt;p&gt;A chamada de trabalhos ainda está aberta, mande sua proposta até o dia 4 de Junho.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.thedevelopersconference.com.br/tdc/2016/saopaulo/call4papers
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vejo vocês lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Resultado do Meetup Puppet DF 20160518</title>
      <link>https://archives.gutocarvalho.net/post/2016-05-26-meetup-puppet-df-20160518-resultado/</link>
      <pubDate>Thu, 26 May 2016 20:32:45 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-05-26-meetup-puppet-df-20160518-resultado/</guid>
      <description>&lt;p&gt;O Meetup foi execelente, tivemos cerca de noventa inscritos, compareceram cerca de sessenta pessoas, se contarmos a turma da organização e os palestantres acho que tivemos umas setenta pessoas presentes.&lt;/p&gt;
&lt;p&gt;Meus agradecimentos à faculdade evangélica, em especial do Prof. Maurício e ao Prof. Dirceu que cederam espaço e nos ajudaram na logística do encontro.&lt;/p&gt;
&lt;p&gt;Não conseguimos apresentar do jeito que queríamos o último trabalho (Integração de GitLab com Puppet) devido ao tempo que ficou apertado, mas conseguimos avançar com conteúdo de Puppet para a comunidade local.&lt;/p&gt;
&lt;p&gt;A experiência nos mostrou que é melhor reduzir os temas nos próximos encontros, portanto, o próximo meetup terá tema específico, seja desenvolvimento de módulos, seja testes, seja pcp, apenas um tema que iremos desenvolver do início ao fim.&lt;/p&gt;
&lt;p&gt;Agradeço aos palestrantes Adriano, Taciano, Rafael e Dirceu pelo tempo que investiram no encontro e por terem compartilhado experiência e conhecimento conosco.&lt;/p&gt;
&lt;p&gt;Estamos estudando fazero próximo agora em junho, aguardo sugestões de temas, ideias e quem sabe uma nova parceria para hospedar o Meetup.&lt;/p&gt;
&lt;h2 id=&#34;fotos&#34;&gt;Fotos&lt;/h2&gt;
&lt;p&gt;Acesse as fotos no link abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://www.flickr.com/photos/puppet-br/albums/72157666275683673
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;slides&#34;&gt;Slides&lt;/h2&gt;
&lt;p&gt;Os slides estão no speakerdeck:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-intro-puppet&#34;&gt;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-intro-puppet&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-integracao-entre-puppet-e-vagrant&#34;&gt;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-integracao-entre-puppet-e-vagrant&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-projeto-pcp&#34;&gt;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-projeto-pcp&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-desenvolvendo-modulos-e-fatos-puppet&#34;&gt;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-desenvolvendo-modulos-e-fatos-puppet&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-testes-de-codigo-puppet&#34;&gt;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160518-testes-de-codigo-puppet&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Foi liberado o PCP 1.0.2</title>
      <link>https://archives.gutocarvalho.net/post/2016-05-10-pcp-nova-versao/</link>
      <pubDate>Tue, 10 May 2016 11:36:59 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-05-10-pcp-nova-versao/</guid>
      <description>&lt;p&gt;O projeto PCP está em casa nova e com nova versão. Movemos o projeto para a organização Puppet-BR no github para facilitar a contribuição. Agora a documentação está toda em inglês o que facilita o uso para pessoas de qualquer parte do mundo.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppet-br/pcp&#34;&gt;https://github.com/puppet-br/pcp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppet-br/pcp-controlrepo&#34;&gt;https://github.com/puppet-br/pcp-controlrepo&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Já fizemos a homologação das versões mais recentes do puppet nesta release:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Puppet Server 2.3.2&lt;/li&gt;
&lt;li&gt;Puppet Agent 1.4.2&lt;/li&gt;
&lt;li&gt;Mcollective 2.8.8&lt;/li&gt;
&lt;li&gt;PuppetDB 4.0.2&lt;/li&gt;
&lt;li&gt;PostgreSQL 9.4.6&lt;/li&gt;
&lt;li&gt;Puppet Explorer 2.0.0&lt;/li&gt;
&lt;li&gt;ActiveMQ 5.13.2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Agradeço por todas as ideias e por todas as contribuições recebidas no GitHub, agradeço pela turma que participou do Meetup PCP em Brasília e por todos que ajudaram a testar a nova versão.
[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em BSB no dia 18-05</title>
      <link>https://archives.gutocarvalho.net/post/2016-05-10-meetup-puppet-18maio/</link>
      <pubDate>Tue, 10 May 2016 09:55:11 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-05-10-meetup-puppet-18maio/</guid>
      <description>&lt;p&gt;Foi marcado um Meetup Puppet-BR em Brasília no dia 18 de Maio, será no
edifício Parque Cidade Corporate, vai começar às 18:30.&lt;/p&gt;
&lt;p&gt;Este será o terceiro encontro técnico do ano, foco nas atividades práticas.&lt;/p&gt;
&lt;p&gt;Faça sua inscrição, temos apenas 50 vagas.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.meetup.com/pt-BR/puppet-br/events/230816720/&#34;&gt;http://www.meetup.com/pt-BR/puppet-br/events/230816720/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;programação&#34;&gt;Programação:&lt;/h2&gt;
&lt;h3 id=&#34;1-intro-cgonf--puppet-4&#34;&gt;1. Intro CGONF &amp;amp; Puppet 4&lt;/h3&gt;
&lt;p&gt;Palestrante: Rafael Sales &amp;amp; Guto Carvalho&lt;br&gt;
Tempo: 40 min&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introdução rápida a gerência de configurações;&lt;/li&gt;
&lt;li&gt;Introdução ao Puppet 4.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-projeto-pcp&#34;&gt;2. Projeto PCP&lt;/h3&gt;
&lt;p&gt;Palestrante: Taciano Tres &amp;amp; Guto Carvalho&lt;br&gt;
Tempo: 20 min&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Apresentação do projeto PCP;&lt;/li&gt;
&lt;li&gt;Demo de instalação do PCP.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-oficina-de-desenvolvimento-de-módulos-e-fatos-puppet&#34;&gt;3. Oficina de desenvolvimento de módulos e fatos Puppet&lt;/h3&gt;
&lt;p&gt;Palestrante: Rafael Sales &amp;amp; Guto Carvalho&lt;br&gt;
Tempo: 40 minutos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Demo de desenvolvimento de módulos;&lt;/li&gt;
&lt;li&gt;Demo de desenvolvimento de fatos.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-integração-do-puppet-com-vagrant&#34;&gt;4. Integração do Puppet com Vagrant&lt;/h3&gt;
&lt;p&gt;Palestrante: Taciano Tres&lt;br&gt;
Tempo: 20 minutos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introdução rápida ao Vagrant;&lt;/li&gt;
&lt;li&gt;Uso do Provider Puppet Apply;&lt;/li&gt;
&lt;li&gt;Uso do Provider Puppet Agent;&lt;/li&gt;
&lt;li&gt;Demo de integração de Puppet com Vagrant.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5-testes-de-código-puppet&#34;&gt;5. Testes de código Puppet&lt;/h3&gt;
&lt;p&gt;Palestrante: Adriano Vieira &amp;amp; Guto Carvalho&lt;br&gt;
Tempo: 30 minutos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Porque testar?&lt;/li&gt;
&lt;li&gt;Puppet Parser Validate&lt;/li&gt;
&lt;li&gt;Puppet Lint&lt;/li&gt;
&lt;li&gt;Entendendo teste unitário;&lt;/li&gt;
&lt;li&gt;Entendendo teste de aceitação;&lt;/li&gt;
&lt;li&gt;Introdução rápida ao Rspec-Puppet;&lt;/li&gt;
&lt;li&gt;Introdução rápida ao ServerSpec;&lt;/li&gt;
&lt;li&gt;Introdução rápida ao Beaker;&lt;/li&gt;
&lt;li&gt;Demo de desenvolvimento de teste unitário para o módulo que criamos;&lt;/li&gt;
&lt;li&gt;Demo de desenvolvimento de teste de aceitação.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6-integração-do-puppet-com-gitlab&#34;&gt;6. Integração do Puppet com GitLab&lt;/h3&gt;
&lt;p&gt;Palestrantes: Douglas Andrade e Guto Carvalho&lt;br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introdução rápida ao GitLab;&lt;/li&gt;
&lt;li&gt;Demo de instalação do GitLab;&lt;/li&gt;
&lt;li&gt;Demo GitLab CI;&lt;/li&gt;
&lt;li&gt;Integrações com Puppet (VCSREPO);&lt;/li&gt;
&lt;li&gt;Integrações com Puppet (R10k).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Este blog mudou</title>
      <link>https://archives.gutocarvalho.net/post/2016-05-10-este-blog-mudou/</link>
      <pubDate>Tue, 10 May 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-05-10-este-blog-mudou/</guid>
      <description>&lt;p&gt;Este blog mudou para &lt;a href=&#34;http://gutocarvalho.net/blog&#34;&gt;http://gutocarvalho.net/blog&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Está sendo mantido apenas como legacy.&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em BSB Hackaton</title>
      <link>https://archives.gutocarvalho.net/post/2016-03-28-meetup-puppet-df/</link>
      <pubDate>Mon, 28 Mar 2016 10:26:02 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-03-28-meetup-puppet-df/</guid>
      <description>&lt;p&gt;Foi marcado um meetup Puppet em Brasília no dia 03 de Abril.&lt;/p&gt;
&lt;p&gt;Este meetup é mais técnico, vai ser estilo hackaton, vamos nos reunir em uma grande mesa e contribuir com o projeto PCP (Puppet Community Platform).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://github.com/gutocarvalho/pcp&#34;&gt;http://github.com/gutocarvalho/pcp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Requisitos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cada um traz seu notebook ou desktop&lt;/li&gt;
&lt;li&gt;Cada um traz o que desejar beber ou comer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Recursos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mesas e cadeiras&lt;/li&gt;
&lt;li&gt;Internet 120 Mbits Wifi&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Atividades planejadas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Homologar última versão do Puppet Server com o PCP;&lt;/li&gt;
&lt;li&gt;Homologar última versão do Puppet Agent com o PCP;&lt;/li&gt;
&lt;li&gt;Homologar última versão do PuppetDB;&lt;/li&gt;
&lt;li&gt;Homologar Puppet Explorer com versão recente do * PuppetDB;&lt;/li&gt;
&lt;li&gt;Homologar última versão do ActiveMQ (repo externo);&lt;/li&gt;
&lt;li&gt;Iniciar estudo de compatibilidade para Debian 8;&lt;/li&gt;
&lt;li&gt;Tradução do README.md para ingles&lt;/li&gt;
&lt;li&gt;Tradução do CHANGELOG para ingles&lt;/li&gt;
&lt;li&gt;Criação de site para PCP com hugo;&lt;/li&gt;
&lt;li&gt;Criação de sub-dominio pcp.infraagil.io.&lt;/li&gt;
&lt;li&gt;Deploy do novo site com hugo&lt;/li&gt;
&lt;li&gt;Planejamento de PCP em docker&lt;/li&gt;
&lt;li&gt;Estudo para merge dos projetos PCP e PCP-M&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Faça sua inscrição no site:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.meetup.com/pt-BR/puppet-br/events/229932603/&#34;&gt;http://www.meetup.com/pt-BR/puppet-br/events/229932603/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nos vemos lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em Sao Paulo</title>
      <link>https://archives.gutocarvalho.net/post/2016-03-28-meetup-puppet-sp/</link>
      <pubDate>Mon, 28 Mar 2016 10:24:51 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-03-28-meetup-puppet-sp/</guid>
      <description>&lt;p&gt;Foi marcado um meetup Puppet em São Paulo no dia 07 de Abril.&lt;/p&gt;
&lt;p&gt;Programação:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introdução DevOps (20 min) - Guto&lt;/li&gt;
&lt;li&gt;Introdução Infraestrutura como código (20 min) - Daniel&lt;/li&gt;
&lt;li&gt;Introdução Puppet &amp;amp; Puppet 4 (20 min) - Miguel&lt;/li&gt;
&lt;li&gt;Demo de instalação de ambiente Puppet Community (15 min) - Guto&lt;/li&gt;
&lt;li&gt;Demo de instalação do Wordpress usando Puppet (15 min) - Miguel&lt;/li&gt;
&lt;li&gt;Bate papo aberto sobre DevOps, IAC, CM e Puppet (30 min) - Todos&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Faça sua inscrição no site:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.meetup.com/pt-BR/puppet-br/events/229839747/&#34;&gt;http://www.meetup.com/pt-BR/puppet-br/events/229839747/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nos vemos lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Projeto PCP</title>
      <link>https://archives.gutocarvalho.net/post/2016-03-27-projetopcp/</link>
      <pubDate>Sun, 27 Mar 2016 14:14:16 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-03-27-projetopcp/</guid>
      <description>&lt;p&gt;Lancei em parceria com o Miguel Filho o projeto PCP - Puppet Community Platform.&lt;/p&gt;
&lt;p&gt;O projeto PCP tem o objetivo de fornecer uma plataforma Puppet 4 completa,
com Puppet Server, Puppet Agent, PuppetDB, Mcollective e Puppet Explorer.
Tudo é instalado e integrado de forma automatizada.&lt;/p&gt;
&lt;p&gt;Esta plataforma é ideal para testes, avaliações da tecnologia Puppet e desenvolvimento
de módulos e fatos para o Puppet 4.&lt;/p&gt;
&lt;p&gt;Acesse o projeto:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://github.com/gutocarvalho/pcp&#34;&gt;http://github.com/gutocarvalho/pcp&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Você pode contribuir enviando PR (Pull Request).&lt;/p&gt;
&lt;p&gt;Todo são bem vindos para ajudar.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Olá Hugo!</title>
      <link>https://archives.gutocarvalho.net/post/2016-03-27-welcome/</link>
      <pubDate>Sun, 27 Mar 2016 08:33:47 -0300</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-03-27-welcome/</guid>
      <description>&lt;p&gt;Seja vem vindo ao novo blog do gutocarvalho.net.&lt;/p&gt;
&lt;p&gt;Infelizmente o projeto octopress tomou rumos inesperados e iniciei a busca por
outra ferramenta, depois de muitos testes me identifiquei com o hugo, um projeto
novo, com uma comunidade interessada e um desenvolvedor bastante ativo.&lt;/p&gt;
&lt;p&gt;Começando 2016 com tudo novo, vem comigo!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Conheca o projeto letsencrypt</title>
      <link>https://archives.gutocarvalho.net/post/2016-02-22-conheca-o-projeto-letsencrypt/</link>
      <pubDate>Mon, 22 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-02-22-conheca-o-projeto-letsencrypt/</guid>
      <description>&lt;p&gt;O projeto é uma nova autoridade certificadora que está emitindo certificados sem cobrar por isto, e o melhor, os navegadores já confiam nesta CA.&lt;/p&gt;
&lt;p&gt;Ainda estou testando o projeto, vale a pena conferir.&lt;/p&gt;
&lt;p&gt;Acesse o &lt;a href=&#34;https://letsencrypt.org&#34;&gt;site do projeto letsencrypt&lt;/a&gt; e entenda melhor o projeto.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Palestra sobre automação do SEI com Puppet no MINC</title>
      <link>https://archives.gutocarvalho.net/post/2016-02-22-palestra-sobre-automacao-do-sei-no-minc/</link>
      <pubDate>Mon, 22 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-02-22-palestra-sobre-automacao-do-sei-no-minc/</guid>
      <description>&lt;p&gt;Fui convidado a apresentar os resultados do projeto de implantação e automação do SEI na CGTI do Ministério da Cultura, o projeto aconteceu em 2015. Neste projeto, foi utilizado Puppet em todo a implantação para fazer automação de ambiente e serviços.&lt;/p&gt;
&lt;h2 id=&#34;slides&#34;&gt;Slides&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/implantacao-de-sei-com-puppet-no-minc-em-2015&#34;&gt;https://speakerdeck.com/gutocarvalho/implantacao-de-sei-com-puppet-no-minc-em-2015&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;vídeo&#34;&gt;Vídeo&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/IuwcgVccVJE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;códigos-liberados&#34;&gt;Códigos liberados&lt;/h2&gt;
&lt;p&gt;Módulo Puppet SEI AIO&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/gutocarvalho/puppet-sei-aio&#34;&gt;https://github.com/gutocarvalho/puppet-sei-aio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Vagrantfile para subir uma VM utilizando o módulo puppet-sei-aio&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/gutocarvalho/vagrant-puppet-sei-aio&#34;&gt;https://github.com/gutocarvalho/vagrant-puppet-sei-aio&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Templates Zabbix criados para monitorar o SEI&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/gutocarvalho/zabbix-sei&#34;&gt;https://github.com/gutocarvalho/zabbix-sei&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Resultado do Meetup Puppet-BR em Brasilia</title>
      <link>https://archives.gutocarvalho.net/post/2016-02-22-resultado-do-meetup-puppet-br-em-brasilia/</link>
      <pubDate>Mon, 22 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-02-22-resultado-do-meetup-puppet-br-em-brasilia/</guid>
      <description>&lt;p&gt;O Meetup de Brasília foi um sucesso, foram 64 inscritos, destes, 37 compareceram. Além dos inscritos, tivemos a presença de mais alguns convidados de última hora, além dos colegas do MINC. No total registramos 42 pessoas presentes.&lt;/p&gt;
&lt;p&gt;A sala oferecida pelo Minc foi excelente, todo mundo com sua própria mesa, desktop, internet, quem veio ficou confortável.&lt;/p&gt;
&lt;p&gt;Foram apresentadas duas palestras e uma oficina, conseguimos transmitir para o youtube e sorteamos uma caneca que trouxemos da PuppetConf&#39;2015.&lt;/p&gt;
&lt;h2 id=&#34;slides&#34;&gt;Slides&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160217-origens-devops&#34;&gt;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160217-origens-devops&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160217-introducao-ao-puppet-4&#34;&gt;https://speakerdeck.com/gutocarvalho/meetup-puppet-br-20160217-introducao-ao-puppet-4&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;vídeo-do-meetup&#34;&gt;Vídeo do Meetup&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/qmtyT5fxKGE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;tutorial-utilizado-no-oficina&#34;&gt;Tutorial utilizado no Oficina&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/octopress/2015/08/18/instalando-puppet-4-agent-and-master/&#34;&gt;http://gutocarvalho.net/octopress/2015/08/18/instalando-puppet-4-agent-and-master/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;É isso, até o próximo.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Cartaz Meetup Puppet-BR 17.02.16</title>
      <link>https://archives.gutocarvalho.net/post/2016-02-15-cartaz-meetup-puppet/</link>
      <pubDate>Mon, 15 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-02-15-cartaz-meetup-puppet/</guid>
      <description>&lt;p&gt;Agora nós temos um cartaz oficial para o Meetup Puppet-BR.&lt;/p&gt;
&lt;p&gt;Você pode imprimir e ajudar a divulgar.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;http://gutocarvalho.net/meetup/puppet-br/CampanhaA3_MEETUP.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup puppet-br 17 fev 2016]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Esperamos vocês lá.&lt;/p&gt;
&lt;p&gt;Dia 17 de Fevereiro às 19 horas.&lt;/p&gt;
&lt;p&gt;Faça sua inscrição no link abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://bit.ly/meetup-puppet-bsb-17fev16
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Teremos um Puppet Practitioner em Brasília</title>
      <link>https://archives.gutocarvalho.net/post/2016-02-01-teremos-um-puppet-practitioner-em-brasilia/</link>
      <pubDate>Mon, 01 Feb 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-02-01-teremos-um-puppet-practitioner-em-brasilia/</guid>
      <description>&lt;p&gt;Pela primeira vez teremos o treinamento avançado Puppet Practitioner em Brasília, séra em maio, a turma terá somente 12 vagas, faça sua incrição e garanta sua vaga para se tornar mais um Puppet Master.&lt;/p&gt;
&lt;p&gt;O treinamento ocorre na data&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;17, 18 e 19 de Maio
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça sua inscrição na URL&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://instruct.com.br/treinamentos/cadastro/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja o resumo da ementa deste treinamento&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Construções mais avançadas da linguagem DSL do Puppet que podem ser usadas para escrever código mais elegante;;&lt;/li&gt;
&lt;li&gt;Usao de estruturas de dados para criar resources programavelmente;&lt;/li&gt;
&lt;li&gt;Manipulação de resources exportados e compartilhamento de informações entre nodes;&lt;/li&gt;
&lt;li&gt;Criação de fatos personalizados para expor informações sobre nodes;&lt;/li&gt;
&lt;li&gt;Criação de funções personalizadas para maior eficiência do seu código&lt;/li&gt;
&lt;li&gt;Técnicas avançadas de manipulação de arquivos de configuração;&lt;/li&gt;
&lt;li&gt;Conceitos de modularidade e composição e como eles influenciam no design de módulos;&lt;/li&gt;
&lt;li&gt;Métodos para testar o seu código Puppet e sua infraestrutura;&lt;/li&gt;
&lt;li&gt;Uso do MCollective a partir da linha de comando para automatizar orquestração de infraestrutura;&lt;/li&gt;
&lt;li&gt;Técnicas de resolução de problemas e análise de arquivos de log;&lt;/li&gt;
&lt;li&gt;O padrão Roles e Profiles e os benefícios que ele oferece;&lt;/li&gt;
&lt;li&gt;Por que o anchor patern existe quando devemos usar a função contain();&lt;/li&gt;
&lt;li&gt;Criação de módulos genéricos e contribuindo de volta para a comunidade através do Forge Puppet;&lt;/li&gt;
&lt;li&gt;Compartilhando funcionalidades entre classes usando herança;&lt;/li&gt;
&lt;li&gt;Auditoria de eventos e mudanças;&lt;/li&gt;
&lt;li&gt;Customização de relatórios de mudanças.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Agenda de treinamentos Puppet Fundamentals 2016</title>
      <link>https://archives.gutocarvalho.net/post/2016-01-22-agenda-de-treinamentos-puppet-fundamentals-para-2016/</link>
      <pubDate>Fri, 22 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-01-22-agenda-de-treinamentos-puppet-fundamentals-para-2016/</guid>
      <description>&lt;p&gt;Foram marcados os primeiros treinamentos Puppet Fundamentals de 2016.&lt;/p&gt;
&lt;p&gt;São Paulo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;29 a 31 de março
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Brasília&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;26 a 28 de abril
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;São apenas 12 vagas por turma, faça sua reserva e garanta sua vaga o quanto antes, seja um puppet master você também!&lt;/p&gt;
&lt;p&gt;Assista o vídeo que explica o treinamento PF.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/Gq69cLQ97Fw&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Para mais informações envie um e-mail para &lt;a href=&#34;contato@instruct.com.br&#34;&gt;contato@instruct.com.br&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em Brasília no dia 17 de Fevereiro</title>
      <link>https://archives.gutocarvalho.net/post/2016-01-22-meetup-puppet-br-em-brasilia-no-dia-17-de-fevereiro/</link>
      <pubDate>Fri, 22 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-01-22-meetup-puppet-br-em-brasilia-no-dia-17-de-fevereiro/</guid>
      <description>&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/27nQlBBtaVc&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Foi marcado um meetup Puppet-BR para o dia 17 de Fevereiro às 19 horas, teremos apenas 25 vagas nesse encontro.&lt;/p&gt;
&lt;p&gt;É importante confirmar logo - só confirme se realmente puder ir.&lt;/p&gt;
&lt;p&gt;Acesse o site para confirmar =&amp;gt; &lt;a href=&#34;http://bit.ly/meetup-puppet-bsb-17fev16&#34;&gt;http://bit.ly/meetup-puppet-bsb-17fev16&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Agenda&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Introdução DevOPs (20 min)&lt;/li&gt;
&lt;li&gt;Introdução Puppet 4 (20 min)&lt;/li&gt;
&lt;li&gt;Q/A com instrutores dos treinamentos da Puppet Labs (20 min)&lt;/li&gt;
&lt;li&gt;Case de automação do MINC (20 min)&lt;/li&gt;
&lt;li&gt;Oficina Puppet 4 (40 min)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Requisitos Oficina&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Leve seu notebook para participar do oficina;&lt;/li&gt;
&lt;li&gt;Você preciso de 2 gigas de RAM livre para subir duas VMs;&lt;/li&gt;
&lt;li&gt;Você precisa do virtualbox e vagrant.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Vejo vocês lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Governo Britânico Libera o repositório Puppet do site GOV.UK</title>
      <link>https://archives.gutocarvalho.net/post/2016-01-21-governo-britanico-libera-seu-repositorio-puppet/</link>
      <pubDate>Thu, 21 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-01-21-governo-britanico-libera-seu-repositorio-puppet/</guid>
      <description>&lt;p&gt;O governo britânico liberou todo o seu código Puppet responsável por instalar, configurar e manter as aplicações do site GOV.UK. Você pode acessar esse &lt;a href=&#34;https://gdstechnology.blog.gov.uk/2016/01/19/opening-gov-uks-puppet-repository/&#34;&gt;post&lt;/a&gt; para conferir a notícia, o código encontra-se no &lt;a href=&#34;https://github.com/alphagov/govuk-puppet&#34;&gt;github&lt;/a&gt; e no puppet-&lt;a href=&#34;https://forge.puppetlabs.com/gdsoperations&#34;&gt;forge&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Antes de liberar o código, foi realizado um intenso trabalho para remover todas as credenciais que pudessem existir nos manifests de módulos puppet, essas credenciais foram colocadas em local externo, protegendo assim as aplicações.&lt;/p&gt;
&lt;p&gt;A iniciativa aconteceu pois existe um norma de governo chamada &amp;ldquo;Point 8&amp;rdquo; que está presente no &amp;ldquo;Digital by Default Service Standard&amp;rdquo; do governo Britânico. Essa norma estabelece que todo o código dos serviços de governo deve ser &amp;lsquo;aberto&amp;rsquo; e &amp;lsquo;reutilizável&amp;rsquo;. Além disto, existe também outro documento chamado &amp;ldquo;Desing Principle&amp;rdquo; que em seu décimo princípio recomenda manter as soluções abertas pois isto as faz melhores - &amp;ldquo;Make things open: it make things better&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;Segundo o blog gdstechnology, a partir de agora o desenvolvimento será todo realizado e centralizado no github.&lt;/p&gt;
&lt;p&gt;Veja a notícia no vlog!&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/VH5hzLWU2Q0&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Walmart com puppet em mais de 40 mil nodes</title>
      <link>https://archives.gutocarvalho.net/post/2016-01-21-wallmart-com-puppet-em-mais-de-40-mil-nodes/</link>
      <pubDate>Thu, 21 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2016-01-21-wallmart-com-puppet-em-mais-de-40-mil-nodes/</guid>
      <description>&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/gB9rGojmOKk&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;O Walmart apresentou seu case de Puppet na última PuppetConf, eles atingiram a incrível marca de 40 mil nodes gerenciados em 2015. Durante a palestra, Martin Jackson, Senior Technical Expert no Walmart, contou a história de como o Puppet os ajudou a resolver grandes problemas em sua organização.&lt;/p&gt;
&lt;p&gt;Em agosto de 2013 eles iniciaram um projeto que visava automatizar e resolver o problema de inconsistência de configurações no ambiente legado Walmart. Além disto, eles precisavam de uma ferramenta que permitisse que o Walmart conseguisse gerenciar configurações em larga escala. Além da gerência, eles precisavam ver e entender o que acontecia em seu ambiente, logo, relatórios da situação de seus nodes e das mudanças eram uma necessidade básica para este projeto.&lt;/p&gt;
&lt;p&gt;No total o Walmart tem cerca de 100 mil servidores, sendo 50 mil em datacenters e 50 mil em suas 11 mil lojas espalhadas em 5 continentes. Dentre esses 100 mil servidores podem ser encontrados 6 tipos de sistemas operacionais.&lt;/p&gt;
&lt;p&gt;O projeto entrou em produçao em maio de 2014 com três pessoas a frente, em agosto eles já tinham cerca de 1000 nodes gerenciados em datacenters, todos nodes novos, a equipe até então havia provado que era possível gerenciar, controlar e manter estados de nodes novos, mas ainda havia o desafio de gerenciar os nodes legados - pré-puppet.&lt;/p&gt;
&lt;p&gt;Eles iniciaram então em agosto o rollout dos agentes nos nodes legados e em outubro eles conseguiram atingir a marca de 30 mil nodes legados gerenciados. O desafio inicial foi fazer o enforcing do Puppet, Mcollective, Facter e configurações NTP nestes nodes, este era o mínimo naquele momento.
 As estatísticas apresentadas na palestra da PuppetConf mostravam que eles haviam atingindo 48 mil servidores gerenciados, a equipe desenvolveu 139 módulos puppet e aumentou de 3 para 10 pessoas nesse time.&lt;/p&gt;
&lt;p&gt;Segundo o Walmart, a utilização de Puppet tem sido fundamental para fortaceler a cultura DevOps internamente, todos os times sabem que suas soluções precisam ser automatizadas e gerenciadas pelo Puppet, desta forma, o design de todas as aplicações já considera automação via puppet e os princípios DevOps desde a sua concepção.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/lJHxsZf-PB4&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Assista a palestra:&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/Wd58NPIcBjQ&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet em São Paulo</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-30-meetup-puppet-em-sao-paulo/</link>
      <pubDate>Fri, 30 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-30-meetup-puppet-em-sao-paulo/</guid>
      <description>&lt;p&gt;Marcado mais um Meetup Puppet, desta vez será em São Paulo no dia 25 de Novembro às 19:30.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/meetup.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup sp 25 nov 15]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Ainda estamos procurando um local adequado na Paulista em que possamos levar um projetor para passar algumas fotos e vídeos da PuppetConf. Provavelmente faremos uma introdução ao Puppet por ser o primeiro em São Paulo.&lt;/p&gt;
&lt;p&gt;Se você tiver alguma sugestão de lugar nos avise!&lt;/p&gt;
&lt;p&gt;Para se inscrever no Meetup &lt;a href=&#34;http://www.meetup.com/puppet-br/events/226426446/&#34;&gt;acesse&lt;/a&gt; o site.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em BSB 2015-10-28 Resumo!</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-29-meetup-puppet-br-em-bsb-2015-10-28-resumo/</link>
      <pubDate>Thu, 29 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-29-meetup-puppet-br-em-bsb-2015-10-28-resumo/</guid>
      <description>&lt;p&gt;Estiveram presentes no Meetup Lauro, Guto, Rafael Santos e Taciano. Conversamos bastante sobre Puppet, AWS, segurança, métricas, como identificar que está acontecendo algum tipo de ataque em sua infraestrutura, falamos de deploy automatizado e claro da PuppetConf. Foi um papo agradável, como sempre, essa turma de brasilia é muito legal. Encerramos o Meetup lá pelas 21:30. Em novembro tem mais!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Palestras da PuppetConf 2015</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-29-palestras-da-puppetconf-2015/</link>
      <pubDate>Thu, 29 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-29-palestras-da-puppetconf-2015/</guid>
      <description>&lt;p&gt;Assista todas as palestras da PuppetConf 2015.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/videoseries?list=PLV86BgbREluUDlJW_jAqnWPj0THx7eXBA&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Últimos treinamentos puppet do ano</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-29-ultimos-treinamentos-puppet-do-ano/</link>
      <pubDate>Thu, 29 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-29-ultimos-treinamentos-puppet-do-ano/</guid>
      <description>&lt;p&gt;Estou passando para avisar das últimas turmas Puppet do ano.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Como Practitioner + Architect&lt;/strong&gt;&lt;br&gt;
Data: 23, 24, 25, 26 e 27 de Novembro&lt;br&gt;
Local: São Paulo/SP&lt;br&gt;
Instrutores: Miguel/Guto&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Puppet Fundamentals Brasilia&lt;/strong&gt;&lt;br&gt;
Data: 01, 02 e 03 de Dezembro&lt;br&gt;
Local: Brasília/DF&lt;br&gt;
Instrutor: Guto&lt;/p&gt;
&lt;p&gt;Aproveite o final do ano para se especializar em automação.&lt;/p&gt;
&lt;p&gt;Entre em &lt;a href=&#34;http://instruct.com.br/calendario.html&#34;&gt;contato&lt;/a&gt; para obter mais informações!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em BSB 2015-10-28 Última Chamada!</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-28-meetup-puppet-br-em-bsb-2015-10-28-ultima-chamada/</link>
      <pubDate>Wed, 28 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-28-meetup-puppet-br-em-bsb-2015-10-28-ultima-chamada/</guid>
      <description>&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/BLrrZIA12iE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Meetup Puppet Hoje em Brasília às 19 no Bar do Mercado na W3 Sul (509 Sul).&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em BSB 2015-10-28 Marcado!</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-23-meetup-puppet-br-em-bsb-2015-10-28/</link>
      <pubDate>Fri, 23 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-23-meetup-puppet-br-em-bsb-2015-10-28/</guid>
      <description>&lt;p&gt;No dia 28/10/15 faremos o terceiro Meetup Puppet em Brasília, será no Bar do Mercado na Asa Sul. Falaremos de Puppet, DevOps, Infra Ágil e também vou mostrar fotos e contar como foi a PuppetConf.&lt;/p&gt;
&lt;p&gt;Vejo vocês lá às 19 hs.&lt;/p&gt;
&lt;p&gt;Se inscreva no &lt;a href=&#34;http://www.meetup.com/puppet-br/events/226306524/&#34;&gt;meetup&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Diário da PuppetConf dia 09 de Outubro</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-09-diario-puppetconf-09-oct/</link>
      <pubDate>Fri, 09 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-09-diario-puppetconf-09-oct/</guid>
      <description>&lt;p&gt;O último dia da PuppetConf foi também nosso último dia em Portland, foram 6 dias intensos e gratificantes, foi uma excelente oportunidade para rever muitos amigos, fazer novos amigos, aumentar nosso networking, conhecer mais sobre Portland, conhecer mais sobre a Puppet Labs, aprender mais sobre o Puppet, entender mais  a cultura DevOps e compartilhar nossa realidade e  nossas experiência com projetos e treinamentos com os demais participantes do evento.&lt;/p&gt;
&lt;p&gt;Apesar de tudo isso, depois de viajar e trabalhar por 6 dias, confesso que já estávamos sentindo o cansaço, mas isso não nos abalou pois esse era um dia importante. Começamos o dia bem cedo, arrumamos nossas malas, fizemos nosso checkout no Hotel e em seguida fomos para o evento.  Nosso foco nesse dia foi dar apoio ao Miguel para que ele se preparasse para sua palestra a tarde. Chegamos no Oregon Convention Center e ficamos no pavilhão, tomamos café e enquanto o Miguel fazia os últimos ajustes em sua palestra, enquanto isto, aproveitei para começar a organizar o material que a gente gerou no evento junto com a Jéssica.&lt;/p&gt;
&lt;h3 id=&#34;papo-com-eric-sorenson&#34;&gt;Papo com Eric Sorenson&lt;/h3&gt;
&lt;p&gt;Enquanto tomávamos café fomos abordados pelo Eric Soreson da Puppet Labs, ele reconheceu o Miguel do Twitter e veio conversar conosco. Disse que acompanha a comunidade Puppet-BR no twitter principalmente pelos tweets do Miguel, falou dos recentes webinars que fizemos e sentou na mesa para pedir nossa opinião sobre o Puppet e PuppetDB.  Ele também perguntou dos treinamentos, perguntou se havíamos encontrado algum problema em nossos projetos, algo que fosse relevante comentar. Nós falamos que a maioria dos problemas que encontramos já estão registrados no JIRA. O Miguel aproveitou para falar da palestra e do suporte a CA externa no Puppet. O Eric nos explicou que existe um bug no agente que limita o uso de CA externa, o agente hoje só consegue chegar CA em um nível, CAs externas normalmente tem 3 níveis a serem checados, portanto, atualmente o uso de CA externa só funciona em determinados cenários, isso está no roadmap da puppetlabs para ser corrigido em breve. O papo foi rápido,      esclarecedor e além disso foi muito bom saber que estamos no &amp;ldquo;radar&amp;rdquo; dos principais engenheiros da Puppet Labs.&lt;/p&gt;
&lt;h3 id=&#34;palestra-do-miguel&#34;&gt;Palestra do Miguel&lt;/h3&gt;
&lt;p&gt;A palestra do Miguel foi bacana, ele falou sobre PKI do Puppet e mostrou como utilizar esse recurso em outros serviços de infraestrutura. Ele utilizou um case de um projeto que ele realizou em 2014 aqui no Brasil. A palestra dele foi bastante elogiada por ter um tema original, diferente da grande maioria das palestras com conteúdo introdutório ou patrocinado. Foi bastante técnica mas os participantes estavam bem confortáveis com o tema.&lt;/p&gt;
&lt;h3 id=&#34;último-resumo&#34;&gt;Último resumo&lt;/h3&gt;
&lt;p&gt; Após a palestra do Miguel o evento realmente acabou - e na hora programada, eles são muito pontuais. Fizemos nosso último resumo em vídeo, publicamos e pegamos o Max Train para o aeroporto. O Miguel retornava para o Brasil, a Jéssica e eu fomos para NYC visitar alguns amigos e descansar antes de retornar à rotina em Brasília.&lt;/p&gt;
&lt;p&gt;Já saímos pensando em 2016, a PuppetConf será em San Diego na Califórnia, já vamos começar a nos preparar, separando os melhores cases para para submeter como proposta para palestras, em 2016 queremos mais uma vez participar ativamente da PuppetConf.&lt;/p&gt;
&lt;h3 id=&#34;videos&#34;&gt;Videos&lt;/h3&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/QepAorEta4M&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/lAFdjHk65D8&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/I18wXvy0tRM&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/Zjn7i64MI8g&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h3 id=&#34;fotos&#34;&gt;Fotos&lt;/h3&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_01.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct01]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_02.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct02]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_03.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct03]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_04.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct04]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_05.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct05]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_06.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct06]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_07.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct07]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_08.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct08]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_09.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct09]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_10.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct10]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_11.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct11]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_12.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct12]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_13.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct13]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct09_14.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 9oct14]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;[s]&lt;br&gt;
Guto &lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Diário da PuppetConf dia 08 de Outubro</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-08-diario-puppetconf-08-oct/</link>
      <pubDate>Thu, 08 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-08-diario-puppetconf-08-oct/</guid>
      <description>&lt;p&gt;No dia 08 de Outubro a PuppetConf começou para valer, houve a keynote do @puppetmasterd onde ele falou sobre o atual estado do DevOps|Automação no mundo. Ele usou esse discurso para conectar o público e logo após apresentou o Puppet Application Orchestration.  Foi um dia intenso, assistimos palestras, fomos a reuniões de negócio, falamos com times da Puppet Labs sobre os treinamentos no Brasil, falamos com desenvolvedores, falamos com executivos que estavam nos estandes do pavilhão e fizemos muitas fotos e vídeos. Vou tentar separar algumas questões para facilitar o resumo deste longo dia.&lt;/p&gt;
&lt;h3 id=&#34;devops--automação&#34;&gt;DevOps &amp;amp; Automação&lt;/h3&gt;
&lt;p&gt;O Luke mais uma vez afastou a possibilidade de sair da Puppet Labs, ele pretende ficar por - pelo menos - mais 10 anos desenvolvendo e estimulando o mercado de automação através das tecnologias da família Puppet. Segundo dados da Puppet Labs - via DevOps Report, hoje apenas 15% das empresas do mundo fazem algum tipo de automação, existe muito espaço para crescer. Na visão do Luke o que ocorreu de 2003 a 2013 com a VMWARE vai acontecer de 2015 a 2025 com automação, e neste cenário a Puppet Labs que ser a solução protagonista.&lt;/p&gt;
&lt;h3 id=&#34;application-orchestration&#34;&gt;Application Orchestration&lt;/h3&gt;
&lt;p&gt;Vimos o demo no keynote e testamos no stand do test pilot o Application Orchestration que aumenta sensivelmente o alcance do Puppet como solução de gerência e provisionamento. Agora é possível - via Puppet - desenhar um cenário de infraestrutura que envolve múltiplos nodes interdependentes. Isto significa que você pode criar um manifesto Puppet que define o comportamente que um grupo de nodes terá, podendo inclusive passar configurações individuais ( web, api, database, loadbalancer) e dependentes entre si. Neste tipo de cenário, o puppet pode utilizar máquinas pré-existentes ou partir da criação desse ambiente utilizando Razor. Com o Application Orchestration evoluímos da aplicação restrita a configuração individual de nodes para o provisionamento e configuração de nodes em cenários mais complexos em nossa infraestrutura. É um grande avanço que certamente vai agradar muitos entusiastas da automação de infraestrutrua.&lt;/p&gt;
&lt;h3 id=&#34;palestras&#34;&gt;Palestras&lt;/h3&gt;
&lt;p&gt;Começamos a assistir algumas palestras, mas no geral os palestrantes trouxeram assuntos introdutórios e sem muitas novidades, coisas que você consegue encontrar no Google, vimos inclusive algumas pessoas reclamando disto. Na minha opinião esse ano o quente foram as palestras sobre workflow de desenvolvimento Puppet com CI/CD, Pupppet em Windows e Puppet para NetDevices. Os vídeos estarão todos disponíveis em algumas semanas e vocês poderão conferir.&lt;/p&gt;
&lt;h3 id=&#34;treinamentos&#34;&gt;Treinamentos&lt;/h3&gt;
&lt;p&gt; Aproveitamos para falar com a equipe de educação da Puppet Labs, são eles que elaboram os materiais dos treinamentos oficiais e a prova de certificação. Vimos as novidades da última versão dos treinamentos avançados, em especial do treinamento Architect. O que eu mais gostei foi ver que o docker estará presente em boa parte dos laboratórios, além dele, vimos uma maior presença do Razor.&lt;/p&gt;
&lt;h3 id=&#34;redhat-satellite-6&#34;&gt;RedHat Satellite 6 &lt;/h3&gt;
&lt;p&gt;Pude fazer um teste drive do Satellite no estande da RedHat, pelo que pude ver ele foi todo refeito em cima do Foreman, Katello, Puppet, Pulp e Candlepin. Ele sobe um PuppetMaster e tal como o Foreman permite o provisionamento e aplicação de determinadas classes em host groups, tudo isso é muito prático e eficaz. Além destes novos recursos ele continua atuando como repositorio de pacotes, gerenciador de subscrições e gerenciador de atualizações para servidores RHEL, valeu o teste, mas também nada novo. &lt;/p&gt;
&lt;h3 id=&#34;festa-omsi&#34;&gt;Festa OMSI&lt;/h3&gt;
&lt;p&gt;Houve uma festa pós-evento no Museu de Ciência e Indústria do Oregon, a festa teve banda ao vivo, vinhos, cervejas e queijos especiais, tudo feito por produtores regionais do Oregon. Algumas áreas do museu estavam abertas a visitação e houve a apresentação de um filme, tudo isso para o pessoal do evento interagir e se integrar mais.&lt;/p&gt;
&lt;h3 id=&#34;retorno-e-descanso&#34;&gt;Retorno e descanso&lt;/h3&gt;
&lt;p&gt;Depois da festa voltamos para o Hotel bem cedo para descansar, afinal dia 09 estava chegando e precisávamos nos preparar para apoiar o Miguel em sua palestra&lt;/p&gt;
&lt;h3 id=&#34;vídeos&#34;&gt;Vídeos&lt;/h3&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/dn2JpwEVFIk&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/X6KZsxSorgw&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h3 id=&#34;fotos&#34;&gt;Fotos&lt;/h3&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct08_01.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 8oct01]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct08_02.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 8oct02]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct08_03.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 8oct03]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct08_04.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 8oct04]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct08_05.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 8oct05]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;[s]&lt;br&gt;
Guto &lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Diário da PuppetConf dia 07 de Outubro</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-07-diario-puppetconf-07-oct/</link>
      <pubDate>Wed, 07 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-07-diario-puppetconf-07-oct/</guid>
      <description>&lt;p&gt;Depois de um dia intenso na Puppet Labs na terça-feira, com direito a gravações, webinar, fotos, almoço e reuniões, chegou a hora de ir até o Oregon Convention Center para participar das atividades pré-puppetconf. Para quem não sabe, há vida antes da PuppetConf, desde a segunda-feira (05/Oct) acontecem treinamentos oficiais de Puppet no Hotel do evento e na quarta-feira foi o dia do encontro de contribuidores e parceiros da Puppet Labs, houve também uma programação especial para os palestrantes.&lt;/p&gt;
&lt;p&gt; Estive com o Miguel no encontro de parceiros e pudemos trocar informações com empresas da Austrália, Holanda, Estados Unidos e India. Houve uma série de palestras para alinhamento dos parceiros com as expectativas e metas da PL, foram apresentados novos produtos e programas da Puppet Labs para 2016, no final da manhã houve uma premiação para os parceiros que tiveram o melhor desempenho em 2015. A tarde houve a abertura do hall de expositores, visitamos muitos stands, conversamos consultores de empresas como RedHat, EMC, VMWARE, CISCO e ganhamos vários brindes e lembranças, houve uma intensa troca de cartões, folders e deu aquela sensação de que a PuppetConf realmente havia começado.&lt;/p&gt;
&lt;p&gt;O @puppetmasterd passou por nós, parou e conversou conosco, muito bem humorado ele aproveitou para falar que gostou das camisas e tirou onda dizendo que ele também é certificado :P&lt;/p&gt;
&lt;p&gt;Depois de falar com o autor do puppet, nós conseguimos bater um papo com a Brasileira Carla Souza do Spotify, falamos de devops, puppet, spotify e sobre as origens da comunidade puppet-br.&lt;/p&gt;
&lt;p&gt; A noite eu fui ao jantar de parceiros com a Jéssica, o Miguel foi ao jantar oferecido aos palestrantes. O jantar que eu participei foi bem interessante, pude até conhecer um russo que falava português fluentemente e que torcia para o Palmeiras - coisas da PuppetConf, foi um momento descontraído para o pessoal se conhecer e relaxar. Dormimos cedo neste dia para recarregar as baterias dos gadgets - e as nossas - para aproveitarmos ao máximo o primeiro dia oficial do evento.&lt;/p&gt;
&lt;h2 id=&#34;vídeo&#34;&gt;Vídeo&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/RbAl8_tuFLo&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;fotos&#34;&gt;Fotos&lt;/h2&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_01.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct01]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_02.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct02]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_03.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct03]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_04.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct04]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_05.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct05]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_06.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct06]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_07.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct07]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_08.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct08]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct07_09.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct09]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;[s]&lt;br&gt;
Guto &lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Diário da PuppetConf dia 06 de Outubro</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-06-diario-puppetconf-06-oct/</link>
      <pubDate>Tue, 06 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-06-diario-puppetconf-06-oct/</guid>
      <description>&lt;p&gt;Estivemos na sede da Puppet Labs, falamos com a Kara Sowles e Meg Hartley do time de relacionamento de comunidades Puppet, são elas que cuidam do dia dos contribuidores (pré-puppetconf), são elas que nos ajudam a organizar os Meetups e são elas que nos mandam adesivos, camisetas, pins e outros tipos de brindes para distribuirmos no Brasil. Uma coisa interessante é que o foco não é a comunidade de usuários Puppet em si, aqui o foco é a comunidade de desenvolvedores de módulos, documentadores e contribuidores dos projetos opensource ligados direta ou indiretamente ao Puppet, para elas isso é a “comunidade” de fato. A Kara e a Meg foram super solícitas e conseguiram um sala a prova de som para fazermos nosso webinar na PL.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Na sede reencontramos o Joe Henderson que é do time de negócios, ele é responsável pela América latina e leste da Asia, ele foi nosso primeiro contato quando nos tornamos parceiros da PL no Brasil, e para mim, ele foi realmente o meu primeiro contato com a PL desde que comecei a estudar e usar puppet. Há alguns anos o Joe me procurou para me enviar uma camiseta e um livro como agradecimento por escrever tanto material de Puppet em português, isso foi bem antes de eu sequer pensar em um dia ser parceiro da PL ou fazer parte da Instruct, foi um grande estímulo para aprofundar meus estudos em Puppet.&lt;/p&gt;
&lt;p&gt;Com a sala &amp;ldquo;soundproof&amp;rdquo; nos fizemos nosso webinar que chegou a ter 70 pessoas conectadas, falamos do Puppet 4, das novidades, mostramos código, interagimos com a o pessoal no chat do youtube, falamos da PuppetConf e no final disso tudo o Joe Henderson apareceu para nos levar para almoçar e aproveitou para dar um alô pro pessoal do webinar.&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Almoçamos em um restaurante libanês com comida super picante, valeu a experiência mas prefiro um hamburguer. A tarde eu tentei comprar um novo microfone para nossas gravações e acabei me aventurando pelas ruas de Portland a pé com a Jéssica, andamos, andamos, andamos e nada de encontrar o microfone, mas pelo menos conhecemos duas áreas bem legais de Portland, rodamos por Downtown e depois atravessamos a Morrison Bridge para visitar a Portland Music Company do outro lado do rio Willamete. Não conseguimos comprar o microfone para fazer externas mas não desistimos, fizemos várias tomadas internas na sede da Puppet Labs , pelo menos 10 tomadas com foco bem técnico explicando como funcionam as principais tecnologias da Puppet Labs. Fizemos mais algumas tomadas mais voltadas para gerentes, supervisores, diretores e conselheiros com foco em passar a eles uma visão de como o Puppet pode ajudar sua organização. Temos material para editar e publicar por uns seis meses - no mínimo.&lt;/p&gt;
&lt;p&gt;No final da noite nós aproveitamos para nos organizar e planejar o próximo dia, teríamos que dividir o tempo entre o encontro dos contribuidores e o encontro do parceiros, nossa ideia era dividir para conquistar, Miguel para um lado, Guto para outro e Jéssica cobrindo o evento para gerar material para subirmos para comunidade e clientes.&lt;/p&gt;
&lt;h2 id=&#34;webinar&#34;&gt;Webinar&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/LrOf8Rk8WIk&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;vídeo&#34;&gt;Vídeo&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/yJ1BGkLo1YE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;fotos&#34;&gt;Fotos&lt;/h2&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct06_01.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct01]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct06_02.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct02]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct06_03.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct03]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct06_04.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct04]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct06_05.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct05]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/puppetconf2k15/puppetconf_oct06_06.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[puppetconf 7oct06]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;[s]&lt;br&gt;
Guto &lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Diário da PuppetConf dia 05 de Outubro</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-05-diario-puppetconf-05-oct/</link>
      <pubDate>Mon, 05 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-05-diario-puppetconf-05-oct/</guid>
      <description>&lt;p&gt;Foram mais de 24 horas viajando, passamos por vários aeroportos, fizemos algumas tomadas dos aeroportos, gravamos alguns vídeos, fotografamos alguns momentos descontraídos, tudo para tentar animar e esquecer de como estava sendo cansativa e desgastante a viagem, no final deu tudo certo, chegamos bem e seguros em Portland no final da noite do dia 05 de Outubro.&lt;/p&gt;
&lt;p&gt;Para quem não se lembra, em 2014 a PuppetConf aconteceu em San Francisco, desta vez, por motivos de logística e eficiência a Puppet Labs decidiu organizar a PuppetConf em sua cidade de origem, isso minimiza custos com deslocamento de sua equipe e permite que praticamente todos os seus 400 funcionários participem do evento sem parar a empresa.&lt;/p&gt;
&lt;p&gt;Estamos indo dormir com tudo preparado para visitar a sede da Puppet Labs e gravar nosso tradicional webinar direto do HQ da PL, tudo que queremos é rever algumas pessoas, alguns bons amigos e planejar os próximos passos do Puppet no Brasil.&lt;/p&gt;
&lt;p&gt;Tentarei manter vocês informados de tudo que acontece aqui, dessa vez vamos publicar mais conteúdo já que a Jéssica está aqui nos ajudando na cobertura das redes sociais.&lt;/p&gt;
&lt;h2 id=&#34;vídeo&#34;&gt;Vídeo&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/wVallDGDsOM&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto &lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Diário da PuppetConf dia 04 de Outubro</title>
      <link>https://archives.gutocarvalho.net/post/2015-10-04-diario-puppetconf-04-oct/</link>
      <pubDate>Sun, 04 Oct 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-10-04-diario-puppetconf-04-oct/</guid>
      <description>&lt;p&gt;Após muita preparação para viajar finalmente chegou o dia de ir para o aeroporto, o coração estava apertado por ser a primeira viagem sem as crianças  - que ficaram aos cuidados dos avós maternos - mas ao mesmo tempo estávamos conscientes da missão e da importância da viagem, com isso seguimos em frente. Cartões em dia - liberados para uso no exterior, dólares na mão, seguro de viagem feito, camisetas especiais para usarmos no evento, malas arrumadas, equipamentos para filmar, fotografar, gravar e transmitir - tudo empacotado nas mochilas vermelhas, seguimos então para o terminal 2 do aeroporto de Brasília, fizemos um voo curto via Azul até Garulhos para depois fazer uma longa jornada que passaria por Nova York, San Francisco até chegar em Portland no dia seguinte.&lt;/p&gt;
&lt;h2 id=&#34;vídeo&#34;&gt;Vídeo&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/g--1dBQ2vXs&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto &lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Resumo do Meetup puppet-users-br em Salvador</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-29-meetup-puppet-user-br-em-salvador/</link>
      <pubDate>Tue, 29 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-29-meetup-puppet-user-br-em-salvador/</guid>
      <description>&lt;p&gt;O primeiro Meetup Puppet de Salvador foi ótimo, não poderíamos ter escolhido lugar melhor, a equipe do Raul Hacker Club nos acolheu de forma fantástica. Lá conversamos sobre o espaço hacker, o pessoal do Raul apresentou o trabalho que realiza, explicaram como surgiu o Raul Hacker Club, falamos de outros espaços hackers deste tipo no Brasil, falamos de idelogia hacker, tecnologia opensource, dos MeetUps e como a comunidade volta a se reunir e se organizar em um momento &amp;ldquo;pós-movimento software livre&amp;rdquo; no Brasil.&lt;/p&gt;
&lt;p&gt;Eu abordei como tem sido interessante conversar e interagir com pessoas que tem buscado mais a tecnologia em sua essência, mais a tecnologia como solução, mais a tecnologia como um meio de inserir inteligência a determinados processos, mais como um meio de resolver necessidades, muito mais do que anteriormente pessoas buscavam tecnologia através em uma via única puxada por alguma idelogia ou movimento como o Free Software.&lt;/p&gt;
&lt;p&gt;Fizemos uma rápida análise desse momento que o Brasil vive, falamos sobre como a idelogia FOSS foi importante para o Brasil nos últimos 15 anos e como isso vem se transformando. Hoje o cenário opensource está mais inserido do que o free software e isso não é ruim, isso é um comportamento natural dos jovens desta geração.&lt;/p&gt;
&lt;p&gt;Falamos de automação, falamos de puppet - afinal era um meetup puppet - e acabamos abrindo alguns slides para nivelar a galera, em parceria com o @Gomex apresentei alguns conceitos que permitiram que o pessoal captasse a essência dos principais problemas que a gerência de configuração busca resolver, além disto, apresentamos vários aspectos do Puppet com exemplos bem práticos, o pessoal disse que gostou bastante.&lt;/p&gt;
&lt;p&gt;Conversamos sobre automação e orquestração em IAAS com Cloudstack, o @msinhore (Marco Sinhoreli) da ShapeBlue apresentou e nivelou a galera nos temas IAAS e introduziu o CloudStack para a galera. Fizemos até uma rápida comparação com OpenStack e Cloudstack passando por seus prós e contras e falamos de Docker/Containers.&lt;/p&gt;
&lt;p&gt;Falamos de automação de rede, falamos de roteamento dinâmico com RIP, OSPF, BGP, EIGRP da Cisco, falamos de SDN (Software Defined Network), falamos de OpenFlow, e aproveito para registrar a presença de uma Doutoranda de redes (Stefani) no Raul, ela está realizando uma pesquisa na área do SDN + OpenFlow do ponto de vista da engenharia de software. O conhecimento dela contribuiu muito para evoluirmos no tema, a conversa foi interessante e intensa, abordamos a aplicabilidade do SDN, discutimos riscos de adoção, falamos sobre as armadilhas comerciais dos fabricante para forçar a troca dos ativos de seus clientes, e também houve uma ou outra observação acerca da segurança do SDN do ponto de vista do isolamento lógico.&lt;/p&gt;
&lt;p&gt;Depois de todo esse papo hacker fomos jantar na orla do Rio Vermelho e encerramos a noite.&lt;/p&gt;
&lt;h2 id=&#34;fotos&#34;&gt;Fotos&lt;/h2&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2015-09-28/meetup_salvador_1.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup 1]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2015-09-28/meetup_salvador_2.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup 2]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2015-09-28/meetup_salvador_3.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup 3]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2015-09-28/meetup_salvador_4.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup 4]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;vídeo&#34;&gt;Vídeo&lt;/h2&gt;
&lt;p&gt;Veja o vídeo produzido pelo Raul Hacker Club.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/39_1ZumwWW4&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;toca-raul&#34;&gt;Toca Raul&lt;/h2&gt;
&lt;p&gt;Faço votos para que o grupo puppet de Salvador se aproprie do Meetup e continue se reunindo e compartilhando conhecimento dessa forma colaborativa e direra. Mais uma vez ao agradeço a acolhida do Raul Hacker Club e desejo sucesso em suas iniciativas em Salavador.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Módulos para Puppet 4</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-25-modulos-para-puppet-4/</link>
      <pubDate>Fri, 25 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-25-modulos-para-puppet-4/</guid>
      <description>&lt;p&gt;Publiquei os módulos puppet referentes aos seguintes posts do meu blog:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;http://gutocarvalho.net/octopress/2015/09/09/activemq-e-mcollective-com-ssl/
http://gutocarvalho.net/octopress/2015/08/21/activemq-e-mcollective-no-puppet-4/
http://gutocarvalho.net/octopress/2015/08/18/instalando-puppet-4-agent-and-master/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;É bom aprender como as coisas funcionam de perto, a rotina de instalação manual é importante para conhecer cada componente do puppet, o objetivo destes posts foi estudar o puppet 4 a fundo, mas nada como fazer tudo aquilo que está descrito no post rapidamente e com um único comando, é para isto que servem os módulos.&lt;/p&gt;
&lt;p&gt;Eles estão em:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://github.com/gutocarvalho/puppet4-mcollective
https://github.com/gutocarvalho/puppet4-activemq
https://github.com/gutocarvalho/puppet4-puppetserver
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Também podem ser vistos em:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://bitbucket.org/gutocarvalho/puppet4-puppetserver
https://bitbucket.org/gutocarvalho/puppet4-activemq
https://bitbucket.org/gutocarvalho/puppet4-mcollective
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Recomendo o uso do vagrant + puppet para vocês estudarem eles.&lt;/p&gt;
&lt;p&gt;Contribuições, correções, melhorias e sugestões são sempre bem vindas.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Telegram grupo puppet-users-br</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-25-telegram-grupo-puppet-users-br/</link>
      <pubDate>Fri, 25 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-25-telegram-grupo-puppet-users-br/</guid>
      <description>&lt;p&gt;Durante o Meetup Brasília surgiu a ideia de criar um grupo no Telegram para facilitar a integração da comunidade Puppet, pois bem, criamos um grupo chamado puppet-users-br, caso queira participar, adicione o usuário @gutoccarvalho no telegram e solicite acesso ao grupo.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vagrant Boxes com Puppet 4.2.2 Publicadas</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-25-vagrant-boxes-publicadas/</link>
      <pubDate>Fri, 25 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-25-vagrant-boxes-publicadas/</guid>
      <description>&lt;p&gt;Eu uso muito o Vagrant para fazer testes e desenvolver módulos puppet, por anos usei as vagrant-box feitas pela Puppetlabs, elas sempre foram eficientes e confiáveis para trabalhar e fazer os meus testes, mas com o recente lançamento do Puppet 4 percebi que a puppetlabs não estava atualizando suas boxes, portanto, resolvi estudar o packer e criar cada box que eu precisava para homologar módulos puppet.&lt;/p&gt;
&lt;p&gt;O resultado disto foi a criação das seguintes box:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;centos 5, 6 e 7
ubuntu 12.04 e 14.04
debian 6, 7 e 8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Essas box tem instalação mínima do OS, são todas 64 bits e vem com alguns pacotes para sysadmins:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Puppet [ 4.2.2 ]&lt;/li&gt;
&lt;li&gt;VBoxGuest [ 4.3.30 ]&lt;/li&gt;
&lt;li&gt;Packages
&lt;ul&gt;
&lt;li&gt;git&lt;/li&gt;
&lt;li&gt;curl&lt;/li&gt;
&lt;li&gt;vim&lt;/li&gt;
&lt;li&gt;wget&lt;/li&gt;
&lt;li&gt;rsync&lt;/li&gt;
&lt;li&gt;screen (com screenrc)&lt;/li&gt;
&lt;li&gt;bind-utils&lt;/li&gt;
&lt;li&gt;nc&lt;/li&gt;
&lt;li&gt;telnet&lt;/li&gt;
&lt;li&gt;puppet-agent&lt;/li&gt;
&lt;li&gt;elinks&lt;/li&gt;
&lt;li&gt;lynx&lt;/li&gt;
&lt;li&gt;bzip2&lt;/li&gt;
&lt;li&gt;unzip&lt;/li&gt;
&lt;li&gt;tcpdump&lt;/li&gt;
&lt;li&gt;ccze&lt;/li&gt;
&lt;li&gt;htop&lt;/li&gt;
&lt;li&gt;traceroute&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quem quiser fazer download basta acessar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O link direto para cada box é&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://atlas.hashicorp.com/gutocarvalho/boxes/centos5x64
https://atlas.hashicorp.com/gutocarvalho/boxes/centos6x64
https://atlas.hashicorp.com/gutocarvalho/boxes/centos7x64
https://atlas.hashicorp.com/gutocarvalho/boxes/debian6x64
https://atlas.hashicorp.com/gutocarvalho/boxes/debian7x64
https://atlas.hashicorp.com/gutocarvalho/boxes/debian8x64
https://atlas.hashicorp.com/gutocarvalho/boxes/ubuntu1204x64
https://atlas.hashicorp.com/gutocarvalho/boxes/ubuntu1404x64
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Coloquei o código de build do packer no github&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;https://github.com/gutocarvalho/packet-debian6
https://github.com/gutocarvalho/packet-debian7
https://github.com/gutocarvalho/packet-debian8
https://github.com/gutocarvalho/packet-ubuntu1204
https://github.com/gutocarvalho/packet-ubuntu1404
https://github.com/gutocarvalho/packet-centos5
https://github.com/gutocarvalho/packet-debian6
https://github.com/gutocarvalho/packet-debian7
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Em breve vou mostrar como fazer build de uma box usando o Packer.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Resumo do Meetup puppet-users-br em Brasília</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-24-meetup-puppet-users-br-em-brasilia/</link>
      <pubDate>Thu, 24 Sep 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-24-meetup-puppet-users-br-em-brasilia/</guid>
      <description>&lt;p&gt;O segundo Meetup puppet-user-br em Brasília foi muito bom e teve ótima adesão, praticamente o dobro de pessoas do último Meetup realizado na cidade.&lt;/p&gt;
&lt;p&gt;O Meetup foi bem dinâmico, falamos de puppet, docker, openstack, cloudstack, zabbix, a situação do projeto expresso, falamos de georeferenciamento com postgis, falamos de samba 4, automação como conceito, falamos de soluções de provisionamento como vagrant e packer.&lt;/p&gt;
&lt;p&gt;Conversamos sobre como elaborar projetos de automação do jeito certo, falamos da importância da definição de padrões e requisitos antes de iniciar um projeto de automação, falamos sobre quais as pegadinhas - principalmente no governo - para conseguir &amp;lsquo;aprovar&amp;rsquo; um projeto de automação que envolva uma equipe que vive o conceito - ou a síndrome - da administração clássica de infraestrutura. Falamos de puppet 4, falamos da puppetconf, falamos dos treinamentos oficiais de puppet, dentre vários outros assuntos, tudo isso em pouco mais de 3 horas de encontro.&lt;/p&gt;
&lt;p&gt;A maturidade do grupo está aumentando, estão trazendo mais cases, estão se ajudando mais, estão mais experientes no uso de Puppet, estão convidando e acolhendo iniciantes, o grupo está crescendo em quantidade e qualidade.&lt;/p&gt;
&lt;h2 id=&#34;fotos&#34;&gt;Fotos&lt;/h2&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2015-09-24/meetup_puppet_brasilia_1.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup brasilia setembro 1]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2015-09-24/meetup_puppet_brasilia_2.jpg&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[meetup brasilia setembro 2]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;puppetconf-e-encontro-de-outubro&#34;&gt;PuppetConf e encontro de Outubro&lt;/h2&gt;
&lt;p&gt;Já combinamos um Meetup no final de Outubro para falarmos da PuppetConf, teremos vários integrantes da comunidade Puppet Brasil participando do evento e palestrando por lá. A data do segundo encontro provavelmente será no dia 27 ou 28 de Outubro, vamos divulgar assim que estiver definida.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em Brasília no dia 23 de Setembro</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-16-meetup-comunidade-puppet-br-em-brasilia/</link>
      <pubDate>Wed, 16 Sep 2015 17:44:27 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-16-meetup-comunidade-puppet-br-em-brasilia/</guid>
      <description>&lt;p&gt;Já faz alguns meses que fizemos o primeiro meetup em Brasília, hora de repetir a dose e engrossar o caldo com alunos da turma de Fundamentals que acontece em Setembro. Vou convidar os alunos para o Meetup e com isso teremos oportunidade de trocar experiências e fazer um networking ;)&lt;/p&gt;
&lt;p&gt;O Meetup será no dia 23 de Setembro às 20hs no Marvim da Asa Norte.&lt;/p&gt;
&lt;p&gt;Acesse a página do meetup e se inscreva&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.meetup.com/puppet-br/events/225403523/&#34;&gt;http://www.meetup.com/puppet-br/events/225403523/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Palestra de infraestrutura Ágil na WTR2015 em Salvador</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-16-palestra-de-infraestrutura-agil-na-wtr2015/</link>
      <pubDate>Wed, 16 Sep 2015 17:23:02 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-16-palestra-de-infraestrutura-agil-na-wtr2015/</guid>
      <description>&lt;p&gt;Fui convidado a ministrar uma palestra no evento &lt;a href=&#34;http://pop-ba.rnp.br/WTR2015&#34;&gt;WTR2015&lt;/a&gt; organizado pela PoP-BA/RNP. O evento será em Salvador/BA no dia 28 e 29 de Setembro de 2015. Irei ministrar a palestra &amp;ldquo;Infraestrutura Ágil&amp;rdquo; no primeiro dia, será a primeira palestra do dia.&lt;/p&gt;
&lt;p&gt;Vejo vocês por lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Meetup Puppet-BR em Salvador no dia 28 de Setembro</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-16-meetup-puppet-br-salvador-28-de-setembro/</link>
      <pubDate>Wed, 16 Sep 2015 16:57:22 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-16-meetup-puppet-br-salvador-28-de-setembro/</guid>
      <description>&lt;p&gt;Vamos ter vários palestrantes da comunidade opensource no evento &lt;a href=&#34;http://pop-ba.rnp.br/WTR2015&#34;&gt;WTR2015&lt;/a&gt; organizado pela PoP-BA/RNP, além disto, teremos vários membros da comunidade puppet-br participando do evento e palestrando, para aproveitar essa galera reunida resolvemos marcar um meetup na cidade.&lt;/p&gt;
&lt;p&gt;O Meetup será no dia 23 de Setembro às 20hs no Raul Hacker Club (&lt;a href=&#34;http://raulhc.cc&#34;&gt;http://raulhc.cc&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Acesse a página do meetup e se inscreva!&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://pop-ba.rnp.br/WTR2015&#34;&gt;http://www.meetup.com/puppet-br/events/225402295/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Aguardamos vocês lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>NIC no Virtualbox Host Only com NAT do OSX</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-10-virtualbox-hostonly-nat-osx/</link>
      <pubDate>Thu, 10 Sep 2015 15:11:11 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-10-virtualbox-hostonly-nat-osx/</guid>
      <description>&lt;p&gt;Quando queremos fazer algum teste no VirtualBox com uma VM usando uma rede virtual, normalmente precisamos de duas interfaces na VM, uma interface para a rede virtual em modo hostonly e outra interface e modo nat para que possamos sair para a internet.&lt;/p&gt;
&lt;p&gt;Caso queria usar apenas uma interface em sua VM, em modo HostOnly, e que mesmo assim consiga sair para internet, será necessário configurar um NAT no seu OSX para aquela interface hostonly.&lt;/p&gt;
&lt;p&gt;Antes de começar verifique qual a interface no seu OSX está relaciona a rede hostonly que deseja nat, a primeira interface será sempre a vboxnet0, caso tenha outras redes hostonly esse número será incrementado, vboxnet1, vboxnet2 e assim por diante. Outra questão importante é saber qual a sua interface conectada a internet, no caso estou usando minha interface wifi que é identificada como en0.&lt;/p&gt;
&lt;h2 id=&#34;1-configurando-nat-no-osx&#34;&gt;1. Configurando NAT no OSX&lt;/h2&gt;
&lt;p&gt;se torne root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo -i
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ative o ip forward&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sysctl -w net.inet.ip.forwarding=1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;edite o arquivo de configuração do pf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/pf.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;adicione a linha a seguir abaixo da linha &amp;ldquo;nat-anchor&amp;rdquo;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nat on en0 from vboxnet0:network -&amp;gt; (en0)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;recarregue as regras&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pfctl -e -f /etc/pf.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;se quiser deixar as regras persistentes no boot do osx rode&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/libexec/PlistBuddy -c &#39;add :ProgramArguments:3 string -e&#39; /System/Library/LaunchDaemons/com.apple.pfctl.plist
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;pronto agora sua VM com interface hostonly conseguirá sair para a internet&lt;/p&gt;
&lt;h3 id=&#34;referências&#34;&gt;Referências&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://kfigiela.github.io/2014/11/07/using-native-os-x-nat-with-virutalbox/&#34;&gt;http://kfigiela.github.io/2014/11/07/using-native-os-x-nat-with-virutalbox/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.nasmart.me/internet-access-with-virtualbox-host-only-networks-on-os-x-mavericks/&#34;&gt;http://blog.nasmart.me/internet-access-with-virtualbox-host-only-networks-on-os-x-mavericks/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Webinar Construindo Módulo Puppet para Cloudstack</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-09-webinar-construindo-modulo-puppet-para-cloudstack/</link>
      <pubDate>Wed, 09 Sep 2015 15:11:11 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-09-webinar-construindo-modulo-puppet-para-cloudstack/</guid>
      <description>&lt;p&gt;Amanhã dia 10 de Setembro tem Instruct Webinar &amp;ldquo;Contruindo Módulos Puppet&amp;rdquo;, desta vez a tecnologia é o Apache CloudStack. Convidamos a &lt;a href=&#34;http://www.shapeblue.com&#34;&gt;ShapeBlue&lt;/a&gt; para participar do Webinar e ajudar na orientação para o desenvolvimento do Módulo.&lt;/p&gt;
&lt;p&gt;A ShapeBlue é uma integradora especializada em IAAS com Apache CloudStack, seus engenheiros são muito experientes e vão nos orientar no processo de instalação da tecnologia, a Instruct por sua vez vai codificar o módulo Puppet e liberar no Github ao final do webinar.&lt;/p&gt;
&lt;p&gt;Para se inscrever acesse &lt;a href=&#34;http://bit.ly/webinar-inscricao&#34;&gt;http://bit.ly/webinar-inscricao&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Garanta sua vaga!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>ActiveMQ e Mcollective com SSL</title>
      <link>https://archives.gutocarvalho.net/post/2015-09-09-activemq-e-mcollective-com-ssl/</link>
      <pubDate>Wed, 09 Sep 2015 14:35:57 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-09-09-activemq-e-mcollective-com-ssl/</guid>
      <description>&lt;h2 id=&#34;1-melhorando-a-segurança-do-mcollective&#34;&gt;1. Melhorando a Segurança do Mcollective&lt;/h2&gt;
&lt;h3 id=&#34;11-activemq--mcollective&#34;&gt;1.1 ActiveMQ &amp;amp; Mcollective&lt;/h3&gt;
&lt;p&gt;Por padrão, quando instalamos o Mcollective utilizamos um tipo de conexão simples e sem criptografia entre o Mcollective e o ActiveMQ. Todos os hacklabs já publicados aqui neste blog ensinam como fazer esse procedimento simples e direto ao ponto, porém, nem sempre o simples é seguro, justamente por isto vamos agora aprofundar nossos estudos no aspecto segurança.&lt;/p&gt;
&lt;h3 id=&#34;12-consumindo-mensagens-na-fila&#34;&gt;1.2 Consumindo mensagens na fila&lt;/h3&gt;
&lt;p&gt;No caso do Mcollective ele se conecta na porta 61613 TCP do ActiveMQ para consumir a fila Mcollective. No arquivo de configuração server.cfg do Mcollective colocamos as credenciais para acesso a fila específica, isso tudo trafega na rede sem criptografia - incluindo as credenciais de autenticação da fila.&lt;/p&gt;
&lt;h3 id=&#34;13-injetando-mensagens-na-fila&#34;&gt;1.3 Injetando mensagens na fila&lt;/h3&gt;
&lt;p&gt;Outro detalhe importante é a injeção de mensagens na fila mcollective do ActiveMQ. Esse procedimento é realizado pelo mcollective client. Em sua na configuração mais simples, o plugin de controle utilizado como security provider é o PSK, este, por sua vez, confere se uma mensagem injetada na fila foi assinada com a mesma PSK presente no arquivo de configuração server.cfg, caso a assinatura seja igual, o mcollective server consome a fila e aplica a mensagem encontrada.&lt;/p&gt;
&lt;p&gt;O problema de tudo isso é que se copiarmos o arquivo server.cfg para client.cfg isso nos permite utilizar o comando mco para injetar mensagens na fila, e como a PSK será igual, o mcollective server vai confiar e exectar o comando presente na mensagem. Com isso todo o node mcollective server é virtualmente um cliente em potencial que poderia injetar mensagens na fila mcollective do ActiveMQ. Esse tipo de controle é fraco e perigoso.&lt;/p&gt;
&lt;h3 id=&#34;14-melhorando-a-segurança&#34;&gt;1.4 Melhorando a segurança&lt;/h3&gt;
&lt;p&gt;Aqui vamos demonstrar como ativar SSL no ActiveMQ e no Mcollective para garantir a integridade e privacidade dos dados que estarão passando entre esses serviços.&lt;/p&gt;
&lt;p&gt;Outra melhoria será o uso de certificados para os clientes, com isso mesmo que algo seja injetado na fila, isto terá que ter vindo com assinatura de um certificado de alguém devidamente autorizado, do contrário o mco server simplesmente ignora a mensagem.&lt;/p&gt;
&lt;p&gt;Esse hacklab é uma continuação de:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/octopress/2015/08/21/activemq-e-mcollective-no-puppet-4/&#34;&gt;http://gutocarvalho.net/octopress/2015/08/21/activemq-e-mcollective-no-puppet-4/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/octopress/2015/08/18/instalando-puppet-4-agent-and-master/&#34;&gt;http://gutocarvalho.net/octopress/2015/08/18/instalando-puppet-4-agent-and-master/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ter executado estes labs anteriormente é pré-requisito, vou vai usar as mesmas VMs.&lt;/p&gt;
&lt;h2 id=&#34;2-activemq-ativando-ssl&#34;&gt;2. ActiveMQ ativando SSL&lt;/h2&gt;
&lt;p&gt;O ActiveMQ roda em JVM e para realizarmos a configuração de SSL/TLS em uma aplicação rodando em JVM precisamos configurar um Truststore e um Keystore.&lt;/p&gt;
&lt;h3 id=&#34;21-identificando-certificados&#34;&gt;2.1. Identificando certificados&lt;/h3&gt;
&lt;p&gt;crie o diretorio abaixo para trabalharmos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /root/certs
mkdir /root/certs/activemq
mkdir /root/certs/activemq/private
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;acesse o diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /root/certs/activemq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;utilize o puppetmaster CA para criar uma chave para o serviço do ActivemQ.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/opt/puppetlabs/puppet/bin/puppet cert generate activemq-service
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: activemq-server has a waiting certificate request
Notice: Signed certificate request for activemq-service
Notice: Removing file Puppet::SSL::CertificateRequest activemq-service at &#39;/etc/puppetlabs/puppet/ssl/ca/requests/activemq-service&#39;
Notice: Removing file Puppet::SSL::CertificateRequest activemq-service at &#39;/etc/puppetlabs/puppet/ssl/certificate_requests/activemq-service.pem&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;copie os arquivos para o diretorio de trabalho&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /etc/puppetlabs/puppet/ssl/certs/activemq-service.pem /root/certs/activemq
cp /etc/puppetlabs/puppet/ssl/private_keys/activemq-service.pem /root/certs/activemq/private
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;22-criando-trustkey-para-activemq&#34;&gt;2.2. Criando trustkey para ActiveMQ&lt;/h3&gt;
&lt;p&gt;crie a trustkey usando a CA do Puppet (defina uma senha forte)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;keytool -import -alias &amp;quot;PuppetCA&amp;quot; -file /etc/puppetlabs/puppet/ssl/certs/ca.pem -keystore truststore.jks
enter password and confirmed [yes]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;verifique sua truststore&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;keytool -list -keystore truststore.jks
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;23-criando-keystore-para-activemq&#34;&gt;2.3 Criando keystore para ActiveMQ&lt;/h3&gt;
&lt;p&gt;concatene a chave publica e privada para criar a keystore&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat /root/certs/activemq/activemq-service.pem /root/certs/activemq/private/activemq-service.pem &amp;gt; /root/certs/activemq/activemq-temp.pem
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;converta o arquivo concatenado para o formato pkcs12 (as duas senhas solicitadas devem ser as mesmas export/source)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;openssl pkcs12 -export -in activemq-temp.pem -out activemq.p12 -name activemq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie a keystore (repita a senha da keystore)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;keytool -importkeystore -destkeystore keystore.jks -srckeystore activemq.p12 -srcstoretype PKCS12 -alias activemq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;verifique a keystore&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;keytool -list -keystore keystore.jks
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;24-ajustando-o-activemq-xml&#34;&gt;2.4 Ajustando o ActiveMQ XML&lt;/h3&gt;
&lt;p&gt;Localize o trecho abaixo no arquivo /etc/activemq.xml&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnectors&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnector&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;openwire&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;uri=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;tcp://0.0.0.0:61616&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnector&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp+nio&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;uri=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp://0.0.0.0:61613&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/transportConnectors&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;adicione o conector ssl&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnectors&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnector&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;openwire&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;uri=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;tcp://0.0.0.0:61616&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnector&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp+nio&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;uri=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp://0.0.0.0:61613&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnector&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp+nio+ssl&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;uri=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp+nio+ssl://0.0.0.0:61614?needClientAuth=true&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/transportConnectors&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;adicione o bloco de configuração para carregar os certificados logo abaixo&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;sslContext&amp;gt;&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;lt;sslContext&lt;/span&gt;
    &lt;span class=&#34;na&#34;&gt;keyStore=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/activemq/ssl/keystore.jks&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;keyStorePassword=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;suasenha&amp;#34;&lt;/span&gt; 
    &lt;span class=&#34;na&#34;&gt;trustStore=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/etc/activemq/ssl/truststore.jks&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;trustStorePassword=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;suasenha&amp;#34;&lt;/span&gt; 
  &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/sslContext&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;copie os arquivos gerados para o path do sslContext&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /etc/activemq/ssl
cp /root/certs/activemq/truststore.jks /etc/activemq/ssl
cp /root/certs/activemq/keystore.jks /etc/activemq/ssl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;reinicie seu activemq e verifique se a porta 61614 subiu&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ntpl|grep 61614
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tcp6       0      0 :::61614  :::*   LISTEN      42682/java
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;se a porta 61614 está em modo listen a configuração ocorreu com sucesso.&lt;/p&gt;
&lt;h2 id=&#34;3-mcollective-server&#34;&gt;3. Mcollective Server&lt;/h2&gt;
&lt;p&gt;Precisamos fazer dois ajustes no mcollective server, o primeiro no conector do ActiveMQ, nele vamos habilitar o uso de SSL. O segundo ajuste será na parte do security provider que será utilizado para identificar mensagens que o Mcollective Server deve confiar.&lt;/p&gt;
&lt;p&gt;A relação de confiança depende do CA, todos os certiticados devem ser gerados a partir do mesmo CA, estamos usando a infraestrutura PKI do Puppet por ser comum a todos os nodes.&lt;/p&gt;
&lt;h3 id=&#34;31-activemq-plugin-ssl&#34;&gt;3.1 ActiveMQ Plugin SSL&lt;/h3&gt;
&lt;p&gt;ajuste as configurações para o mcollective se conectar ao activemq de forma segura, aqui você pode apontar para os certificados puppet da própria máquina, veja o exemplo abaixo&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.ssl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;true&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.ssl.ca&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/etc/puppetlabs/puppet/ssl/ca/ca_crt.pem&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.ssl.key&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/etc/puppetlabs/puppet/ssl/private_keys/&amp;lt;nome_do_seu_host&amp;gt;.pem&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.ssl.cert&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/etc/puppetlabs/puppet/ssl/certs/&amp;lt;nome_do_seu_host&amp;gt;.pem&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;reinicie o mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl restart mcollective
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;verifique se houve uma mensagem on_connected no log do mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tail -10 /var/log/mcollective.log |grep on_connected
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;caso veja uma linha similar a esta abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[2015-09-09T12:42:58.586917 #16357]  INFO -- : activemq.rb:119:in `on_connected&#39; Connected to stomp+ssl://mcollective@activemq.hacklab:61614
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;sua conexão com o ActiveMQ via SSL ocorreu com sucesso&lt;/p&gt;
&lt;h3 id=&#34;32-security-provider-ssl&#34;&gt;3.2 Security Provider SSL&lt;/h3&gt;
&lt;p&gt;Agora vamos ajustar a relação de confiança para consumir mensagens devidamente assinadas na fila mcollective do ActiveMQ. Desabilite o método psk anteriormente configurado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#securityprovider = psk
#plugin.psk = hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;gere um par de chaves para usarmos em todos os nodes rodando o mcollective server, essa chave será utilizada para comunicação entre o client e server, ela vai estabelecer a relação de confiança e garantir que as mensagens injetadas na fila são fidedignas e confiáveis.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/opt/puppetlabs/puppet/bin/puppet cert generate mcollective-service
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: activemq-server has a waiting certificate request
Notice: Signed certificate request for mco-service
Notice: Removing file Puppet::SSL::CertificateRequest mco-service at &#39;/etc/puppetlabs/puppet/ssl/ca/requests/mco-service&#39;
Notice: Removing file Puppet::SSL::CertificateRequest mco-service at &#39;/etc/puppetlabs/puppet/ssl/certificate_requests/mco-service.pem&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;copie os arquivos gerados para o diretório ssl&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /etc/puppetlabs/mcollective/ssl 
cp /etc/puppetlabs/puppet/ssl/certs/mco-service.pem /etc/puppetlabs/mcollective/ssl/server.crt
cp /etc/puppetlabs/puppet/ssl/private_keys/mco-service.pem /etc/puppetlabs/mcollective/ssl/server.key
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;adicione o novo método de segurança&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span class=&#34;na&#34;&gt;securityprovider&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;ssl&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.ssl_server_private&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/etc/puppetlabs/mcollective/ssl/server.key&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.ssl_server_public&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/etc/puppetlabs/mcollective/ssl/server.cert&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.ssl_client_cert_dir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/etc/puppetlabs/mcollective/ssl/clients/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;todos os seus nodes mcollective devem possuir essas chaves no diretório ssl, distribua a chave via puppet&lt;/p&gt;
&lt;h3 id=&#34;33-certificado-do-cliente&#34;&gt;3.3 Certificado do cliente&lt;/h3&gt;
&lt;p&gt;Agora que temos o serviço ActiveMQ e Mcollective devidamente ajustados e configurados para uso de criptografia, precisamos então criar chaves e configurar o mcollective client para que esse consiga injetar mensagens confiáveis na fila do ActiveMQ - mensagens devidamente assinadas.&lt;/p&gt;
&lt;h4 id=&#34;331-gerando-certificado-para-uso-no-cliente&#34;&gt;3.3.1 Gerando certificado para uso no cliente&lt;/h4&gt;
&lt;p&gt;gere um certificado para uso do mco client&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/opt/puppetlabs/puppet/bin/puppet cert generate gutocarvalho
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: gutocarvalho has a waiting certificate request
Notice: Signed certificate request for gutocarvalho
Notice: Removing file Puppet::SSL::CertificateRequest gutocarvalho at &#39;/etc/puppetlabs/puppet/ssl/ca/requests/gutocarvalho.pem&#39;
Notice: Removing file Puppet::SSL::CertificateRequest gutocarvalho at &#39;/etc/puppetlabs/puppet/ssl/certificate_requests/gutocarvalho.pem&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;certificado gerado!&lt;/p&gt;
&lt;h4 id=&#34;332-instalando-certificado-no-mco-server&#34;&gt;3.3.2 Instalando certificado no mco server&lt;/h4&gt;
&lt;p&gt;crie um diretório para os certificados dos clientes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /etc/puppetlabs/mcollective/ssl/clients
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie a chave publica gerada para o diretorio clients em todos o nodes mcollective - use o puppet para isto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /etc/puppetlabs/puppet/ssl/certs/gutocarvalho.pem /etc/puppetlabs/mcollective/ssl/clients
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;reinicie o mcollective server&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;systemctl restart mcollective
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;com isso seu ambiente está pronto para ser orquestrado por aquele que possuir a chave privada do certificado gutocarvalho.pem&lt;/p&gt;
&lt;h2 id=&#34;4-mcollective-client&#34;&gt;4. Mcollective Client&lt;/h2&gt;
&lt;p&gt;O cliente mcollective pode ser configurado de duas formas, a primeira criando um arquivo client.cfg no diretório /etc/puppetlabs/mcollective ou utilizando variáveis de ambiente&lt;/p&gt;
&lt;h3 id=&#34;41-configurando-cliente&#34;&gt;4.1 Configurando Cliente&lt;/h3&gt;
&lt;h4 id=&#34;412-arquivo-clientcfg&#34;&gt;4.1.2 Arquivo client.cfg&lt;/h4&gt;
&lt;p&gt;A forma mais simples de configurar o client é copiar o arquivo server.cfg para client.cfg no mesmo diretório e fazer pequenos ajustes no parte do security provider.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;securityprovider = ssl
plugin.ssl_server_public = /etc/puppetlabs/mcollective/ssl/server.crt
plugin.ssl_client_private = /etc/puppetlabs/puppet/ssl/private_keys/gutocarvalho.pem
plugin.ssl_client_public = /etc/puppetlabs/puppet/ssl/certs/gutocarvalho.pem
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;No caso do client.cfg precisamos apontar qual a chave publica e privada do cliente e qual o certificado publico do servidor, só isso muda no arquivo todo, depois você pode orquestrar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/opt/puppetlabs/bin/mco ping
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;activemq.hacklab                         time=96.14 ms
mco.hacklab                              time=128.27 ms
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;se houve retorno similar, as configurações foram realizadas com sucesso.&lt;/p&gt;
&lt;h4 id=&#34;413-variáveis-de-ambiente&#34;&gt;4.1.3 variáveis de ambiente&lt;/h4&gt;
&lt;p&gt;É possível ter várias chaves para clientes no diretório /etc/puppetlabs/mcollective/clients , mas não é possível configurar várias chaves no client.cfg. Neste caso podemos recorrer a variáveis de ambiente para carregar chaves diferenciadas.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; export MCOLLECTIVE_SSL_PRIVATE=/home/gutocarvalho/.mc/gutocarvalho-private.pem
 export MCOLLECTIVE_SSL_PUBLIC=/home/gutocarvalho/.mc/gutocarvalho-public.pem
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E depois retome a orquestração.&lt;/p&gt;
&lt;h4 id=&#34;414-chave-de-cliente-compartilhada&#34;&gt;4.1.4 chave de cliente compartilhada&lt;/h4&gt;
&lt;p&gt;Você pode ter uma chave de cliente compartilhada em todos os nodes e usar apenas essa chave para orquestrar, só fica difícil identificar quem foi que executou a orquestração, se quiser auditoria completa, cada sysadmin deve ter sua chave pública lá e usar sua chave privada para orquestrar, assim fica tudo rastreável.&lt;/p&gt;
&lt;h2 id=&#34;5-amarrando-as-pontas&#34;&gt;5. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Este hacklab trouxe uma abordagem para aumentar a segurança do serviço ActiveMQ e do serviço de orquestração Mcollective, após executá-lo toda a comunicação passa a ser criptografada e a orquestraçao só ocorre com chaves de clientes autorizadas.&lt;/p&gt;
&lt;p&gt;Há muita coisa ainda para estudar no Mcollective, aguardem novos posts.&lt;/p&gt;
&lt;h2 id=&#34;6-referências&#34;&gt;6. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.puppetlabs.com/mcollective/&#34;&gt;https://docs.puppetlabs.com/mcollective/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.puppetlabs.com/mcollective/reference/integration/activemq_ssl.html&#34;&gt;https://docs.puppetlabs.com/mcollective/reference/integration/activemq_ssl.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.puppetlabs.com/mcollective/deploy/middleware/activemq_keystores.html&#34;&gt;https://docs.puppetlabs.com/mcollective/deploy/middleware/activemq_keystores.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.puppetlabs.com/mcollective/reference/plugins/connector_activemq.html&#34;&gt;https://docs.puppetlabs.com/mcollective/reference/plugins/connector_activemq.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.puppetlabs.com/mcollective/reference/plugins/security_ssl.html&#34;&gt;https://docs.puppetlabs.com/mcollective/reference/plugins/security_ssl.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Fundamentals Brasília 22 a 24 de Setembro</title>
      <link>https://archives.gutocarvalho.net/post/2015-08-24-puppet-fundamentals-brasilia-22-a-24-de-setembro/</link>
      <pubDate>Mon, 24 Aug 2015 10:22:10 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-08-24-puppet-fundamentals-brasilia-22-a-24-de-setembro/</guid>
      <description>&lt;p&gt;Puppet Fundamentals&lt;br&gt;
22, 23 e 24 de Setembro de 2015&lt;br&gt;
Horário: 09:00 às 18:00&lt;br&gt;
Local: Brasília/DF&lt;br&gt;&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/4Y0y_ey7B9U&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Este é o último do ano em Brasília, aproveite, participe, tenha um diferencial em seu currículo, garanta sua vaga nesta turma!&lt;/p&gt;
&lt;p&gt;Saiba mais sobre o treinamento:&lt;/p&gt;
&lt;p&gt;=&amp;gt; &lt;a href=&#34;https://puppetlabs.com/services/training/puppet-fundamentals&#34;&gt;https://puppetlabs.com/services/training/puppet-fundamentals&lt;/a&gt;&lt;br&gt;
=&amp;gt; &lt;a href=&#34;http://instruct.com.br/calendario.html&#34;&gt;http://instruct.com.br/calendario.html&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Eu serei o instrutor dessa turma :)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando ActiveMQ 5.9 para Mcollective 2.8.2 do Puppet Agent 1.2.2 no CentOS 7 (v1.0)</title>
      <link>https://archives.gutocarvalho.net/post/2015-08-21-activemq-e-mcollective-no-puppet-4/</link>
      <pubDate>Fri, 21 Aug 2015 09:36:55 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-08-21-activemq-e-mcollective-no-puppet-4/</guid>
      <description>&lt;iframe width=&#34;420&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/-stgc_CUTsM&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;1-mcollective-no-puppet-4&#34;&gt;1. Mcollective no Puppet 4&lt;/h2&gt;
&lt;p&gt;O Puppet Agent 1.2.2 do Puppet 4.2 já traz o Mcollective embutido, se você instalou o agente do puppet você também instalou o Mcollective. Neste post vou mostrar como instalar o ActiveMQ e como configurar o Mcollective do Puppet Agent 1.2.2 do Puppet 4 para falar com o ActiveMQ.&lt;/p&gt;
&lt;p&gt;Este post é resultado de um dia de hacklab que fiz com o Miguel Filho (@mciurcio).&lt;/p&gt;
&lt;h2 id=&#34;2-dependências&#34;&gt;2. Dependências&lt;/h2&gt;
&lt;p&gt;Instalar o Puppet Agent e Server do Puppet 4.2 conforme o post &lt;a href=&#34;http://gutocarvalho.net/octopress/2015/08/18/instalando-puppet-4-agent-and-master/&#34;&gt;anterior&lt;/a&gt; é pré-requisito, vamos usar a mesma VM para rodar o ActiveMQ e utilizar o Mcollective.&lt;/p&gt;
&lt;h2 id=&#34;21-cenário&#34;&gt;2.1 Cenário&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;Vagrant+Virtualbox rodando VM com CentOS 7
Puppet Agent 1.2.2 (Puppet 4.2)
Mcollective 2.8.2 embutido no puppet-agent 1.2.2 (Puppet 4.2)
ActiveMQ 5.9
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-apache-activemq-59&#34;&gt;3. Apache ActiveMQ 5.9&lt;/h2&gt;
&lt;p&gt;O ActiveMQ é o serviço de fila utilizado pelo Mcollective.&lt;/p&gt;
&lt;h3 id=&#34;32-instalando-repositório&#34;&gt;3.2 Instalando Repositório&lt;/h3&gt;
&lt;p&gt;Para instalar o ActiveMQ é necessário utilizar pacotes do Puppet 3.x pois ele ainda não está no repositório PC1 do Puppet 4.2.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum install http://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;31-instalando-activemq&#34;&gt;3.1 Instalando ActiveMQ&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum install activemq -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;32-configurando-activemq&#34;&gt;3.2 Configurando ActiveMQ&lt;/h3&gt;
&lt;p&gt;Edite o arquivo de configuração do Mcollective Server&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# vim /etc/activemq/activemq.xml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Apague o conteúdo anteriror, adicione o conteúdo abaixo ao arquivo&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;beans&lt;/span&gt;
  &lt;span class=&#34;na&#34;&gt;xmlns=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://www.springframework.org/schema/beans&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;na&#34;&gt;xmlns:amq=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://activemq.apache.org/schema/core&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;na&#34;&gt;xmlns:xsi=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;na&#34;&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  http://activemq.apache.org/camel/schema/spring http://activemq.apache.org/camel/schema/spring/camel-spring.xsd&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;

    &lt;span class=&#34;nt&#34;&gt;&amp;lt;broker&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;xmlns=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://activemq.apache.org/schema/core&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;brokerName=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;puppetserver4.hacklab&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;useJmx=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;lt;managementContext&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;managementContext&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;createConnector=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;false&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;lt;/managementContext&amp;gt;&lt;/span&gt;


        &lt;span class=&#34;nt&#34;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;lt;statisticsBrokerPlugin/&amp;gt;&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;lt;simpleAuthenticationPlugin&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;users&amp;gt;&lt;/span&gt;
              &lt;span class=&#34;nt&#34;&gt;&amp;lt;authenticationUser&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;username=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;password=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;marionette&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;groups=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective,everyone&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
              &lt;span class=&#34;nt&#34;&gt;&amp;lt;authenticationUser&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;username=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admin&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;password=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admin&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;groups=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective,admins,everyone&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;/users&amp;gt;&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;lt;/simpleAuthenticationPlugin&amp;gt;&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationPlugin&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;map&amp;gt;&lt;/span&gt;
              &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationMap&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationEntries&amp;gt;&lt;/span&gt;
                  &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationEntry&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;queue=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;write=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admins&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;read=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admins&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;admin=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admins&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationEntry&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;topic=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;write=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admins&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;read=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admins&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;admin=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;admins&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationEntry&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;topic=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective.&amp;gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;write=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;read=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;admin=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationEntry&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;queue=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective.&amp;gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;write=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;read=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;admin=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;mcollective&amp;#34;&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                  &lt;span class=&#34;nt&#34;&gt;&amp;lt;authorizationEntry&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;topic=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ActiveMQ.Advisory.&amp;gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;read=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;everyone&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;write=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;everyone&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;admin=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;everyone&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;/authorizationEntries&amp;gt;&lt;/span&gt;
              &lt;span class=&#34;nt&#34;&gt;&amp;lt;/authorizationMap&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;/map&amp;gt;&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;lt;/authorizationPlugin&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;

        &lt;span class=&#34;nt&#34;&gt;&amp;lt;systemUsage&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;systemUsage&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;memoryUsage&amp;gt;&lt;/span&gt;
                    &lt;span class=&#34;nt&#34;&gt;&amp;lt;memoryUsage&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;limit=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;20 mb&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;/memoryUsage&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;storeUsage&amp;gt;&lt;/span&gt;
                    &lt;span class=&#34;nt&#34;&gt;&amp;lt;storeUsage&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;limit=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;1 gb&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;foo&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;/storeUsage&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;tempUsage&amp;gt;&lt;/span&gt;
                    &lt;span class=&#34;nt&#34;&gt;&amp;lt;tempUsage&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;limit=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;100 mb&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&#34;nt&#34;&gt;&amp;lt;/tempUsage&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;/systemUsage&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;lt;/systemUsage&amp;gt;&lt;/span&gt;

        &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnectors&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnector&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;openwire&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;uri=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;tcp://0.0.0.0:61616&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;lt;transportConnector&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;name=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp+nio&amp;#34;&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;uri=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;stomp://0.0.0.0:61613&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;lt;/transportConnectors&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;lt;/broker&amp;gt;&lt;/span&gt;

&lt;span class=&#34;nt&#34;&gt;&amp;lt;/beans&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Salve&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o link simbólico do diretório data&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# ln -s /usr/share/activemq/data /usr/share/activemq/activemq-data
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Há um issue aberto para corrigir essa questão do link, vote pela correção!&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://github.com/puppetlabs/puppetlabs-activemq/pull/38
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;33-iniciando-activemq&#34;&gt;3.3 Iniciando ActiveMQ&lt;/h3&gt;
&lt;p&gt;Inicie o serviço com o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# systemctl start activemq
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;34-verificando-serviço&#34;&gt;3.4 Verificando Serviço&lt;/h3&gt;
&lt;p&gt;Verifique no arquivo de log do serviço se ele subiu&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# tail -f  /var/log/activemq/activemq.log
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Uma linha similar a esta deve estar presente nas últimas linhas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;2015-08-21 19:50:40,791 [main           ] INFO  BrokerService                  - Apache ActiveMQ 5.9.1 (puppetserver4.hacklab, ID:puppetserver4.hacklab-52815-1440186640199-0:1) started
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique se a porta 61613 TCP está em modo LISTEN&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 activemq]# netstat -ntpl|grep 61613
 tcp6       0      0 :::61613                :::*                    LISTEN      19183/java
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se teve todas essas saídas seu ActiveMQ está ok!&lt;/p&gt;
&lt;h2 id=&#34;4-mcollective-282&#34;&gt;4. Mcollective 2.8.2&lt;/h2&gt;
&lt;p&gt;O Mcollective é o oquestrador do Puppet, o principal objetivo dele é invocar o agente do puppet de forma direta e paralela caso necessário, fazendo isto em todos os nodes do seu parque - quando for preciso fazê-lo.&lt;/p&gt;
&lt;h3 id=&#34;41-configurando-mcollective-server&#34;&gt;4.1 Configurando Mcollective Server&lt;/h3&gt;
&lt;p&gt;Edite o arquivo abaixo server.cfg do mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# vim /etc/puppetlabs/mcollective/server.cfg
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Apague o conteúdo anteriror, adicione o conteúdo abaixo ao arquivo&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ini&#34; data-lang=&#34;ini&#34;&gt;&lt;span class=&#34;na&#34;&gt;main_collective&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;mcollective&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;collectives&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;mcollective&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;libdir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/opt/puppetlabs/puppet/lib/ruby/vendor_ruby:/opt/puppetlabs/mcollective/plugins&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;logfile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/var/log/mcollective.log&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;loglevel&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;info&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;identity&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;puppetserver4.hacklab&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;daemonize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;direct_addressing&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;0&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# Plugins&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;securityprovider&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;psk&lt;/span&gt;

&lt;span class=&#34;na&#34;&gt;plugin.psk&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;hacklab&lt;/span&gt;

&lt;span class=&#34;na&#34;&gt;connector&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;activemq&lt;/span&gt;

&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;1&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.host&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;puppetserver4.hacklab&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.port&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;61613&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.user&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;mcollective&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.password&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;marionette&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.activemq.pool.1.ssl&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;false&lt;/span&gt;

&lt;span class=&#34;na&#34;&gt;plugin.package.provider&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;puppet&lt;/span&gt;

&lt;span class=&#34;na&#34;&gt;plugin.puppetca.cadir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/srv/puppetca/ca/&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# Facts&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;factsource&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;yaml&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;plugin.yaml&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/etc/puppetlabs/mcollective/facts.yaml&lt;/span&gt;

&lt;span class=&#34;na&#34;&gt;classesfile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;/var/lib/puppet/state/classes.txt&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# Registration&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;registerinterval&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;300&lt;/span&gt;
&lt;span class=&#34;na&#34;&gt;registration&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;Agentlist&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Reinicie o Mcollective.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# systemctl restart mcollective
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;411-verificando-mcollective-server&#34;&gt;4.1.1 Verificando Mcollective Server&lt;/h4&gt;
&lt;p&gt;Verifique no log se o mcollective se conectou ao activeMQ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 mcollective]# tail -f /var/log/mcollective.log
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Você verá uma mensagem similar a esta&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[2015-08-21T19:50:53.749595 #20554]  INFO -- : activemq.rb:119:in `on_connected&#39; Connected to stomp://mcollective@puppetserver4.hacklab:61613
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se recebeu uma linha similar, seu Mcollective Server está Ok&lt;/p&gt;
&lt;h3 id=&#34;42-configurando-mcollective-client&#34;&gt;4.2 Configurando Mcollective Client&lt;/h3&gt;
&lt;p&gt;Edite o arquivo de configuração do Mcollective Client&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# vim /etc/activemq/activemq.xml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione o conteúdo abaixo ao arquivo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;main_collective = mcollective
collectives = mcollective
libdir = /opt/puppetlabs/puppet/lib/ruby/vendor_ruby:/opt/puppetlabs/mcollective/plugins
logfile = /dev/null
loglevel = info
direct_addressing = 0

# Plugins
securityprovider = psk

plugin.psk = hacklab

plugin.package.provider = puppet

connector = activemq

plugin.activemq.pool.size = 1
plugin.activemq.pool.1.host = puppetserver4.hacklab
plugin.activemq.pool.1.port = 61613

plugin.activemq.pool.1.user = mcollective
plugin.activemq.pool.1.password = marionette

plugin.activemq.pool.1.ssl = false

# Facts
factsource = yaml
plugin.yaml = /etc/puppetlabs/mcollective/facts.yaml

default_discovery_method = mc
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;43-testando-mcollective&#34;&gt;4.3 Testando Mcollective&lt;/h3&gt;
&lt;p&gt;Buscando nodes com serviço mcollective rodando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 mcollective]# mco find
puppetserver4.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Enviando ping para verificar tempo de resposta dos nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 mcollective]# mco ping
puppetserver4.hacklab                    time=18.49 ms
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-amarrando-as-pontas&#34;&gt;5. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Apesar das mudanças em Paths o Mcollective continua o mesmo. No momento ainda não existem pacotes com os plugins para manipular seviços, pacotes e o próprio Puppet, é necessário instalar os plugins manualmente, vou tratar da instalação destes plugins no próximo post.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando Puppet Agent 4 e Puppet Master 4 em CentOS 7 (v1.5)</title>
      <link>https://archives.gutocarvalho.net/post/2015-08-18-instalando-puppet-4-agent-and-master/</link>
      <pubDate>Tue, 18 Aug 2015 14:24:02 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-08-18-instalando-puppet-4-agent-and-master/</guid>
      <description>&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/BRuK6ZTzV74&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Este é o primeiro post que escrevo sobre o Puppet 4, a ideia aqui é demonstrar a instalação e a configuração mínima para você ter um Puppet Agent e Puppet Server do Puppet 4.2 rodando na mesma VM.&lt;/p&gt;
&lt;p&gt;Este post é resultado de um dia de hacklab que fiz com o Miguel Filho (@mciurcio).&lt;/p&gt;
&lt;h2 id=&#34;1-cenário-do-hacklab&#34;&gt;1. Cenário do HackLab&lt;/h2&gt;
&lt;p&gt;O hacklab foi realizado no cenário abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Macbook Pro 11.1
- OSX 10.11 (El Capitan)
  - VAGRANT 1.7.4
    - BOX CentOS 7 da Puppet Labs 
  - VIRTUALBOX 5.0
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-configurando-vagrant&#34;&gt;2. Configurando Vagrant&lt;/h2&gt;
&lt;p&gt;Crie um diretório para seu projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ mkdir -p ~/vagrant/projects/puppet4
$ cd ~/vagrant/projects/puppet4
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione a box ao vagrant&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ vagrant box add —-name centos7x64 https://atlas.hashicorp.com/puppetlabs/boxes/centos-7.0-64-puppet/versions/1.0.2/providers/virtualbox.box
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo Vagrantfile dentro do diretório do projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pwd
~/vagrant/projects/puppet4
$ vim Vagrantfile 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione o conteúdo abaixo ao arquivo&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# -*- mode: ruby -*-&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;# vi: set ft=ruby :&lt;/span&gt;

&lt;span class=&#34;no&#34;&gt;VAGRANTFILE_API_VERSION&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt;

&lt;span class=&#34;no&#34;&gt;Vagrant&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;configure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;VAGRANTFILE_API_VERSION&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
		&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hostname&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;puppetserver4.hacklab&amp;#34;&lt;/span&gt;
		&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;box&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;centos7x64&amp;#34;&lt;/span&gt;
		&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;network&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;private_network&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;ss&#34;&gt;ip&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.200.88&amp;#34;&lt;/span&gt;

		&lt;span class=&#34;n&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;vm&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;provider&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;virtualbox&amp;#34;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;virtualbox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;
			&lt;span class=&#34;n&#34;&gt;virtualbox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;customize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;modifyvm&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;ss&#34;&gt;:id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;--cpus&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
			&lt;span class=&#34;n&#34;&gt;virtualbox&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;customize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;modifyvm&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;ss&#34;&gt;:id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;--memory&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;4096&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
	   &lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Salve&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora inicie a VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ vagrant ssh
[vagrant@puppetserver4 ~]$ sudo -i
[root@puppetserver4 ~]#
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, agora podemos começar.&lt;/p&gt;
&lt;h2 id=&#34;3-instalando-repositório&#34;&gt;3. Instalando Repositório&lt;/h2&gt;
&lt;h3 id=&#34;31-repositório&#34;&gt;3.1 Repositório&lt;/h3&gt;
&lt;p&gt;Instale o repositório da puppetlabs para o puppet 4&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum install http://yum.puppetlabs.com/el/7/PC1/x86_64/puppetlabs-release-pc1-0.9.2-1.el7.noarch.rpm -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-instalando-agent&#34;&gt;4. Instalando Agent&lt;/h2&gt;
&lt;h3 id=&#34;41-removendo-puppet-agent-3&#34;&gt;4.1 Removendo Puppet Agent 3&lt;/h3&gt;
&lt;p&gt;Remova o puppet 3 que vem na box&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum remove puppet -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;42-pesquisando-por-pacotes&#34;&gt;4.2 Pesquisando por pacotes&lt;/h3&gt;
&lt;p&gt;Pesquise por pacotes Puppet&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum search puppet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A saída da busca deve ser similar a esta&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;puppet-agent.x86_64 : The Puppet Agent package contains all of the elements needed to run puppet, including ruby,
                    : facter, hiera and mcollective.
puppetdb.noarch : Puppet Labs - puppetdb
puppetdb-termini.noarch : Termini for puppetdb
puppetdb-terminus.noarch : Metapackage to allow easy upgrades from PuppetDB 2
puppetlabs-release-pc1.noarch : Release packages for the Puppet Labs PC1 repository
puppetserver.noarch : Puppet Labs - puppetserver
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Se viu uma saída similar, isto significa que a instalação do repositório teve sucesso.&lt;/p&gt;
&lt;h3 id=&#34;43-configurando-hosts&#34;&gt;4.3 Configurando Hosts&lt;/h3&gt;
&lt;p&gt;Ajuste o endereço localhost em s
eu arquivo hosts&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# echo &amp;quot;127.0.0.1 localhost localhost.localdomain&amp;quot; &amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ajuste o endereço do servidor puppet&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# echo &amp;quot;192.168.200.88 puppetserver4.hacklab puppetserver4 puppet&amp;quot; &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;44-configurando-hostname&#34;&gt;4.4 Configurando Hostname&lt;/h3&gt;
&lt;p&gt;Vamos ajustar hostname do OS para gerar certificados mais adiante&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# echo &amp;quot;puppetserver4.hacklab&amp;quot; &amp;gt; /etc/hostname
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Por default o certificados do agente tem o mesmo nome do conteúdo desse arquivo.&lt;/p&gt;
&lt;h3 id=&#34;45-instalando-puppet-agent-122-do-puppet-42&#34;&gt;4.5 Instalando Puppet Agent 1.2.2 do Puppet 4.2&lt;/h3&gt;
&lt;p&gt;Instale puppet agent 1.2.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum install puppet-agent -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;46-ajustando-path-para-binários&#34;&gt;4.6 Ajustando Path para binários&lt;/h3&gt;
&lt;p&gt;Teste o puppet agent&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# puppet
-bash: puppet: command not found
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Corrija o path para utilizar os recursos do Puppet 4.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# echo &amp;quot;export PATH=/opt/puppetlabs/bin:$PATH&amp;quot; &amp;gt; /etc/profile.d/puppet_path.sh
[root@puppetserver4 ~]# source /etc/profile.d/puppet_path.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;47-corrigindo-locales&#34;&gt;4.7 Corrigindo locales&lt;/h3&gt;
&lt;p&gt;Após definir o path rode o puppet&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# puppet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Você provavelmente vai receber esta saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;terminate called after throwing an instance of &#39;std::runtime_error&#39; what():  locale::facet::_S_create_c_locale name not valid
Aborted
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Defina o valor para a variável LC_ALL globalmente para resolver isto até que o bug seja corrijido.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# echo &amp;quot;export LC_ALL=en_US.UTF-8&amp;quot; &amp;gt; /etc/profile.d/puppet_locale.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Carregue a configuração de locale&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# source /etc/profile.d/puppet_locale.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Teste novamente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# puppet --version
4.2.1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Há um ticket aberto para corrigir o problema, vote e acompanhe.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://tickets.puppetlabs.com/browse/SERVER-779
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;48-testando-o-novo-facter&#34;&gt;4.8 Testando o novo facter&lt;/h3&gt;
&lt;p&gt;Verificando informações de uptime&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 production]# facter system_uptime
&lt;/code&gt;&lt;/pre&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{
  days =&amp;gt; 0,
  hours =&amp;gt; 0,
  seconds =&amp;gt; 2546,
  uptime =&amp;gt; &amp;quot;0:42 hours&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Verificando informações de ruby&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 production]# facter ruby
&lt;/code&gt;&lt;/pre&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{
  platform =&amp;gt; &amp;quot;x86_64-linux&amp;quot;,
  sitedir =&amp;gt; &amp;quot;/opt/puppetlabs/puppet/lib/ruby/site_ruby/2.1.0&amp;quot;,
  version =&amp;gt; &amp;quot;2.1.6&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Verificando informações de OS&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 production]# facter os
&lt;/code&gt;&lt;/pre&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{
  architecture =&amp;gt; &amp;quot;x86_64&amp;quot;,
  family =&amp;gt; &amp;quot;RedHat&amp;quot;,
  hardware =&amp;gt; &amp;quot;x86_64&amp;quot;,
  name =&amp;gt; &amp;quot;CentOS&amp;quot;,
  release =&amp;gt; {
    full =&amp;gt; &amp;quot;7.0.1406&amp;quot;,
    major =&amp;gt; &amp;quot;7&amp;quot;,
    minor =&amp;gt; &amp;quot;0&amp;quot;
  },
  selinux =&amp;gt; {
    enabled =&amp;gt; false
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Verificando informações de load average&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 production]# facter load_averages
&lt;/code&gt;&lt;/pre&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;load_averages =&amp;gt; {
  15m =&amp;gt; 0.09,
  1m =&amp;gt; 0.09,
  5m =&amp;gt; 0.07
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Verificando informações de networking&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 production]# facter networking
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-ruby&#34; data-lang=&#34;ruby&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;dhcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.2.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;domain&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;hacklab&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;fqdn&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;puppetserver4.hacklab&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;hostname&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;puppetserver4&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;interfaces&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;enp0s3&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;dhcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.2.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.2.15&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;fe80::a00:27ff:fe19:cd16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;mac&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;08:00:27:19:cd:16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;mtu&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;netmask&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;255.255.255.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;netmask6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ffff:ffff:ffff:ffff::&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.2.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;network6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;fe80::&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;enp0s8&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;dhcp&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.56.100&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.200.88&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;fe80::a00:27ff:fe7a:5943&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;mac&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;08:00:27:7a:59:43&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;mtu&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;netmask&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;255.255.255.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;netmask6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ffff:ffff:ffff:ffff::&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.200.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;network6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;fe80::&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;lo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;127.0.0.1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;::1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;mtu&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;65536&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;netmask&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;255.0.0.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;netmask6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;127.0.0.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;network6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;::1&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.2.15&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;fe80::a00:27ff:fe19:cd16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;mac&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;08:00:27:19:cd:16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;mtu&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1500&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;netmask&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;255.255.255.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;netmask6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ffff:ffff:ffff:ffff::&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;network&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.2.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;n&#34;&gt;network6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;fe80::&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Veja que puppet 4 já usa novo facter (projeto cfacter), esse novo facter traz todos os fatos de forma estruturada e organizada, permitindo um uso muito mais simples dessas informações em nossos manifests.&lt;/p&gt;
&lt;p&gt;Se voce quer referenciar o fato fqdn do agrupamento networking faça isso&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 production]# facter networking.fqdn
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se voce quer referenciar o mesmo fato em um manifest faça assim&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$::networking[&#39;fqdn&#39;]
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;49-novos-paths&#34;&gt;4.9 Novos Paths&lt;/h3&gt;
&lt;p&gt;Agora o puppet é instalado em modo AIO (all in one), isto significa que ele é um pacote único que já traz tudo o que você precisa, incluindo ai neste pacote binários, libs, confs, é tudo independente do OS. E tem um novo diretório também&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/opt/puppetlabs
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As configurações ficam em&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/puppetlabs
/etc/puppetlabs/puppet
/etc/puppetlabs/mcollective
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora o mcollective já vem junto no pacote como parte integrante e permanente do agente.&lt;/p&gt;
&lt;h2 id=&#34;5-puppet-server&#34;&gt;5 Puppet Server&lt;/h2&gt;
&lt;h3 id=&#34;51-instalando-o-pacote&#34;&gt;5.1 Instalando o pacote&lt;/h3&gt;
&lt;p&gt;Agora vamos instalar o Puppet Server novo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum install puppetserver -y
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;52-gerando-certificados&#34;&gt;5.2 Gerando certificados&lt;/h3&gt;
&lt;p&gt;Antes de iniciar o Puppet Server, rode o comando abaixo para gerar os certificados, os certificados deveriam ser gerados na inicialização do serviço, mas no momento isto não está ocorrendo, então você vai gerá-los com os comandos abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# puppet cert list -a
[root@puppetserver4 ~]# puppet cert generate puppetserver4.hacklab --dns_alt_names=puppet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A saída esperada é esta&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: puppetserver4.hacklab has a waiting certificate request
Notice: Signed certificate request for puppetserver4.hacklab
Notice: Removing file Puppet::SSL::CertificateRequest puppetserver4.hacklab at &#39;/etc/puppetlabs/puppet/ssl/ca/requests/puppetserver4.hacklab.pem&#39;
Notice: Removing file Puppet::SSL::CertificateRequest puppetserver4.hacklab at &#39;/etc/puppetlabs/puppet/ssl/certificate_requests/puppetserver4.hacklab.pem&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Há um ticket aberto para corrigir o problema, vote e acompanhe.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://tickets.puppetlabs.com/browse/SERVER-528
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;53-parametrização-jvm&#34;&gt;5.3 Parametrização JVM&lt;/h3&gt;
&lt;p&gt;Veja os parâmetros de memória da JVM, ajuste conforme sua necessidade&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# cat /etc/sysconfig/puppetserver|grep JAVA_ARGS
JAVA_ARGS=&amp;quot;-Xms2g -Xmx2g -XX:MaxPermSize=256m&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;54-parametrização-do-systemd&#34;&gt;5.4 Parametrização do Systemd&lt;/h3&gt;
&lt;p&gt;Dependendo do HW de sua VM e da quantidade de recursos, o serviço puppetserver pode demorar a subir, o systemd tem um timeout padrão que pode ser atingido antes do puppetserver iniciar, se isto acontecer o próprio systemd mata o processo, para resolver isto temos que aumentar esse timeout default do systemd.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo &amp;quot;START_TIMEOUT=300&amp;quot; &amp;gt;&amp;gt; /etc/sysconfig/puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o puppet server (isto pode demorar)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# systemctl start puppetserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique se o processo subiu&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# ps afxwww|grep java
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A saída esperada será similar a esta&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; 3277 ?        Ssl    0:53 /usr/bin/java -Xms2g -Xmx2g -XX:MaxPermSize=256m -XX:OnOutOfMemoryError=kill -9 %p -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/puppetlabs/puppetserver -Djava.security.egd=/dev/urandom -cp /opt/puppetlabs/server/apps/puppetserver/puppet-server-release.jar clojure.main -m puppetlabs.trapperkeeper.main --config /etc/puppetlabs/puppetserver/conf.d -b /etc/puppetlabs/puppetserver/bootstrap.cfg
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Há um ticket aberto para corrigir o problema, vote e acompanhe.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; https://tickets.puppetlabs.com/browse/SERVER-557   
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;55-ajustando-o-puppetconf&#34;&gt;5.5 Ajustando o puppet.conf&lt;/h3&gt;
&lt;p&gt;Edite o arquivo puppet.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# yum install vim -y
[root@puppetserver4 ~]# vim /etc/puppetlabs/puppet/puppet.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione a configuração abaixo no puppet.conf ao final do arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[agent]
certname = puppet4server.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Salve&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Essa configuração se faz necessária para o agente não regerar o certificado caso algo no /etc/hostname mude, isso poderia quebrar o master e o agent.&lt;/p&gt;
&lt;h3 id=&#34;56-testando-puppet-server&#34;&gt;5.6 Testando Puppet Server&lt;/h3&gt;
&lt;p&gt;Uma vez que temos o Puppet Agent e Server instalados, podemos agora empurrar uma configuração para validar o ambiente, vale informar que o diretório dos environments mudou para&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; /etc/puppetlabs/code/environments
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifque o fato fqdn&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 puppetlabs]# facter networking.fqdn
 puppetserver4.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora crie uma configuração simples&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[root@puppetserver4 ~]# vim /etc/puppetlabs/code/environments/production/manifests/site.pp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione o conteúdo abaixo&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-puppet&#34; data-lang=&#34;puppet&#34;&gt;&lt;span class=&#34;k&#34;&gt;node&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;puppetserver4.hacklab&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;nmap&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;na&#34;&gt;ensure&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;present&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;notify&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;O FQDN desta VM eh ${::networking[&amp;#39;fqdn&amp;#39;]}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Salve&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rode o agente&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[root@puppetserver4 puppetlabs]# puppet agent -t
Info: Retrieving pluginfacts
Info: Retrieving plugin
Info: Caching catalog for puppetserver4.hacklab
Info: Applying configuration version &#39;1440097652&#39;
Notice: /Stage[main]/Main/Node[puppetserver4.hacklab]/Package[nmap]/ensure: created
Notice: O FQDN desta VM eh puppetserver4.hacklab
Notice: /Stage[main]/Main/Node[puppetserver4.hacklab]/Notify[O FQDN desta VM eh puppetserver4.hacklab]/message: defined &#39;message&#39; as &#39;O FQDN desta VM eh puppetserver4.hacklab&#39;
Notice: Applied catalog in 4.74 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;6-amarrando-as-pontas&#34;&gt;6. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Você empurrou uma configuração com sucesso utilizando Puppet Server/Agent do Puppet 4.2 e já utilizou um fato - em hash - do novo cfacter.&lt;/p&gt;
&lt;p&gt;Esse post foi direto ao ponto, há muito ainda para ler, ver, estudar, aprender e compartilhar.&lt;/p&gt;
&lt;p&gt;Bons estudos!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Webinar Construindo Módulo Puppet para o Zabbix</title>
      <link>https://archives.gutocarvalho.net/post/2015-08-03-webinar-construindo-modulo-puppet-para-o-zabbix/</link>
      <pubDate>Mon, 03 Aug 2015 17:29:46 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-08-03-webinar-construindo-modulo-puppet-para-o-zabbix/</guid>
      <description>&lt;p&gt;Nesta semana faremos o segundo webinar &amp;ldquo;Contruindo Módulos Puppet&amp;rdquo;, desta vez, a tecnologia escolhida para o Puppet gerenciar foi a ferramenta de monitoramento preferida dos brasileiros - Zabbix.&lt;/p&gt;
&lt;p&gt;Seguiremos a mesma linha do último webinar, vamos codificar o módulo mantendo sempre contato com quem está assistindo.&lt;/p&gt;
&lt;p&gt;A partir deste webinar, vamos trazer sempre um especialista de cada tecnologia, com isto, o especialista lidera o trabalho passando os requisitos para codificarmos o módulo e puppetizar o Zabbix.&lt;/p&gt;
&lt;p&gt;Neste webinar teremos a participação especial do André Déo, especialista em Zabbix, um dos fundadores da comunidade Zabbix Brasil e co-autor do livro de A a Zabbix.&lt;/p&gt;
&lt;p&gt;Dessa vez @miguelzinho @gutocarvalho estarão juntos no escritório da Instruct em Campinas recebendo o @deoandre, vamos transmitir o evento ao vivo utilizando o OBS.&lt;/p&gt;
&lt;p&gt;Durante a sessão vamos utilizar o vagrant para provisionamento da VM e Puppet para codificação do módulo que vai gerenciar o Zabbix.&lt;/p&gt;
&lt;p&gt;Como de costume, inscreva-se para receber o link e instruções de como participar.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://bit.ly/webinar-inscricao&#34;&gt;http://bit.ly/webinar-inscricao&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nos vemos na quinta-feira às 19:30!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Minha visão da Agenda Digital</title>
      <link>https://archives.gutocarvalho.net/post/2015-08-01-minha-visao-da-agenda-digital/</link>
      <pubDate>Sat, 01 Aug 2015 21:53:04 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-08-01-minha-visao-da-agenda-digital/</guid>
      <description>&lt;p&gt;Se tenho algo a dizer sobre a Agenda Digital Hacker do MINC? Tenho!&lt;/p&gt;
&lt;p&gt;Foi uma experiência fantástica e como dizem por lá - fodástica.&lt;/p&gt;
&lt;p&gt;Desde o FISL de 2004 - meu primeiro grande evento técnico - eu não me sentia tão empolgado em participar de um encontro que realmente fez o papel de conectar os seus participantes.&lt;/p&gt;
&lt;p&gt;Foram palestras, oficinas, hacklabs, hackatons, dojos, desafios, papo sobre ética hacker, papo sobre código aberto e dados abertos, papo sobre governo, e muito, mas muito networking. Tudo acontecendo em meio a uma rica troca de experiências entre pessoas de várias partes do país e dos mais variados segmentos da sociedade.&lt;/p&gt;
&lt;p&gt;O mais legal é que o palestrante não era exatamente o que entendemos como palestrante, todos que participaram deste encontro vieram com aquele conceito de apresentar algo, formal, técnico, mas depois de entrarem em sinergia com o grupo as apresentações se tornaram algo diferente, na verdade o palestrante se tornou o guia de um determinado assunto a ser apresentando, e de forma coletiva e colaborativa íamos todos discutido, assimilado e repensando a todo o momento aqueles conceitos.&lt;/p&gt;
&lt;p&gt;Confesso que não me lembro de ter aprendido tanto em uma janela de tempo tão curta. Da mesma forma, nunca compartilhei tanto conhecimento e experiência como fiz naqueles dias. Guiei a turma por duas palestras, duas oficinas e fizemos juntos muitos testes em diversas tecnologias. Eu aprendi mais sobre testes de aceitação, testes unitários, containers lxc, docker, saltstack, kitchen ci, samba4, logs, elk stack, telegram, zabbix, servicos.gov.br, dados abertos, dentre muitos outros assuntos empolgantes e importantes.&lt;/p&gt;
&lt;p&gt;A CGTI organizou algo para conectar experiências e pessoas, e deu tão certo que isso foi muito além dos resultados esperados pelos participantes e seus organizadores. Quando eu paro para pensar que o encontro foi organizado de forma tão simples, sem pretensão de ser um grande ou pomposo evento de TI, vejo que talvez seja esse o caminho para realmente produzir algo tangível, para realmente apresentar resultado real como produto de pessoas reunidas com objetivos em comum.&lt;/p&gt;
&lt;p&gt;Eu moro em Brasília desde 2008, de lá para cá esse foi o primeiro encontro|evento que realmente me convenceu como proposta e que se provou e se sustentou com o resultado obtido. Eu já participei de várias iniciativas em comunidades, universidades e até mesmo dentro do governo, seja ministrando palestras, aplicando oficinas, participando de mesas e painéis, mas nunca vi o resultado de forma tão concreta como ocorreu aqui. A explicação é simples, na maioria dos eventos o discurso, as autoridades presentes, a ideologia e a propaganda política tem mais importância que o resultado que se busca. A agenda digital fez a engenharia reversa dessa lógica torta, ele não ficou só no discurso, a princípio penso que o discurso e a divulgação foi o que menos recebeu atenção, o foco foi no resultado, o foco foi em conectar pessoas, o foco foi resolver problemas comuns de governo. Isso aconteceu, os problemas foram apresentados, os problemas foram discutidos, foram estudados e foram aplicadas soluções viáveis do ponto de vista técnico e econômico. O resultado foi positivo, e seguindo a lógica da engenharia reversa, o discurso surge a partir deste resultado, a divulgação também, de algo concreto, de algo provado, o que na minha opinião é muito melhor do que o modelo convencional que quase sempre morre só no discurso.&lt;/p&gt;
&lt;p&gt;Nos primeiros cafézinhos na CGTI vi a construção discreta de algo que em sua essência e desenho - formados inicialmente pelo Diego e Rogério - teve o simples objetivo de falar sobre tecnologias e soluções necessárias ao Minc e ao Governo. A meta principal era conectar quem fez algo com alguma tecnologia específica, com que precisava entender, planejar e implantar a mesma tecnologia em sua organização. Na concepção, se essa conexão fosse possível - e foi, isto encurtaria caminhos, evitaria percalços complexos e permitiria o reaproveitamento de experiências e até de código.&lt;/p&gt;
&lt;p&gt;O encontro funcionou tão bem que já penso em replicar esse modelo para outras iniciativas em comunidades que participo.&lt;/p&gt;
&lt;p&gt;Agradeço ao MINC pelo convite, pela oportunidade de compartilhar, pela oportunidade de aprender e por me tirar de minha zona de conforto, entrei na vanguarda com a turma, codamos, hackeamos, testamos, erramos, acertamos, pensamos e repensamos muito em pouco tempo, voltei 11 anos no tempo e me senti um garoto novamente, foi como se eu estivesse chegando ao meu primeiro - grande - encontro técnico, entrei uma pessoa e sai outra muito melhor em vários aspectos, principalmente como cidadão.&lt;/p&gt;
&lt;p&gt;Que venham os próximos encontros, com muito hacking, networking e sharing.&lt;/p&gt;
&lt;p&gt;Que o resultado chegue a quem precise e que ele faça a diferença para organizações governamentais e para a sociedade.&lt;/p&gt;
&lt;p&gt;Contem comigo sempre, como cidadão, colaborador, apoiador, amigo e hacker!&lt;/p&gt;
&lt;p&gt;Vida longa e próspera a todos!&lt;/p&gt;
&lt;p&gt;[]s&lt;br&gt;
Guto Carvalho&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vídeos da Agenda Digital</title>
      <link>https://archives.gutocarvalho.net/post/2015-08-01-videos-da-agenda-digital/</link>
      <pubDate>Sat, 01 Aug 2015 10:46:58 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-08-01-videos-da-agenda-digital/</guid>
      <description>&lt;p&gt;Fizemos a transmissão parcial do evento Agenda Digital, neste processo nós utilizamos o &lt;a href=&#34;https://obsproject.com&#34;&gt;OBS&lt;/a&gt; fazendo streaming para o Youtube Live Events. Nós utilizamos apenas um notebook e duas webcams, o resto quem fez foi o OBS. Abaixo você poderá ver as gravações - sem edição - do dia 29, 30 e 31 de Julho.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/y0TsXC_Rskg&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/WPEawyFASps&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/pRi6ORxXM_s&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Slides de palestras da Agenda Digital</title>
      <link>https://archives.gutocarvalho.net/post/2015-08-01-slides-de-palestras-da-agenda-digital/</link>
      <pubDate>Sat, 01 Aug 2015 08:33:52 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-08-01-slides-de-palestras-da-agenda-digital/</guid>
      <description>&lt;iframe src=&#34;//www.slideshare.net/slideshow/embed_code/key/hdKpOh3aBhbCgK&#34; width=&#34;595&#34; height=&#34;485&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;&#34; allowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;//www.slideshare.net/instructbr/infraestrutura-gil&#34; title=&#34;Infraestrutura Ágil&#34; target=&#34;_blank&#34;&gt;Infraestrutura Ágil&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;//www.slideshare.net/instructbr&#34; target=&#34;_blank&#34;&gt;instructbr&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;iframe src=&#34;//www.slideshare.net/slideshow/embed_code/key/f1chqNLTdLxpDk&#34; width=&#34;595&#34; height=&#34;485&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;&#34; allowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;//www.slideshare.net/instructbr/infraestrutura-como-codigorevolucaosilenciosa&#34; title=&#34;Infraestrutura como Código&#34; target=&#34;_blank&#34;&gt;Infraestrutura como Código&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;//www.slideshare.net/instructbr&#34; target=&#34;_blank&#34;&gt;instructbr&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;p&gt;Faça download dos slides em:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://speakerdeck.com/instructbr&#34;&gt;https://speakerdeck.com/instructbr&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;http://www.slideshare.net/instructbr&#34;&gt;http://www.slideshare.net/instructbr&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Agenda Digital Minc de Inovação Tecnológica!</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-23-mini-encontro-hacker-iaas-no-minc/</link>
      <pubDate>Thu, 23 Jul 2015 07:42:05 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-23-mini-encontro-hacker-iaas-no-minc/</guid>
      <description>&lt;iframe width=&#34;420&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/79dXkVTBqpo&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;A CGTI do MINC está abrindo suas portas para falar sobre infraestrutura, modernização e inovação de TI no Governo Federal. Este evento tem o objetivo de proporcionar um espaço para que profissionais e especialistas de infraestrutura troquem experiências sobre soluções, métodos, problemas, modelos e desafios relacionados à infraestrutura de TI dentro - e fora - do governo. O foco principal deste primeiro evento é IaaS ou &amp;ldquo;Infraestrutura como Serviço&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;O Encontro vai acontecer em Brasília no dias 28, 29, 30 e 31 de Julho, será no Edificio Parque Cidade Corporate, Torre B, 12º Andar.&lt;/p&gt;
&lt;p&gt;Se você é um profissional ou especialista em infraestrutura e deseja participar, você precisa primeiro  entrar no grupo do encontro via telegram, lá você poderá para propor atividades ou se inscrever no encontro.&lt;/p&gt;
&lt;p&gt;A grade de atividades ainda está sendo construída, você - especialista - pode propor palestras e oficinas, caso não queira propor trabalhos, poderá ainda participar dos desafios ou contribuir nos temas que serão discutidos.&lt;/p&gt;
&lt;p&gt;O Evento tem 4 eixos principais, são eles:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Palestras
&lt;ul&gt;
&lt;li&gt;Infraestrutura como Código&lt;/li&gt;
&lt;li&gt;Teste de aceitação de código Puppet&lt;/li&gt;
&lt;li&gt;MDI ou TDD para Infra&lt;/li&gt;
&lt;li&gt;Docker, Docker Compose e Troubleshooting&lt;/li&gt;
&lt;li&gt;Infraestrutura Ágil&lt;/li&gt;
&lt;li&gt;Integrando todos os logs com ELK Stack&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Oficinas
&lt;ul&gt;
&lt;li&gt;Instalação de Puppet Server e demo de gerência&lt;/li&gt;
&lt;li&gt;Entendendo o ELK Stack&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Desafios
&lt;ul&gt;
&lt;li&gt;POC de migração do AD para Samba4&lt;/li&gt;
&lt;li&gt;Implantação do ELK Stack para gerir logs no MINC&lt;/li&gt;
&lt;li&gt;Escrever módulo telegram em C para Zabbix&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Mesas
&lt;ul&gt;
&lt;li&gt;Discussão sobre métodos, conceitos e tecnologias
&lt;ul&gt;
&lt;li&gt;Infra Ágil&lt;/li&gt;
&lt;li&gt;DevOps&lt;/li&gt;
&lt;li&gt;Automação de Infra no Governo&lt;/li&gt;
&lt;li&gt;Nuvem no Governo&lt;/li&gt;
&lt;li&gt;Autoserviço&lt;/li&gt;
&lt;li&gt;Integração/Entrega Contínua&lt;/li&gt;
&lt;li&gt;Deploy Automatizado de aplicações&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nos vemos por lá!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vídeo do webinar - criando módulos puppet - ELK stack</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-20-video-do-webinar-criando-modulo-puppet-do-elk-stack/</link>
      <pubDate>Mon, 20 Jul 2015 09:52:52 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-20-video-do-webinar-criando-modulo-puppet-do-elk-stack/</guid>
      <description>&lt;p&gt;Abaixo o vídeo do primeiro hangout &amp;ldquo;criando módulos puppet&amp;rdquo; que fiz com o Miguel. Nosso hangout aborda a criação de um módulo Puppet - codificando ao vivo - que cobre uma tecnologia específica, neste caso, a primeira tecnologia que abordamos foi o ELK Stack, este stack é composto por:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Elastic Search&lt;/li&gt;
&lt;li&gt;LogStash&lt;/li&gt;
&lt;li&gt;Kibana&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Separamos o hangout em cinco vídeos.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/videoseries?list=PLwbuDNhcHQgAr-d5sOB0xwpQw3SNbsnDa&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Assine nosso canal.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vídeo da Palestra Puppet 4 no CISL</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-18-video-da-palestra-puppet-4-no-cisl/</link>
      <pubDate>Sat, 18 Jul 2015 13:19:02 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-18-video-da-palestra-puppet-4-no-cisl/</guid>
      <description>&lt;iframe width=&#34;420&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/16IPrUhzwpE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto Carvalho&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Hangout Criando Módulos Puppet Confirmado!</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-13-hangout-criando-modulos-confirmado/</link>
      <pubDate>Mon, 13 Jul 2015 11:42:57 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-13-hangout-criando-modulos-confirmado/</guid>
      <description>&lt;iframe width=&#34;420&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/x74yYh4W_cQ&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;O Hangout foi confirmado, será no dia 16/07/15 às 20:00 horas.&lt;/p&gt;
&lt;p&gt;As tecnologias que ganharam a votação realizada compõe o famoso ELK Stack, são elas:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Elastic Search
Logstash
Kibana
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para participar você precisa fazer a sua &lt;a href=&#34;http://bit.ly/webinar-inscricao&#34;&gt;inscrição&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Para mais informações acompanhe as redes sociais da instruct no &lt;a href=&#34;http://twitter.com/instructbr&#34;&gt;twitter&lt;/a&gt; e &lt;a href=&#34;https://www.facebook.com/InstructBR&#34;&gt;facebook&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Aguardamos vocês lá.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Adotando Puppet sem atritos na equipe</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-08-adotando-puppet-sem-atritos-na-equipe/</link>
      <pubDate>Wed, 08 Jul 2015 17:36:28 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-08-adotando-puppet-sem-atritos-na-equipe/</guid>
      <description>&lt;p&gt;Abaixo um vídeo em que ofereco algumas dicas para adotar o Puppet evitando atritos com sua equipe durante esse processo.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/iFf2Xkqk6J0&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Abs,
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>ActiveMQ 5.6 em Debian 7.8 para Mcollective 2.0</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-08-instalando-activemq56-mcollective20-debian78/</link>
      <pubDate>Wed, 08 Jul 2015 14:56:56 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-08-instalando-activemq56-mcollective20-debian78/</guid>
      <description>&lt;p&gt;Em um recente projeto eu tive que subir o ActiveMQ 5.6.x em Debian 7.8 para servir como fila para o Mcollective 2.0. Confesso que eu e sofri um pouco, mas compartilho o resultado para evitar sofrimento desnecessário dos colegas que desejem subir um cenário similar.&lt;/p&gt;
&lt;p&gt;Vamos lá, aos corajosos quem forem instalar o ActiveMQ 5.6.x no Debian 7.8 para uso do Mcollective 2.0, segue abaixo o arquivo de configuração &lt;strong&gt;activemq.xml&lt;/strong&gt; que funciona nessa combinação de OS/Middleware/Orquestrador.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the &amp;quot;License&amp;quot;); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an &amp;quot;AS IS&amp;quot; BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
--&amp;gt;
&amp;lt;beans
  xmlns=&amp;quot;http://www.springframework.org/schema/beans&amp;quot;
  xmlns:amq=&amp;quot;http://activemq.apache.org/schema/core&amp;quot;
  xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;
  xsi:schemaLocation=&amp;quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd&amp;quot;&amp;gt;

    &amp;lt;!-- Allows us to use system properties as variables in this configuration file --&amp;gt;
    &amp;lt;bean class=&amp;quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&amp;quot;/&amp;gt;

    &amp;lt;broker xmlns=&amp;quot;http://activemq.apache.org/schema/core&amp;quot;
            brokerName=&amp;quot;localhost&amp;quot;
            dataDirectory=&amp;quot;${activemq.base}/data&amp;quot;&amp;gt;

        &amp;lt;!--
            Configure message persistence for the broker. The default persistence
            mechanism is the KahaDB store (identified by the kahaDB tag).
            For more information, see:

            http://activemq.apache.org/persistence.html
        --&amp;gt;
        &amp;lt;persistenceAdapter&amp;gt;
            &amp;lt;kahaDB directory=&amp;quot;${activemq.base}/data/kahadb&amp;quot;/&amp;gt;
        &amp;lt;/persistenceAdapter&amp;gt;

        &amp;lt;!--
            The transport connectors expose ActiveMQ over a given protocol to
            clients and other brokers. For more information, see:

            http://activemq.apache.org/configuring-transports.html
        --&amp;gt;

&amp;lt;plugins&amp;gt;
&amp;lt;simpleAuthenticationPlugin&amp;gt;
        &amp;lt;users&amp;gt;
          &amp;lt;authenticationUser username=&amp;quot;mcollective&amp;quot; password=&amp;quot;marionette&amp;quot; groups=&amp;quot;mcollective,everyone&amp;quot;/&amp;gt;
          &amp;lt;authenticationUser username=&amp;quot;admin&amp;quot; password=&amp;quot;secret&amp;quot; groups=&amp;quot;mcollective,admins,everyone&amp;quot;/&amp;gt;
        &amp;lt;/users&amp;gt;
      &amp;lt;/simpleAuthenticationPlugin&amp;gt;
      &amp;lt;authorizationPlugin&amp;gt;
        &amp;lt;map&amp;gt;
          &amp;lt;authorizationMap&amp;gt;
              &amp;lt;authorizationEntries&amp;gt;
                  &amp;lt;authorizationEntry queue=&amp;quot;&amp;gt;&amp;quot; write=&amp;quot;admins&amp;quot; read=&amp;quot;admins&amp;quot; admin=&amp;quot;admins&amp;quot; /&amp;gt;
                  &amp;lt;authorizationEntry topic=&amp;quot;&amp;gt;&amp;quot; write=&amp;quot;admins&amp;quot; read=&amp;quot;admins&amp;quot; admin=&amp;quot;admins&amp;quot; /&amp;gt;
                  &amp;lt;authorizationEntry topic=&amp;quot;mcollective.&amp;gt;&amp;quot; write=&amp;quot;mcollective&amp;quot; read=&amp;quot;mcollective&amp;quot; admin=&amp;quot;mcollective&amp;quot; /&amp;gt;
                  &amp;lt;authorizationEntry queue=&amp;quot;mcollective.&amp;gt;&amp;quot; write=&amp;quot;mcollective&amp;quot; read=&amp;quot;mcollective&amp;quot; admin=&amp;quot;mcollective&amp;quot; /&amp;gt;
                  &amp;lt;!--
                    The advisory topics are part of ActiveMQ, and all users need access to them.
                    The &amp;quot;everyone&amp;quot; group is not special; you need to ensure every user is a member.
                  --&amp;gt;
                  &amp;lt;authorizationEntry topic=&amp;quot;ActiveMQ.Advisory.&amp;gt;&amp;quot; read=&amp;quot;everyone&amp;quot; write=&amp;quot;everyone&amp;quot; admin=&amp;quot;everyone&amp;quot;/&amp;gt;
                &amp;lt;/authorizationEntries&amp;gt;
          &amp;lt;/authorizationMap&amp;gt;
        &amp;lt;/map&amp;gt;
      &amp;lt;/authorizationPlugin&amp;gt;
    &amp;lt;/plugins&amp;gt;

        &amp;lt;transportConnectors&amp;gt;
            &amp;lt;transportConnector name=&amp;quot;openwire&amp;quot; uri=&amp;quot;tcp://127.0.0.1:61616&amp;quot;/&amp;gt;
            &amp;lt;transportConnector name=&amp;quot;stomp+nio&amp;quot; uri=&amp;quot;stomp+nio://0.0.0.0:61613&amp;quot;/&amp;gt;
        &amp;lt;/transportConnectors&amp;gt;


    &amp;lt;/broker&amp;gt;

&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Com essa configuração, o Mcollective 2.0 de vocês conseguirá se conectar no ActiveMQ 5.6 sem maiores dificuldades.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Treinamento Puppet Fundamentals em São Paulo</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-07-treinamento-puppet-fundamentals-em-sao-paulo/</link>
      <pubDate>Tue, 07 Jul 2015 13:27:04 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-07-treinamento-puppet-fundamentals-em-sao-paulo/</guid>
      <description>&lt;p&gt;Puppet Fundamentals&lt;br&gt;
28, 29 e 30 de Julho de 2015&lt;br&gt;
Horário: 09:00 às 18:00&lt;br&gt;
Local: São Paulo/SP&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Data marcada, inscrições abertas!&lt;/p&gt;
&lt;p&gt;Saiba mais sobre o treinamento:&lt;/p&gt;
&lt;p&gt;=&amp;gt; &lt;a href=&#34;https://puppetlabs.com/services/training/puppet-fundamentals&#34;&gt;https://puppetlabs.com/services/training/puppet-fundamentals&lt;/a&gt;&lt;br&gt;
=&amp;gt; &lt;a href=&#34;http://instruct.com.br/calendario.html&#34;&gt;http://instruct.com.br/calendario.html&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Essa turma será ministrada pelo Miguel Filho!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Implantando SEI de forma Ágil</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-07-implantando-sei-de-forma-agil/</link>
      <pubDate>Tue, 07 Jul 2015 11:08:13 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-07-implantando-sei-de-forma-agil/</guid>
      <description>&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/-wjMdmhJxGU&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Amanhã eu vou compartilhar o que vi e aprendi sobre SEI em diversos projetos, farei uma uma palestra para o CISL, falarei do SEI e de tecnologias como Percona, Git, Puppet, Mcollective, Zabbix, NGINX, dentre outras.&lt;/p&gt;
&lt;p&gt;Apenas para alinhar, eu participei recentemente da implantação do SEI na Anatel e no Ministério da Justiça, agora estou apoiando o MinC neste mesmo processo.&lt;/p&gt;
&lt;p&gt;Todas essas implantações já seguiram a linha da cultura DevOps e infraestrutura ágil, para isto utilizamos diversas soluções e métodos que vão além do manual de instalação do SEI.&lt;/p&gt;
&lt;p&gt;Nesses ambientes há gerência, há automação, há monitoração, há orquestração e controle pleno do sistema. Neste modelo estamos utilizando as mais modernas tecnologias para entregar a melhor experiência ao usuário.&lt;/p&gt;
&lt;p&gt;Além da perspectiva do usuário, estamos também implantando um ambiente que facilita a vida do administrador de sistemas. Este modelo traz características como auto-healing e self-management, ou seja, se algo quebrar, a ferramenta de gerência detecta e 	se conserta de forma autônoma, não precisa de nenhum tipo de intervenção humana.&lt;/p&gt;
&lt;p&gt;Participe enviando perguntas!&lt;/p&gt;
&lt;p&gt;Para acompanhar o streaming acesse &lt;a href=&#34;http://assiste.serpro.gov.br/cisl/&#34;&gt;http://assiste.serpro.gov.br/cisl/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Para encaminhar perguntas durante a palestra use o twitter!&lt;/p&gt;
&lt;p&gt;Envie mensagens para @CISLGovBR ou @gutocarvalho.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Hangout Criando Módulo</title>
      <link>https://archives.gutocarvalho.net/post/2015-07-06-hangout-criando-modulo/</link>
      <pubDate>Mon, 06 Jul 2015 21:21:07 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-07-06-hangout-criando-modulo/</guid>
      <description>&lt;p&gt;Como vocês sabem alguns membros da comunidade Puppet-BR são também instrutores - certificados - dos treinamentos oficiais da Puppet Labs no Brasil. Eu sou um deles, o Miguel Filho também. Na semana passada o Miguel me disse que estava interessado em organizar algumas sessões online para construir módulos Puppet, tudo acontecendo via Hangout, ao vivo. O Objetivo principal é demonstrar as formas mais recomendadas de criar módulos, seguindo sempre as dicas e práticas da Puppet Labs.&lt;/p&gt;
&lt;p&gt;Qualquer pessoa interessada em Puppet poderá assistir e interagir conosco nestas sessões. Os convites e os detalhes de cada sessão serão divulgados na comunidade Puppet-BR através da lista de discussão e também via irc - freenode - no canal #puppet-br.&lt;/p&gt;
&lt;p&gt;A comunidade vai votar nas tecnologias que serão foco para a construção dos módulos. Os módulos serão desenvolvidos para cuidar da instalação, configuração, operação e manutenção das tecnologias.&lt;/p&gt;
&lt;p&gt;Todo o processo será colaborativo, enquanto um instrutor estiver codificando os manifests, o outro estará interagindo com os participantes do hangout, seja esclarecendo dúvidas sobre o processo de desenvolvimento, seja explicando o que o outro está fazendo.&lt;/p&gt;
&lt;p&gt;Participe e &lt;a href=&#34;https://pt.surveymonkey.com/r/DJFP7VW&#34;&gt;sugira&lt;/a&gt; uma tecnologia. Acompanhe também o &lt;a href=&#34;https://pt.surveymonkey.com/results/SM-X3C5X85D/&#34;&gt;resultado&lt;/a&gt; da votação.&lt;/p&gt;
&lt;p&gt;Mais informações =&amp;gt; &lt;a href=&#34;http://www.puppet-br.org&#34;&gt;http://www.puppet-br.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Treinamento Puppet Fundamentals em Brasília</title>
      <link>https://archives.gutocarvalho.net/post/2015-04-24-treinamento-puppet-fundamentals-em-brasilia/</link>
      <pubDate>Fri, 24 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-04-24-treinamento-puppet-fundamentals-em-brasilia/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Puppet Fundamentals&lt;/strong&gt;&lt;br&gt;
23, 24 e 25 de Junho de 2015&lt;br&gt;
&lt;strong&gt;Horário:&lt;/strong&gt; 09:00 às 18:00&lt;br&gt;
&lt;strong&gt;Local:&lt;/strong&gt; Brasília/DF&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Data marcada!&lt;/p&gt;
&lt;p&gt;Saiba mais sobre o treinamento:&lt;/p&gt;
&lt;p&gt;=&amp;gt; &lt;a href=&#34;https://puppetlabs.com/services/training/puppet-fundamentals&#34;&gt;https://puppetlabs.com/services/training/puppet-fundamentals&lt;/a&gt;&lt;br&gt;
=&amp;gt; &lt;a href=&#34;http://instruct.com.br/calendario.html&#34;&gt;http://instruct.com.br/calendario.html&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Eu serei o instrutor :)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Perguntas Pontuais DevOps</title>
      <link>https://archives.gutocarvalho.net/post/2015-04-15-perguntas-pontuais-devops/</link>
      <pubDate>Wed, 15 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-04-15-perguntas-pontuais-devops/</guid>
      <description>&lt;p&gt;Recebi um e-mail com perguntas interessantes sobre o conceito DevOps e automação, vou publicar as perguntas e as respostas pois são questões recorrentes.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1) O DevOps pode ajudar na redução de custos de operação de infraestrutura?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Sim, adotando uma nova metodologia de trabalho e colaboração, com amplo feedback entre os times torna tudo mais simples, os projetos vão andar mais rápido, as pessoas vão se comunicar melhor, a qualidade do trabalho será maior, as entregas vão ocorrer em janelas menores.&lt;/p&gt;
&lt;p&gt;Só tome cuidado para não confundir DevOps com infraestrutura ágil ou automação. DevOps é um conceito muito mais amplo que envolve e integra desenvolvimento, qualidade, infraestrutura e operação. A operação não trabalha mais sozinha ou isolada, ela se integra e se enxerga como parte de um único time de TI responsável por fazer o negócio de seu cliente fluir e prosperar.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2) A automação,  autohealing  e infraestrutura como código  pode trazer redução de custos?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Sim, porém automação não tem foco único em reduzir custos, tem foco em manter seu negócio funcionando e fluindo.&lt;/p&gt;
&lt;p&gt;Ao automatizar processos, procedimentos, rotinas e tarefas, sua equipe para de fazer trabalho repetitivo e pode focar em projetos, melhorias, capacitação, inovação. Sobra tempo para fazer outras coisas, você faz mais, em menos tempo, de forma controlada e melhor.&lt;/p&gt;
&lt;p&gt;Automatizar significa manter a integridade e a saúde do seu ambiente.&lt;/p&gt;
&lt;p&gt;Automatizar significa maior controle de suas mudanças.&lt;/p&gt;
&lt;p&gt;Automatizar significa mudanças rápidas e precisas.&lt;/p&gt;
&lt;p&gt;Automatizar significa reduzir falhas humanas.&lt;/p&gt;
&lt;p&gt;Sua equipe vai trabalhar menos, produzir e aumentar sua qualidade.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3) Automatizar significa redução da equipe ou substituição de algum profissional da minha equipe?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;De forma alguma. Sua equipe vai conseguir fazer muito mais com automação. Automação não significa redução de equipe, significa ampliação de capacidade de trabalho, fazendo isto com qualidade e controle, utilizando o máximo das tecnologias existentes.&lt;/p&gt;
&lt;p&gt;Você vai na realidade aposentar processos arcaicos e repetivos, capacitar sua equipe, evoluir processos e métodos, transformar seu modelo clássico em um modelo mordeno e funcional de gestão de infraestrutura.&lt;/p&gt;
&lt;p&gt;Se antes um membro da equipe conseguia gerir no máximo 15 hosts com qualidade, com automação ele conseguirá cuidar de 3000 com segurança.&lt;/p&gt;
&lt;p&gt;Sua equipe vai trabalhar menos pois seu ambiente vai funcionar melhor e de forma mais precisa.&lt;/p&gt;
&lt;p&gt;A disponibilidade do negócio se estabiliza e atingirá novos patamares.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Implantação e suporte do SEI</title>
      <link>https://archives.gutocarvalho.net/post/2015-04-13-implantacao-e-suporte-do-sei/</link>
      <pubDate>Mon, 13 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-04-13-implantacao-e-suporte-do-sei/</guid>
      <description>&lt;p&gt;Se você estiver precisando de suporte ou implantação de &lt;a href=&#34;https://processoeletronico.gov.br&#34;&gt;SEI&lt;/a&gt; dentro do Governo, em qualquer esfera, você pode falar com a &lt;a href=&#34;http://www.instruct.com.br&#34;&gt;Instruct&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A Instruct possui membros especializados nas tecnologias opensource utilizadas pelo &lt;a href=&#34;https://processoeletronico.gov.br&#34;&gt;SEI&lt;/a&gt;, seus especialistas participaram de projetos &lt;a href=&#34;https://processoeletronico.gov.br&#34;&gt;SEI&lt;/a&gt; que hoje estão implantados e rodando em Brasília.&lt;/p&gt;
&lt;p&gt;Eles podem ajudá-los com suporte, implantação, consultoria, desenvolvimento e correções.&lt;/p&gt;
&lt;p&gt;A Instruct implanta o &lt;a href=&#34;https://processoeletronico.gov.br&#34;&gt;SEI&lt;/a&gt; utilizando método 100% automatizado via &lt;a href=&#34;https://puppetlabs.com/&#34;&gt;Puppet&lt;/a&gt;, o que protege e garante a integridade e funcionamento do seu ambiente.&lt;/p&gt;
&lt;p&gt;Este modelo de implantação vai além do Puppet, ele utiliza o banco de dados &lt;a href=&#34;http://www.percona.com/&#34;&gt;Percona&lt;/a&gt; - mais rápido e eficiente que o MySQL. O Percona além de ser mais rápido que o MySQL, oferece um método de backup mais seguro e sem lock em suas tabelas, o que reduz em até 90% a sua janela de backup. Todo o ambiente Percona já vai configurado com replicação de dados ativo/passivo e backup com &lt;a href=&#34;http://www.percona.com/software/percona-xtrabackup&#34;&gt;Xtrabackup&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A &lt;a href=&#34;http://www.instruct.com.br/&#34;&gt;Instruct&lt;/a&gt; tem experiência dentro de ambientes críticos e com grande demanda de usuários, eles conseguem preparar sua infra para sustentar até 30 mil conexões simultâneas.&lt;/p&gt;
&lt;p&gt;Entre em contato e solicite uma visita, recomendo!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Treinamento Architect em San Jose/CA</title>
      <link>https://archives.gutocarvalho.net/post/2015-04-10-treinamento-architect-em-san-jose-slash-ca/</link>
      <pubDate>Fri, 10 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-04-10-treinamento-architect-em-san-jose-slash-ca/</guid>
      <description>&lt;p&gt;Este ano eu estive em &lt;em&gt;San Jose/CA&lt;/em&gt; e participei do novo treinamento Puppet Architect da Puppetlabs. O treinamento foi ministrado por um instrutor da Puppetlabs.&lt;/p&gt;
&lt;p&gt;É importante mencionar que todos os treinamentos nos &lt;em&gt;Estados Unidos da América&lt;/em&gt; são ministrados por instrutores que são funcionários da Puppetlabs, já em outros países, normalmente são os parceiros que ministram estes cursos, como ocorre aqui no Brasil com a Instruct.&lt;/p&gt;
&lt;p&gt;Instrutores que são funcionários de parceiros precisam fazer todos os cursos oficiais, se certificar (PCP) e participar e de um treinamento específico para instrutores ministrado pelo time de educação da Puppetlabs.&lt;/p&gt;
&lt;p&gt;No curso de San Jose havia apenas dois brasileiros, eu e o Miguel Filho. O curso foi bem interessante, a pegada deles no curso é bem diferente da nossa didática de aulas no Brasil, foi curioso ver que eles não gostam de improvisar, dar asas a criatividade, testar novas soluções, eles seguem certinho o material, excutam os exemplos e as soluções a risca.&lt;/p&gt;
&lt;p&gt;Culturas diferentes, metodologias diferentes. Eu já gosto de estimular em meus  alunos o pensamento fora da caixinha, quero que eles enxerguem novas soluções, novas abordagens, novos caminhos para resolver labs, indo além do material, isso parece funcionar muito bem aqui no Brasil :)&lt;/p&gt;
&lt;p&gt;O material continua com nível técnico muito alto, exemplos bem interessantes, cenários que refletem a realidade de muitos tipos de clientes que atendemos no Sul e Sudeste.&lt;/p&gt;
&lt;p&gt;A nova abordagem de cenários Monolíticos, Dispersos e Dispersos com Multi Master é incrível, está muito fácil criar diversos servidores Puppet Master e distribuir isso em sua rede, basta fazer a classificação de um node com uma classe específica e pronto, novo master atendendo.&lt;/p&gt;
&lt;p&gt;Recomendo o curso para quem deseja aprender a escalar seu ambiente do jeito certo - entendendo o planejamento de capacidade com puppet, classificar nodes de forma personalizada - escrevendo seu próprio classificador, estender o uso do HIERA, utilizar HIERA com criptografia, utilizar o R10K para gerenciar ambientes com GIT, usar o Mcollective sem frontend, interagir com APIs do Puppet e PuppetDB, entender e utilizar exported resources na prática, dentre muitas outras coisas.&lt;/p&gt;
&lt;p&gt;O curso valeu muito, pelo conteúdo, pelo instrutor, por entender a dinâmica e a metodologia da Puppetlabs, pela viagem e pelo investimento, que se paga fácilmente ao aplicá-lo nos clientes que temos no Brasil.&lt;/p&gt;
&lt;p&gt;Como já participei do treinamento de instrutores, agora estou apto a ministrar esse treinamento no Brasil, em breve vamos definir uma data e divulgar.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Visitando a PuppetLabs</title>
      <link>https://archives.gutocarvalho.net/post/2015-04-10-visitando-a-puppetlabs/</link>
      <pubDate>Fri, 10 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-04-10-visitando-a-puppetlabs/</guid>
      <description></description>
    </item>
    
    
    
    <item>
      <title>1o Treinamento Puppet Fundamentals em Porto Alegre</title>
      <link>https://archives.gutocarvalho.net/post/2015-04-09-1o-treinamento-puppet-fundamentals-em-porto-alegre/</link>
      <pubDate>Thu, 09 Apr 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-04-09-1o-treinamento-puppet-fundamentals-em-porto-alegre/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Puppet Fundamentals&lt;/strong&gt;&lt;br&gt;
09, 10 e 11 de Junho de 2015&lt;br&gt;
&lt;strong&gt;Horário:&lt;/strong&gt; 09:00 às 18:00&lt;br&gt;
&lt;strong&gt;Local:&lt;/strong&gt; Porto Alegre/RS&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Informações:&lt;/strong&gt;&lt;br&gt;
&lt;a href=&#34;https://puppetlabs.com/events/porto-alegrers-puppet-fundamentals-sponsored-instruct-brazil&#34;&gt;https://puppetlabs.com/events/porto-alegrers-puppet-fundamentals-sponsored-instruct-brazil&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;http://www.unirede.net/treinamentos/treinamento-puppet-fundamentals/&#34;&gt;http://www.unirede.net/treinamentos/treinamento-puppet-fundamentals/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;No curso Fundamenals, o aluno irá entender como funciona o Puppet, vai descobrir como tudo começou, qual foi a motivação para ele ser criado, como a PuppetLabs surgiu, o aluno verá aspectos fundamentais de gerência de configurações, aspectos históricos e culturais de administração de servidores e tudo isto o levará a conhecer o Puppet Enterprise.&lt;/p&gt;
&lt;p&gt;O curso é 50% prático e 50% teórico, nele você vai aprender como trabalhar com o puppet em modo local (apply) e em modo cliente e servidor (master), vai entender a camada de abstração, vai conhecer, entender e utilizar a DSL do Puppet, vai entender, utilizar e construir módulos e classes, vai aprender, entender e fazer a classificação de nodes, vai conhecer e utilizar os principais recursos do puppet (resource types), vai entender como funcionam relacionamentos e a construção da linguagem.&lt;/p&gt;
&lt;p&gt;Toda a construção das classes dos módulos será versionada, durante todo o curso será utilizado o GIT como ferramenta de versionamento, haverá inclusive uma introdução ao GIT para nivelar os alunos.&lt;/p&gt;
&lt;p&gt;O curso vai abordar além de tudo isto, templates, defined resource types, parameterized classes, herança, separação de código e dados com HIERA, utilização de módulos do PuppetForge dentre muitos outros assuntos interessantes.&lt;/p&gt;
&lt;p&gt;A cada tópico que o aluno completar, um laboratório será executado proposto, possibilitando que ele já aplique o que acabou e estudar e aprender, essa abordagem é bem interessante e produtiva.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Chronicle APP</title>
      <link>https://archives.gutocarvalho.net/post/2015-02-04-chronicle-app/</link>
      <pubDate>Wed, 04 Feb 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-02-04-chronicle-app/</guid>
      <description>&lt;p&gt;Se você precisa controlar suas contas mas não tem paciência para usar um gestor financeiro tradicional, o Chronicle pode ser uma boa alternativa para você. Eu tenho usado há alguns meses, é realmente bem prático e direto.&lt;/p&gt;
&lt;p&gt;Seu uso é simples, você coloca no APP as contas que você precisa pagar, ele te lembra e te permite registrar cada pagamento, além disto, há um histórico de pagamentos para você acompanhar seus gastos. O APP é prático, simples e objetivo, bem melhor que usar um complexo gestor financeiro.&lt;/p&gt;
&lt;p&gt;Ele faz SYNC com ICLOUD e DROPBOX.&lt;/p&gt;
&lt;p&gt;Acesse =&amp;gt; &lt;a href=&#34;http://chronicleapp.com/&#34;&gt;http://chronicleapp.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Entrevistas PuppetConf 2014</title>
      <link>https://archives.gutocarvalho.net/post/2015-02-04-entrevistas-puppetconf-2014/</link>
      <pubDate>Wed, 04 Feb 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-02-04-entrevistas-puppetconf-2014/</guid>
      <description>&lt;p&gt;Em 2014 estive na PuppetCof com o Miguel Filho e fizemos uma rodada de entrevistas com algumas pessoas da PuppetLabs, fizemos uma pauta simples e depois partimos para o trabalho, eu gravei e fotografei, ele entrevistou. Na volta o Miguel também vestiu o boné de editor de vídeos e pilotou o iMovie de forma corajosa, abaixo o resultado dessa aventura.&lt;/p&gt;
&lt;h3 id=&#34;ben-ford&#34;&gt;Ben Ford&lt;/h3&gt;
&lt;p&gt;O Ben Ford é responsável pelos treinamentos PuppetLabs, fizemos uma entrevista com ele e perguntamos sobre os novos treinamentos Practicioner e Architect.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/uQIbrk5QxOw&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h3 id=&#34;ryan-coleman&#34;&gt;Ryan Coleman&lt;/h3&gt;
&lt;p&gt;O Ryan Coleman é o cara que cuida do PuppetForge e de todos os módulos da PuppetLabs, conversamos com ele sobre o programa &amp;ldquo;approved&amp;rdquo;. Este programa cria um selo para facilitar que nós encontremos módulos - de terceiros - aprovados e recomendados pela PuppetLabs.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/b1xhR6HTgNE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h3 id=&#34;jamie-rosa&#34;&gt;Jamie Rosa&lt;/h3&gt;
&lt;p&gt;A Jamie Rosa é a pessoa responsável pelo programa de certificação da Puppetlabs, ela nos explicou os principais objetivos e rumos do programa.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/X9ne-RslUeg&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h3 id=&#34;luke-kanies&#34;&gt;Luke Kanies&lt;/h3&gt;
&lt;p&gt;Luke Kanies é o CEO da Puppetlabs e também é o criador do Puppet, mais conhecido como puppetmaster, com ele fizemos um bate papo descontraído sobre o Puppet, PuppetLabs, PuppetServer e a vida de CEO ;)&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/mKqP4o_Rg1M&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/KZipOkVZQOI&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/B0utwRyC3fM&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/LtzeWoQa9yM&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto Carvalho&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vídeo Webinar Puppet Modules</title>
      <link>https://archives.gutocarvalho.net/post/2015-02-04-video-webinar-puppet-modules/</link>
      <pubDate>Wed, 04 Feb 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-02-04-video-webinar-puppet-modules/</guid>
      <description>&lt;p&gt;Abaixo o vídeo do webinar de módulos, fizemos esse webinar em 2014. O objetivo é mostrar as vantagens do uso de módulos no Puppet, e também mostrar a forma correta de utilizar módulos no Puppet.&lt;/p&gt;
&lt;h2 id=&#34;vídeo&#34;&gt;Vídeo&lt;/h2&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/J0YN2VtPUE0&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;slides&#34;&gt;Slides&lt;/h2&gt;
&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/35797892&#34; width=&#34;597&#34; height=&#34;486&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;&#34; allowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;https://www.slideshare.net/GutoCarvalho/trabalhando-com-mdulos-no-puppet&#34; title=&#34;Trabalhando com Módulos no Puppet&#34; target=&#34;_blank&#34;&gt;Trabalhando com Módulos no Puppet&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Calendário de treinamentos Puppet 2015</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-20-calendario-de-treinamentos-puppet-2015/</link>
      <pubDate>Tue, 20 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-20-calendario-de-treinamentos-puppet-2015/</guid>
      <description>&lt;p&gt;Já temos o calendário oficial de treinamentos &lt;strong&gt;#Puppetlabs&lt;/strong&gt; para o primeiro semestre de 2015 no Brasil.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Puppet Fundamentals&lt;/strong&gt;&lt;br&gt;
24, 25 e 26 de Março de 2015&lt;br&gt;
&lt;strong&gt;Horário:&lt;/strong&gt; 09:00 às 18:00&lt;br&gt;
&lt;strong&gt;Local:&lt;/strong&gt; Campinas/SP&lt;br&gt;
&lt;a href=&#34;http://puppetlabs.com/services/training/puppet-fundamentals&#34;&gt;http://puppetlabs.com/services/training/puppet-fundamentals&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;No curso Fundamenals, o aluno irá entender como funciona o Puppet, vai descobrir como tudo começou, qual foi a motivação para ele ser criado, como a PuppetLabs surgiu, o aluno verá aspectos fundamentais de gerência de configurações, aspectos históricos e culturais de administração de servidores e tudo isto o levará a conhecer o Puppet Enterprise.&lt;/p&gt;
&lt;p&gt;O curso é 50% prático e 50% teórico, nele você vai aprender como trabalhar como puppet em modo local (apply) e em modo cliente e servidor (master), vai entender a camada de abstração, vai conhecer, entender e utilizar a DSL do Puppet, vai entender, utilizar e construir módulos e classes, vai aprender, entender e fazer classificação de nodes, vai conhecer e utilizar os principais recursos do puppet (resource types), vai entender como funcionam relacionamentos e a construção da linguagem.&lt;/p&gt;
&lt;p&gt;Toda a construção das classes dos módulos será versionada, durante todo o curso será utilizado o GIT como ferramenta de versionamento, haverá inclusive uma introdução ao GIT para nivelar os alunos.&lt;/p&gt;
&lt;p&gt;O curso vai abordar além de tudo isto, templates, defined resource types, parameterized classes, herança, separação de código e dados com HIERA, utilização de módulos do PuppetForge dentre muitos outros assuntos interessantes.&lt;/p&gt;
&lt;p&gt;A cada tópico que o aluno estudar, um laboratório será aplicado em seguida, possibilitando que ele já aplique o que acabou e estudar e aprender, essa abordagem é bem interessante e produtiva.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Puppet Practitioner&lt;/strong&gt;&lt;br&gt;
26, 27 e 28 de Maio de 2015&lt;br&gt;
&lt;strong&gt;Horário:&lt;/strong&gt; 09:00 às 18:00&lt;br&gt;
&lt;strong&gt;Local:&lt;/strong&gt; Campinas/SP&lt;br&gt;
&lt;a href=&#34;http://puppetlabs.com/services/training/puppet-practitioner&#34;&gt;http://puppetlabs.com/services/training/puppet-practitioner&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O Practitioner é um treinamento novo, com conteúdo avançado, perfeito para quem já fez o Fundamentals e para aqueles que já tem boa experiência com Puppet. Este curso é focado em quem quer aprofundar os estudos na ferramenta e principalmente na DSL do Puppet. Com ele, será possível melhorar ainda mais seus módulos e classes, aprendendo as formas mais elegantes, eficientes e produtivas de usar a linguagem. O curso também aborda orquestração com o Mcollective, criação de fatos personalizados, métodos para testar seu código Puppet (rspec-puppet), técnicas de troubleshooting, compartilhamento de classes por herança, dentre muitos outros assuntos interessantes.&lt;/p&gt;
&lt;p&gt;Recomenda-se que o aluno tenha feito o Fundamentals, e além disto, que ele tenha pelo menos 1 ano de experiência de automação com o Puppet em produção.&lt;/p&gt;
&lt;p&gt;Este curso só está sendo ministrado pela Instruct no Brasil, ela é a única com profissionais credenciados para aplicá-lo.&lt;/p&gt;
&lt;p&gt;É uma oportunidade rara, aproveite!&lt;/p&gt;
&lt;p&gt;Para mais informações acesse:
&lt;a href=&#34;http://www.instruct.com.br/calendario.html&#34;&gt;http://www.instruct.com.br/calendario.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Aspirador ERG12 da Electrolux</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-18-aspirador-erg12-da-electrolux/</link>
      <pubDate>Sun, 18 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-18-aspirador-erg12-da-electrolux/</guid>
      <description>&lt;p&gt;Um bom geek também faz faxina, mas nem pensar em usar vassoura e pázinha - só em casos realmente necessários, há anos eu faço faxina utilizando aspiradores de pó, afinal, tecnologia existe para facilitar a vida - e salvar as costas.&lt;/p&gt;
&lt;p&gt;Eu uso dois tipos de aspiradores, o primeiro para limpeza pesada é um &lt;a href=&#34;http://loja.brastemp.com.br/aspirador-de-po-brastemp-clean-1400w-vinho-b7b14a4/p&#34;&gt;Brastemp Clean 1400W&lt;/a&gt;, que é um ótimo aspirador, não usa sacos, possui um coletor lavável, sendo também um dos aspiradores que emite menor ruído neste segemento. Porém ele é wired (com fio) e grande, suas partes precisam ser montadas, uso realmente no dia em que vou para faxinas puxadas - pós visitas - e principalmente para limpar o sofá. Quem tem 3 gatos e duas crianças sabe como o sofá sofre.&lt;/p&gt;
&lt;p&gt;Agora, no dia-a-dia eu uso o ElectroLux ErgoRápido ERG12.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/VUe94Fsvs0E&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Esse aspirador é prático e eficiente, comprei devido as seguintes características:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Aspirador sem fio&lt;/li&gt;
&lt;li&gt;Aspirador tipo vassoura 2 em 1&lt;/li&gt;
&lt;li&gt;Bivolt&lt;/li&gt;
&lt;li&gt;Ele fica parado em pé&lt;/li&gt;
&lt;li&gt;Tem uma basse prática para recarregar&lt;/li&gt;
&lt;li&gt;Não tem saco de pó, possui um coletor lavável&lt;/li&gt;
&lt;li&gt;3 potências de sucção configuráveis&lt;/li&gt;
&lt;li&gt;Design moderno e inteligente&lt;/li&gt;
&lt;li&gt;Não precisa montar, está sempre pronto para uso&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Depois que eu usei, destaco os seguintes aspectos positivos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Suave no uso&lt;/li&gt;
&lt;li&gt;Rodinhas bem projetadas&lt;/li&gt;
&lt;li&gt;Passadas longas e precisas&lt;/li&gt;
&lt;li&gt;Aspira bem - ótima succção - para um produto sem fio&lt;/li&gt;
&lt;li&gt;Desacoplar o aspirador de mão é fácil&lt;/li&gt;
&lt;li&gt;Colocar o aspirador na base é fácil&lt;/li&gt;
&lt;li&gt;Limpar o coletor é fácil&lt;/li&gt;
&lt;li&gt;Ruído mínimo, dá para aspirar até a noite sem incomodar vizinhos&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;E claro que ele pode pode melhor em outros aspectos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;O carregamento demora bastante 10 horas +&lt;/li&gt;
&lt;li&gt;A autonomia de 20 minutos pode ser um desafio para alguns&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para ser justo, observações finais sobre o produto:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A autonomia de 20 minutos é suficiente para aspirar um apartamento de 90m2 com 3 quartos, 3 banheiros, cozinha, dce, varanda e lavandeira. Eu afirmo que dá para fazer tranquilamente, você só precisa evoluir seu método de limpeza.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Quando estamos utilizando produtos wired (ligado na tomada) nós não nos preocupamos com a carga, e as vezes podemos ir atender a porta e deixar o produto ligado, perder o foco conversando com alguém, ir arrumar alguma coisa em uma prateleira, e tudo bem, está ligado na tomada, nenhum problema. Infelizmente, devido a situação atual de nossa tecnologia de baterias, esse comportamento não funcionará com os aspiradores sem fio, você tem que planejar, focar e executar para preservar a carga dele, se for fazer algo, desligue e religue no momento que for voltar a aspirar. Em resumo, será necessário ajustar o seu método de limpeza para um bom aproveitamento de sua autonomia.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Para coisas pesadas como sofá ele pode não ser tão eficiente pois ele não possui o cano longo do Brastemp Clean, esse cano eu uso para acessar partes mais difícieis e internas do sofá, ainda assim, o ErgoRápido possui um extensor para ser utilizado com o módulo central, isto também permite limpar o sofá e outras coisas com eficiência, só não conseguirá tirar sujeira de locais mais profundos do sofá, para isto o Brastemp Clean ainda é imbatível.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;No geral o produto é fantástico, aspiro minha casa diariamente e ainda sobra carga para limpezas daqueles pequenos acidentes domésticos, o ERG12 é o melhor amigo daqueles que como eu, adoram uma casa bem limpa.&lt;/p&gt;
&lt;p&gt;Gosto muito do produto e recomendo.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Organize-se com o Foldable iDevice Stand da Kanex</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-18-organize-se-com-o-foldable-idevice-stand-da-kanex/</link>
      <pubDate>Sun, 18 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-18-organize-se-com-o-foldable-idevice-stand-da-kanex/</guid>
      <description>&lt;p&gt;Venho trazer outra dica legal, desta vez da &lt;a href=&#34;http://www.kanex.com&#34;&gt;Kanex&lt;/a&gt;, há cerca de dois anos eu comecei uma pesquisa para encontrar um dock de mesa para o meu smartphone, eu queria que o smartphone ficasse ao lado do notebook em ângulo de inclinação de 45 graus, assim eu poderia ver os alertas, mensagens, agenda, data, hora e também poderia cronometrar atividades usando aplicativos de pomodoro. Eu testei vários tipos, muitos eram grandes, pesados, desajeitados e ineficientes. Eu quase comprei o &lt;a href=&#34;http://www.elevationlab.com/products/elevationdock-for-iphone5&#34;&gt;Elevation Dock&lt;/a&gt;, mas eu queria algo mais portátil e que pudesse usar em qualquer tipo de tablet ou smartphone, e nesse quesito o elevation dock só serve para iphones, bom, no final da pesquisa eu encontrei na amazon o &lt;a href=&#34;http://www.kanex.com/foldstd&#34;&gt;Foldable Idevice Stand&lt;/a&gt; da &lt;a href=&#34;http://www.kanex.com&#34;&gt;Kanex&lt;/a&gt;.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/SGx0H-UQkbE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;As caracaterísticas que me fizeram comprá-lo foram:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ele é pequeno e leve&lt;/li&gt;
&lt;li&gt;Ele tem design moderno&lt;/li&gt;
&lt;li&gt;É um produto inteligemente e dobrável&lt;/li&gt;
&lt;li&gt;Foi criado para idevices (iPhone/iPad/iPod).&lt;/li&gt;
&lt;li&gt;Tem inclinação configurável&lt;/li&gt;
&lt;li&gt;Base firme&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Depois de receber e usar o produto, posso dizer que:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Funciona com tablets e smartphones de diversas marcas&lt;/li&gt;
&lt;li&gt;Não precisa tirar a capa, mesmo que seja grande&lt;/li&gt;
&lt;li&gt;É resistente e prático de abrir e fechar&lt;/li&gt;
&lt;li&gt;Adere a qualquer tipo de mesa - não escorrega&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Recomendo esse produto, ele valeu cada centavo, eu tenho sempre dois destes na mochila ou na bolsa.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Cuidado, eu comprei o primeiro par e foi inevitável, meu pai já ficou com um deles, minha tia com outro, quando comprei o segundo pack, minha esposa ficou com um, o colega de mesa do trabalho com outro&amp;hellip; em resumo, o pack é baratinho, compre logo uns 3 pois a família e amigos vão querer também :)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Você encontrará este produto na Amazon ou site da Kanex, ele é vendido em pares.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>TPLink Power Bank 10400mAh</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-16-tplink-power-bank-10400/</link>
      <pubDate>Fri, 16 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-16-tplink-power-bank-10400/</guid>
      <description>&lt;p&gt;A cada ano nossos gadgets ficam mais inteligentes, bonitos e eficientes, em um único dispositivo temos GPS, telefone, podemos tirar fotos, gravar áudios, gravar vídeos, participar de vídeo conferências, fazer vídeo chamadas, interagir com sistemas e serviços de formas nunca antes imaginadas, estamos vivendo o futuro. Nossa única limitação nesse futuro chama-se &amp;lsquo;bateria&amp;rsquo;, ao usar todos esses incríveis recursos a bateria de nossos gadgets é drenada rapidamente e nem sempre estamos próximos de uma tomada para recarregar nossos equipamentos. Para não ficar na mão, os &amp;lsquo;power banks&amp;rsquo; estão se tornando bastante populares.&lt;/p&gt;
&lt;p&gt;Há alguns dias um grande amigo esteve em Brasília (Lunix) e ele me apresentou o Power Bank 10400mAh da TP-LINK. O fato é que o meu iphone estava quase sem bateria e ele me socorreu com esse gadget - valeu Lunix. No outro dia, eu adquiri o produto e tenho que dizer que ele tem sido realmente útil na minha vida.&lt;/p&gt;
&lt;p&gt;Liberdade, eu não fico mais sem bateria ;)&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/7OOtbevSrV0&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Essa bateria portátil tem muitas vantagens:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Capacidade de 10.400 mAh&lt;/li&gt;
&lt;li&gt;Possui duas saídas USB de 5V/1A e 5V/2A&lt;/li&gt;
&lt;li&gt;Possui uma entrada para alimentação USB de 5V/2A&lt;/li&gt;
&lt;li&gt;Pode carregar dois dispositivos simultâneamente&lt;/li&gt;
&lt;li&gt;Suporte a 500+ cargas&lt;/li&gt;
&lt;li&gt;Lanterna embutida&lt;/li&gt;
&lt;li&gt;3 a 5 cargas em um único dispositivo&lt;/li&gt;
&lt;li&gt;Indicador de bateria&lt;/li&gt;
&lt;li&gt;Vem com capa para guardar o dispositivo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O dispositivo vem com diversas proteções para evitar:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Curto-circuito&lt;/li&gt;
&lt;li&gt;Sobrevoltagem&lt;/li&gt;
&lt;li&gt;Sobrecorrente&lt;/li&gt;
&lt;li&gt;Sobrecarga&lt;/li&gt;
&lt;li&gt;Sobreaquecimento&lt;/li&gt;
&lt;li&gt;Descarga excessiva&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Suas dimensões são 88.8 x 44.3 x 44.3 mm.&lt;/p&gt;
&lt;p&gt;Não é pesado e tem design bem bonito.&lt;/p&gt;
&lt;p&gt;Carrega meu iPhone 5 bem rápido, recomendo.&lt;/p&gt;
&lt;p&gt;Obs.: Você encontra ela no site do Wallmart Brasil!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Organizadores de cabos bluelounge</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-15-organizadores-de-cabo-bluelounge/</link>
      <pubDate>Thu, 15 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-15-organizadores-de-cabo-bluelounge/</guid>
      <description>&lt;p&gt;Continuando na linha de produtos smart, mais algumas dicas interessantes que encontrei na &lt;a href=&#34;http://http://www.bluelounge.com&#34;&gt;bluelounge&lt;/a&gt;.&lt;/p&gt;
&lt;iframe src=&#34;http://player.vimeo.com/video/107667330&#34; width=&#34;500&#34; height=&#34;281&#34; frameborder=&#34;0&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt; &lt;p&gt;&lt;a href=&#34;http://vimeo.com/107667330&#34;&gt;Sumo - A heavyweight for a small cables&lt;/a&gt; from &lt;a href=&#34;http://vimeo.com/bluelounge&#34;&gt;Bluelounge&lt;/a&gt; on &lt;a href=&#34;https://vimeo.com&#34;&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;
&lt;iframe src=&#34;http://player.vimeo.com/video/77959128?title=0&amp;amp;byline=0&amp;amp;portrait=0&#34; width=&#34;500&#34; height=&#34;281&#34; frameborder=&#34;0&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt; &lt;p&gt;&lt;a href=&#34;http://vimeo.com/77959128&#34;&gt;CableBin – Cable management never looked so good&lt;/a&gt; from &lt;a href=&#34;http://vimeo.com/bluelounge&#34;&gt;Bluelounge&lt;/a&gt; on &lt;a href=&#34;https://vimeo.com&#34;&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;
&lt;iframe src=&#34;http://player.vimeo.com/video/107782326&#34; width=&#34;500&#34; height=&#34;281&#34; frameborder=&#34;0&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt; &lt;p&gt;&lt;a href=&#34;http://vimeo.com/107782326&#34;&gt;CableBox Mini - Liven up your space&lt;/a&gt; from &lt;a href=&#34;http://vimeo.com/bluelounge&#34;&gt;Bluelounge&lt;/a&gt; on &lt;a href=&#34;https://vimeo.com&#34;&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;
&lt;iframe src=&#34;http://player.vimeo.com/video/104038689&#34; width=&#34;500&#34; height=&#34;281&#34; frameborder=&#34;0&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Samsung Dock para veículos</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-15-samsung-dock-para-veiculos/</link>
      <pubDate>Thu, 15 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-15-samsung-dock-para-veiculos/</guid>
      <description>&lt;p&gt;Por muitos anos eu utilizei aqueles docks genéricos para fixar o celular no vidro do carro, eu geralmente optava por aqueles de ajuste universal, fácilmente encontrados em qualquer lojinha de celular. O problema é que eles duram poucos meses e começam a cair do vidro, a ventosa destes produtos tem um período de vida muito curto, e o design é horrível normalmente. Além destes problemas, muitas vezes ao tentar ajustar a posição dock - que não permanecia fixo por mais de 10 minutos, alguma peça quebrava ou soltava, era realmente horrível utilizar tais produtos, eu usava por falta de opção.&lt;/p&gt;
&lt;p&gt;Há dois anos eu encontrei um incrível Dock da Samsung para a família Galaxy. Mesmo sendo criado para celulares e tablets galaxy, o dock serve para qualquer celular, no meu caso eu uso este dock com o Iphone 5. O Dock é bem bonito, leve, resistente, a ventosa é eficiente, se adapta a celulares de diferentes tamanhos e marcas, o ajuste de posição é firme, fácil e uma vez ajustado ele permence na posição.&lt;/p&gt;
&lt;p&gt;Eu já estou utilizando o dock há dois anos e ele continua aderindo muito bem ao vidro mesmo após 24 meses de uso intenso. Recentemente eu adquiri outro para o carro da minha esposa, ela também gosta muito do produto, recomendo este dock.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/Ylw0AcQfZo8&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Para aumentar a vida útil da ventosa, antes de sair do veículo, retire o dock do vidro para que ele não fique exposto ao sol desnecessáriamente.&lt;/p&gt;
&lt;p&gt;Detalhes técnicos:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.samsung.com/us/mobile/cell-phones-accessories/ECS-K200BEGSTA&#34;&gt;http://www.samsung.com/us/mobile/cell-phones-accessories/ECS-K200BEGSTA&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Organize-se com o CableClip da Bluelounge</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-13-organize-se-com-o-cableclip-da-bluelounge/</link>
      <pubDate>Tue, 13 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-13-organize-se-com-o-cableclip-da-bluelounge/</guid>
      <description>&lt;p&gt;Eu sou bastante organizando em relação aos meus gadgets, meus cabos e meus devices, eu usava algumas fitas de velcro para organizar os meus cabos, mas ainda não estava satisfeito com o resultado. Durante um passeio encontrei o CableClip da Bluelounge em uma loja de produtos de informática, desde então eu organizo os cabos do meu iphone e ipad com ele, recomendo.&lt;/p&gt;
&lt;iframe src=&#34;http://player.vimeo.com/video/104434565&#34; width=&#34;500&#34; height=&#34;281&#34; frameborder=&#34;0&#34; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt; &lt;p&gt;&lt;a href=&#34;http://vimeo.com/104434565&#34;&gt;CableClip&lt;/a&gt; from &lt;a href=&#34;http://vimeo.com/bluelounge&#34;&gt;Bluelounge&lt;/a&gt; on &lt;a href=&#34;https://vimeo.com&#34;&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Visite o site da &lt;a href=&#34;http://www.quirky.com&#34;&gt;Bluelounge&lt;/a&gt;, eles tem produtos muitos interessantes.&lt;/p&gt;
&lt;p&gt;Em Brasília é possível encontar o CableClip na CTIS e FNAC.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Organize-se com o PowerCurl da Quirky</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-13-organize-se-com-o-powercurl-da-quirky/</link>
      <pubDate>Tue, 13 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-13-organize-se-com-o-powercurl-da-quirky/</guid>
      <description>&lt;p&gt;Eu uso vários estojos de tela para organizar minha mochila, isso me ajuda muito - ainda vou fazer um post sobre os estojos, porém, quando eu abria o notebook na mesa do escritório ou em casa e precisava ligar a fonte do macbook, eu sempre ficava incomodado pois sobrava muito cabo na mesa, ficava aquela bagunça, deixando a mesa feia. Para resolver esse problema eu pesquisei e encontrei esse fantástico produto da Quirky, o PowerCurl, ele ajuda a organizar a fonte do Macbook Pro ou Air, é bem inteligente e prático de usar, comprei o de 45W (macbook air) e o de 60W (macbook pro) e estou bastante satisfeito, recomendo.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/zN45NhaF4qE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Eles também fizeram um powercurl mini para a fonte do ipad/iphone.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/4Qb4NOoLYsg&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Eu confesso que para os cabos do iPhone e iPad eu prefiro o CableClip da Bluelounge.&lt;/p&gt;
&lt;p&gt;Visite o site da &lt;a href=&#34;http://www.quirky.com&#34;&gt;Quirk&lt;/a&gt; e conheça outros produtos desses fantátiscos inventores.&lt;/p&gt;
&lt;p&gt;Infelizmente você dificilmente vai encontrá-los no Brasil, eu já comprei um PowerCurl na FNAC há alguns anos, hoje não encontro mais :(&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Retrospectiva Profissional 2014</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-08-retrospectiva-profissional-2014/</link>
      <pubDate>Thu, 08 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-08-retrospectiva-profissional-2014/</guid>
      <description>&lt;p&gt;Estou começando 2015 já criando um hábito de fazer uma retrospectiva profissional do ano anterior, já aviso que ela está baseada no meu currículo, o formato pode ser um pouco engessado, mas dá para ter uma ideia geral.&lt;/p&gt;
&lt;h3 id=&#34;1-atividades--projetos&#34;&gt;1. Atividades &amp;amp; Projetos&lt;/h3&gt;
&lt;p&gt;Vou preservar os nomes dos clientes.&lt;/p&gt;
&lt;h4 id=&#34;11-cliente-1&#34;&gt;1.1 Cliente 1&lt;/h4&gt;
&lt;p&gt;Tipo: Governo Federal / Agência Reguladora&lt;/p&gt;
&lt;p&gt;Investi boa parte do meu tempo este em um contrato com o governo federal, atuei em uma agência reguladora, lá eu trabalhei na  sustentação de ambientes JBOSS, TOMCAT, MySQL, PostgreSQL, SVN, GIT, Mantis, Moodle, Apache HTTPd e PHP. Atuei na administração e operação de Hypervisors Citrix XEN SERVER 5 e 6, administração e operação de storage EMC CX3 e storage EMC VNX/VPLEX, atuei na administração de um cluster VMWARE 5, e na operação e administração do VMWARE VCENTER e VMWARE VCENTER Operations Manager.&lt;/p&gt;
&lt;p&gt;Além da sustentação, investi meu tempo em projetos de melhoria e inovação, isso resultou em algumas implantações, são elas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Implantação de ferramenta de gerência de configurações - PUPPET c/ PUPPETDB&lt;/li&gt;
&lt;li&gt;Implantação de ferramenta de gerência de ciclo de vida de servidores e provisionador FOREMAN&lt;/li&gt;
&lt;li&gt;Implantação de ferramenta de orquestração e paralelismo MCOLLECTIVE&lt;/li&gt;
&lt;li&gt;Implantação de ferramenta de monitoração ZABBIX e início de monitoração de todo o parque de servidores Linux e Windows&lt;/li&gt;
&lt;li&gt;Implantação de ferramenta PIWIK para monitoramento e geração de estatísticas de acesso aos sites do cliente&lt;/li&gt;
&lt;li&gt;Implantação de ferramenta TESTLINK para testes e controle de qualidade de código&lt;/li&gt;
&lt;li&gt;Implantação de ferramenta de proxy reverso e balanceamento NGINX para validação de aplicacações em ambiente de homologação&lt;/li&gt;
&lt;li&gt;Implantação de HUB SMTP POSTFIX para atender aplicações WEB&lt;/li&gt;
&lt;li&gt;Implantação de rotina de backup centralizada de bancos MySQL e PostgreSQL&lt;/li&gt;
&lt;li&gt;Implantação de mirror de pacotes RPM CentOS no cliente&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Além de implantações e inovação, fizemos diversas melhorias nos ambientes JBOSS, o cliente rodava alguns JBOSS 4/5/6 e até 7 - ainda roda, a configuração do sistema operacional de cada servidor JBOSS foi reavaliada, tunada, a configuração da JVM de cada instância foi estudada, incluíndo os algorítimos e configurações de coletor de lixo, toda a configuração foi refeita do zero em cada servidor de produção e homologação do cliente.&lt;/p&gt;
&lt;p&gt;Além disto, atuei na consolidação de ambientes, foram eles:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Consolidação de 29 servidores PHP 5.1 em novos ambientes já rodando o PHP 5.6, neste processo fizemos a separação dos ambientes de desenvolvimento, homologação, teste, treinamento e produção.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Consolidação de 19 servidores MySQL Community 5.1 em novos ambientes já rodando o MYSQL 5.6, também fizemos a separação de ambientes de desenvolvimento, homologação, teste, treinamento e produção.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;No final do ano uma novidade, o cliente fez a aquisição do MySQL Enterprise, isto resultou no upgrade do ambiente MYSQL Community 5.6 para a versão Enterprise 5.6. Atuei também na implantação de MYSQL Enterprise Monitor e na configuração de monitoramento de todos os servidores MySQL Enterprise do cliente.&lt;/p&gt;
&lt;p&gt;Houve também a implantação de uma ferramenta de controle de tramitação interna de documentos chamada “SEI”, uma ferramenta do portal de software público.&lt;/p&gt;
&lt;p&gt;Documentar é algo rotineiro para as equipes que trabalham comigo, e normalmente documentamos em wiki. Utilizamos o Dokuwiki para documentar os processos, procedimentos, ambientes e ferramentas do cliente.&lt;/p&gt;
&lt;p&gt;Agora, de tudo que eu fiz, o que eu mais gostei foi ter trabalhado na implantação de uma metodologia ágil para o planejamento de atividades e para organizar as reuniões de equipes de infraestrutura, um modelo fortemente baseado em técnicas retiradas do kanban e scrum. As reuniões pararam de ser chatas, sem foco, sem pauta, sem planejamento, longas e cansativas, mudamos o modelo para reuniões semanais de no máximo 20 minutos para definir atividades a aprovar projetos, incluíndo também uma reunião de retrospectiva ao final das atividades, fazemos também um alinhamento diário entre as equipes.&lt;/p&gt;
&lt;p&gt;O cliente fecha o ano com ambiente plenamento automatizado, 100% monitorado, muito mais estável e disponível, e as equipes agora estão se comunicando e se organizando de forma eficiente.&lt;/p&gt;
&lt;h4 id=&#34;12-cliente-2&#34;&gt;1.2 Cliente 2&lt;/h4&gt;
&lt;p&gt;Tipo: Governo Federal / Instituição Financeira&lt;/p&gt;
&lt;p&gt;Atuei na sustentação de diversos domínios JBOSS EAP sob demanda em um grande banco público brasileiro.&lt;/p&gt;
&lt;h4 id=&#34;13-cliente-3&#34;&gt;1.3 Cliente 3&lt;/h4&gt;
&lt;p&gt;Tipo: Governo do GDF / Departamento de Controle&lt;/p&gt;
&lt;p&gt;Atuei na sustentação de ambientes Puppet, PuppetDB, Mcollective, Foreman, Spacewalk, Zabbix, Apache HTTPd, Apache Tomcat, NGINX, HAPROXY, Dokuwiki, OpenFire, Zimbra, Racktables, Teampass, SVN e sistemas SGBD PostgreSQL e MySQL em uma instituição do governo de Brasília, a maioria das ferramentas havia sido implantada em 2013, essa sustentação durou até o mês de Maio de 2014.&lt;/p&gt;
&lt;h4 id=&#34;14-cliente-4&#34;&gt;1.4 Cliente 4&lt;/h4&gt;
&lt;p&gt;Tipo: Privado / Instituição Financeira&lt;/p&gt;
&lt;p&gt;Atuei na substituição de um ambiente Java GlassFish por um ambiente Java JBOSS em uma grande operadora de cartões de crédito, incluindo neste projeto a criação de ambiente de balanceamento utilizando a ferramenta HAPROXY. Todo o projeto foi pensado e concebido para sustentar um grande volume de acessos e estar sempre disponível.&lt;/p&gt;
&lt;h3 id=&#34;2-cursos-de-aperfeiçoamento&#34;&gt;2. Cursos de aperfeiçoamento&lt;/h3&gt;
&lt;p&gt;Foram 13 momentos de intenso estudo no último ano.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hands On - Mysql Enterprise Monitor&lt;/li&gt;
&lt;li&gt;Hands On - Mysql Enterprise Server 5.6&lt;/li&gt;
&lt;li&gt;Hands On - VMWARE VCenter Operations Manager 5.8&lt;/li&gt;
&lt;li&gt;Hands On - VMWARE VCenter Server 5.5&lt;/li&gt;
&lt;li&gt;Hands On - VMWARE ESX Server 5.5&lt;/li&gt;
&lt;li&gt;Fórum técnico +2x - Gerência de riscos&lt;/li&gt;
&lt;li&gt;Curso Kanban do Expresso Kanban&lt;/li&gt;
&lt;li&gt;Hands On - EMC VNX/VPLEX&lt;/li&gt;
&lt;li&gt;Hands On - Microsoft HyperV Server 2012 R2&lt;/li&gt;
&lt;li&gt;RedHat JBOSS Application Administration&lt;/li&gt;
&lt;li&gt;Codeschool GIT Real&lt;/li&gt;
&lt;li&gt;Codeschool Try GIT&lt;/li&gt;
&lt;li&gt;Redhat RH300 Rapid Track&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-certificações&#34;&gt;3. Certificações&lt;/h3&gt;
&lt;p&gt;Neste ano que passou, eu consegui obter quatro novas certificações:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Red Hat Certified JBOSS Administrator - RHCJA&lt;/li&gt;
&lt;li&gt;Red Hat Certified Engineer - RHCE&lt;/li&gt;
&lt;li&gt;Red Hat Certified System Administrator - RHCSA&lt;/li&gt;
&lt;li&gt;Fortinet Certified Network Security Administrator - FCNSAv5&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;E renovei uma:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Puppet Certified Professional - PCP&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-treinamentos-puppetlabs&#34;&gt;4. Treinamentos PuppetLabs&lt;/h3&gt;
&lt;p&gt;O último ano foi ótimo para o Puppet no Brasil, eu consegui ministrar três cursos oficiais que aconteceram em Brasília e em São Paulo.&lt;/p&gt;
&lt;p&gt;Puppet Fundamentals em SP&lt;br&gt;
Formato: Treinamento oficial Puppetalabs&lt;br&gt;
09 a 11 de Dezembro de 2014&lt;br&gt;
Local: Brasília/DF&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Puppet Fundamentals - 2o Turma BSB&lt;br&gt;
Formato: Treinamento oficial Puppetalbs&lt;br&gt;
29 a 31 de Julho de 2014&lt;br&gt;
Local: Brasília/DF&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Puppet Fundamentals - 1o Turma BSB&lt;br&gt;
Formato: Treinamento oficial Puppetalabs&lt;br&gt;
02 a 06 de Junho de 2014&lt;br&gt;
Local: Brasília/DF&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Além destes cursos, ainda houve treinamentos oficiais em São Paulo ministrados pelo Miguel Filho da Instruct. Para quem não sabe, a Instruct é a primeira parceira oficial da Puppetlabs no Brasil e a empresa com os profissionais mais experientes do mercado, recomendo :)&lt;/p&gt;
&lt;h3 id=&#34;5-palestras--oficinas-ministrados&#34;&gt;5. Palestras &amp;amp; Oficinas Ministrados&lt;/h3&gt;
&lt;p&gt;Eu pude ministrar 10 palestras e oficinas - abertas e gratuitas - em 2014, este é o melhor e mais gratificante retorno que eu posso dar para a comunidade de TI do Brasil, gosto muito de compartilhar conhecimento e experiências.&lt;/p&gt;
&lt;p&gt;Oficina de Puppet &amp;amp; Mcollective&lt;br&gt;
Formato: Oficina&lt;br&gt;
Apresentado por: Guto Carvalho &amp;amp; Miguel Filho&lt;br&gt;
Local: Foz do Iguacu/PR&lt;br&gt;
Evento: Latinoware&lt;br&gt;
Data: 17/10/2014&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Encontro nacional da comunidade Puppet-BR&lt;br&gt;
Formato: Palestra/Plenária&lt;br&gt;
Local: Foz do Iguacu/PR&lt;br&gt;
Evento: Latinoware&lt;br&gt;
Data: 16/10/2014&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Construção de módulos Puppet - Boas Práticas&lt;br&gt;
Formato: Palestra&lt;br&gt;
Local: Foz do Iguacu/PR&lt;br&gt;
Evento: Latinoware&lt;br&gt;
Data: 16/10/2014&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Orquestração com Mcollective&lt;br&gt;
Formato: Palestra&lt;br&gt;
Local: Foz do Iguacu/PR&lt;br&gt;
Evento: Latinoware&lt;br&gt;
Data: 15/10/2014&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Trabalhando com Módulos no Puppet&lt;br&gt;
Formato: Webinar/Hangout&lt;br&gt;
Apresentado por: Guto Carvalho &amp;amp; Miguel Filho&lt;br&gt;
Via Google Hangout&lt;br&gt;
11 de Junho de 2014&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Orquestração de servidores com Mcollective&lt;br&gt;
Formato: Palestra&lt;br&gt;
10 de Junho de 2014&lt;br&gt;
Evento: CISL/SERPRO&lt;br&gt;
Local: Brasília/DF&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Puppetcast: Puppet 3.6, PuppetDB 2.0, Vagrant &amp;amp; Puppet&lt;br&gt;
Formato: Hangout&lt;br&gt;
Apresentado por: Guto Carvalho &amp;amp; Miguel Filho&lt;br&gt;
Via Google Hangout&lt;br&gt;
21 de Maio de 2014&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Introdução ao Puppet Enterprise&lt;br&gt;
Formato: Webinar/Hangout&lt;br&gt;
Apresentado por: Guto Carvalho &amp;amp; Miguel Filho&lt;br&gt;
Via Google Hangout&lt;br&gt;
06 de Maio de 2014&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Infraestrutura Ágil com Puppet&lt;br&gt;
Formato: Palestra&lt;br&gt;
07 de Abril de 2014&lt;br&gt;
Evento: CISL/SERPRO&lt;br&gt;
Local: Brasília/DF&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Infraestrutura como código com Puppet &amp;amp; Mcollective&lt;br&gt;
Formato: Palestra&lt;br&gt;
FLISOL&lt;br&gt;
Local: Taguatinga/DF&lt;br&gt;
16 de Abril de 2014&lt;br&gt;&lt;/p&gt;
&lt;h3 id=&#34;6-eventos-que-participei&#34;&gt;6. Eventos que participei&lt;/h3&gt;
&lt;p&gt;Eu tive a oportunidade de participar de quatro eventos, o mais importante sem dúvida foi a PuppetConf em San Francisco.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Latinoware - Foz do Iguaçú - Novembro/14&lt;/li&gt;
&lt;li&gt;PuppetConf - San Francisco - Setembro/14&lt;/li&gt;
&lt;li&gt;PGDAY - Campinas - Setembro/14&lt;/li&gt;
&lt;li&gt;FLISOL-DF - Taguatinga - Maio/14&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Enfim, foi um ano corrido, de muito estudo, de muito esforço e de muita dedicação, que 2015 seja aida mais produtivo e com muitos frutos profissionais e pessoais :)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Gerenciador de IPs/Racks/Redes Racktables</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-07-gerenciador-de-ips-racks-e-redes/</link>
      <pubDate>Wed, 07 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-07-gerenciador-de-ips-racks-e-redes/</guid>
      <description>&lt;p&gt;Em algum momento da administração de infraestrutura e redes é necessário criar, manter e atualizar dados relativos aos racks, dispositivos, links, servidores, redes e endereços ips utilizados, essa documentação tende a se tornar complexa e difícil de manter, principalmente quando poucos membros da equipe tem o hábito de documentar e registrar as mudanças aplicadas no ambiente.&lt;/p&gt;
&lt;p&gt;Esse tipo de documentação começa de forma isolada e descentralizada em pequenos documentos e planilhas que normalmente carecem de dados atualizados e que não são versionados.&lt;/p&gt;
&lt;p&gt;Além da falta de atualização, isso nem sempre é compartilhado da forma mais adequada entre os membros da equipe, e o que geralmente ocorre é que vários arquivos diferentes com informações distintas são gerados. O problema começa a aparecer quando se tenta consolidar tudo isso em um único documento, tarefa que não é fácil ou agradável, e por isto normalmente não é realizada, com isso, perde-se o rastreamento de mudanças e o cliente acaba ficando com sua documentação desatualizada e ineficiente.&lt;/p&gt;
&lt;p&gt;Ambiente sem documentação é ambiente de alto risco, uma vez que um incidente ocorre, ou quando há um agendamento para alguma manutenção ou mudança importante, será necessário investir muito mais tempo para entender, mapear, rastrear, resolver o problema ou executar a mudança prevista, se houvesse algum tipo de documentação fidedigna, isto seria um ação direta e pontual.&lt;/p&gt;
&lt;p&gt;Existem iniciativas e ferramentas para inserir esse tipo de informação, mas são ferramentas isoladas que tratam de pontos específicos de infraestrutura, temos ferramentas para mapear racks, temos ferramentas para mapear ips, algumas equipes preferem colocar tais dados em algum tipo de WIKI, mas não há uma integração entre elas, logo, novamente o rastreamento se perde e o cliente fica com uma informação sem uma ligação lógica, portanto, pouco útil.&lt;/p&gt;
&lt;p&gt;É bem difícil encontrar uma ferramenta que permita tratar da infraestrutura como um todo, há alguns anos, depois de muita pesquisa e troca de informações com outros colegas de área, encontrei a ferramenta RackTables - Dica do @IvoTonev - que supre boa parte das necessidades de documentação de um datacenter.&lt;/p&gt;
&lt;p&gt;O Racktables é uma ferramenta robusta que permite documentar todo o seu parque de servidores, racks, appliances, redes, links, containers, ips e nats de seu ambiente.&lt;/p&gt;
&lt;p&gt;Com o Racktables é possível cadastrar redes, criar, mapaear e reservar endereços ips para servidores, é possível mapear NATs e PATs IPv4 e ter uma visão ampla de todas as redes do cliente.&lt;/p&gt;
&lt;p&gt;Com o Racktables é possível gerenciar o espaço de racks através de mapeamento gráfico de ambiente, e com isso saber exatamente quantos U&amp;rsquo;s estão livres em cada rack, ou mesmo saber em qual posição de um rack está instalado um determinado appliance.&lt;/p&gt;
&lt;p&gt;Com o Racktables é possível cadastrar todos seus appliances e servidores e inserir informações importantes como TAGs e SNs, o que facilita a abertura de chamados com fornecedores, inventoria e auditoria dos equipamentos.&lt;/p&gt;
&lt;p&gt;O Racktables é uma ferramenta Web, a ferramenta foi escrita em PHP e seu banco de dados é o MYSQL. Isto o torna muito simples para ser implantado em ambientes Unix, BSD, OSX, Linux ou Windows.&lt;/p&gt;
&lt;p&gt;O Racktables é uma ferramenta opensource, não há necessidade de adquirir licenças para seu uso, basta fazer o download, instalar e utilizar.&lt;/p&gt;
&lt;p&gt;Tenho utilizado o Racktables em alguns clientes em Brasília, recomendo a ferramenta.&lt;/p&gt;
&lt;p&gt;Recomenda-se o uso do Racktables através de conexão segura HTTPs e seu acesso deve ser restrito à sua intranet.&lt;/p&gt;
&lt;p&gt;Conheça mais sobre o projeto =&amp;gt; &lt;a href=&#34;http://racktables.org/&#34;&gt;http://racktables.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Gerenciador de senhas TeamPass</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-07-gerenciador-de-senhas-teampass/</link>
      <pubDate>Wed, 07 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-07-gerenciador-de-senhas-teampass/</guid>
      <description>&lt;p&gt;Quando visito clientes e começo a ajudá-los é inevitável começar a pedir credenciais e acesso a ferramentas - senhas, é nesta hora que você acaba expondo um lado frágil da infraestrutura do seu cliente. E quando você menos espera, alguém te pergunta seu e-mail, de forma inocente você passa, e logo mais você recebe uma senha por e-mail - clear text, ou então via gtalk, skype, isso quando alguém não abre um arquivo TXT no desktop dele escrito &amp;ldquo;senhas da rede.txt&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;É meus amigos, administrar senhas corretamente não é um hábito de muitas equipes, ainda mais com equipes apagando incêndios o tempo todo e administrando ambientes de forma manual e artesenal, se você encontra esse tipo de coisa é certo que não haverá um gerenciamento adequado de senhas.&lt;/p&gt;
&lt;p&gt;Há algumas exceções como o gerenciador KEEPASS/KEEPASSX que é um ótimo gestor PESSOAL de senhas, mas quando passa a ser utilizado por uma equipe, vão surgindo um monte de cópias do arquivo em diversos lugares, perde-se sincronia e perde-se o controle da coisa, o arquivo do keepass vai parar no pendrive do amigo do vizinho sem querer naquele dia que você foi passar o último vídeo do Game Of Thrones.&lt;/p&gt;
&lt;p&gt;Em resumo, use o keepass para guardar as suas senhas pessoais, mas não use o KEEPASS para gerenciar senhas do seu cliente ou da sua equipe.&lt;/p&gt;
&lt;p&gt;Há também aqueles gestores WEB de senhas como o LASTPASS, contudo, se você trabalha para o governo ou grandes empresas, colocar senhas internas de infraestrutura em um local EXTERNO, fora do seu controle, não é algo muito recomendado, pelo menos em minha humilde opinião.&lt;/p&gt;
&lt;p&gt;Para gerenciar senhas de clientes de governo, ou de grandes clientes privados, eu uso e recomendo o TeamPass.&lt;/p&gt;
&lt;p&gt;O TeamPasss é um gerenciador corporativo e colaboraivo de senhas e informações sensíveis. Ele foi especialmente desenvolvido para gerenciar, armazenar, prover senhas e oferecer meios de acesso a informação sensível de forma controlada, centralizada e dinâmica.&lt;/p&gt;
&lt;p&gt;O Teampass é uma ferramenta Web, a ferramenta foi escrita em PHP e seu banco de dados é o MYSQL. Isto o torna muito simples para ser implantado em ambientes Unix, BSD, OSX, Linux ou Windows.&lt;/p&gt;
&lt;p&gt;A instalação do tempass é bem direta, feita via web no bom estilo click-click-finish, se todos os requisitos de pacotes estiverem intalados, não haverá problema na instalação, é necessário também ter criado um banco MYSQL e um usuário com privilégios de acesso a esse banco, com tais credenciais em mão, basta preencher os dados e clicar em NEXT até o final da instalação.&lt;/p&gt;
&lt;p&gt;O uso do teampass é bastante simples, primeiro criam-se os usuários, depois criam-se as pastas que vão receber as senhas e informações sensíveis, após criar toda a estrutura de pastas, criam-se então os papéis (roles), uma role define quais pastas um usuário poderá acessar caso associado a essa role, e pode-se ainda dizer se o acesso a determinada pasta é completo (leitura e gravação) ou restrito (somente leitura).&lt;/p&gt;
&lt;p&gt;Não há limites para criação de usuários e não há limites para criação de roles, é possível inclusive criar roles por setores como Desenvolvimento, Infraestrutura, Diretoria, Comercial, Banco de dados, e depois restriginir o acesso de determinado grupo de usuários a um grupo específico de pastas através destas roles.&lt;/p&gt;
&lt;p&gt;Em resumo, você consegue configurar o Teampass de forma que só a equipe Comercial verá as senhas do seu setor, e só a equipe de Infraestrutura verá as senhas do seu setor, fazendo isto de forma segura.&lt;/p&gt;
&lt;p&gt;Em relação aos usuários, o keepass tem 3 tipos básicos, o primeiro é o ADMIN, esse tipo de usuário consegue criar e gerenciar outros usuários, criar e gerenciar roles, associar usuários a roles e administar configurações internas do TeamPass, porém ele não consegue ver as pastas, consequentemente ele não conseguirá criar e gerenciar senhas em tais pastas.&lt;/p&gt;
&lt;p&gt;O segundo tipo de usuário é o MANAGER, esse tipo de usuário conseguirá administrar uma ou mais roles - e suas pastas - e os usuários associados a esta role, ele também conseguirá criar e gerenciar senhas dentro das pastas pertecentes as roles que ele estiver associado. O MANAGER até consegue criar pastas em suas roles, mas será preciso o ADMIN para liberar o uso da pasta naquela ROLE.&lt;/p&gt;
&lt;p&gt;O terceiro tipo é o READ ONLY, este só consegue utilizar as pastas associadas a role que ele faz parte, ele não cria pastas, mas ele consegue criar, modificar e deletar senhas dentro das pastas que tem acesso.&lt;/p&gt;
&lt;p&gt;Com o TeamPass é possível ter controle de todas as senhas de seu parque de forma centralizada, segregada, segura e organizada.&lt;/p&gt;
&lt;p&gt;O TeamPass aceita importação de senhas em formato CSV ou XML, consegue importar senhas do Keepass ou KeePassX.&lt;/p&gt;
&lt;p&gt;O TeamPass tem suporte a autenticação LDAP (Active Directory e OpenLDAP).&lt;/p&gt;
&lt;p&gt;O TeamPass tem uma ferramenta interna de backup da base de dados SQL.&lt;/p&gt;
&lt;p&gt;Através desta ferramenta é possível inclusive gerar senhas fortes e determinar qual complexidade será exigida para se criar ou gerar uma senha dentro de uma pasta.&lt;/p&gt;
&lt;p&gt;O TeamPass é um projeto opensource, não há necessidade de adquirir licenças para seu uso, basta fazer o download, instalar e usar.&lt;/p&gt;
&lt;p&gt;Recomenda-se o uso do Teampass através de conexão segura HTTPs e seu acesso deve ser restrito à sua intranet.&lt;/p&gt;
&lt;p&gt;Acesse o site para saber mais =&amp;gt; &lt;a href=&#34;http://www.teampass.net/&#34;&gt;http://www.teampass.net/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Plataforma de estatísticas web Piwik</title>
      <link>https://archives.gutocarvalho.net/post/2015-01-07-plataforma-de-estatisticas-web-piwik/</link>
      <pubDate>Wed, 07 Jan 2015 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2015-01-07-plataforma-de-estatisticas-web-piwik/</guid>
      <description>&lt;p&gt;Métricas são as informações fundamentais para entendermos como nosso ambiente funciona e qual é o seu comportamento. Através destas métricas poderemos comparar, avaliar, analisar e tomar atitudes que visem melhorar, corrigir - prever problemas, planejar e aprimorar o nosso ambiente.&lt;/p&gt;
&lt;p&gt;Em relação a sites web, as métricas relevantes são aquelas que nos trazem dados de acesso aos sites de nossos clientes.&lt;/p&gt;
&lt;p&gt;Quando pensamos em monitorar as estatísticas de acesso a sites web, a primeira ferramenta que toca nossa memória é o Google Analytics, esta é uma ferramenta ótima para gerar relatórios, gráficos e nos dar informações detalhadas sobre acessos, comportamentos e dados gerais de tráfego de nossos sites.&lt;/p&gt;
&lt;p&gt;Porém, apesar de ser um serviço gratuito, essa é uma ferramenta externa, fora de nosso controle, a qual não temos como auditar e saber como esses dados são armazenados e utilizados pelo Google, afinal nada é realmente grátis, e por isto, não temos como afirmar que apenas o cliente acessa estes relatórios. Outro ponto importante é que e o dados da ferramenta - segundo contrato de uso da ferramenta - são de propriedade de Google e ele pode fazer o que bem entender com essa informação, até mesmo vendê-la para um concorrente se assim desejar.&lt;/p&gt;
&lt;p&gt;Quando estamos dentro do governo, ou quando atuamos em grandes clientes privados, a privacidade de informações e o controle adequado de onde tais informações são armazenadas é um fator de primeira importância para proteger o cliente e o seu negócio.&lt;/p&gt;
&lt;p&gt;Para tanto, existem algumas alternativas open source ao Google Analytics, dentre elas podemos citar o Piwik.&lt;/p&gt;
&lt;p&gt;A ferramenta Piwik é de longe a mais madura e eficiente, sendo atualmente a lider no segmento open source para esse tipo de monitoramento.&lt;/p&gt;
&lt;p&gt;Graças a sua característica open source, o Piwik pode ser instalado em infraestrutura própria, assim o cliente terá o controle dos dados e o controle de acesso a ferramenta, com isso os dados relativos aos sites do cliente que no fim são dados de negócio, estarão seguros e em local controlado.&lt;/p&gt;
&lt;p&gt;O Piwik oferece diversos tipos de estatísticas, podemos citar algumas destas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Top palavras chaves&lt;/li&gt;
&lt;li&gt;Top motores de busca&lt;/li&gt;
&lt;li&gt;Top URLs acessadas&lt;/li&gt;
&lt;li&gt;Acessos de páginas por títulos&lt;/li&gt;
&lt;li&gt;Acessos de usuários por navegador&lt;/li&gt;
&lt;li&gt;Acessos de usuários por sistema operacional&lt;/li&gt;
&lt;li&gt;Acessos de usuários por países, estados e cidades&lt;/li&gt;
&lt;li&gt;Marketshare do site&lt;/li&gt;
&lt;li&gt;Resolução de tela dos usuários que acessam os sites&lt;/li&gt;
&lt;li&gt;Acessos de usuários de sistemas móveis&lt;/li&gt;
&lt;li&gt;Acessos de usuários de desktops&lt;/li&gt;
&lt;li&gt;Engajamento
&lt;ul&gt;
&lt;li&gt;Tempo no site&lt;/li&gt;
&lt;li&gt;Páginas visitadas&lt;/li&gt;
&lt;li&gt;Repetição de visitas&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Criação de campanhas com metas de acesso&lt;/li&gt;
&lt;li&gt;Criação de variáveis personalizadas&lt;/li&gt;
&lt;li&gt;Dados de downloads de arquivos&lt;/li&gt;
&lt;li&gt;Visitantes&lt;/li&gt;
&lt;li&gt;Visitantes únicos&lt;/li&gt;
&lt;li&gt;Page Views&lt;/li&gt;
&lt;li&gt;Ações&lt;/li&gt;
&lt;li&gt;Referências&lt;/li&gt;
&lt;li&gt;Termos pesquisados que levaram ao site&lt;/li&gt;
&lt;li&gt;Páginas que fizeram referência ao site&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Existem muitas outras estatísticas oferecidas pela ferramenta, estas são apenas as principais do ponto de vista de negócio.&lt;/p&gt;
&lt;p&gt;O Piwik também oferece diversos tipos de relatórios em gráficos de pizza, gráficos em barra verticais e horizontais e até nuvem de tags.&lt;/p&gt;
&lt;p&gt;O Piwik permite exportar os dados e estatísticas nos formatos CSV, XML e JSON.&lt;/p&gt;
&lt;p&gt;Além disto, o acesso aos dados é feito em tempo real, você entra na ferramenta e acompanha o fluxo de acesso ao sites naquele momento, o dashboard mostra quem está acessando o site e a url utilizada pelo usuário, podendo então o operador analisar o comportamento e as características daquele usuário, tais quais sistema operacional, navegador, endereço ip, país, estado, cidade, tempo de acesso, dentre outras métricas, tudo isso é apresentado no dashboard de forma simples e objetiva.&lt;/p&gt;
&lt;p&gt;É possível configurar e personalizar o dashboard principal da ferramenta com as métricas mais importantes e relevantes para o cliente e seu negócio, e podemos inclusive criar novos dashboards.&lt;/p&gt;
&lt;p&gt;É possível monitorar vários sites e criar usuários com acessos específicos para cada site.&lt;/p&gt;
&lt;p&gt;A integração do Piwik com sites internos é bastante simples, pode-se utilizar um simples javascript no rodapé das páginas para que o tracking aconteça, assim a ferramenta passa a gerar os dados e relatórios.&lt;/p&gt;
&lt;p&gt;Abaixo um exemplo de código javascript:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;script type=&amp;quot;text/javascript&amp;quot;&amp;gt;
  var _paq = _paq || [];
  _paq.push([&#39;trackPageView&#39;]);
  _paq.push([&#39;enableLinkTracking&#39;]);
  (function() {
    var u=((&amp;quot;https:&amp;quot; == document.location.protocol) ? &amp;quot;https&amp;quot; : &amp;quot;http&amp;quot;) + &amp;quot;://10.10.2.92/piwik/&amp;quot;;
    _paq.push([&#39;setTrackerUrl&#39;, u+&#39;piwik.php&#39;]);
    _paq.push([&#39;setSiteId&#39;, 1]);
    var d=document, g=d.createElement(&#39;script&#39;), s=d.getElementsByTagName(&#39;script&#39;)[0]; g.type=&#39;text/javascript&#39;;
    g.defer=true; g.async=true; g.src=u+&#39;piwik.js&#39;; s.parentNode.insertBefore(g,s);
  })();
&amp;lt;/script&amp;gt;
&amp;lt;noscript&amp;gt;&amp;lt;p&amp;gt;&amp;lt;img src=&amp;quot;http://piwik.dominio.gov.br/piwik/piwik.php?idsite=1&amp;quot; style=&amp;quot;border:0;&amp;quot; alt=&amp;quot;&amp;quot; /&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;/noscript&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O Piwik oferece clientes para Iphone e Android, com isso é possível acompanhar as estatísticas dos sites a partir de qualquer dispositivo móvel atual.&lt;/p&gt;
&lt;p&gt;Há uma empresa por trás do Piwik, logo pode-se contratar suporte caso seja necessário e também pode-se contratar melhorias específicas na ferramenta se o cliente assim desejar.&lt;/p&gt;
&lt;p&gt;O Piwik é uma ferramenta Web, a ferramenta foi escrita em PHP e seu banco de dados é o MYSQL. Isto o torna muito simples para ser implantado em ambientes Unix, BSD, OSX, Linux ou Windows.&lt;/p&gt;
&lt;p&gt;O Piwik é uma ferramenta opensource, não há necessidade de adquirir licenças para seu uso, basta fazer o download, instalar e utilizar.&lt;/p&gt;
&lt;p&gt;Recomenda-se o uso do Piwik através de conexão segura HTTPs e seu acesso deve ser restrito à sua intranet.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Desligando Suspend da VM no VMWARE Fusion</title>
      <link>https://archives.gutocarvalho.net/post/2014-12-30-desligando-suspend-da-vm-no-vmware-fusion/</link>
      <pubDate>Tue, 30 Dec 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-12-30-desligando-suspend-da-vm-no-vmware-fusion/</guid>
      <description>&lt;h3 id=&#34;fusion&#34;&gt;Fusion&lt;/h3&gt;
&lt;p&gt;Eu uso vários hypervisors, depende da necessidade e da situação, eu gosto muito do VMWARE FUSION principalmente se for preciso utilizar dispositivos removíveis como usb flash drives (pendrives) e também pela facilidade de mover arquivos do FUSION para o OSX e vice versa, faço isso apenas arrastando o arquivo de um local para o outro.&lt;/p&gt;
&lt;p&gt;O VMWARE Fusion é de longe o hypervisor mais maduro para OSX - IMHO, há quem defenda que o Parallels é o mais performático e melhor integrado, porém, para minhas necessidades, o FUSION dá conta do recado e sobra em recursos.&lt;/p&gt;
&lt;p&gt;Apesar de todas as qualidades eu tive que ajustar um detalhe importante para mim. Quando eu saia de perto do macbook por algum tempo a VM entrava em modo sleep, dei uma pesquisada e para desligar esse auto-suspend você precisa editar o arquivo .VMX da sua VM e adicionar a seguinte linha&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;suspend.disable =  &amp;quot;TRUE&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com isso sua VM não vai mais entrar em modo sleep/suspend sem que você acione isso manualmente.&lt;/p&gt;
&lt;p&gt;Você precisa editar isso com a VM desligada e depois ligá-la para que ele seja ativado.&lt;/p&gt;
&lt;p&gt;Fica a dica!&lt;/p&gt;
&lt;h3 id=&#34;referências&#34;&gt;Referências&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2056501&#34;&gt;http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;amp;cmd=displayKC&amp;amp;externalId=2056501&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Migrando vms centos do citrix para o vmware</title>
      <link>https://archives.gutocarvalho.net/post/2014-10-27-migrando-vms-centos-do-citrix-para-o-vmware/</link>
      <pubDate>Mon, 27 Oct 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-10-27-migrando-vms-centos-do-citrix-para-o-vmware/</guid>
      <description>&lt;p&gt;Recentemente fui contratado para dar apoio em um processo de migração do Citrix Xen Server 5x e 6x para o VMWARE ESX Server 5x. Basicamente o cliente tem VMs CentOS 5x e CentOS 6x para migrar, a equipe que estava migrando as VMs conseguia colocá-las no VMWARE mas na hora do boot as VMs não subiam.&lt;/p&gt;
&lt;p&gt;Abaixo eu vou mostrar algumas dicas pós conversão para subir a VM no VMWARE com sucesso.&lt;/p&gt;
&lt;h3 id=&#34;1-conversion&#34;&gt;1. Conversion&lt;/h3&gt;
&lt;p&gt;Use o VMWARE Converter, pegue no site da VMWARE.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;conversão basic&lt;/li&gt;
&lt;li&gt;usar discos thin&lt;/li&gt;
&lt;li&gt;versão 7&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-boot&#34;&gt;2. Boot&lt;/h3&gt;
&lt;p&gt;Tenha em mãos a ISO do CentOS 6x.&lt;/p&gt;
&lt;p&gt;Associe a ISO do CentOS 6x a VM convertida - prefira colocar a ISO no datastore, é a melhor forma.&lt;/p&gt;
&lt;p&gt;Se necessário entre nas configurações da VM, clique em Options, acesse o Boot Options, aumente o delay de inicialização para 1000 e clique em &amp;ldquo;Force BIOS Setup&amp;rdquo; para entrar na BIOS no próximo boot e definir a ordem de boot.&lt;/p&gt;
&lt;p&gt;Dê um boot na VM, na BIOS defina a ordem de BOOT colocando o CDROM primeiro.&lt;/p&gt;
&lt;p&gt;Dê outro boot, escolha o CD do CentOS 6x.&lt;/p&gt;
&lt;h3 id=&#34;3-rescue-mode&#34;&gt;3. Rescue mode&lt;/h3&gt;
&lt;p&gt;Entrar em modo Rescue do CD&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Selecione Rescue installed system&lt;/li&gt;
&lt;li&gt;Selecione English como idioma default&lt;/li&gt;
&lt;li&gt;Selecione US como teclado&lt;/li&gt;
&lt;li&gt;Selecione ativar a rede (colocar um IPv4 na máquina e desligar IPv6)&lt;/li&gt;
&lt;li&gt;Selecione buscar discos&lt;/li&gt;
&lt;li&gt;Selecione montar discos em /mnt/sysimage&lt;/li&gt;
&lt;li&gt;Selecione iniciar o terminal do modo Rescue (ssh)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sair para internet é pré-requisito neste cenário.&lt;/p&gt;
&lt;h3 id=&#34;4-partition&#34;&gt;4. Partition&lt;/h3&gt;
&lt;p&gt;Acesse a partição montada e rode o chroot no diretório montado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# cd /mnt/sysimage
# chroot .
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;5-kernel&#34;&gt;5. Kernel&lt;/h3&gt;
&lt;p&gt;Instale o kernel mais novo disponível&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# yum install kernel -y
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se não houver pacote novo e você estiver no centos 6 rode&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# yum reinstall kernel -y
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se estiver no centos 5 faça o seguinte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# yum remove kernel -y
# yum install kernel -y
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No centos 5 o reinstall não fez a reinstalação como ocorre no centos 6.&lt;/p&gt;
&lt;h3 id=&#34;6-grub&#34;&gt;6. GRUB&lt;/h3&gt;
&lt;p&gt;Vamos ajustar algumas coisas no grub para ter um boot com sucesso&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# vim /boot/grub/menu.lst
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a linha kernel da versão mais recente instalada e remova o trecho abaixo - caso exista&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;console=xvc0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso deseje ver as mensagens de inicialização remova o trecho&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;quiet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Confira se está apontando para o kernel certo, confira se a opção de kernel default aponta para o kernel mais novo, salve o arquivo!&lt;/p&gt;
&lt;h3 id=&#34;7-network&#34;&gt;7. Network&lt;/h3&gt;
&lt;p&gt;Como provavelmente já existia uma interface de rede configurada como &lt;strong&gt;eth0&lt;/strong&gt; - mas com outro MAC, será necessário atualizar o MAC da interface de rede &lt;strong&gt;eth0&lt;/strong&gt; no arquivo de configuração desta em &lt;strong&gt;/etc/sysconfig/network-scripts/ifcfg-eth0&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# ip a s eth0|grep ether
# vim /etc/sysconfig/network-scripts/ifcfg-eth0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Atualize a linha HWADDR&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;HWADDR=00:0C:29:11:17:7F
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso esteja migrando um CentOS 6, apague o arquivo &lt;strong&gt;/etc/udev/rules.d/70-persistent-net.rules&lt;/strong&gt; - fique tranquilo ele será gerado no próximo boot.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; # rm /etc/udev/rules.d/70-persistent-net.rules
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queira apenas atualizar o mac address dentro do &lt;strong&gt;70-persistent-net.rules&lt;/strong&gt; isso também funciona, eu apago pois prefiro que ele gere o arquivo novamente.&lt;/p&gt;
&lt;h3 id=&#34;8-inittab&#34;&gt;8. Inittab&lt;/h3&gt;
&lt;p&gt;Se estiver migrando um CentOS 5, remova ou comente a linha abaixo do /etc/inittab&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;co:2345:respawn:/sbin/agetty xvc0 9600 vt100-nav
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E descomente as seguintes linhas&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#1:2345:respawn:/sbin/mingetty tty1
#2:2345:respawn:/sbin/mingetty tty2
#3:2345:respawn:/sbin/mingetty tty3
#4:2345:respawn:/sbin/mingetty tty4
#5:2345:respawn:/sbin/mingetty tty5
#6:2345:respawn:/sbin/mingetty tty6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Pronto!&lt;/p&gt;
&lt;h3 id=&#34;9-reboot&#34;&gt;9. Reboot&lt;/h3&gt;
&lt;p&gt;Agora dê um reboot na VM e acompanhe o carregamento.&lt;/p&gt;
&lt;h3 id=&#34;10-kernel-panic&#34;&gt;10. Kernel Panic?&lt;/h3&gt;
&lt;h4 id=&#34;101-centos-5x&#34;&gt;10.1 CentOS 5.x&lt;/h4&gt;
&lt;p&gt;Se estiver no CentOS 5 pode receber um kernek panic relacionado a não detecção do volume group, a mensagem seria como a abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;No volume groups found&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E logo depois&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;Kernel panic - not syncing: Attempted to kill init!&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para resolver a questão, entre novamente no modo rescue (passo 3 e passo 4),  edite o arquivo /etc/modprobe.conf e comente ou remova as linhas abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;alias scsi_hostadapter xenblk
alias eth0 xennet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E adicione as linhas abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;alias eth0 e1000
alias scsi_hostadapter mptbase
alias scsi_hostadapter1 mptspi
alias scsi_hostadapter2 ata_piix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois disto é preciso regerar a o initrd para que esses módulos utilizados dentro da imagem&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /boot
mv initrd-2.6.18-398.el5 initrd-2.6.18-398.el5.old
mkinitrd -v --force-lvm-probe --force-raid-probe /boot/initrd-2.6.18-398.el5.img 2.6.18-398.el5
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;102-centos-6x&#34;&gt;10.2 CentOS 6.x&lt;/h4&gt;
&lt;p&gt;Caso esteja com um kernel panic no centos 6, você pode regerar o initramfs com o dracut ao invés do mkinitrd (ele vai regerar todos os initramfs), repita os passos 3 e 4 e rode os comandos abaixo no /boot.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# dracut -f 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Caso queira ser específico quanto qual o initramfs quer regerar, veja o exemplo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# dracut -f /boot/initramfs-2.6.x32-xxx.el6.x86_64.img 2.6.32-xxx.el6.x86_64
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E depois verifique se a vm vai iniciar.&lt;/p&gt;
&lt;h3 id=&#34;11-conclusão&#34;&gt;11. Conclusão&lt;/h3&gt;
&lt;p&gt;Esse procedimento resolveu as dores de cabeça do cliente e da empresa contratada para fazer a migração do CITRIX para o VMWARE, podem haver outros ajustes, esses foram os que nós detectamos, em sua maioria ajustes simples e objetivos.&lt;/p&gt;
&lt;h4 id=&#34;111-incompatibilidade&#34;&gt;11.1 Incompatibilidade?&lt;/h4&gt;
&lt;p&gt;Alguns ténicos da empresa que estava migrando o CITRIX para o VMWARE me disseram que essa &amp;lsquo;imcompatibilidade&amp;rsquo; entre VMWARE e CITRIX é &amp;ldquo;velha&amp;rdquo;&amp;quot; conhecida deles, eu por outro lado discordo, não existe nenhuma &amp;lsquo;incompatibilidade&amp;rsquo;, uma VM rodando no CITRIX pode ser migrada para o VMWARE, são necessários alguns pequenos ajustes devido a mudança de Hypervisor, nada além disto.&lt;/p&gt;
&lt;p&gt;A incompatibilidade neste caso, foi na verdade, falta de experiência e falta de conhecimento de sistemas linux.&lt;/p&gt;
&lt;p&gt;Fica a dica!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>RHCJA</title>
      <link>https://archives.gutocarvalho.net/post/2014-10-20-rhcja/</link>
      <pubDate>Mon, 20 Oct 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-10-20-rhcja/</guid>
      <description>&lt;p&gt;Em 2014 eu comecei a estudar JBOSS para atender a novos projetos em meus clientes em Brasília, eu já tinha uma boa experiência com o Apache Tomcat, mas com JBOSS eu precisava aprofundar os estudos para aumentar minha eficiência na sustentação e administração deste tipo de middleware, para isto, eu fiz o curso JB248 há alguns meses e recentemente eu me submeti a prova de certificação. Obtive um resultado positivo e agora eu sou um RHCJA - RedHat Certificate Jboss Administrator.&lt;/p&gt;
&lt;p&gt;Eu achei o curso interesssante, foi basedo no JBOSS EAP 6 - que é baseado no JBOSS AS 7. O curso é bem rápido, apenas uma semana, mesmo assim ele cobre aspectos importantes do ecossistema JBOSS, além disto, é um bom preparatório para a prova de certificação, eu recomendo este treinamento.&lt;/p&gt;
&lt;p&gt;Ano que vem eu volto a me dedicar aos cursos RH, estou mirando na certificação RHCDS e RHCA, vamos ver se consigo alcançar esse objetivo em 2015.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Latinoware 2014</title>
      <link>https://archives.gutocarvalho.net/post/2014-10-14-latinoware-2014/</link>
      <pubDate>Tue, 14 Oct 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-10-14-latinoware-2014/</guid>
      <description>&lt;p&gt;Eu já estou aqui no latinoware e já encontrei alguns veteranos da tecnologia no aeroporto e no hotel, dentre eles, cito Jomar e Júlio Neves. Nesta edição do Latinoware eu vou ministar duas palestras e dividir um mini-curso com o Miguel Filho - que também ministra algumas palestras no evento.&lt;/p&gt;
&lt;h3 id=&#34;programação&#34;&gt;Programação&lt;/h3&gt;
&lt;p&gt;Acompanhe nossa programação nos três dias do evento.&lt;/p&gt;
&lt;h3 id=&#34;dia-15&#34;&gt;Dia 15&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Introdução a Gerência de Configurações com Puppet&lt;/strong&gt;&lt;br&gt;
Horário: 12:00&lt;br&gt;
Espaço Peru&lt;br&gt;
Palestante: Migue Filho&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Orquestração com Mcollective&lt;/strong&gt;&lt;br&gt;
Horário: 17:00&lt;br&gt;
Eespaço Peru&lt;br&gt;
Palestrante: Guto Carvalho&lt;br&gt;&lt;/p&gt;
&lt;h3 id=&#34;dia-16&#34;&gt;Dia 16&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Encontro aberto da comunidade Puppet-BR&lt;/strong&gt;&lt;br&gt;
Horário: 10:00&lt;br&gt;
Espaço Venezuela&lt;br&gt;
Coordenadores: Guto/Miguel&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Construção de módulos com Puppet - Boas Práticas&lt;/strong&gt;&lt;br&gt;
Horário: às 12:00&lt;br&gt;
Espaço Venezuela&lt;br&gt;
Palestrante: Guto Carvalho&lt;br&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Administração de banco de dados PostgreSQL com Puppet&lt;/strong&gt;&lt;br&gt;
Horário: 13:00&lt;br&gt;
Espaço Venezula&lt;br&gt;
Palestrante: Miguel Filho&lt;br&gt;&lt;/p&gt;
&lt;h3 id=&#34;dia-17&#34;&gt;Dia 17&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Oficina de Gerência de Configurações e Orquestração com Puppet e Mcollecive&lt;/strong&gt;&lt;br&gt;
Horário: 10:00&lt;br&gt;
Duração: 4 horas&lt;br&gt;
Laboratório 3&lt;br&gt;
Facilitadores: Guto Carvalho e Miguel Filho&lt;br&gt;&lt;/p&gt;
&lt;p&gt;Se você estiver no evento, dê um alô pra gente, pode ser lá na reunião da comunidade, pode ser no corredor, no almoço, estamos aqui para conversar e conhecer pessoas, principalmente se estiverem com vontade de conversar sobre automação e infraestrutura ágil :)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Entenda o bug shellshock</title>
      <link>https://archives.gutocarvalho.net/post/2014-09-30-entenda-o-bug-shellshock/</link>
      <pubDate>Tue, 30 Sep 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-09-30-entenda-o-bug-shellshock/</guid>
      <description>&lt;h3 id=&#34;1-shellshock-ou-bash-bug&#34;&gt;1. ShellShock ou Bash Bug?&lt;/h3&gt;
&lt;p&gt;Eu estava PuppetConf&#39;2014 quando esse bug foi noticiado no dia 24 de Setembro, havia um grande número de especialistas no evento e teve muita gente preocupada, lendo e acessando seus servidores para tentar entender, checar e mitigar o problema.&lt;/p&gt;
&lt;p&gt;O shellshock, bashdoor ou bashbug é um bug gravíssimo que foi encontrado no shell &lt;strong&gt;bash&lt;/strong&gt; pelo especialista &lt;a href=&#34;http://stephane.chazelas.free.fr/&#34;&gt;Stephane Schazelas&lt;/a&gt;, o bug está presente em diversos sistemas operacionais Linux e Unix.&lt;/p&gt;
&lt;h3 id=&#34;2-shell&#34;&gt;2. Shell?&lt;/h3&gt;
&lt;p&gt;O shell é um interpretador de comandos que permite que nós usuários e também que programas acessem serviços e recursos do sistema operacional Unix/Linux.&lt;/p&gt;
&lt;p&gt;O bash é apenas um dos diversos tipos de shell (interpretadores de comandos) existentes, porém, ele é o mais comum e está presente em praticamente todo sistema operacional Unix e Linux.&lt;/p&gt;
&lt;h3 id=&#34;3-impacto&#34;&gt;3. Impacto&lt;/h3&gt;
&lt;p&gt;O bug foi encontrado desde a versão 1.14 até a versão 4.3, em resumo todas as releases dos últimos 22 anos são afetadas já que a versão 1.14 foi lançada em 1992.&lt;/p&gt;
&lt;p&gt;O alcance desse bug está na casa dos milhões de servidores (*NIX) no planeta, incluindo ai nessa lista, computadores pessoais MACS (OSX) e até os seguros sistemas *BSD.&lt;/p&gt;
&lt;p&gt;Ok, mas onde o bash é utilizado em meu sistema operacional? em que momento ele é carregado?&lt;/p&gt;
&lt;h3 id=&#34;4-entendendo-o-problema&#34;&gt;4. Entendendo o problema&lt;/h3&gt;
&lt;p&gt;Sempre que criamos um usuário no UNIX ou LINUX normalmente o shell bash é associado a essa conta, com isto, é possível se conectar ao sistema operacional utilizando ssh e telnet, por exemplo.&lt;/p&gt;
&lt;p&gt;Quando instalamos algum sistema ou serviço, este também pode utilizar o bash para executar algo ou para definir alguma variável de ambiente necessária para seu funcionamento.&lt;/p&gt;
&lt;p&gt;É possível inclusive rodar comandos remotamente no bash utilizando ssh.&lt;/p&gt;
&lt;h3 id=&#34;5-como-exploram-a-falha&#34;&gt;5. Como exploram a falha?&lt;/h3&gt;
&lt;p&gt;A vulnerabilidade permite que atacantes executem código arbitrário em determinadas situações e condições, normalmente via rede.&lt;/p&gt;
&lt;p&gt;Utilizando algumas strings e variáveis de ambiente eles conseguem escalar privilégios de um usuário normal e acessar recursos protegidos.&lt;/p&gt;
&lt;h4 id=&#34;51-exploits&#34;&gt;5.1 Exploits&lt;/h4&gt;
&lt;p&gt;Alguns posts sobre exploits criados para explorar o shellshock&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.alienvault.com/open-threat-exchange/blog/attackers-exploiting-shell-shock-cve-2014-6721-in-the-wild&#34;&gt;https://www.alienvault.com/open-threat-exchange/blog/attackers-exploiting-shell-shock-cve-2014-6721-in-the-wild&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://isc.sans.edu/diary/Shellshock%3A+A+Collection+of+Exploits+seen+in+the+wild/18725&#34;&gt;https://isc.sans.edu/diary/Shellshock%3A+A+Collection+of+Exploits+seen+in+the+wild/18725&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.fireeye.com/blog/uncategorized/2014/09/shellshock-in-the-wild.html&#34;&gt;http://www.fireeye.com/blog/uncategorized/2014/09/shellshock-in-the-wild.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Já existe inclusive um malware/botnet chamado WOPBOT explorando sites vulneráveis.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.itnews.com.au/News/396197,first-shellshock-botnet-attacks-akamai-us-dod-networks.aspx&#34;&gt;http://www.itnews.com.au/News/396197,first-shellshock-botnet-attacks-akamai-us-dod-networks.aspx&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;6-quais-os-principais-serviços-afetados&#34;&gt;6. Quais os principais serviços afetados?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Apache HTTP que utiliza CGI Scripts (mod_cgi e mod_cgid).&lt;/li&gt;
&lt;li&gt;Servidores OpenSSH com ForceCommand&lt;/li&gt;
&lt;li&gt;Dhclient&lt;/li&gt;
&lt;li&gt;CUPS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Por hora são esses, mas qualquer serviço que dependa do bash está potencialmente afetado.&lt;/p&gt;
&lt;h3 id=&#34;7-bugs-conhecidos&#34;&gt;7. Bugs conhecidos&lt;/h3&gt;
&lt;p&gt;O primeiro bug relatado foi o CVE-2014-6271, este teve um fix publicado que não foi completo e mais problemas foram detectados, com isso, foram registradas novas falhas, são elas: CVE-2014-6277, CVE-2014-6278, CVE-2014-7169, CVE-2014-7186 e CVE-2014-7187.&lt;/p&gt;
&lt;p&gt;O CVE é uma das maiores e mais respeitadas base de dados de segurança que contém dados do tipo vulnerability (erros de implementação em softwares) e exposure (falhas de configuração ou de uso de software), quando um bug é encontrado normalmente é registrado no CVE primeiro.&lt;/p&gt;
&lt;h4 id=&#34;71-cve-2014-6271&#34;&gt;7.1 CVE-2014-6271&lt;/h4&gt;
&lt;p&gt;Este foi o primeiro bug encontrado, para verificar se seu bash está exposto a este bug, rode o comando abaixo em uma sessão sem privilégios&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;env x=&#39;() { :;}; echo vulnerable&#39; bash -c &amp;quot;echo this is a test&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se aparecer a mensagem &amp;ldquo;vulnerable&amp;rdquo; você precisa atualizar seu bash.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6271&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6271&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;72-cve-2014-7169&#34;&gt;7.2 CVE-2014-7169&lt;/h4&gt;
&lt;p&gt;Esse bug permite que o atacante crie ou modifique arquivos além de ler arquivos que ele não teria privilégios, e também pode acessar partes protegidas do sistema, esse bug existe por correções incompletas no CVE-2014-(6271, 6277 e 6278).&lt;/p&gt;
&lt;p&gt;Para testar se seu bash está vulnerável a este bug rode o comando abaixo em um sessão comum:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;env X=&#39;() { (a)=&amp;gt;\&#39; sh -c &amp;quot;echo date&amp;quot;; cat echo
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se a data e hora - saída do comando date - retornar após a execução, seu sistema está vulnerável.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7169&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7169&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;73-outros-relacionados&#34;&gt;7.3 Outros relacionados&lt;/h4&gt;
&lt;p&gt;Já corrigidos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6277&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6277&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6278&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6278&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ainda sem correções até o momento (2014-10-01)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7186&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7186&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7187&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7187&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;8-testando-meu-servidor&#34;&gt;8. Testando meu servidor&lt;/h3&gt;
&lt;h4 id=&#34;81-http-check&#34;&gt;8.1 HTTP Check&lt;/h4&gt;
&lt;p&gt;Você pode acessar essa URL e testar se seu site está vulnerável, ele usa alguns exploits HTTP para fazer a verificação&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://shellshock.brandonpotter.com&#34;&gt;http://shellshock.brandonpotter.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O gutocarvalho.net está limpo ;)&lt;/p&gt;
&lt;h4 id=&#34;82-redhat-http-check&#34;&gt;8.2 RedHat HTTP Check&lt;/h4&gt;
&lt;p&gt;Se você tem conta na RHN pode fazer o teste pela ferramenta da fabricante&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://access.redhat.com/labs/shellshock/&#34;&gt;https://access.redhat.com/labs/shellshock/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;9-informações-de-fornecedores&#34;&gt;9. Informações de fornecedores&lt;/h3&gt;
&lt;p&gt;Alguns links para sites de fornecedores e organizações.&lt;/p&gt;
&lt;h4 id=&#34;91-redhat&#34;&gt;9.1 Redhat&lt;/h4&gt;
&lt;p&gt;Artigos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://securityblog.redhat.com/2014/09/24/bash-specially-crafted-environment-variables-code-injection-attack/&#34;&gt;https://securityblog.redhat.com/2014/09/24/bash-specially-crafted-environment-variables-code-injection-attack/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://securityblog.redhat.com/2014/09/26/frequently-asked-questions-about-the-shellshock-bash-flaws/&#34;&gt;https://securityblog.redhat.com/2014/09/26/frequently-asked-questions-about-the-shellshock-bash-flaws/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Alertas&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://access.redhat.com/announcements/1210053&#34;&gt;https://access.redhat.com/announcements/1210053&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://access.redhat.com/articles/1200223&#34;&gt;https://access.redhat.com/articles/1200223&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sobre malwares que exploram o shellshock&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://access.redhat.com/articles/1213683&#34;&gt;https://access.redhat.com/articles/1213683&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;92-debian&#34;&gt;9.2 Debian&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.debian.org/security/2014/dsa-3032&#34;&gt;https://www.debian.org/security/2014/dsa-3032&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.debian.org/security/2014/dsa-3035&#34;&gt;https://www.debian.org/security/2014/dsa-3035&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;93-ubuntu&#34;&gt;9.3 Ubuntu&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ubuntu.com/usn/usn-2362-1/&#34;&gt;http://www.ubuntu.com/usn/usn-2362-1/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ubuntu.com/usn/usn-2363-1/&#34;&gt;http://www.ubuntu.com/usn/usn-2363-1/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.ubuntu.com/usn/usn-2364-1/&#34;&gt;http://www.ubuntu.com/usn/usn-2364-1/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;94-suse&#34;&gt;9.4 Suse&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.suse.com/support/shellshock/&#34;&gt;https://www.suse.com/support/shellshock/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.suse.com/support/update/announcement/2014/suse-su-20141260-1.html&#34;&gt;https://www.suse.com/support/update/announcement/2014/suse-su-20141260-1.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.suse.com/support/update/announcement/2014/suse-su-20141259-1.html&#34;&gt;https://www.suse.com/support/update/announcement/2014/suse-su-20141259-1.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;95-apple&#34;&gt;9.5 Apple&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://support.apple.com/kb/DL1769?viewlocale=en_US&amp;amp;locale=en_US&#34;&gt;http://support.apple.com/kb/DL1769?viewlocale=en_US&amp;amp;locale=en_US&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://support.apple.com/kb/HT1222&#34;&gt;http://support.apple.com/kb/HT1222&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Leia e se informe, se tiver suporte comercial (RHEL/SLES) abra um ticket e peça apoio na verificação de seu parque.&lt;/p&gt;
&lt;p&gt;Se preocupe principalmente com os seus servidores na DMZ.&lt;/p&gt;
&lt;h3 id=&#34;10-atualizando-seu-servidor-manualmente&#34;&gt;10. Atualizando seu servidor manualmente&lt;/h3&gt;
&lt;p&gt;Aqui vão as dicas para você atualizar o bash no braço!&lt;/p&gt;
&lt;h4 id=&#34;101-redhatcentos&#34;&gt;10.1 Redhat/Centos&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;yum install bash
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;102-debian&#34;&gt;10.2 Debian&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;aptitude install bash
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;103-suse-12&#34;&gt;10.3 Suse 12&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;zypper in -t patch SUSE-SLE-SERVER-12-2014-59
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;104-apple-mac-osx&#34;&gt;10.4 Apple MAC OSX&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;Aceite a atualização, apenas isto.
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;11-atualizando-o-bash-com-ferramentas-inteligentes&#34;&gt;11. Atualizando o bash com ferramentas inteligentes&lt;/h3&gt;
&lt;h4 id=&#34;111-puppet--mcollective&#34;&gt;11.1 Puppet + Mcollective&lt;/h4&gt;
&lt;p&gt;Caso você tenha puppet em seu ambiente, você pode colocar o código abaixo em uma classe comum a todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package { &#39;bash&#39;: ensure =&amp;gt; latest }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois disto aguarde o agente pegar o novo catálogo e aplicar as mudanças.&lt;/p&gt;
&lt;p&gt;Caso você tenha o mcollective em seu parque, após o ajuste na classe, acione o puppet em todos os nodes via plugin para não ter que esperar pelos agentes.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet agent runonce
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;112-mcollective&#34;&gt;11.2 Mcollective&lt;/h4&gt;
&lt;p&gt;Se você tem Mcollective mas não tem puppet, tudo bem, dá para rodar o seguinte comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco package update bash
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Esse comando vai forçar a atualização do pacote bash em todos os nodes com o mcollective.&lt;/p&gt;
&lt;p&gt;Mesmo que você tenha especificado e declarado no puppet que o bash deve ser estar sempre na última versão, esse comando é valido como uma outra garantia para que o pacote seja atualizado.&lt;/p&gt;
&lt;h3 id=&#34;12-recomendações&#34;&gt;12. Recomendações&lt;/h3&gt;
&lt;h4 id=&#34;121-devo-reiniciar-meus-servidores-afetados&#34;&gt;12.1 Devo reiniciar meus servidores afetados?&lt;/h4&gt;
&lt;p&gt;Olha se você tem janela e condições para isto, e principalmente se seu problema for relacionado a seu servidor de aplicações web, reiniciar vai descarregar completamente da memória as versões antigas do bash :)&lt;/p&gt;
&lt;p&gt;Caso você não tenha janela, após atualizar, mate as sessões remotas para forçar os usuários a recarregarem o screen/tmux/afins e reinicie os serviços que dependem do bash, já vai resolver.&lt;/p&gt;
&lt;h4 id=&#34;122-o-selinux-ajuda-a-diminuir-o-problema&#34;&gt;12.2 O SELINUX ajuda a diminuir o problema?&lt;/h4&gt;
&lt;p&gt;Um dos especialistas em SELINUX testou um exploit HTTP contra o SELINUX e fez um &lt;a href=&#34;http://danwalsh.livejournal.com/71122.html&#34;&gt;post&lt;/a&gt; explicando como o SELINUX se comportou e como diminui o estrago que o exploit poderia ter causado ao sistema que recebeu o teste.&lt;/p&gt;
&lt;h4 id=&#34;123-posso-definir-outro-shell-como-padrão&#34;&gt;12.3 Posso definir outro shell como padrão?&lt;/h4&gt;
&lt;p&gt;Pode, mas cada sistema operacional oferece uma forma diferente de fazer isto, recomendo por exemplo o ZSH, ele é um excelente shell, você definir o ZSH como shell padrão dos usuários até resolverem essa questão do bash.&lt;/p&gt;
&lt;p&gt;Na parte de serviços é necessário fazer testes para ver se o serviço consegue utilizar um shell diferente do BASH, recomendo subir uma VM e testar antes de qualquer mudança.&lt;/p&gt;
&lt;p&gt;Vale mencionar que no Debian o shell padrão é o dash, logo o problema para usuários debian é um pouco menor, mas o bash vem instalado no sistema, então é bom atualizar.&lt;/p&gt;
&lt;h3 id=&#34;13-amarrando-as-pontas&#34;&gt;13. Amarrando as pontas&lt;/h3&gt;
&lt;p&gt;Há alguns meses abordamos aqui o terrível bug &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/04/10/entenda-o-bug-heartbleed/&#34;&gt;Heartbleed&lt;/a&gt;, mas tenho que dizer que dizer que o shellshock não fica atrás em importância e impacto, tem muita gente na web inclusive considerando o shellshock maior que o heartbleed devido a presença do bash em praticamente qualquer sistema operacional *NIX.&lt;/p&gt;
&lt;p&gt;Eu ainda vou esperar, é muito cedo para comparar, nenhum estrago grande foi detectado ou divulgado até o momento.&lt;/p&gt;
&lt;p&gt;Contudo, não perca tempo, pesquise e defina a melhor estratégia para atualizar o seu parque o quanto antes, mas não se afobe, faça com calma para fazer direito.&lt;/p&gt;
&lt;p&gt;E não pare de estudar pois nem todos os bugs foram corrigidos até o final deste post (2014-10-01), continue acompanhando, lendo e checando o seu ambiente.&lt;/p&gt;
&lt;p&gt;Converse com suas equipes de segurança para que eles verifiquem junto a fornecedores de appliances se tem novas ACLs ou RULES para bloquear as botnets e exploits HTTP e considere ativá-los como mais uma camada de segurança.&lt;/p&gt;
&lt;h3 id=&#34;14-referências&#34;&gt;14. Referências&lt;/h3&gt;
&lt;p&gt;CVE&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6271&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6271&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7169&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7169&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6277&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6277&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6278&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-6278&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7186&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7186&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7187&#34;&gt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-7187&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MISC&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.theverge.com/2014/9/24/6840697/worse-than-heartbleed-todays-bash-bug-could-be-breaking-security-for&#34;&gt;http://www.theverge.com/2014/9/24/6840697/worse-than-heartbleed-todays-bash-bug-could-be-breaking-security-for&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.theverge.com/2014/9/25/6843669/bash-shellshock-network-worm-could-cause-internet-meltdown&#34;&gt;http://www.theverge.com/2014/9/25/6843669/bash-shellshock-network-worm-could-cause-internet-meltdown&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://arstechnica.com/security/2014/09/bug-in-bash-shell-creates-big-security-hole-on-anything-with-nix-in-it/&#34;&gt;http://arstechnica.com/security/2014/09/bug-in-bash-shell-creates-big-security-hole-on-anything-with-nix-in-it/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://arstechnica.com/apple/2014/09/apple-patches-shellshock-bash-bug-in-os-x-10-9-10-8-and-10-7/&#34;&gt;http://arstechnica.com/apple/2014/09/apple-patches-shellshock-bash-bug-in-os-x-10-9-10-8-and-10-7/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://arstechnica.com/apple/2014/09/apple-patches-shellshock-bash-bug-in-os-x-10-9-10-8-and-10-7/&#34;&gt;http://arstechnica.com/apple/2014/09/apple-patches-shellshock-bash-bug-in-os-x-10-9-10-8-and-10-7/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.digitalocean.com/community/tutorials/how-to-protect-your-server-against-the-shellshock-bash-vulnerability&#34;&gt;https://www.digitalocean.com/community/tutorials/how-to-protect-your-server-against-the-shellshock-bash-vulnerability&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.techradar.com/news/internet/bash-vulnerability-could-be-worst-ever-1266830&#34;&gt;http://www.techradar.com/news/internet/bash-vulnerability-could-be-worst-ever-1266830&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.techradar.com/us/news/computing/apple/apple-majority-of-os-x-users-are-safe-from-bash-bug-1267048&#34;&gt;http://www.techradar.com/us/news/computing/apple/apple-majority-of-os-x-users-are-safe-from-bash-bug-1267048&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.techradar.com/news/computing/apple/apple-releases-bash-bug-patch-for-os-x-1267228&#34;&gt;http://www.techradar.com/news/computing/apple/apple-releases-bash-bug-patch-for-os-x-1267228&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://blog.cloudflare.com/inside-shellshock/&#34;&gt;http://blog.cloudflare.com/inside-shellshock/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>MYSQL TMPDIR em TMPFS com SELINUX ativado</title>
      <link>https://archives.gutocarvalho.net/post/2014-08-29-mysql-tmpdir-em-tmpfs-com-selinux-ativado/</link>
      <pubDate>Fri, 29 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-08-29-mysql-tmpdir-em-tmpfs-com-selinux-ativado/</guid>
      <description>&lt;p&gt;Eu sou daqueles caras teimosos que insiste em usar o SELINUX ao invés de desligar ele após a instalação do servidor :)&lt;/p&gt;
&lt;p&gt;Eis que estava montando um servidor MYSQL para o Zabbix no CentOS 6.5 e resolvi criar um diretório temporário para o MYSQL em um TMPFS para obter uma melhor performance do Zabbix.&lt;/p&gt;
&lt;p&gt;Basicamente fiz o seguinte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;service mysqld stop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Criei o diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /mytmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No my.cnf coloquei o seguinte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmpdir=/mytmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No fstab coloquei o seguinte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmpfs			/mytmp			tmpfs  rw,uid=mysql,gid=mysql,size=1g,nr_inodes=10k,mode=0775 0 0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Montei o tmpfs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mount /mytmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Iniciei o mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;service mysqld start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Porém, quando eu iniciava o MYSQL, os seguintes erros apareciam no LOG&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/libexec/mysqld: Can&#39;t create/write to file &#39;/tmpfs/ibbBLVnW&#39; (Errcode: 13)
140829 12:23:42  InnoDB: Error: unable to create temporary file; errno: 13
140829 12:23:42 [ERROR] Plugin &#39;InnoDB&#39; init function returned error.
140829 12:23:42 [ERROR] Plugin &#39;InnoDB&#39; registration as a STORAGE ENGINE failed.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O sintoma do lado da aplicação era um &lt;strong&gt;access denied&lt;/strong&gt; na conexão com o banco, os desavisados podem perder muito tempo tentando acertar permissões mas não é esse o problema, isto ocorria pois o MySQL não conseguia escrever no ponto de montagem TMPFS, veja o erro no detalhe&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/libexec/mysqld: Can&#39;t create/write to file &#39;/tmpfs/ibbBLVnW&#39; (Errcode: 13)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Sabendo que o SELINUX estava ligado fui olhar no &lt;strong&gt;/var/log/audit/audit.log&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat /var/log/audit/*.log |grep mysql|grep -v zabbix|grep tmpfs
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Encontrei então a seguinte informação&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type=AVC msg=audit(1408993827.194:10192): avc:  denied  { write } for  pid=28603 comm=&amp;quot;mysqld&amp;quot; name=&amp;quot;/&amp;quot; dev=tmpfs ino=708243 scontext=unconfined_u:system_r:mysqld_t:s0 tcontext=unconfined_u:object_r:default_t:s0 tclass=dir
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No log acima é possível ver que o MYSQL tentou escrever em um diretorio da raiz que montava um TMPFS e não conseguiu devido ao contexto do diretório, tive então que checar o contexto do diretório, para isto eu rodei o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ls -Z /|grep mytmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A saída recebida foi esta&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;drwxr-xr-x. root  root  unconfined_u:object_r:default_t:s0 mytmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja que o conexto acima está com o tipo &lt;strong&gt;default_t&lt;/strong&gt;, e neste caso, quando o SELINUX está ativo, o mysql não consegue escrever no diretório.&lt;/p&gt;
&lt;p&gt;Para resolver a questão foi necessário ajustar o contexto do diretório para &lt;strong&gt;mysqld_db_t&lt;/strong&gt;, só assim o mysql terá condições de escrever dentro dele.&lt;/p&gt;
&lt;p&gt;Usei o semanage para definir o contexto default do diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;semanage fcontext -a -t mysqld_db_t &amp;quot;/mytmp(/.*)?&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E depois rodei um restorecon para corrigir o contexto do diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;restorecon -Rv /mytmp/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída do restorecon&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;restorecon reset /mytmp context unconfined_u:object_r:tmp_t:s0-&amp;gt;unconfined_u:object_r:mysqld_db_t:s0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feito isto, iniciei o MYSQL sem erros no log.&lt;/p&gt;
&lt;p&gt;Os erros na aplicação também foram solucionados.&lt;/p&gt;
&lt;p&gt;O processo é o mesmo se deseja colocar o diretório DATA do MYSQL em outro local em um servidor com SELINUX ativado.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Calendário do treinamento Puppet Fundamentals</title>
      <link>https://archives.gutocarvalho.net/post/2014-08-27-calendario-do-treinamento-puppet-fundamentals/</link>
      <pubDate>Wed, 27 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-08-27-calendario-do-treinamento-puppet-fundamentals/</guid>
      <description>&lt;p&gt;Nesse ano os treinamentos da Puppetlabs decolaram em nosso País, temos tido uma boa procura, isto está acontecendo provavelmente devido a franca adoção do puppet para automação de datacenters, em conjunto com o movimento DevOps.&lt;/p&gt;
&lt;p&gt;Hoje temos muitos cases interessantes surgindo, participamos de projetos muito bacanas, e em breve vamos buscar autorização para divulgá-los.&lt;/p&gt;
&lt;p&gt;Como parceiros da Puppetlabs, nós já realizamos alguns treinamentos em São Paulo e em Brasília em 2014, agora nós temos mais algumas turmas autorizadas e confirmadas pela Puppetlabs para o segundo semestre, acompanhe.&lt;/p&gt;
&lt;h3 id=&#34;brasíliadf&#34;&gt;Brasília/DF&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;7, 8 e 9 de Outubro - Puppet Fundamentals&lt;/li&gt;
&lt;li&gt;2, 3 e 4 de Dezembro - Puppet Fundamentals&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;são-paulosp&#34;&gt;São Paulo/SP&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;28, 29 e 30 de Outubro - Puppet Fundamentals&lt;/li&gt;
&lt;li&gt;09, 10 e 11 de Dezembro - Puppet Fundamentals&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O Curso é fundamental para aqueles administradores que querem conhecer e entender o Puppet de maneira prática e direta, durante o curso o aluno fará exercícios, irá construir módulos e vai acompanhar laboratórios e demonstrações realizados pelo instrutor, o curso tem um equílibro único em relação ao conteúdo teórico e prático,  proporcionando experiências reais e fornecendo informações suficientes para que o aluno implante o Puppet com segurança em seu ambiente após o treinamento.&lt;/p&gt;
&lt;p&gt;Em São Paulo o instrutor do Fundamentals será o especialista Miguel Filho, co-fundador da comunidade Puppet-BR, primeiro certificado da América Latina e uma das principais autoridades em Puppet na América do Sul.&lt;/p&gt;
&lt;p&gt;Em Brasília eu serei o instrutor das turmas de Puppet Fundamentals :)&lt;/p&gt;
&lt;p&gt;Para mais informações acesse o calendário da &lt;a href=&#34;http://www.instruct.com.br/calendario.html&#34;&gt;Instruct&lt;/a&gt; e se inscreva no site para receber a ementa e outros dados do treinamento.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet na RubyConf 2014</title>
      <link>https://archives.gutocarvalho.net/post/2014-08-27-puppet-na-rubyconf-2014/</link>
      <pubDate>Wed, 27 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-08-27-puppet-na-rubyconf-2014/</guid>
      <description>&lt;p&gt;Amanhã (2014-08-27) às 11 horas, teremos uma palestra de Puppet na RubyConf 2014, o palestrante será o Miguelzinho (Miguel Filho), ele vai demonstrar para o público formas eficientes de estender o Puppet utilizando a linguagem Ruby.&lt;/p&gt;
&lt;p&gt;O Miguel está participando do evento como embaixador da Puppetlabs no Brasil.&lt;/p&gt;
&lt;p&gt;Acompanhe a grade no link abaixo:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.rubyconf.com.br/pt-BR/schedule&#34;&gt;http://www.rubyconf.com.br/pt-BR/schedule&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A palestra será transmitida no site do evento ao vivo:&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.rubyconf.com.br/pt-BR&#34;&gt;http://www.rubyconf.com.br/pt-BR&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O Miguel é um sysadmin veterano com mais de 11 anos de experiência, é entusiasta da cultura devops, especialista em ambientes linux/unix e autoridade na automação de datacenters com Puppet no Brasil.&lt;/p&gt;
&lt;p&gt;Ele ajudou a fundar a comunidade Puppet-BR, foi o primeiro profissional puppet certificado da América Latina - logo também foi o primeiro no Brasil, ele atualmente é instrutor de cursos oficiais Puppetlabs e um dos principais parceiros da Puppetlabs em nosso país.&lt;/p&gt;
&lt;p&gt;Aproveite a oportunidade e assista a palestra online.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet no PGDAY 2014</title>
      <link>https://archives.gutocarvalho.net/post/2014-08-27-puppet-no-pgday-2014/</link>
      <pubDate>Wed, 27 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-08-27-puppet-no-pgday-2014/</guid>
      <description>&lt;p&gt;Parece que esse ano o Puppet estará presente nos principais eventos de TI do Brasil, acabo de saber que teremos uma apresentação de Puppet para administração de bases PostgreSQL no PGDAY Campinas 2014.&lt;/p&gt;
&lt;p&gt;A palestra vai acontecer no dia 10 de Setembro de 2014 em Campinas/SP. Na grade a informação é que será às 15 horas e ainda não sabemos se haverá transmição online.&lt;/p&gt;
&lt;p&gt;Site do evento &lt;a href=&#34;http://pgdaycampinas.com.br&#34;&gt;http://pgdaycampinas.com.br&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O Palestrante será o Miguel Filho e eu também estarei por lá prestigiando.&lt;/p&gt;
&lt;p&gt;O Miguel é um sysadmin veterano com mais de 11 anos de experiência, é entusiasta da cultura devops, especialista em ambientes linux/unix e autoridade na automação de datacenters com Puppet no Brasil.&lt;/p&gt;
&lt;p&gt;Ele ajudou a fundar a comunidade Puppet-BR, foi o primeiro profissional puppet certificado da América Latina - logo também foi o primeiro no Brasil, ele atualmente é instrutor de cursos oficiais Puppetlabs e um dos principais parceiros da Puppetlabs em nosso país.&lt;/p&gt;
&lt;p&gt;Aproveite a oportunidade e assista a palestra online.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando PHP 5.4 com pacotes SCL do CentOS 6</title>
      <link>https://archives.gutocarvalho.net/post/2014-08-07-instalando-php-5-dot-4-com-pacotes-scl-do-centos-6/</link>
      <pubDate>Thu, 07 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-08-07-instalando-php-5-dot-4-com-pacotes-scl-do-centos-6/</guid>
      <description>&lt;p&gt;No CentOS existe um repositório chamado &lt;a href=&#34;http://wiki.centos.org/AdditionalResources/Repositories/SCL&#34;&gt;SCL&lt;/a&gt; (Software Collections) que nos oferece alguns conjuntos de pacotes de softwares em versões mais recentes para instalação em nosso CentOS 6, o PHP 5.4 é um deles.&lt;/p&gt;
&lt;p&gt;Veja as coleções disponíveis no SCL&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ruby 1.9.3 (ruby193)&lt;/li&gt;
&lt;li&gt;Python 2.7 (python27)&lt;/li&gt;
&lt;li&gt;Python 3.3 (python33)&lt;/li&gt;
&lt;li&gt;PHP 5.4 (php54)&lt;/li&gt;
&lt;li&gt;Perl 5.16.3 (perl516)&lt;/li&gt;
&lt;li&gt;Node.js 0.10 (nodejs010)&lt;/li&gt;
&lt;li&gt;MariaDB 5.5 (mariadb55)&lt;/li&gt;
&lt;li&gt;MySQL 5.5 (mysql55)&lt;/li&gt;
&lt;li&gt;PostgreSQL 9.2 (postgresql92)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O SCL tem um funcionamento bastante particular, não basta apenas instalar o pacote é necessário saber utilizar o SCL para usar as versões mais novas de sofwares, acompanhe o passo a passo para entender o processo.&lt;/p&gt;
&lt;p&gt;Para instalar esse repositório e habilitá-lo rode o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install centos-release-SCL
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois de habilitar pesquise pelos pacotes que deseja instalar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum search php54
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
============================================================ N/S Matched: php54 =============================================================
php54.x86_64 : Package that installs php54
php54-runtime.x86_64 : Package that handles php54 Software Collection.
php54-apc-panel.noarch : APC control panel
php54-build.x86_64 : Package shipping basic build configuration
php54-php.x86_64 : PHP scripting language for creating dynamic web sites
php54-php-bcmath.x86_64 : A module for PHP applications for using the bcmath library
php54-php-cli.x86_64 : Command-line interface for PHP
php54-php-common.x86_64 : Common files for PHP
php54-php-dba.x86_64 : A database abstraction layer module for PHP applications
php54-php-devel.x86_64 : Files needed for building PHP extensions
php54-php-enchant.x86_64 : Enchant spelling extension for PHP applications
php54-php-fpm.x86_64 : PHP FastCGI Process Manager
php54-php-gd.x86_64 : A module for PHP applications for using the gd graphics library
php54-php-imap.x86_64 : A module for PHP applications that use IMAP
php54-php-intl.x86_64 : Internationalization extension for PHP applications
php54-php-ldap.x86_64 : A module for PHP applications that use LDAP
php54-php-mbstring.x86_64 : A module for PHP applications which need multi-byte string handling
php54-php-mysqlnd.x86_64 : A module for PHP applications that use MySQL databases
php54-php-odbc.x86_64 : A module for PHP applications that use ODBC databases
php54-php-pdo.x86_64 : A database access abstraction module for PHP applications
php54-php-pear.noarch : PHP Extension and Application Repository framework
php54-php-pecl-apc.x86_64 : APC caches and optimizes PHP intermediate code
php54-php-pecl-apc-devel.x86_64 : APC developer files (header)
php54-php-pecl-memcache.x86_64 : Extension to work with the Memcached caching daemon
php54-php-pgsql.x86_64 : A PostgreSQL database module for PHP
php54-php-process.x86_64 : Modules for PHP script using system process interfaces
php54-php-pspell.x86_64 : A module for PHP applications for using pspell interfaces
php54-php-recode.x86_64 : A module for PHP applications for using the recode library
php54-php-snmp.x86_64 : A module for PHP applications that query SNMP-managed devices
php54-php-soap.x86_64 : A module for PHP applications that use the SOAP protocol
php54-php-tidy.x86_64 : Standard PHP module provides tidy library support
php54-php-xml.x86_64 : A module for PHP applications which use XML
php54-php-xmlrpc.x86_64 : A module for PHP applications which use the XML-RPC protocol
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Depois podemos instalar o php54 e suas dependências conforme necessidade de seu projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install php54.x86_64 php54-php-ldap.x86_64 php54-php-gd.x86_64 php54-php-pear.noarch
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja que se rodarmos o comando abaixo veremos que o php ainda continua na versão 5.3.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;php -v
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;PHP 5.3.3 (cli) (built: Dec 11 2013 03:29:57)
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Para utilizarmos um software SCL precisamos chamá-lo da seguinte forma&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;scl enable php54 &amp;quot;php -v&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;PHP 5.4.16 (cli) (built: Dec 11 2013 16:55:27)
Copyright (c) 1997-2013 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Contudo, caso deseje que o PHP54 seja realmente o PHP default de sua sessão rode este comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;source /opt/rh/php54/enable
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora verifique&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;php -v
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;PHP 5.4.16 (cli) (built: Dec 11 2013 16:55:27)
Copyright (c) 1997-2013 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Isso só vai valer para sua sessão portanto você precisa configurar suas variáveis de ambiente para chamar esse comando durante o logon ou inicialização de algum serviço.&lt;/p&gt;
&lt;p&gt;No caso do apache tem um jeito mais fácil, podemos instalar o pacote abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install php54-php.x86_64
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após instalar o pacote, remova os arquivo &lt;strong&gt;php5.conf&lt;/strong&gt; e &lt;strong&gt;php5.load&lt;/strong&gt; do diretório /etc/httpd/conf.d mantendo apenas o arquivo php54-php.conf neste diretório, após o ajuste reinicie o apache.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;service httpd restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com isso você estará rodando seu site com o php 5.4.16 em seu CentOS 6 com pacotes oficiais.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>módulo puppetlabs-apache no centos 6 com php54 scl</title>
      <link>https://archives.gutocarvalho.net/post/2014-08-07-modulo-puppetlabs-apache-no-centos-6-com-php54-scl/</link>
      <pubDate>Thu, 07 Aug 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-08-07-modulo-puppetlabs-apache-no-centos-6-com-php54-scl/</guid>
      <description>&lt;p&gt;Se você viu o post anterior sobre pacotes do repositório &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/08/07/instalando-php-5-dot-4-com-pacotes-scl-do-centos-6/&#34;&gt;SCL&lt;/a&gt;, e se você utiliza o Puppet para gerenciar seu apache e php, provavelmente deve estar pensando em como integrar as duas coisas.&lt;/p&gt;
&lt;p&gt;O módulo puppetlabs-apache trabalha com o pacote php padrão do CentOS 6, neste caso esse php encontra-se na versão 5.3.3. Manter os dois PHPs no ambiente não é problema, o conflito só vai ocorrer no carregamento do php para uso do apache, o módulo puppetlabs-apache cria os arquivos /etc/httpd/conf.d/php5.conf e /etc/httpd/conf.d/php5.conf que fazem referência ao PHP 5.3.3 em seu sistema, isso vai conflitar com o arquivo php54.conf que o pacote php54-php cria no mesmo diretório.&lt;/p&gt;
&lt;p&gt;Para resolver essa questão, a primeira coisa a fazer é a atualização do seu módulo puppetlabs-apache do puppet para versão mais recente, esta versão aceita parametrização nos módulos do apache, com ele poderemos passar como parâmetro o nome do pacote do php e o path para o arquivo .so que desejamos utilizar.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet module upgrade puppetlabs-apache
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois disto remova a linha abaixo na configuração do seu node no puppet&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;include apache::mod::php
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora adicione o bloco de código abaixo no lugar acertando corretamente os valores para os atributos package_name e path.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class {&#39;apache::mod::php&#39;:
	package_name =&amp;gt; &amp;quot;php54-php&amp;quot;,
	path         =&amp;gt; &amp;quot;/opt/rh/php54/root/usr/lib64/httpd/modules/libphp5.so&amp;quot;,
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Remova qualquer outro arquivo que carregue o php5 no diretório /etc/httpd/conf.d mantendo apenas php5.conf e php5.load que são gerenciados pelo puppet, rode o puppet no node diretamente.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com isso seu puppet continua gerenciando os pacotes do apache e do php e você continua utilizando as versão 5.4 do PHP através do repositório SCL do CentOS.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>apache ntlm_auth permission denied</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-24-apache-ntlm-auth-permission-denied/</link>
      <pubDate>Thu, 24 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-24-apache-ntlm-auth-permission-denied/</guid>
      <description>&lt;p&gt;Há alguns posts eu mostrei uma configuração de SELINUX para permitir a conexão em rede do &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/07/01/apache-modproxy-permission-denied/&#34;&gt;apache&lt;/a&gt; quando este está utilizando proxy AJP com SELINUX ligado, hoje vou mostrar uma dica similar.&lt;/p&gt;
&lt;p&gt;Em um recém instalado CentOS 6.x eu estava trabalhando com a autenticação NTLM com WINBIND e recebi o seguinte erro nos logs do apache httpd.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[Thu Jul 24 13:09:13 2014] [error] [client 10.10.2.55] (13)Permission denied: couldn&#39;t spawn child ntlm helper process: /usr/bin/ntlm_auth
[Thu Jul 24 13:09:13 2014] [error] [client 10.10.2.55] (13)Permission denied: couldn&#39;t spawn child ntlm helper process: /usr/bin/ntlm_auth
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ao consultar o log audit do selinux também encontrava uma restrição.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type=AVC msg=audit(1406218179.251:2302): avc:  denied  { read open } for  pid=24206 comm=&amp;quot;httpd&amp;quot; name=&amp;quot;ntlm_auth&amp;quot; dev=dm-0 ino=16475 scontext=unconfined_u:system_r:httpd_t:s0 tcontext=system_u:object_r:winbind_helper_exec_t:s0 tclass=file
type=SYSCALL msg=audit(1406218179.251:2302): arch=c000003e syscall=59 success=yes exit=0 a0=7f81190eceb8 a1=7f81190ecea0 a2=7fffc633ddb0 a3=7fffc633daf0 items=0 ppid=23043 pid=24206 auid=511 uid=48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(none) ses=316 comm=&amp;quot;ntlm_auth&amp;quot; exe=&amp;quot;/usr/bin/ntlm_auth&amp;quot; subj=unconfined_u:system_r:httpd_t:s0 key=(null)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Para contornar o problema de forma definitiva é necessário informar ao selinux que esse tipo de autenticação está permitida no sistema.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setsebool -P allow_httpd_mod_auth_ntlm_winbind 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com isso, sua autenticação irá funcionar.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>resetando senha de root do mysql server</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-24-resetando-senha-de-root-do-mysql-server/</link>
      <pubDate>Thu, 24 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-24-resetando-senha-de-root-do-mysql-server/</guid>
      <description>&lt;p&gt;As vezes a gente começa um novo projeto e precisa dar manutenção em um ambiente não documentado, e na maioria das vezes, você não tem nem mesmo as senhas de administração do banco mysql registradas, e precisa se virar para cuidar do ambiente e atender seus chamados.&lt;/p&gt;
&lt;p&gt;Recentemente eu passei por isto e precisei quebrar a senha de root de alguns servidores MYSQL do meu novo cliente, abaixo segue o passo a passo, resumido, direto ao ponto, de como fiz, espero que possa ajudar alguém ;)&lt;/p&gt;
&lt;p&gt;Acesse o sevidor&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ssh servidor –l usuario
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se torne root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sudo -i
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pare o mysql server&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# /etc/init.d/mysqld stop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o mysql em modo safe&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# mysqld_safe --skip-grant-tables &amp;amp;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse o mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a base mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql&amp;gt; use mysql;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Troque a senha do usuário root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql&amp;gt; update user set password=PASSWORD(&amp;quot;senha&amp;quot;) where User=&#39;root&#39;;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Saia do mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysq&amp;gt; exit
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pare o mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# /etc/init.d/mysql stop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o mysql da forma normal&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# /etc/init.d/mysql start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse o MYSQL com a senha que voce especificou&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# mysql –u root –p
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Execute os grants necessários para atender seus tickets&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql&amp;gt; grant SELECT on base.* to usuario@10.1.30.xxx identified by &#39;senha&#39;;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rode um flush nos privilégios&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysq&amp;gt; flush privileges;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Saia do mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysq&amp;gt; exit;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça logout do root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# exit
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça logout do servidor&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ exit
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, o MYSQL agora está sob seu controle.&lt;/p&gt;
&lt;p&gt;Eu particularmente recomendo que você faça isso via Puppet, veja o &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/03/26/utilizando-modulo-puppetlabs-mysql/&#34;&gt;post&lt;/a&gt; que eu abordo como gerenciar o MYSQL com Puppet, porém, essas dicas são sempre importantes ;)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet 3.6.x allow_virtual warning</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-14-puppet-3-dot-6-x-allow-virtual-warning/</link>
      <pubDate>Mon, 14 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-14-puppet-3-dot-6-x-allow-virtual-warning/</guid>
      <description>&lt;p&gt;Se você atualizou seu Puppet para a versão 3.6.x, possivelmente deve ter recebido o warning abaixo quando executa o puppet agent.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Warning: The package type&#39;s allow_virtual parameter will be changing its default value from false to true in a future release. If you do not want to allow virtual packages, please explicitly set allow_virtual to false.
   (at /usr/lib/ruby/site_ruby/1.8/puppet/type.rb:816:in `set_default&#39;)

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Esse warning informa que o parâmetro allow_virtual passará a ser true nas releases futuras do puppet. Caso deseje desativar esse recurso, você deverá fazê-lo de forma explícita no arquivo &lt;strong&gt;site.pp&lt;/strong&gt;.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;if versioncmp($::puppetversion,&#39;3.6.1&#39;) &amp;gt;= 0 {

  Package {
    allow_virtual =&amp;gt; false,
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Site HTTPS e HTTP com modulo puppetlabs-apache</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-14-site-https-e-http-com-modulo-puppetlabs-apache/</link>
      <pubDate>Mon, 14 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-14-site-https-e-http-com-modulo-puppetlabs-apache/</guid>
      <description>&lt;p&gt;Abaixo um exemplo de como configurar um vhost https e http através do módulo puppetlabs-apache do puppet.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; apache::vhost { &#39;piwik.xxx.gov.br-ssl&#39;:
                servername    =&amp;gt; &#39;piwik.xxx.gov.br&#39;,
                port          =&amp;gt; &#39;443&#39;,
                ssl           =&amp;gt; true,
                docroot       =&amp;gt; &#39;/var/www/html/piwik&#39;,
                docroot_owner =&amp;gt; &#39;apache&#39;,
                docroot_group =&amp;gt; &#39;apache&#39;,
}

apache::vhost { &#39;piwik.xxx.gov.br-non-ssl&#39;:
                servername    =&amp;gt; &#39;piwik.xxx.gov.br&#39;,
                port          =&amp;gt; &#39;80&#39;,
                docroot       =&amp;gt; &#39;/var/www/html/piwik&#39;,
                docroot_owner =&amp;gt; &#39;apache&#39;,
                docroot_group =&amp;gt; &#39;apache&#39;,
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe que o título da definição foi modificado, no caso de uma definição os títulos devem ser sempre diferentes para podermos aplicar a definição mais de uma vez em um mesmo node.&lt;/p&gt;
&lt;p&gt;Caso você &lt;strong&gt;não&lt;/strong&gt; especifice o parâmetro &lt;strong&gt;servername&lt;/strong&gt;, o título da definição é utilizado como &lt;strong&gt;servername&lt;/strong&gt;, contudo, se deseja oferecer um site tanto em HTTP quanto em HTTPs, é necessário modificar os títulos afim de diferenciar os recursos e declarar o parâmetro &lt;strong&gt;servername&lt;/strong&gt; de forma explícita.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>JBOSS NTLM auth com apache e winbind</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-04-jboss-ntlm-auth-com-apache-e-winbind/</link>
      <pubDate>Fri, 04 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-04-jboss-ntlm-auth-com-apache-e-winbind/</guid>
      <description>&lt;p&gt;Recentemente comecei um projeto em um cliente novo em Brasília, este cliente tinha alguns ambientes legados que utilizam autenticação NTLM no JBOSS usando o APACHE + MOD_WINBIND + SAMBA + WINBIND + KERBEROS.&lt;/p&gt;
&lt;p&gt;É uma configuração que eu não escolheria devido a sua complexidade, mas é o que o cliente tem, e é o que funciona para ele hoje, portanto, criei uma VM limpa e testei o conceito, aproveitando para documentar já que não existia documentação.&lt;/p&gt;
&lt;p&gt;Eu particularmente utilizaria algo mais simples como APACHE + MOD_KERBEROS + KERBEROS, e espero poder cobrir isso em um post em breve assim que migrarmos esse modelo antigo de autenticação.&lt;/p&gt;
&lt;p&gt;A VM em que testei roda o CentOS 6.5, 64 bits, criei a VM utilizando vagrant e virtualbox com uma box da puppetlabs.&lt;/p&gt;
&lt;p&gt;O JBOSS utilizado para este teste é o 4.0.5.GA.&lt;/p&gt;
&lt;h3 id=&#34;1-instalação&#34;&gt;1. instalação&lt;/h3&gt;
&lt;h4 id=&#34;11-installsamba&#34;&gt;1.1 install::samba&lt;/h4&gt;
&lt;p&gt;instale o samba e suas dependências&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install samba samba-client samba-winbind samba-winbind-krb5-locator
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;12-installkerberos&#34;&gt;1.2 install::kerberos&lt;/h4&gt;
&lt;p&gt;instale o kerberos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; yum install krb5-libs krb5-workstation
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;13-installapache&#34;&gt;1.3 install::apache&lt;/h4&gt;
&lt;p&gt;instale o apache para utilizarmos como reverse proxy e camada de autenticação&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; yum install httpd httpd-devel
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;14-installmod_ntlm&#34;&gt;1.4. install::mod_ntlm&lt;/h4&gt;
&lt;p&gt;nao use o pacote da distribuição, ele por alguma razão não funcionou nos meus testes, tive que usar o módulo do git.samba.org mesmo.&lt;/p&gt;
&lt;h5 id=&#34;fazendo-download&#34;&gt;fazendo download&lt;/h5&gt;
&lt;p&gt;voce pode fazer o download do módulo já compilado se desejar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /tmp
wget http://gutocarvalho.net/misc/jboss4/mod_auth_ntlm_winbind.so
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;acerte a permissão&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod 755 mod_auth_ntlm_winbind.so 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie o binário para o destino&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp mod_auth_ntlm_winbind.so  /usr/lib64/httpd/modules
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;compilando&#34;&gt;compilando&lt;/h5&gt;
&lt;p&gt;caso não queria usar o binário, compile a partir do fonte, para isto acesse o diretório temporário&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /tmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie um diretório chamado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir ntlm
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no diretório ntlm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ntlm
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;pegue o modulo no repositório svn&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; git clone git://git.samba.org/jerry/mod_auth_ntlm_winbind.git 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;compile o módulo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; gcc mod_auth_ntlm_winbind.c
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale o módulo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apxs2 -DAPACHE2 -c -i mod_auth_ntlm_winbind.c
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;o arquivo do módulo será instalado em&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; /usr/lib64/httpd/modules/mod_auth_ntlm_winbind.so
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;15-installjava&#34;&gt;1.5 install::java&lt;/h4&gt;
&lt;p&gt;instale o java, ele é dependência para o funcionamento do JBOSS&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install java-1.6.0-openjdk
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;16-installjboss&#34;&gt;1.6 install::jboss&lt;/h4&gt;
&lt;p&gt;entre no diretório opt&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /opt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;faça download do jboss4&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://gutocarvalho.net/misc/jboss4/jboss-4.0.5.GA.zip
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;descompacte o jboss&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar zxvf jboss-4.0.5.GA.zip
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o grupo jboss&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;groupadd jboss
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o usuário jboss&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;useradd -s /bin/bash -g jboss jboss
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste a permissão&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chown -R jboss.jboss /opt/jboss-4.0.5.GA
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie um link simbólico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -s /opt/jboss /opt/jboss-4.0.5.GA
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;2-configuração&#34;&gt;2. configuração&lt;/h3&gt;
&lt;h4 id=&#34;21-configsamba&#34;&gt;2.1 config::samba&lt;/h4&gt;
&lt;p&gt;entre no diretório do samba&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; cd /etc/samba
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;edite o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vim /etc/samba/smb.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;adicione o código abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[global]
workgroup = XXXXX
realm = XXXXX.GOV.BR
preferred master = no
security = ADS
encrypt passwords = yes
winbind separator = \\
idmap uid = 10000-20000
idmap gid = 10000-20000
 
[homes]
valid users = %S
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;22-configkerberos&#34;&gt;2.2 config::kerberos&lt;/h4&gt;
&lt;p&gt;entre no diretório /etc&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /etc/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;edite o arquivo krb5.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/krb5.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;adicione o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[logging]
default = FILE:/var/log/krb5libs.log
kdc = FILE:/var/log/krb5kdc.log
admin_server = FILE:/var/log/kadmind.log
 
[libdefaults]
default_realm = XXX.GOV.BR
 
# dns_lookup_realm = true
# dns_lookup_kdc = false
[realms]
XXX.GOV.BR = {
  kdc = yyy.xxx.gov.br
        }
 
[domain_realms]
        .xxx.gov.br = XXX.GOV.BR
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;23-configapache&#34;&gt;2.3 config::apache&lt;/h4&gt;
&lt;p&gt;acesse o diretório /etc/httpd/conf.d/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /etc/httpd/conf.d/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;edite o arquivo aplicacao.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/httpd/conf.d/aplicacao.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;adicione o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;LoadModule auth_ntlm_winbind_module modules/mod_auth_ntlm_winbind.so

        ProxyPass /app   ajp://10.10.2.106:8009/app
       
        &amp;lt;Location /app&amp;gt;
                AuthName &amp;quot;XXX&amp;quot;
                NTLMAuth on
                NTLMAuthHelper &amp;quot;/usr/bin/ntlm_auth --helper-protocol=squid-2.5-ntlmssp&amp;quot;
                NTLMBasicAuthoritative on
                AuthType NTLM
                Require valid-user
                NegotiateAuth on
                NegotiateAuthHelper &amp;quot;/usr/bin/ntlm_auth --helper-protocol=gss-spnego&amp;quot;
                AuthType Negotiate
        &amp;lt;/Location&amp;gt;

        ErrorLog /var/log/httpd/jboss4-error.log
        ServerSignature Off

&amp;lt;/VirtualHost&amp;gt;

 
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;24-configjboss&#34;&gt;2.4 config::jboss&lt;/h4&gt;
&lt;p&gt;acesse o diretório do jbossweb&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; cd /opt/jboss/server/default/deploy/jbossweb-tomcat55.sar
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;edite o arquivo server.xml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim server.xml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;altere as configurações de AJP para que a autenticação NTLM funcione, mude de&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;!-- A AJP 1.3 Connector on port 8009 --&amp;gt;
      &amp;lt;Connector port=&amp;quot;8009&amp;quot; address=&amp;quot;${jboss.bind.address}&amp;quot;
         emptySessionPath=&amp;quot;true&amp;quot; enableLookups=&amp;quot;false&amp;quot; redirectPort=&amp;quot;8443&amp;quot;
         protocol=&amp;quot;AJP/1.3&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;para&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;!-- A AJP 1.3 Connector on port 8009 --&amp;gt;
      &amp;lt;Connector port=&amp;quot;8009&amp;quot; address=&amp;quot;${jboss.bind.address}&amp;quot;
         emptySessionPath=&amp;quot;true&amp;quot; enableLookups=&amp;quot;false&amp;quot; tomcatAuthentication=&amp;quot;false&amp;quot; redirectPort=&amp;quot;8443&amp;quot;
         protocol=&amp;quot;AJP/1.3&amp;quot;/&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Crie o arquivo de init do jboss em /etc/init.d, esse arquivo foi retirado do módulo puppet-example42-jboss, ajuste a linha 31 com o ip correto da sua máquima.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/sh
# File Managed by Puppet

# jboss        Startup script for JBoss Instance default
#
# chkconfig: - 85 15
# description: Jboss is an Application Server

### BEGIN INIT INFO
# Provides:          jboss
# Required-Start:    $local_fs $remote_fs $network
# Required-Stop:     $local_fs $remote_fs $network
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start/stop jboss service
### END INIT INFO

# define where jboss is - this is the directory containing directories log, bin, conf etc
JBOSS_HOME=${JBOSS_HOME:-&amp;quot;/opt/jboss&amp;quot;}

# define the user under which jboss will run, or use &#39;RUNASIS&#39; to run as the current user
JBOSS_USER=${JBOSS_USER:-&amp;quot;jboss&amp;quot;}

# make sure java is in your path
JAVAPTH=${JAVAPTH:-&amp;quot;/usr/local/jdk/bin&amp;quot;}

# configuration to use, usually one of &#39;minimal&#39;, &#39;default&#39;, &#39;all&#39;
JBOSS_CONF=${JBOSS_CONF:-&amp;quot;default&amp;quot;}

# if JBOSS_HOST specified, use -b to bind jboss services to that address
JBOSS_BIND_ADDR=${JBOSS_HOST:-&amp;quot;-b 10.10.2.73&amp;quot;}

# define the classpath for the shutdown class
JBOSSCP=${JBOSSCP:-&amp;quot;$JBOSS_HOME/bin/shutdown.jar:$JBOSS_HOME/client/jnet.jar&amp;quot;}

# define the script to use to start jboss
JBOSSSH=${JBOSSSH:-&amp;quot;$JBOSS_HOME/bin/run.sh -c $JBOSS_CONF $JBOSS_BIND_ADDR&amp;quot;}

# Lock and Pid files
LOCKFILE=/var/lock/jboss
PIDFILE=/var/run/jboss.pid

if [ &amp;quot;$JBOSS_USER&amp;quot; = &amp;quot;RUNASIS&amp;quot; ]; then
  SUBIT=&amp;quot;&amp;quot;
else
  SUBIT=&amp;quot;su - $JBOSS_USER -c &amp;quot;
fi

if [ -n &amp;quot;$JBOSS_CONSOLE&amp;quot; -a ! -d &amp;quot;$JBOSS_CONSOLE&amp;quot; ]; then
  # ensure the file exists
  touch $JBOSS_CONSOLE
  if [ ! -z &amp;quot;$SUBIT&amp;quot; ]; then
    chown $JBOSS_USER $JBOSS_CONSOLE
  fi
fi

if [ -n &amp;quot;$JBOSS_CONSOLE&amp;quot; -a ! -f &amp;quot;$JBOSS_CONSOLE&amp;quot; ]; then
  echo &amp;quot;WARNING: location for saving console log invalid: $JBOSS_CONSOLE&amp;quot;
  echo &amp;quot;WARNING: ignoring it and using /dev/null&amp;quot;
  JBOSS_CONSOLE=&amp;quot;/dev/null&amp;quot;
fi

#define what will be done with the console log
JBOSS_CONSOLE=${JBOSS_CONSOLE:-&amp;quot;/dev/null&amp;quot;}

# Jboss Start command
# Custom, per instance, run.conf configured via Puppet
JBOSS_CMD_START=&amp;quot;cd $JBOSS_HOME/bin; $JBOSSSH&amp;quot;


if [ -z &amp;quot;`echo $PATH | grep $JAVAPTH`&amp;quot; ]; then
  export PATH=$PATH:$JAVAPTH
fi

if [ ! -d &amp;quot;$JBOSS_HOME&amp;quot; ]; then
  echo JBOSS_HOME does not exist as a valid directory : $JBOSS_HOME
  exit 1
fi


status () {
  pslist=$( ps -ef | fgrep run.sh | fgrep java | fgrep $JBOSS_USER | fgrep default | awk &#39;{print $2}&#39; | tr &#39;\n&#39; &#39; &#39; | sed -e s/\ $// )
  if [ -n &amp;quot;$pslist&amp;quot; ]; then
    echo &amp;quot;jboss (pid $pslist) is running result: 0&amp;quot;
    return 0
  fi
  if [ -f $PIDFILE ]; then
    echo &amp;quot;jboss dead but pid file exists result: 1&amp;quot;
    return 1
  fi
  if [ -f $LOCKFILE ]; then
    echo &amp;quot;jboss dead but subsys locked result: 2&amp;quot;
    return 2
  fi
  echo &amp;quot;jboss is stopped result: 3&amp;quot;
  return 3
}

start () {
  if [ -f $LOCKFILE ]; then
    status
    exit
  fi
  cd $JBOSS_HOME/bin
  echo JBOSS_CMD_START = $JBOSS_CMD_START
  if [ -z &amp;quot;$SUBIT&amp;quot; ]; then
    eval $JBOSS_CMD_START &amp;gt;${JBOSS_CONSOLE} 2&amp;gt;&amp;amp;1 &amp;amp;
    if [ &amp;quot;$?&amp;quot; -eq 0 ]; then
      touch $LOCKFILE
    fi
  else
    $SUBIT &amp;quot;$JBOSS_CMD_START &amp;gt;${JBOSS_CONSOLE} 2&amp;gt;&amp;amp;1 &amp;amp;&amp;quot;
    if [ &amp;quot;$?&amp;quot; -eq 0 ]; then
      touch $LOCKFILE
    fi
  fi
}

stop () {
  [ &amp;quot;$1&amp;quot; -eq &amp;quot;$1&amp;quot; ] 2&amp;gt; /dev/null &amp;amp;&amp;amp; timeout=$1 || timeout=0
  pslist=$( ps -ef | fgrep run.sh | fgrep java | fgrep $JBOSS_USER | fgrep default | awk &#39;{print $2}&#39; | tr &#39;\n&#39; &#39; &#39; | sed -e s/\ $// )
  if [ ! -z &amp;quot;$pslist&amp;quot; ]; then
    kill $pslist
    seconds=0
    while [ &amp;quot;$(ps -A -o pid= | grep -q $pslist ; echo $?)&amp;quot; = &amp;quot;0&amp;quot; ]; do
      echo &amp;quot;JBoss still running...&amp;quot;
      sleep 1
      seconds=$(expr $seconds + 1)
      if [ $seconds -ge $timeout ] &amp;amp;&amp;amp; [ $timeout -gt 0 ]
       then
        kill -9 $pslist
        break
      fi
    done
    rm -f $LOCKFILE
    echo &amp;quot;JBoss stopped!&amp;quot;
  fi
}

case &amp;quot;$1&amp;quot; in
start)
    start
    ;;
stop)
    stop $2
    ;;
restart)
    stop $2
    start
    ;;
status)
    status
    ;;
*)
    echo &amp;quot;usage: $0 (start|stop [timeout in seconds]|restart [timeout in seconds]|status|help)&amp;quot;
esac

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;3-pós-configuração&#34;&gt;3. pós configuração&lt;/h3&gt;
&lt;h4 id=&#34;31-posconfigsamba&#34;&gt;3.1 posconfig::samba&lt;/h4&gt;
&lt;p&gt;ative o samba no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chkconfg smb on
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;reinicie o samba&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; service smb restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;coloque a maquina no domínio&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; net ads join -U usuário
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;obtenha um ticket kerberos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; kinit usuario.sobrenome
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;edite /etc/nsswitch.conf e modifique&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;passwd: compat
group: compat
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;para&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;passwd: compat winbind
group: compat winbind    
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;32-posconfigapache&#34;&gt;3.2 posconfig::apache&lt;/h4&gt;
&lt;p&gt;ative a autenticação ntlm no selinux (caso ele esteja ativado)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setsebool -P allow_httpd_mod_auth_ntlm_winbind on
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ative o boleando para permitir o funcionamento do proxy no apache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setsebool -P httpd_can_network_connect 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;adicione o apache ao grupo do winbind&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; gpasswd -a apache wbpriv
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ative o httpd no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; chkconfig httpd on
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;reinicie o httpd&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; service httpd restart
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;33-posconfigjboss&#34;&gt;3.3 posconfig::jboss&lt;/h4&gt;
&lt;p&gt;ajuste a permissão do script de inicialização do jboss&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod 755 /etc/init.d/jboss
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ative o jboss no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chkconfig jboss on
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;inicie o jboss&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/jboss start
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;4-testes&#34;&gt;4. testes&lt;/h3&gt;
&lt;h4 id=&#34;41-testesntlm_auth&#34;&gt;4.1 testes::ntlm_auth&lt;/h4&gt;
&lt;p&gt;teste a autenticação localmente para garantir que está funcionando.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/usr/bin/ntlm_auth --username usuario --domain=XXX
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;52-testesjboss&#34;&gt;5.2 testes::jboss&lt;/h4&gt;
&lt;p&gt;Faça o deploy de uma aplicação como por exemplo o ntlmtest e verifique se  a autenticação NTLM está funcionando.&lt;/p&gt;
&lt;p&gt;Esse último passo é bastante particular da sua aplicação, o apache só vai permtir que usuários válidos acessem o /app, contudo, como sua aplicação vai utilizar as credenciais é contigo e com sua app ;)&lt;/p&gt;
&lt;h3 id=&#34;6-referências&#34;&gt;6. referências&lt;/h3&gt;
&lt;p&gt;Oficiais&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://httpd.apache.org/docs/&#34;&gt;http://httpd.apache.org/docs/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://jbossas.jboss.org/docs&#34;&gt;http://jbossas.jboss.org/docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.samba.org/samba/docs/man/Samba3-HOWTO/&#34;&gt;http://www.samba.org/samba/docs/man/Samba3-HOWTO/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://web.mit.edu/kerberos/&#34;&gt;http://web.mit.edu/kerberos/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Oficiais específicos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://web.mit.edu/kerberos/krb5-latest/doc/admin/conf_files/krb5_conf.html&#34;&gt;http://web.mit.edu/kerberos/krb5-latest/doc/admin/conf_files/krb5_conf.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/winbind.html&#34;&gt;https://www.samba.org/samba/docs/man/Samba-HOWTO-Collection/winbind.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.tldp.org/HOWTO/html_single/Kerberos-Infrastructure-HOWTO/&#34;&gt;http://www.tldp.org/HOWTO/html_single/Kerberos-Infrastructure-HOWTO/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Outros&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://bloke.org/linux/ntlm-authentication-active-directory-on-apache-linux/&#34;&gt;http://bloke.org/linux/ntlm-authentication-active-directory-on-apache-linux/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://adldap.sourceforge.net/wiki/doku.php?id=mod_auth_ntlm_winbind&#34;&gt;http://adldap.sourceforge.net/wiki/doku.php?id=mod_auth_ntlm_winbind&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Fundamentals em Brasilia</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-04-puppet-fundamentals-em-brasilia/</link>
      <pubDate>Fri, 04 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-04-puppet-fundamentals-em-brasilia/</guid>
      <description>&lt;p&gt;Trago uma boa novidade para o pessoal de Brasília, conseguimos abrir uma turma para o treinamento Puppet Fundamentals na cidade.&lt;/p&gt;
&lt;p&gt;Este treinamento normalmente ocorre em São Paulo, mas como Brasília tem se mostrado muito aberta ao Puppet, com franca adoção em várias áreas e esferas do governo, nada mais justo do que a cidade sediar um dos treinamentos oficiais.&lt;/p&gt;
&lt;p&gt;O treinamento vai ocorrer entre 29 e 31 de Julho.&lt;/p&gt;
&lt;p&gt;O instrutor ainda está sendo definido, poderá ser o Miguel Filho ou eu mesmo.&lt;/p&gt;
&lt;p&gt;Para mais informações acesse esse &lt;a href=&#34;http://www.instruct.com.br/cadastro-treinamento.html&#34;&gt;link.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Mount cifs invalid block device</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-03-mount-cifs-invalid-block-device/</link>
      <pubDate>Thu, 03 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-03-mount-cifs-invalid-block-device/</guid>
      <description>&lt;p&gt;Recentemente instalei algumas VMS com CentOS 6.5 x86.64 - instalação mínima. Estes servidores precisavam montar alguns compartilhamentos de servidores windows. No FSTAB eu fiz a configuração dos pontos de montagem, alguns dos compartilhamentos montaram normalmente, outros apresentaram o seguinte problema quando eu tentava montar.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mount /mnt/share 
//ip-do-servidor/share is not a valid block device
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Na hora não fez muito sentido, afinal outros compartilhamentos CIFS haviam montado, mas este não. Após alguma pesquisa descobri que para montar compartilhamentos cifs em versões mais recentes do Windows é necessário ter o pacote cifs-utils instalado no CentOS.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install cifs-utils
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feito isto consegui montar o compartilhamento com sucesso. Fica a dica!&lt;/p&gt;
&lt;h2 id=&#34;referências&#34;&gt;Referências:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.centos.org/TipsAndTricks/WindowsShares&#34;&gt;http://wiki.centos.org/TipsAndTricks/WindowsShares&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tutcenter.com/linux/centos/centos-mount-valid-block-device/&#34;&gt;http://tutcenter.com/linux/centos/centos-mount-valid-block-device/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Apache modproxy permission denied</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-01-apache-modproxy-permission-denied/</link>
      <pubDate>Tue, 01 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-01-apache-modproxy-permission-denied/</guid>
      <description>&lt;p&gt;Estava eu configurando um proxy para o jboss utilizando o apache httpd e me deparei com um erro chato de permission denied nos logs, algo bastante incomum.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Tue Jul 01 11:50:08 2014] [error] (13)Permission denied: proxy: AJP: attempt to connect to 10.10.2.106:5009 (10.10.2.106) failed
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No JBOSS estava tudo normal, nada de errado nos logs, conseguia entrar na aplicação diretamente, então iniciei um pente fino no /var/log e ao analisar o log de audit percebi que era algo relacionado ao selinux, sim ele está ligado em meus servidores&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;type=SYSCALL msg=audit(1404226208.904:588): arch=c000003e syscall=42 success=no exit=-13 a0=e a1=7f6f107d5460 a2=10 a3=7fff72be7030 items=0 ppid=12161 pid=12285 auid=503 uid=48 gid=48 euid=48 suid=48 fsuid=48 egid=48 sgid=48 fsgid=48 tty=(none) ses=11 comm=&amp;quot;httpd&amp;quot; exe=&amp;quot;/usr/sbin/httpd&amp;quot; subj=unconfined_u:system_r:httpd_t:s0 key=(null)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após alguma pesquisa entendi que com selinux ligado, é necessário ativar um boleano para permitir que o apache se conecte a outro host da minha rede, mesmo que seja localmente, então executei o comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setsebool httpd_can_network_connect 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após o comando o proxy comecou a funcionar, mas para definir que essa configuração é permamante devemos utilizar a flag -P&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setsebool -P httpd_can_network_connect 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Fica a dica!&lt;/p&gt;
&lt;h2 id=&#34;referências&#34;&gt;Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://sysadminsjourney.com/content/2010/02/01/apache-modproxy-error-13permission-denied-error-rhel/&#34;&gt;http://sysadminsjourney.com/content/2010/02/01/apache-modproxy-error-13permission-denied-error-rhel/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress invalid byte sequence</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-01-octopress-invalid-byte-sequence/</link>
      <pubDate>Tue, 01 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-01-octopress-invalid-byte-sequence/</guid>
      <description>&lt;p&gt;Após reinstalar meu mavericks, eu me deparei com um problema estranho ao rodar rake generate no octopress, veja abaixo o erro.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;jekyll/convertible.rb:29:in `read_yaml&#39;: invalid byte sequence in US-ASCII (ArgumentError)
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/gems/jekyll-0.11.2/lib/jekyll/post.rb:39:in `initialize&#39;
	from /Users/gutocarvalho/Dropbox/@github/blog/plugins/preview_unpublished.rb:23:in `new&#39;
	from /Users/gutocarvalho/Dropbox/@github/blog/plugins/preview_unpublished.rb:23:in `block in read_posts&#39;
	from /Users/gutocarvalho/Dropbox/@github/blog/plugins/preview_unpublished.rb:21:in `each&#39;
	from /Users/gutocarvalho/Dropbox/@github/blog/plugins/preview_unpublished.rb:21:in `read_posts&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/gems/jekyll-0.11.2/lib/jekyll/site.rb:128:in `read_directories&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/gems/jekyll-0.11.2/lib/jekyll/site.rb:98:in `read&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/gems/jekyll-0.11.2/lib/jekyll/site.rb:38:in `process&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/gems/jekyll-0.11.2/bin/jekyll:250:in `&amp;lt;top (required)&amp;gt;&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/bin/jekyll:23:in `load&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/bin/jekyll:23:in `&amp;lt;main&amp;gt;&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/bin/ruby_executable_hooks:15:in `eval&#39;
	from /Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/bin/ruby_executable_hooks:15:in `&amp;lt;main&amp;gt;&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Por alguma razão o meu locale estava setado para C.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;LANG=
LC_COLLATE=&amp;quot;C&amp;quot;
LC_CTYPE=&amp;quot;C&amp;quot;
LC_MESSAGES=&amp;quot;C&amp;quot;
LC_MONETARY=&amp;quot;C&amp;quot;
LC_NUMERIC=&amp;quot;C&amp;quot;
LC_TIME=&amp;quot;C&amp;quot;
LC_ALL=
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Fiz um ajuste para en_US.UTF-8&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;export LC_CTYPE=en_US.UTF-8
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tentei novamente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake generate
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;## Generating Site with Jekyll
unchanged sass/screen.scss
/Users/gutocarvalho/.rvm/gems/ruby-1.9.3-p547/gems/maruku-0.6.0/lib/maruku/input/parse_doc.rb:22:in `&amp;lt;top (required)&amp;gt;&#39;: iconv will be deprecated in the future, use String#encode instead.
Configuration from /Users/gutocarvalho/Dropbox/@github/blog/_config.yml
Building site: source -&amp;gt; public/octopress
Successfully generated site: source -&amp;gt; public/octopress
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;E o problema foi solucionado, fica a dica!&lt;/p&gt;
&lt;h2 id=&#34;referências&#34;&gt;Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/imathis/octopress/issues/144&#34;&gt;https://github.com/imathis/octopress/issues/144&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Powerline shell no osx</title>
      <link>https://archives.gutocarvalho.net/post/2014-07-01-powerline-shell-no-osx/</link>
      <pubDate>Tue, 01 Jul 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-07-01-powerline-shell-no-osx/</guid>
      <description>&lt;p&gt;Eu já falei da &lt;a href=&#34;http://gutocarvalho.net/octopress/2013/01/28/usando-vim-com-powerline/&#34;&gt;powerline&lt;/a&gt; aqui no blog, mas naquela ocasião era para uso interno no vim, recentemente passei a utilizar a powerline no bash através do projeto &lt;a href=&#34;https://github.com/milkbikis/powerline-shell&#34;&gt;powerline shell&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A instalação é rápida e fácil, logue no console e digite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cd ~
$ git clone https://github.com/milkbikis/powerline-shell
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos instalar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ./install.py
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, agora vamos criar um link simbólico.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ln -s ~/powerline-shell/powerline-shell.py ~/powerline-shell.py
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feito isto vamos configurar nosso arquivo .bash_profile&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ vim ~/.bash_profile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione estas linhas ao início do arquivo e comente qualquer configuração da variável PS1 que existir no arquivo.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;function _update_ps1() {
	export PS1=&amp;quot;$(~/powerline-shell.py $? 2&amp;gt; /dev/null)&amp;quot;
	}

export PROMPT_COMMAND=&amp;quot;_update_ps1; $PROMPT_COMMAND&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Recarregue o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ source .bash_profile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, sua powerline estará funcionando.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2014-07-01/powerline_shell.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Powerline Shells]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Listas</title>
      <link>https://archives.gutocarvalho.net/post/2014-06-15-listas/</link>
      <pubDate>Sun, 15 Jun 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-06-15-listas/</guid>
      <description>&lt;p&gt;Tenho o prazer de anunciar algumas novas listas de discussão ptbr :)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://groups.google.com/forum/#!forum/br-devops&#34;&gt;https://groups.google.com/forum/#!forum/br-devops&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://groups.google.com/forum/#!forum/br-vagrant&#34;&gt;https://groups.google.com/forum/#!forum/br-vagrant&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://groups.google.com/forum/#!forum/br-docker&#34;&gt;https://groups.google.com/forum/#!forum/br-docker&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://groups.google.com/forum/#!forum/mcollective-br&#34;&gt;https://groups.google.com/forum/#!forum/mcollective-br&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Participe ;)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Palestra Mcollective no CISL</title>
      <link>https://archives.gutocarvalho.net/post/2014-06-12-palestra-mcollective-no-cisl/</link>
      <pubDate>Thu, 12 Jun 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-06-12-palestra-mcollective-no-cisl/</guid>
      <description>&lt;p&gt;No dia 10 de Junho de 2014 eu ministrei uma palestra sobre orquestração com Mcollective no SERPRO/CISL em Brasília ;)&lt;/p&gt;
&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/35795243&#34; width=&#34;597&#34; height=&#34;486&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;&#34; allowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;https://www.slideshare.net/GutoCarvalho/mcollective-cisl&#34; title=&#34;Orquestração com Mcollective&#34; target=&#34;_blank&#34;&gt;Orquestração com Mcollective&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;iframe width=&#34;597&#34; height=&#34;486&#34; src=&#34;http://www.youtube.com/embed/Lf-uNvFcGfc&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Webinar Puppet Modules</title>
      <link>https://archives.gutocarvalho.net/post/2014-06-12-webinar-puppet-modules/</link>
      <pubDate>Thu, 12 Jun 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-06-12-webinar-puppet-modules/</guid>
      <description>&lt;p&gt;Ontem eu apresentei um webinar da puppetlabs/instruct acerca de Módulos do Puppet, o webinar fez uma introdução sobre módulos, mostrou como funcionam, qual sua estrutura, quais as vantagens de usar módulos, falou do PuppetForge e houve uma demonstração rápida de uso de módulo do forge.&lt;/p&gt;
&lt;p&gt;Abaixo os slides do webinar&lt;/p&gt;
&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/35797892&#34; width=&#34;597&#34; height=&#34;486&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;&#34; allowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;https://www.slideshare.net/GutoCarvalho/trabalhando-com-mdulos-no-puppet&#34; title=&#34;Trabalhando com Módulos no Puppet&#34; target=&#34;_blank&#34;&gt;Trabalhando com Módulos no Puppet&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>osx configurando hostname</title>
      <link>https://archives.gutocarvalho.net/post/2014-06-08-osx-configurando-hostname/</link>
      <pubDate>Sun, 08 Jun 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-06-08-osx-configurando-hostname/</guid>
      <description>&lt;p&gt;Muita gente acha que a única forma de trocar o hostname no OSX é através do System Preferences/Sharing/Computer Name, por experiência isso nem sempre funciona para o hostname, afinal isto é o &amp;ldquo;Computer Name&amp;rdquo;, o que não é a mesma coisa que &amp;ldquo;Hostname&amp;rdquo; para o OSX, pesquisando descobri que há uma forma mais fácil e eficaz de trocar o hostname através do console, acompanhe.&lt;/p&gt;
&lt;h2 id=&#34;1-configurando&#34;&gt;1. Configurando&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;sudo scutil --set HostName hostname.local
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Você deve trocar hostname pelo nome do seu computador e local pode ser trocado pelo nome do seu domínio caso esteja em um ambiente corporativo. Depois de basta digitar hostname para conferir se funcionou.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hostname 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feche seu programa de terminal, abra novamente e confira o resultado, vai funcionar :)&lt;/p&gt;
&lt;p&gt;Fica a dica!&lt;/p&gt;
&lt;h2 id=&#34;2-referências&#34;&gt;2. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.psyrendust.com/2008/05/23/change-the-hostname-in-mac-os-x-osx/&#34;&gt;http://blog.psyrendust.com/2008/05/23/change-the-hostname-in-mac-os-x-osx/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>ssh com multiplas chaves no osx</title>
      <link>https://archives.gutocarvalho.net/post/2014-06-08-osx-ssh-multiplas-chaves/</link>
      <pubDate>Sun, 08 Jun 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-06-08-osx-ssh-multiplas-chaves/</guid>
      <description>&lt;p&gt;Uma das formas mais interessantes, práticas e seguras de acessar um host por ssh é fazer isto através de chaves, o processo de configuração de chaves é rápido e eficiente, contudo, muita gente tem dúvida de como utilizar múltiplas chaves, abaixo vou mostrar como fazer isto.&lt;/p&gt;
&lt;h3 id=&#34;1-gerando-chaves&#34;&gt;1. Gerando chaves&lt;/h3&gt;
&lt;p&gt;Estou utilizando OSX Mavericks para esse exemplo. Abra seu terminal para começarmos a gerar a primeira chave, por exemplo para o provedor dreamhost.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh-keygen
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Digite o local e nome da chave quando consultado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/Users/gutocarvalho/.ssh/dreamhost
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Especifique uma senha em formato de frase (passphrase), não use senhas em branco.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Generating public/private rsa key pair.
Enter file in which to save the key (/Users/gutocarvalho/.ssh/id_rsa): /Users/gutocarvalho/.ssh/dreamhost
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /Users/gutocarvalho/.ssh/dreamhost.
Your public key has been saved in /Users/gutocarvalho/.ssh/dreamhost.pub.
The key fingerprint is:
3a:21:f4:9b:12:6c:0f:4f:87:d7:ce:1a:f0:e3:2b:b2 gutocarvalho@kaiten.local
The key&#39;s randomart image is:
+--[ RSA 2048]----+
|                 |
|                 |
|    .            |
|   o . . .       |
|    * * S .      |
|   . B X o       |
|    . B + o      |
|    ...o +       |
|    Eo .+.       |
+-----------------+
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos criar uma segunda chave para outro provedor, por exemplo digitalocean.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh-keygen
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Digite o local e nome da chave quando consultado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/Users/gutocarvalho/.ssh/digitalocean
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Especifique uma senha em formato de frase, não use senhas em branco.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Generating public/private rsa key pair.
Enter file in which to save the key (/Users/gutocarvalho/.ssh/id_rsa): /Users/gutocarvalho/.ssh/digitalocean
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /Users/gutocarvalho/.ssh/digitalocean.
Your public key has been saved in /Users/gutocarvalho/.ssh/digitalocean.pub.
The key fingerprint is:
a0:34:03:59:c5:59:12:13:af:85:a3:1c:eb:18:08:f0 gutocarvalho@kaiten.local
The key&#39;s randomart image is:
+--[ RSA 2048]----+
|. .o.o*=.        |
|....  o=         |
|. E = + o        |
|.. o B =         |
|. . = . S        |
|   +             |
|  . .            |
|                 |
|                 |
+-----------------+
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;2-configurando-acessos&#34;&gt;2. Configurando acessos&lt;/h3&gt;
&lt;p&gt;Maravilha, as duas chaves foram criadas, agora vamos criar o arquivo &lt;strong&gt;config&lt;/strong&gt; dentro de &lt;strong&gt;/Users/gutocarvalho/.ssh&lt;/strong&gt; em seu OSX, é neste arquivo que vamos configurar qual chave deve ser utilizada para cada host, veja o exemplo.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Host dreamhost
	HostName gutocarvalho.net
	PreferredAuthentications publickey
	IdentityFile ~/.ssh/dreamhost
	User gutocarvalho

Host digitalocean
	HostName mesintogravida.com.br
	PreferredAuthentications publickey
	IdentityFile ~/.ssh/digitalocean
	User gutocarvalho
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;3-autorizando-acessos&#34;&gt;3. Autorizando acessos&lt;/h3&gt;
&lt;p&gt;Agora acesse o host de destino gutocarvalho.net e adicione o conteúdo do arquivo gutocarvalho.pub - que foi criado no OSX - ao arquivo /home/gutocarvalho/.ssh/authorized_keys do servidor remoto (dreamhost), o conteúdo da chave púbica será algo assim&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDOTGdNlaMrOtUTpKsWyhM3h0Hw4Kym2mtIO95pxZN8JKCMHTb9xn2ZqA87wTPDHXYQVDNYHyZMiRrTX+dYQcGx+d+W9qZncxWPZtrqOyxWIT9WrTn4M40nFTB0tyBD+0XnD8WZdef5L+/wueRqC+T8zLgZb6peHSkGWuj2tdnf/LcGzZ7CgK6r0yVSUFxCEFr9wtYx0rtV0rovTwHJVpvv8jbA9N8QFfA7WCv/Xtz3UpJL1tuj0/IN+VPXyHYKU9u9fq28U1lU3MfPR3nVayQyh+Ddp6ZzKLW2PwmSRdth/6BTYSdQ+9OiwQxYj3A+QsXcJ3M6UNPTuOcLFuTTvFJJ gutocarvalho@domain
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois acesse o segundo host de destino (digitalocean), aqui no exemplo mesintogravida.com.br e faça o mesmo procedimento, desta vez com o conteúdo do arquivo mesintogravida.pub criado no OSX.&lt;/p&gt;
&lt;p&gt;Se o arquivo já existir, apenas acrescente a linha.&lt;/p&gt;
&lt;p&gt;Após criar ou modificar o arquivo, inserindo a chave pública, deslogue do servidor.&lt;/p&gt;
&lt;h3 id=&#34;4-testando-acessos&#34;&gt;4. Testando acessos&lt;/h3&gt;
&lt;p&gt;Agora vamos tentar acessar o servidor&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh dreamhost
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se tudo der certo o OSX vai pedir a senha da chave, digite a senha e ela será salva no chaveiro (keychain), uma vez no keychain, a senha não será solicitada em futuros acessos.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Last login: Sun Jun  8 03:34:36 2014 from 191.176.xxx.xxx
[gutocarvalho.net]$
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;mais um teste&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssh digitalocean
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Last login: Sun Jun  8 05:34:36 2014 from 191.176.xxx.xxx
[mesintogravida.com.br]$
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Beleza, funcionou perfeitamente.&lt;/p&gt;
&lt;h3 id=&#34;5-conferindo-permissões&#34;&gt;5. Conferindo Permissões&lt;/h3&gt;
&lt;p&gt;As chaves privadas devem ter permissão 600.&lt;/p&gt;
&lt;p&gt;As chaves públicas devem ter permissão 644.&lt;/p&gt;
&lt;p&gt;O arquivo authorized_keys deve ter permissão 600.&lt;/p&gt;
&lt;p&gt;Se as permissões não estiverem corretas nestes arquivos o acesso por chaves não vai funcionar.&lt;/p&gt;
&lt;h3 id=&#34;6-referências&#34;&gt;6. Referências&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.openbsd.org/cgi-bin/man.cgi?query=ssh_config&amp;amp;sektion=5&#34;&gt;http://www.openbsd.org/cgi-bin/man.cgi?query=ssh_config&amp;amp;sektion=5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://nerderati.com/2011/03/simplify-your-life-with-an-ssh-config-file/&#34;&gt;http://nerderati.com/2011/03/simplify-your-life-with-an-ssh-config-file/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix/&#34;&gt;http://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>macbook pro fn keys</title>
      <link>https://archives.gutocarvalho.net/post/2014-06-06-macbook-pro-fn-keys/</link>
      <pubDate>Fri, 06 Jun 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-06-06-macbook-pro-fn-keys/</guid>
      <description>&lt;p&gt;Por alguma razão misteriosa a combinação de teclas FN + setas não está mais funcionando no OSX Mavericks.&lt;/p&gt;
&lt;p&gt;Não consigo utilizar page-up (FN + seta para cima), page-down (FN + seta pra baixo) end (FN + seta direita) e home (FN + seta esquerda ) e isto está me incomodando muito, já pesquisei bastante, vi vários contornos, mas ainda não encontrei solução definitiva.&lt;/p&gt;
&lt;p&gt;Tem alguma ideia? Comente e ajude a resolver :)&lt;/p&gt;
&lt;p&gt;2014-08-03 UPDATE: Quando conecto meu teclado mac wifi as teclas funcionam, muito estranho.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>A busca por novos caminhos</title>
      <link>https://archives.gutocarvalho.net/post/2014-05-13-a-busca-por-novos-caminhos/</link>
      <pubDate>Tue, 13 May 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-05-13-a-busca-por-novos-caminhos/</guid>
      <description>&lt;p&gt;Pensamentos soltos com origem no #‎twitter, levemente ajustados, sobre o manifesto (&lt;a href=&#34;http://t.co/m7j2iLfn8C&#34;&gt;http://t.co/m7j2iLfn8C&lt;/a&gt;) acerca do FISL e seus participantes.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Eu uso iPhone, iPad e Macbook Pro, eu uso Linux, Unix, BSDs, eu uso Windows, uso software opesource, uso free software e também uso software proprietário, e meu amigo, eu sou feliz assim e tenho tudo o que eu preciso na hora que eu preciso.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;E por usar tantas soluções diferentes que proporcionam uma diversidade de linguagens, licenças e paradigmas, creio que o FISL deixa de ser - pelo menos para mim - algo interessante, hoje eu me encanto mais com eventos como PuppetConf, RubyConf, CfgMgt Camp, H2H, DevCamp, TDD dentre outros.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu já vivi e militei intensamente pelo movimento SL, fiz parte de PSLs, GULs, organizei eventos, participei de eventos, dei palestras, mas em algum momento isso me limitou, eu queria ir além disto.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu acredito que a minha sede de aprender, conhecer, entender, experimentar seja mais forte do que ficar preso em uma única e utópica ideologia ou filosofia.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu ainda acredito que a sociedade só vai evoluir compartilhando, e acredito que informação e o conhecimento devam ser livres e mutantes.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu ainda acho que o movimento open source é fantástico, uso centenas de soluções e contribuo da forma que posso para alguns projetos, continuo compartilhando conhecimento através de palestras, blogs, github, do jeito que eu consigo no tempo livre que disponho.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu não deixo de usar ou adquirir uma boa solução de software por ela não ser opensource ou algo mais restritivo como free software.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu geralmente participava do FISL para rever amigos, ver novidades, compartilhar conhecimento através de uma palestra, por o papo em dia, gostava de fazer um networking, mas confesso que não me sinto mais a vontade naquele ambiente.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu não me sinto a vontade pois sei que serei julgado pelas minhas escolhas de hardware e software, mesmo estando no lugar em que a liberdade de escolha deveria ser o mais importante.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eu mudei, e talvez seja por isto que o FISL não seja mais o que eu busco, e pelo que vejo sei que não estou sozinho nisto.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Por hora a ordem do dia é começar a buscar eventos mais técnicos e menos ideológicos, sorte ao FISL, sucesso na conquista de novos entusiastas, mas meu caminho agora é outro, bem mais amplo e bem mais livre, pelo menos nas escolhas, é hora de renovar idéias e ideais.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vagrant com Provisioner Puppet Apply</title>
      <link>https://archives.gutocarvalho.net/post/2014-05-13-vagrant-com-provisioner-puppet-apply/</link>
      <pubDate>Tue, 13 May 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-05-13-vagrant-com-provisioner-puppet-apply/</guid>
      <description>&lt;h2 id=&#34;1-provisioners&#34;&gt;1. Provisioners&lt;/h2&gt;
&lt;p&gt;Após a introdução ao &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/05/09/entenda-o-vagrant/&#34;&gt;vagrant&lt;/a&gt; fizemos uma rápida passagem pelo conceito de &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/05/12/vagrant-multi-machines/&#34;&gt;multi machines&lt;/a&gt; para então entrarmos em &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/05/12/provisionando-com-vagrant/&#34;&gt;provisionamento&lt;/a&gt;, começamos com provisionamento em &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/05/12/provisionando-com-vagrant/&#34;&gt;shell&lt;/a&gt; e agora vamos falar de Puppet e Vagrant.&lt;/p&gt;
&lt;p&gt;Como eu já disse a vocês, o vagrant tem suporte a diversos provisionadores, isto significa que você pode automatizar a instalação e configuração de sua VM, tornando isto parte do processo &lt;strong&gt;vagrant up&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;O vagrant atualmente suporta os seguintes provisionadores&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;File&lt;/li&gt;
&lt;li&gt;Shell&lt;/li&gt;
&lt;li&gt;Ansible&lt;/li&gt;
&lt;li&gt;CFEngine&lt;/li&gt;
&lt;li&gt;Chef Solo&lt;/li&gt;
&lt;li&gt;Chef Client&lt;/li&gt;
&lt;li&gt;Docker&lt;/li&gt;
&lt;li&gt;Puppet Apply&lt;/li&gt;
&lt;li&gt;Puppet Agent&lt;/li&gt;
&lt;li&gt;Salt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Eu vou abordar neste post o provisionamento &lt;strong&gt;Puppet Apply&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;11-requisitos&#34;&gt;1.1 Requisitos&lt;/h3&gt;
&lt;p&gt;É importante que você tenha executado os exemplos nos posts anteriores e criado o projeto lamp, este post é uma sequência e vai utilizar os arquivos e projetos criados anteriormente.&lt;/p&gt;
&lt;p&gt;É importante que você tenha o puppet instalado em suas VMs, como eu utilizei a VM da Puppetlabs não precisarei instalar, mas verifique e se preciso instale nas VMS.&lt;/p&gt;
&lt;p&gt;Entre no diretório do projeto lamp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ~/vagrant/projects/lamp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos em frente&lt;/p&gt;
&lt;h2 id=&#34;2-puppet-apply&#34;&gt;2. Puppet Apply&lt;/h2&gt;
&lt;p&gt;Basicamente temos duas formas de usar o Puppet, vamos ver a primeira forma que não necessita de um puppet master, com o comando apply podemos aplicar nossos manifests localmente.&lt;/p&gt;
&lt;h3 id=&#34;21-ambiente-e-estrutura&#34;&gt;2.1 Ambiente e estrutura&lt;/h3&gt;
&lt;p&gt;Por padrão o vagrant vai procurar os manifests do puppet no diretório manifests dentro do diretório do projeto, em nosso caso seria&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/~/vagrant/projects/lamp/manifests
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Então para começarmos, vamos criar esse diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p /~/vagrant/projects/lamp/manifest
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Outro detalhe interessante é que ele vai procurar por padrão o arquivo &lt;strong&gt;default.pp&lt;/strong&gt; no diretório manifests. Caso queira utilizar outro diretório ou outro arquivo padrão basta especificar o path e arquivo através das diretivas &lt;strong&gt;manifest_file&lt;/strong&gt; e &lt;strong&gt;manifest_path&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;22-declarando-provisioner&#34;&gt;2.2 Declarando provisioner&lt;/h3&gt;
&lt;p&gt;Abaixo a sintaxe de configuração do provisioner&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.provision &amp;quot;puppet&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A configuração acima é suficiente para aplicar algo a sua VM, mas isso só vai acontecer se o diretório manifest e arquivo default.pp existirem.&lt;/p&gt;
&lt;p&gt;Vamos criar o arquivo default.pp com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class utils {

	package { &#39;iptraf&#39;:
		ensure =&amp;gt; present,
	}

}

include utils

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;E agora vamos adicionar o provisioner ao Vagrantfile do projeto lamp&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  # Apache
  config.vm.define &amp;quot;apache&amp;quot; do |apache|

    apache.vm.hostname = &amp;quot;apache.hacklab&amp;quot;
    apache.vm.box = &amp;quot;centos6x64&amp;quot;
    apache.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 9090
    apache.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.30&amp;quot;
    
    apache.vm.provision &amp;quot;puppet&amp;quot;
   
    apache.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End apache

  # Mysql
  config.vm.define &amp;quot;mysql&amp;quot; do |mysql|

    mysql.vm.hostname = &amp;quot;mysql.hacklab&amp;quot;
    mysql.vm.box = &amp;quot;centos6x64&amp;quot;
    mysql.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 3306, host: 9091
    mysql.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.31&amp;quot;
    
    mysql.vm.provision &amp;quot;puppet&amp;quot;
   
    mysql.vm.provider &amp;quot;virtualbox&amp;quot; do |y|
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End Mysql

end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Feito o ajuste no Vagrantfile vamos rodar o provision&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant provision
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: Running provisioner: puppet...
Shared folders that Puppet requires are missing on the virtual machine.
This is usually due to configuration changing after already booting the
machine. The fix is to run a `vagrant reload` so that the proper shared
folders will be prepared and mounted on the VM.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que o vagrant não conseguiu provisionar, isto ocorre pois não havia diretório manifest ou arquivo default.pp quando a VM foi iniciada, então ele recomenda um &amp;lsquo;reload&amp;rsquo; para reiniciar suas VMs, vamos fazer isto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Durante o reload vamos receber a seguinte mensagem&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: VM already provisioned. Run `vagrant provision` or use `--provision` to force it
==&amp;gt; mysql: VM already provisioned. Run `vagrant provision` or use `--provision` to force it
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Essa mensagem já é conhecida, vimos no post anterior, ela nos diz que sua máquina já foi provisionada na primeira vez que rodamos o comando &lt;strong&gt;vagrant up&lt;/strong&gt;, é importante entender isto, o provisionamento só é executado quando a VM é criada, no momento do UP, depois o vagrant considera que a VM já foi devidamente provisionada.&lt;/p&gt;
&lt;p&gt;Bom, caso queiramos executar novamente as tarefas de provisionamento, principalmente se elas foram adicionadas após o processo de criação da VM, teremos que ser mais explícitos, então vamos digitar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant provision
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: Running provisioner: puppet...
Running Puppet with default.pp...
Notice: Compiled catalog for apache.hacklab in environment production in 1.32 seconds
Notice: /Stage[main]/Utils/Package[iptraf]/ensure: created
Notice: Finished catalog run in 17.60 seconds
==&amp;gt; mysql: Running provisioner: puppet...
Running Puppet with default.pp...
Notice: Compiled catalog for mysql.hacklab in environment production in 1.83 seconds
Notice: /Stage[main]/Utils/Package[iptraf]/ensure: created
Notice: Finished catalog run in 16.68 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Maravilha, o pacote iptraf foi provisionado com sucesso em ambas VMs, vamos seguir estudando.&lt;/p&gt;
&lt;h3 id=&#34;22-personalizando&#34;&gt;2.2 Personalizando&lt;/h3&gt;
&lt;p&gt;Eu prefiro criar um diretório puppet na raiz do meu projeto e dentro dele o diretório manifests, além disto, eu prefiro usar o arquivo &lt;strong&gt;site.pp&lt;/strong&gt; como default, para fazer estes pequenos ajustes a sintaxe no Vagrantfile vai ficar assim&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vm.provision &amp;quot;puppet&amp;quot; do |puppet|
		puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
		puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Vamos ajustar a estrutura de diretórios e arquivos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; mkdir ~/vagrant/projects/lamp/puppet
 cd ~/vagrant/projects/lamp
 mv manifests puppet
 cd puppet/manifests
 mv default.pp site.pp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos ajustar o Vagrantfile do projeto lamp&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-

# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  # Apache
  config.vm.define &amp;quot;apache&amp;quot; do |apache|

    apache.vm.hostname = &amp;quot;apache.hacklab&amp;quot;
    apache.vm.box = &amp;quot;centos6x64&amp;quot;
 
    apache.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 9090
    apache.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.30&amp;quot;
 
    apache.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

    apache.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	    puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	    puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
    end

  end
  # End apache

  # Mysql
  config.vm.define &amp;quot;mysql&amp;quot; do |mysql|

    mysql.vm.hostname = &amp;quot;mysql.hacklab&amp;quot;
    mysql.vm.box = &amp;quot;centos6x64&amp;quot;

    mysql.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 3306, host: 9091
    mysql.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.31&amp;quot;

    mysql.vm.provider &amp;quot;virtualbox&amp;quot; do |y|
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

    mysql.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	    puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	    puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
    end
  end
  # End Mysql

end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Vamos dar um reload para o vagrant ler os novos diretórios&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E quando as máquinas retornarem vamos invocar o provision&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant provision
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: Running provisioner: puppet...
Running Puppet with site.pp...
Notice: Compiled catalog for apache.hacklab in environment production in 2.10 seconds
Notice: Finished catalog run in 1.12 seconds
==&amp;gt; mysql: Running provisioner: puppet...
Running Puppet with site.pp...
Notice: Compiled catalog for mysql.hacklab in environment production in 2.02 seconds
Notice: Finished catalog run in 1.28 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que apesar de termos invocado o puppet nenhuma configuração foi aplicada, isto ocorreu graças a característica idempotente do puppet, o pacote já estava instalado, como o estado do sistema já é o esperado, nada foi feito ;)&lt;/p&gt;
&lt;h3 id=&#34;23-classificando-nodes&#34;&gt;2.3 Classificando Nodes&lt;/h3&gt;
&lt;p&gt;Até agora tudo funcionou perfeitamente, mas se observamos com cuidado, veremos que as duas VMs estão recebendo a mesma configuração do puppet.&lt;/p&gt;
&lt;p&gt;Se quisermos aplicar diferentes configurações em cada VM preciso proceder de outra maneira, neste caso específico temos duas formas de determinar o que será aplicado em cada uma delas.&lt;/p&gt;
&lt;h4 id=&#34;231-manifest-file&#34;&gt;2.3.1 Manifest File&lt;/h4&gt;
&lt;p&gt;Uma das formas mais fáceis de resolver o problema é criar um manifest específico para aquela VM e chamá-lo diretamente através da diretiva &lt;strong&gt;manifest_file&lt;/strong&gt;, veja o exemplo abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
apache.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	puppet.manifest_file  = &amp;quot;apache.pp&amp;quot;
end
...
...
...
mysql.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	puppet.manifest_file  = &amp;quot;mysql.pp&amp;quot;
end
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;É uma forma simples e rápida de separar e determinar as configurações que serão aplicadas	 a cada VM.&lt;/p&gt;
&lt;h4 id=&#34;232-node-name&#34;&gt;2.3.2 Node Name&lt;/h4&gt;
&lt;p&gt;Outra forma de resolver o problema é manter apenas um arquivo e declarar as configurações utilizando a definição node.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
apache.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
end
...
...
...
mysql.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
end
...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que usamos o mesmo arquivo para as duas VMs, contudo a forma de declarar as configurações irá mudar, veja o exemplo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;node &amp;quot;apache.hacklab&amp;quot; {

	bloco de código

}

node &amp;quot;mysql.hacklab&amp;quot; {

	bloco de código

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;É igual ao que fazemos no puppetmaster, só que faremos no esquema serverless, desta forma tudo fica bem organizado e talvez mais elegante, além de exigir menor esforço de edição do Vagrantfile em caso de um projeto multi-machines.&lt;/p&gt;
&lt;h3 id=&#34;24-trabalhando-com-módulos&#34;&gt;2.4 Trabalhando com módulos&lt;/h3&gt;
&lt;p&gt;É possível também trabalhar com módulos normalmente, só precisamos adicionar a diretiva &lt;strong&gt;module_path&lt;/strong&gt; na configuração do provisioner puppet.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet.module_path    = &amp;quot;puppet/modules&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A configuração do provisioner completa ficaria assim:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;config.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	puppet.module_path    = &amp;quot;puppet/modules&amp;quot;
	puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;É necessário criar o diretório modules&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p ~/vagrant/projects/lamp/puppet/modules
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para instalar módulos no diretório que você criou, use o comando puppet module&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet module install usuario/modulo --target-dir ~/vagrant/projects/lamp/puppet/modules
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Dê um reload para ler o diretório modules&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant reload    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O Vagrantfile atualizado ficaria assim&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-

# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  # Apache
  config.vm.define &amp;quot;apache&amp;quot; do |apache|

    apache.vm.hostname = &amp;quot;apache.hacklab&amp;quot;
    apache.vm.box = &amp;quot;centos6x64&amp;quot;
 
    apache.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 9090
    apache.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.30&amp;quot;
 
    apache.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

   apache.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
		puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
       puppet.module_path    = &amp;quot;puppet/modules&amp;quot;
       puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
   end

  end
  # End apache

  # Mysql
  config.vm.define &amp;quot;mysql&amp;quot; do |mysql|

    mysql.vm.hostname = &amp;quot;mysql.hacklab&amp;quot;
    mysql.vm.box = &amp;quot;centos6x64&amp;quot;

    mysql.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 3306, host: 9091
    mysql.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.31&amp;quot;

    mysql.vm.provider &amp;quot;virtualbox&amp;quot; do |y|
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

    mysql.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
	    puppet.manifests_path = &amp;quot;puppet/manifests&amp;quot;
	    puppet.module_path    = &amp;quot;puppet/modules&amp;quot;
	    puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
    end
  end
  # End Mysql

end
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;241-módulo-puppetlabs-apache&#34;&gt;2.4.1 Módulo puppetlabs-apache&lt;/h4&gt;
&lt;p&gt;Vamos instalar o módulo apache da puppetlabs e passar algumas configurações para VM apache.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet module install puppetlabs/apache --target-dir ~/vagrant/projects/lamp/puppet/modules
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos editar o arquivo site.pp e declarar a classe apache e um virtualhost no node apache.hacklab.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class utils {

    package { &#39;iptraf&#39;:
        ensure =&amp;gt; present,
    }

}

node &amp;quot;apache.hacklab&amp;quot; {

	include utils

	include apache

	apache::vhost { &#39;www.hacklab&#39;:
		port    =&amp;gt; &#39;80&#39;,
		docroot =&amp;gt; &#39;/var/www/html&#39;,
	}

}

node &amp;quot;mysql.hacklab&amp;quot; {

	include utils

}

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Feito isto, rode o provision apenas na vm apache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant provision apache
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: Running provisioner: puppet...
Running Puppet with site.pp...
Warning: Config file /etc/puppet/hiera.yaml not found, using Hiera defaults
Notice: Compiled catalog for apache.hacklab in environment production in 14.28 seconds
Notice: /Stage[main]/Concat::Setup/File[/var/lib/puppet/concat]/ensure: created
Notice: /Stage[main]/Concat::Setup/File[/var/lib/puppet/concat/bin]/ensure: created
Notice: /Stage[main]/Concat::Setup/File[/var/lib/puppet/concat/bin/concatfragments.sh]/ensure: defined content as &#39;{md5}e7aaa4c45316eb97d2d88b57334c4060&#39;
Notice: /Stage[main]/Apache::Mod::Mime/Package[mailcap]/ensure: created
Notice: /Stage[main]/Apache/Package[httpd]/ensure: created
Notice: /Stage[main]/Apache::Mod::Mime/Apache::Mod[mime]/File[mime.load]/ensure: defined content as &#39;{md5}e36257b9efab01459141d423cae57c7c&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[expires]/File[expires.load]/ensure: defined content as &#39;{md5}f0825bad1e470de86ffabeb86dcc5d95&#39;
Notice: /Stage[main]/Apache::Mod::Dav/Apache::Mod[dav]/File[dav.load]/ensure: defined content as &#39;{md5}588e496251838c4840c14b28b5aa7881&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authz_owner]/File[authz_owner.load]/ensure: defined content as &#39;{md5}f30a9be1016df87f195449d9e02d1857&#39;
Notice: /Stage[main]/Apache::Mod::Prefork/File[/etc/httpd/conf.d/prefork.conf]/ensure: defined content as &#39;{md5}109c4f51dac10fc1b39373855e566d01&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authz_groupfile]/File[authz_groupfile.load]/ensure: defined content as &#39;{md5}ae005a36b3ac8c20af36c434561c8a75&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authn_dbm]/File[authn_dbm.load]/ensure: defined content as &#39;{md5}90ee8f8ef1a017cacadfda4225e10651&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authz_user]/File[authz_user.load]/ensure: defined content as &#39;{md5}63594303ee808423679b1ea13dd5a784&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[log_config]/File[log_config.load]/ensure: defined content as &#39;{md5}785d35cb285e190d589163b45263ca89&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[logio]/File[logio.load]/ensure: defined content as &#39;{md5}084533c7a44e9129d0e6df952e2472b6&#39;
Notice: /Stage[main]/Apache::Mod::Mime/File[mime.conf]/ensure: defined content as &#39;{md5}2fa646fe615e44d137a5d629f868c107&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[version]/File[version.load]/ensure: defined content as &#39;{md5}1c9243de22ace4dc8266442c48ae0c92&#39;
Notice: /Stage[main]/Apache::Mod::Setenvif/File[setenvif.conf]/ensure: defined content as &#39;{md5}c7ede4173da1915b7ec088201f030c28&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[actions]/File[actions.load]/ensure: defined content as &#39;{md5}599866dfaf734f60f7e2d41ee8235515&#39;
Notice: /Stage[main]/Apache::Mod::Deflate/File[deflate.conf]/ensure: defined content as &#39;{md5}44d54f557a5612be8da04c49dd6da862&#39;
Notice: /Stage[main]/Apache/File[/etc/httpd/conf/httpd.conf]/content: content changed &#39;{md5}27a5c8d9e75351b08b8ca1171e8a0bbd&#39; to &#39;{md5}227b5a08e18b6086ae8b654e142fad67&#39;
Notice: /Stage[main]/Apache::Mod::Negotiation/File[negotiation.conf]/ensure: defined content as &#39;{md5}47284b5580b986a6ba32580b6ffb9fd7&#39;
Notice: /Stage[main]/Apache::Mod::Alias/Apache::Mod[alias]/File[alias.load]/ensure: defined content as &#39;{md5}3cf2fa309ccae4c29a4b875d0894cd79&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[env]/File[env.load]/ensure: defined content as &#39;{md5}d74184d40d0ee24ba02626a188ee7e1a&#39;
Notice: /Stage[main]/Apache::Mod::Negotiation/Apache::Mod[negotiation]/File[negotiation.load]/ensure: defined content as &#39;{md5}d262ee6a5f20d9dd7f87770638dc2ccd&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authz_dbm]/File[authz_dbm.load]/ensure: defined content as &#39;{md5}c1363277984d22f99b70f7dce8753b60&#39;
Notice: /Stage[main]/Apache::Mod::Dir/File[dir.conf]/ensure: defined content as &#39;{md5}c741d8ea840e6eb999d739eed47c69d7&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[usertrack]/File[usertrack.load]/ensure: defined content as &#39;{md5}e95fbbf030fabec98b948f8dc217775c&#39;
Notice: /Stage[main]/Apache::Mod::Vhost_alias/Apache::Mod[vhost_alias]/File[vhost_alias.load]/ensure: defined content as &#39;{md5}eca907865997d50d5130497665c3f82e&#39;
Notice: /Stage[main]/Apache::Mod::Setenvif/Apache::Mod[setenvif]/File[setenvif.load]/ensure: defined content as &#39;{md5}ec6c99f7cc8e35bdbcf8028f652c9f6d&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[auth_basic]/File[auth_basic.load]/ensure: defined content as &#39;{md5}494bcf4b843f7908675d663d8dc1bdc8&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authn_file]/File[authn_file.load]/ensure: defined content as &#39;{md5}d41656680003d7b890267bb73621c60b&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authn_alias]/File[authn_alias.load]/ensure: defined content as &#39;{md5}58fea0bcb12624191c07106c359d1134&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[ext_filter]/File[ext_filter.load]/ensure: defined content as &#39;{md5}76d5e0ac3411a4be57ac33ebe2e52ac8&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[speling]/File[speling.load]/ensure: defined content as &#39;{md5}f82e9e6b871a276c324c9eeffcec8a61&#39;
Notice: /Stage[main]/Apache::Mod::Dir/Apache::Mod[dir]/File[dir.load]/ensure: defined content as &#39;{md5}1bfb1c2a46d7351fc9eb47c659dee068&#39;
Notice: /Stage[main]/Apache::Mod::Dav_fs/Apache::Mod[dav_fs]/File[dav_fs.load]/ensure: defined content as &#39;{md5}2996277c73b1cd684a9a3111c355e0d3&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[include]/File[include.load]/ensure: defined content as &#39;{md5}88095a914eedc3c2c184dd5d74c3954c&#39;
Notice: /Stage[main]/Apache::Mod::Alias/File[alias.conf]/ensure: defined content as &#39;{md5}7c1f62cc583b16885ce93d449df6a3ce&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authn_default]/File[authn_default.load]/ensure: defined content as &#39;{md5}871572d647c4604e3f91c3bed92f496e&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[suexec]/File[suexec.load]/ensure: defined content as &#39;{md5}c7d5c61c534ba423a79b0ae78ff9be35&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[substitute]/File[substitute.load]/ensure: defined content as &#39;{md5}8077c34a71afcf41c8fc644830935915&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[auth_digest]/File[auth_digest.load]/ensure: defined content as &#39;{md5}df9e85f8da0b239fe8e698ae7ead4f60&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authz_default]/File[authz_default.load]/ensure: defined content as &#39;{md5}bda328d6f1ccfb2d51610953a9352eeb&#39;
Notice: /Stage[main]/Apache::Mod::Deflate/Apache::Mod[deflate]/File[deflate.load]/ensure: defined content as &#39;{md5}2d1a1afcae0c70557251829a8586eeaf&#39;
Notice: /Stage[main]/Apache::Mod::Autoindex/Apache::Mod[autoindex]/File[autoindex.load]/ensure: defined content as &#39;{md5}515cdf5b573e961a60d2931d39248648&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authn_anon]/File[authn_anon.load]/ensure: defined content as &#39;{md5}bf57b94b5aec35476fc2a2dc3861f132&#39;
Notice: /Stage[main]/Apache::Mod::Autoindex/File[autoindex.conf]/ensure: defined content as &#39;{md5}2421a3c6df32c7e38c2a7a22afdf5728&#39;
Notice: /Stage[main]/Apache::Mod::Cache/Apache::Mod[cache]/File[cache.load]/ensure: defined content as &#39;{md5}01e4d392225b518a65b0f7d6c4e21d29&#39;
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf]/ensure: created
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments.concat.out]/ensure: created
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments]/ensure: created
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments.concat]/ensure: created
Notice: /Stage[main]/Apache::Mod::Rewrite/Apache::Mod[rewrite]/File[rewrite.load]/ensure: defined content as &#39;{md5}26e2683352fc1599f29573ff0d934e79&#39;
Notice: /Stage[main]/Apache::Default_mods/Apache::Mod[authz_host]/File[authz_host.load]/ensure: defined content as &#39;{md5}d1045f54d2798499ca0f030ca0eef920&#39;
Notice: /Stage[main]/Apache::Mod::Mime_magic/File[mime_magic.conf]/ensure: defined content as &#39;{md5}b258529b332429e2ff8344f726a95457&#39;
Notice: /Stage[main]/Apache::Mod::Mime_magic/Apache::Mod[mime_magic]/File[mime_magic.load]/ensure: defined content as &#39;{md5}cb8670bb2fb352aac7ebf3a85d52094c&#39;
Notice: /Stage[main]/Apache/Apache::Vhost[default]/Apache::Listen[80]/Concat::Fragment[Listen 80]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_Listen 80]/ensure: created
Notice: /Stage[main]/Apache/Apache::Vhost[default]/Apache::Namevirtualhost[*:80]/Concat::Fragment[NameVirtualHost *:80]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_NameVirtualHost *:80]/ensure: created
Notice: /Stage[main]/Apache/Concat::Fragment[Apache ports header]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_Apache ports header]/ensure: created
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/Exec[concat_/etc/httpd/conf/ports.conf]/returns: executed successfully
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/Exec[concat_/etc/httpd/conf/ports.conf]: Triggered &#39;refresh&#39; from 5 events
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/etc/httpd/conf/ports.conf]/ensure: defined content as &#39;{md5}ac3b658e433eba85f350d4068b0ef826&#39;
Notice: /Stage[main]/Apache::Mod::Dav_fs/File[dav_fs.conf]/ensure: defined content as &#39;{md5}899a57534f3d84efa81887ec93c90c9b&#39;
Notice: /Stage[main]/Apache::Mod::Cgi/Apache::Mod[cgi]/File[cgi.load]/ensure: defined content as &#39;{md5}ac20c5c5779b37ab06b480d6485a0881&#39;
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/welcome.conf]/ensure: removed
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/README]/ensure: removed
Notice: /Stage[main]/Apache/Apache::Vhost[default]/File[15-default.conf]/ensure: created
Notice: /Stage[main]/Main/Node[apache.hacklab]/Apache::Vhost[www.hacklab]/File[25-www.hacklab.conf]/ensure: created
Notice: /Stage[main]/Apache::Service/Service[httpd]/ensure: ensure changed &#39;stopped&#39; to &#39;running&#39;
Notice: Finished catalog run in 116.67 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Nosso servidor apache foi provisionado utilizando o módulo apache, agora ele roda o servidor http papache e já tem o vhost www.hacklab configurado&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: /Stage[main]/Apache/Apache::Vhost[default]/File[15-default.conf]/ensure: created
Notice: /Stage[main]/Main/Node[apache.hacklab]/Apache::Vhost[www.hacklab]/File[25-www.hacklab.conf]/ensure: created
Notice: /Stage[main]/Apache::Service/Service[httpd]/ensure: ensure changed &#39;stopped&#39; to &#39;running&#39;
Notice: Finished catalog run in 116.67 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Maravilha, vamos fazer o mesmo para o servidor mysql.&lt;/p&gt;
&lt;h4 id=&#34;242-módulo-puppetlabs-mysql&#34;&gt;2.4.2 Módulo puppetlabs-mysql&lt;/h4&gt;
&lt;p&gt;Seguindo em frente, tal como fizemos no exemplo 2.4.1, vamos utilizar um módulo para provisionar o mysql-server na VM mysql, primeiro vamos instalar o módulo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet module install puppetlabs/mysql --target-dir ~/vagrant/projects/lamp/puppet/modules
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: Preparing to install into /Users/gutocarvalho/vagrant/projects/lamp/puppet/modules ...
Notice: Downloading from https://forge.puppetlabs.com ...
Notice: Installing -- do not interrupt ...
/Users/gutocarvalho/vagrant/projects/lamp/puppet/modules
└── puppetlabs-mysql (v2.2.3)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Reinicie as VMs para ler os novos diretórios&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos ajustar nosso site.pp e declarar algumas configurações para a VM mysql&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class utils {

    package { &#39;iptraf&#39;:
        ensure =&amp;gt; present,
    }

}

node &amp;quot;apache.hacklab&amp;quot; {

	include utils

	include apache

	apache::vhost { &#39;www.hacklab&#39;:
		port    =&amp;gt; &#39;80&#39;,
		docroot =&amp;gt; &#39;/var/www/html&#39;,
	}

}

node &amp;quot;mysql.hacklab&amp;quot; {

	include utils
	
	class { &#39;mysql::server&#39;:

		root_password    =&amp;gt; &#39;suasenha&#39;,

		override_options =&amp;gt; {
			&#39;mysqld&#39; =&amp;gt; {
				&#39;connect_timeout&#39;                 =&amp;gt; &#39;60&#39;,
				&#39;bind_address&#39;                    =&amp;gt; &#39;0.0.0.0&#39;,
				&#39;max_connections&#39;                 =&amp;gt; &#39;100&#39;,
				&#39;max_allowed_packet&#39;              =&amp;gt; &#39;128M&#39;,
				&#39;thread_cache_size&#39;               =&amp;gt; &#39;16&#39;,
				&#39;query_cache_size&#39;                =&amp;gt; &#39;64M&#39;,
			}
		}
	}

	# site www

        mysql::db { &#39;prod_www&#39;:
                user     =&amp;gt; &#39;www_user&#39;,
                password =&amp;gt; &#39;senha_www&#39;,
                host     =&amp;gt; &#39;www.hacklab&#39;,
                grant    =&amp;gt; [&#39;all&#39;],
        }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos provisionar a VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant provision mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;=&amp;gt; mysql: Running provisioner: puppet...
Running Puppet with site.pp...
Warning: Config file /etc/puppet/hiera.yaml not found, using Hiera defaults
Notice: Compiled catalog for mysql.hacklab in environment production in 6.31 seconds
Notice: /Stage[main]/Mysql::Client::Install/Package[mysql_client]/ensure: created
Notice: /Stage[main]/Mysql::Server::Install/Package[mysql-server]/ensure: created
Notice: /Stage[main]/Mysql::Server::Config/File[/etc/mysql]/ensure: created
Notice: /Stage[main]/Mysql::Server::Config/File[/etc/my.cnf]/content: content changed &#39;{md5}8ace886bbe7e274448bc8bea16d3ead6&#39; to &#39;{md5}4f689e5e30c31ecbac3ae64179f74668&#39;
Notice: /Stage[main]/Mysql::Server::Config/File[/etc/mysql/conf.d]/ensure: created
Notice: /Stage[main]/Mysql::Server::Service/Service[mysqld]/ensure: ensure changed &#39;stopped&#39; to &#39;running&#39;
Notice: /Stage[main]/Mysql::Server::Root_password/Mysql_user[root@localhost]/password_hash: defined &#39;password_hash&#39; as &#39;*686FAFB0D22504AC4005869A48377E6056C40F6A&#39;
Notice: /Stage[main]/Mysql::Server::Root_password/File[/root/.my.cnf]/ensure: defined content as &#39;{md5}c51fe9a952a98fdd64ad44e0f4b9e660&#39;
Notice: /Stage[main]/Main/Node[mysql.hacklab]/Mysql::Db[prod_www]/Mysql_database[prod_www]/ensure: created
Notice: /Stage[main]/Main/Node[mysql.hacklab]/Mysql::Db[prod_www]/Mysql_user[www_user@www.hacklab]/ensure: created
Notice: /Stage[main]/Main/Node[mysql.hacklab]/Mysql::Db[prod_www]/Mysql_grant[www_user@www.hacklab/prod_www.*]/ensure: created
Notice: Finished catalog run in 99.14 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Maravilha, a VM mysql foi provisionada, o mysql-server foi instalado, o banco prod_www foi criado, o usuário www_user foi criado e um grant foi aplicado.&lt;/p&gt;
&lt;p&gt;Mais uma vez utilizamos o Puppet e módulos para provisionar uma VM, com sucesso e agilidade.&lt;/p&gt;
&lt;h4 id=&#34;25-compartilhando-diretório-puppet-em-vários-projetos&#34;&gt;2.5. Compartilhando diretório Puppet em vários projetos&lt;/h4&gt;
&lt;h2 id=&#34;7-perguntas-frequentes&#34;&gt;7. Perguntas frequentes&lt;/h2&gt;
&lt;h5 id=&#34;71-posso-usar-mais-de-um-tipo-de-provisioner-ao-mesmo-tempo&#34;&gt;7.1. Posso usar mais de um tipo de provisioner ao mesmo tempo?&lt;/h5&gt;
&lt;p&gt;Pode sim, normalmente as pessoas usam o provisioner SSH para instalar seu gestor de configurações, por exemplo o puppet, e dali para frente utilizam o puppet para configurar a VM.&lt;/p&gt;
&lt;h5 id=&#34;72-posso-alterar-o-defaultpp-e-rodar-o-provision-sem-necessidade-de-reload&#34;&gt;7.2 Posso alterar o default.pp e rodar o provision sem necessidade de reload?&lt;/h5&gt;
&lt;p&gt;Pode, só precisa de reload quando você acabou de criar um arquivo ou diretório, alterações em arquivos existentes são lidas e aplicadas sem necessidade de reload.&lt;/p&gt;
&lt;h2 id=&#34;6-conclusão&#34;&gt;6. Conclusão&lt;/h2&gt;
&lt;p&gt;A relação entre vagrant e puppet é na minha opinião uma união muito equilibrada, conseguimos rapidamente configurar um ambiente e testar uma aplicação. O Puppet tem recursos muito interessantes e vai lhe ajudar a construir ambientes complexos de forma fácil e objetiva.&lt;/p&gt;
&lt;p&gt;O próximo post será sobre o provisionador Puppet Agent, até lá ;)&lt;/p&gt;
&lt;h2 id=&#34;7-referências&#34;&gt;7. Referências&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.vagrantup.com/v2/provisioning/puppet_apply.html&#34;&gt;https://docs.vagrantup.com/v2/provisioning/puppet_apply.html&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Provisionando com Vagrant</title>
      <link>https://archives.gutocarvalho.net/post/2014-05-12-provisionando-com-vagrant/</link>
      <pubDate>Mon, 12 May 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-05-12-provisionando-com-vagrant/</guid>
      <description>&lt;h2 id=&#34;1-provisioners&#34;&gt;1. Provisioners&lt;/h2&gt;
&lt;p&gt;Após a introdução ao &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/05/09/entenda-o-vagrant/&#34;&gt;vagrant&lt;/a&gt; e uma rápida passagem pelo conceito de &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/05/12/vagrant-multi-machines/&#34;&gt;multi machines&lt;/a&gt;, vamos começar a entrar no provisionamento.&lt;/p&gt;
&lt;p&gt;Como eu já disse a vocês, o vagrant tem suporte a diversos provisionadores, isto significa que você pode automatizar a instalação e configuração de sua VM, tornando isto parte do processo &lt;strong&gt;vagrant up&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;O vagrant atualmente suporta os seguintes provisionadores&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;File&lt;/li&gt;
&lt;li&gt;Shell&lt;/li&gt;
&lt;li&gt;Ansible&lt;/li&gt;
&lt;li&gt;CFEngine&lt;/li&gt;
&lt;li&gt;Chef Solo&lt;/li&gt;
&lt;li&gt;Chef Client&lt;/li&gt;
&lt;li&gt;Docker&lt;/li&gt;
&lt;li&gt;Puppet Apply&lt;/li&gt;
&lt;li&gt;Puppet Agent&lt;/li&gt;
&lt;li&gt;Salt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Eu vou abordar neste post o provisionamento &lt;strong&gt;shell&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;11-requisitos&#34;&gt;1.1 Requisitos&lt;/h3&gt;
&lt;p&gt;É importante que você tenha executado os exemplos nos posts anteriores e criado o projeto lamp, este post é uma sequência e vai utilizar os arquivos e projetos criados anteriormente.&lt;/p&gt;
&lt;p&gt;Entre no diretório do projeto lamp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ~/vagrant/projects/lamp
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-shell-provisioner&#34;&gt;2. Shell Provisioner&lt;/h2&gt;
&lt;p&gt;O provisionamento shell pode ser feito de duas formas, a primeira é o chamado INLINE e a segunda EXTERNAL SCRIPT.&lt;/p&gt;
&lt;h3 id=&#34;21-shell-inline&#34;&gt;2.1 Shell INLINE&lt;/h3&gt;
&lt;p&gt;Vamos fazer um exemplo simples em que invoco os comandos abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum clean all
yum install tcpdump -y
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Traduzindo para a sintaxe do vagrant ficaria assim&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vm.provision :shell, :inline =&amp;gt; &amp;quot;yum clean all;yum install tcpdump -y&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos inserir no Vagrantfile do projeto &amp;lsquo;lamp&amp;rsquo;.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  # Apache
  config.vm.define &amp;quot;apache&amp;quot; do |apache|

    apache.vm.hostname = &amp;quot;apache.hacklab&amp;quot;
    apache.vm.box = &amp;quot;centos6x64&amp;quot;
    apache.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 9090
    apache.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.30&amp;quot;
    apache.vm.provision :shell, :inline =&amp;gt; &amp;quot;yum clean all;yum install tcpdump -y&amp;quot;
    apache.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End apache

  # Mysql
  config.vm.define &amp;quot;mysql&amp;quot; do |mysql|

    mysql.vm.hostname = &amp;quot;mysql.hacklab&amp;quot;
    mysql.vm.box = &amp;quot;centos6x64&amp;quot;
    mysql.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 3306, host: 9091
    mysql.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.31&amp;quot;
    mysql.vm.provision :shell, :inline =&amp;gt; &amp;quot;yum clean all;yum install tcpdump -y&amp;quot;
    mysql.vm.provider &amp;quot;virtualbox&amp;quot; do |y|
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End Mysql

end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Arquivo ajustado vamos fazer um teste em nosso ambiente, primeiro desligue as VMs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ~/vagrant/projects/lamp
vagrant halt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique se as VMs desligaram&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant status
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Current machine states:

apache                    poweroff (virtualbox)
mysql                     poweroff (virtualbox)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos religar e verificar se o provisionamento ocorreu.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Perceba que vamos receber as seguintes mensagens&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: VM already provisioned. Run `vagrant provision` or use `--provision` to force it

==&amp;gt; mysql: VM already provisioned. Run `vagrant provision` or use `--provision` to force it
	
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Essa mensagem diz que sua máquina já foi provisionada na primeira vez que rodamos vagrant up, é importante entender isto, o provisionamento só é executado quando a VM é criada, no momento do UP, depois o vagrant considera que a VM já foi devidamente provisionada.&lt;/p&gt;
&lt;p&gt;Bom, caso queiramos executar novamente as tarefas de provisionamento, principalmente se elas foram adicionadas após o processo de criação da VM, teremos que ser mais explícitos, então vamos digitar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant provision
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: Running provisioner: shell...
    apache: Running: inline script
Loaded plugins: fastestmirror, security
Cleaning repos: base extras puppetlabs-deps puppetlabs-products updates
Cleaning up Everything
Cleaning up list of fastest mirrors
Loaded plugins: fastestmirror, security
Determining fastest mirrors
 * base: mirror.globo.com
 * extras: mirror.globo.com
 * updates: mirror.globo.com
Setting up Install Process
Package 14:tcpdump-4.0.0-3.20090921gitdf3cb4.2.el6.x86_64 already installed and latest version
Nothing to do
==&amp;gt; mysql: Running provisioner: shell...
    mysql: Running: inline script
Loaded plugins: fastestmirror, security
Cleaning repos: base extras puppetlabs-deps puppetlabs-products updates
Cleaning up Everything
Loaded plugins: fastestmirror, security
Determining fastest mirrors
 * base: mirror.globo.com
 * extras: mirror.globo.com
 * updates: mirror.globo.com
Setting up Install Process
Package 14:tcpdump-4.0.0-3.20090921gitdf3cb4.2.el6.x86_64 already installed and latest version
Nothing to do
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que o provisionamento foi realizado em ambas as VMs e o pacote solicitado já havia sido instalado corretamente, portanto, nada foi realizado.&lt;/p&gt;
&lt;p&gt;Em relação a esse provisioner, sua criatividade é o limite, você pode intalar pacotes, criar usuários, arquivos, diretórios, links, alterar configurações, fazer um deploy de aplicações e até instalar sua ferramenta preferida de gerência de configurações ( puppet :).&lt;/p&gt;
&lt;p&gt;Podemos usar constantes para colocar mais comandos no velho estilo EOF, veja o exemplo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$script = &amp;lt;&amp;lt;SCRIPT
echo &amp;quot;Estou provisionando via inline shell&amp;quot;
yum clean all
yum install tcpdump -y
SCRIPT

Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.provision &amp;quot;shell&amp;quot;, inline: $script
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Essa forma também é bastante prática, porém seu Vagrantfile pode ficar um pouco poluído.&lt;/p&gt;
&lt;h3 id=&#34;22-external-script&#34;&gt;2.2 External Script&lt;/h3&gt;
&lt;p&gt;Para evitar poluição do Vagrantfile podemos construir scripts mais complexos do lado de fora em um arquivo externo.&lt;/p&gt;
&lt;p&gt;crie o arquivo users.sh dentro do diretorio do projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ~/vagrant/projects/lamp
vim users.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Coloque o conteúdo abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#!/bin/bash
useradd gutocarvalho
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos ver a sintaxe para uso do external script&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apache.vm.provision :shell, :path =&amp;gt; &amp;quot;users.sh&amp;quot;
mysql.vm.provision :shell, :path =&amp;gt; &amp;quot;users.sh&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja como fica o arquivo completo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-

# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  # Apache
  config.vm.define &amp;quot;apache&amp;quot; do |apache|

    apache.vm.hostname = &amp;quot;apache.hacklab&amp;quot;
    apache.vm.box = &amp;quot;centos6x64&amp;quot;
    apache.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 9090
    apache.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.30&amp;quot;
    apache.vm.provision :shell, :path =&amp;gt; &amp;quot;users.sh&amp;quot;
    apache.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End apache

  # Mysql
  config.vm.define &amp;quot;mysql&amp;quot; do |mysql|

    mysql.vm.hostname = &amp;quot;mysql.hacklab&amp;quot;
    mysql.vm.box = &amp;quot;centos6x64&amp;quot;
    mysql.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 3306, host: 9091
    mysql.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.31
    mysql.vm.provision :shell, :path =&amp;gt; &amp;quot;users.sh&amp;quot;
    mysql.vm.provider &amp;quot;virtualbox&amp;quot; do |y|
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End Mysql

end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;E agora vamos rodar o provisionamento&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant provision
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: Running provisioner: shell...
    apache: Running: /var/folders/ty/7b7lzgzd5wl_4hgncfgctf3r0000gn/T/vagrant-shell20140513-61540-1tolxu9
==&amp;gt; mysql: Running provisioner: shell...
    mysql: Running: /var/folders/ty/7b7lzgzd5wl_4hgncfgctf3r0000gn/T/vagrant-shell20140513-61540-jmxaov
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O provisionamento aconteceu, agora vamos verificar se o usuário foi criado em ambas VMs.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[kaiten@gutocarvalho lamp]$ vagrant ssh apache
Last login: Tue May 13 04:16:37 2014 from 10.0.2.2
Welcome to your Packer-built virtual machine.
[vagrant@apache ~]$ id gutocarvalho
uid=501(gutocarvalho) gid=501(gutocarvalho) grupos=501(gutocarvalho)
[vagrant@apache ~]$ exit
logout
Connection to 127.0.0.1 closed.

[kaiten@gutocarvalho lamp]$ vagrant ssh mysql
Last login: Tue May 13 04:28:22 2014 from 10.0.2.2
Welcome to your Packer-built virtual machine.
[vagrant@mysql ~]$ id gutocarvalho
uid=501(gutocarvalho) gid=501(gutocarvalho) grupos=501(gutocarvalho)
[vagrant@mysql ~]$ exit
logout
Connection to 127.0.0.1 closed.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O usuário foi criado nas duas VMs.&lt;/p&gt;
&lt;p&gt;Um dica rápida, é possível utilizar um arquivo remoto como external script, veja o exemplo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Vagrant.configure(&amp;quot;2&amp;quot;) do |config|
  config.vm.provision &amp;quot;shell&amp;quot;, path: &amp;quot;https://example.com/provisioner.sh&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;6-conclusão&#34;&gt;6. Conclusão&lt;/h2&gt;
&lt;p&gt;O uso de provisionadores facilita a vida do sysadmin, o vasto suporte a diferentes tipos de provisionadores atende amplamente as mais diferentes modalidades de gerência de configurações, é um resurso imprescindível e deve ser utilizado para extrairmos o máximo do vagrant.&lt;/p&gt;
&lt;p&gt;O próximo post será sobre o provisionador Puppet Apply, até lá ;)&lt;/p&gt;
&lt;h2 id=&#34;7-referências&#34;&gt;7. Referências&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://docs.vagrantup.com/v2/provisioning/shell.html&#34;&gt;https://docs.vagrantup.com/v2/provisioning/shell.html&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vagrant Multi Machines</title>
      <link>https://archives.gutocarvalho.net/post/2014-05-12-vagrant-multi-machines/</link>
      <pubDate>Mon, 12 May 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-05-12-vagrant-multi-machines/</guid>
      <description>&lt;h2 id=&#34;1-conceito-multi-machines&#34;&gt;1. Conceito Multi Machines&lt;/h2&gt;
&lt;p&gt;Após a introdução ao &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/05/09/entenda-o-vagrant/&#34;&gt;vagrant&lt;/a&gt; no post anterior, vamos falar rapidamente sobre multi machines.&lt;/p&gt;
&lt;p&gt;O conceito é simples, com &amp;ldquo;multi machines&amp;rdquo; você pode subir várias VMs de uma vez só.&lt;/p&gt;
&lt;p&gt;Imagine um ambiente LAMP, você pode ter uma VM para o Apache e outra para o MYSQL, tudo no mesmo projeto/diretório/vagranfile.&lt;/p&gt;
&lt;h3 id=&#34;11-características-do-ambiente&#34;&gt;1.1 Características do ambiente&lt;/h3&gt;
&lt;p&gt;VM1&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;VM1 (apache)
Base box CentOS 6.5 64Bits
1 Processador
600 MB de RAM
NIC 1 em modo NAT
NIC 2 c/ ip 192.168.200.30, rede privada
Encaminhamento de porta 80 do guest paraporta 9090 no host (osx)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;VM2&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;VM2 (mysql)
Base box CentOS 6.5 64Bits
1 Processador
600 MB de RAM
NIC 1 em modo NAT
NIC 2 c/ ip 192.168.200.31, rede privada
Encaminhamento de porta 3306 do guest paraporta 9091 no host (osx)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;2-criando-multi-machines&#34;&gt;2. Criando Multi Machines&lt;/h2&gt;
&lt;p&gt;Deixo claro que eu estou partindo da ideia que você já leu o post anterior e já configurou o vagrant em seu ambiente, então vamos lá&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir ~/vagrant/projects/lamp
cd ~/vagrant/projects/lamp
vim Vagrantinit
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos traduzir as características da seção 1.1 para o Vagrantfile&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

  # Apache
  config.vm.define &amp;quot;apache&amp;quot; do |apache|

    apache.vm.hostname = &amp;quot;apache.hacklab&amp;quot;

    apache.vm.box = &amp;quot;centos6x64&amp;quot;

    apache.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 9090

    apache.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.30&amp;quot;

    apache.vm.provider &amp;quot;virtualbox&amp;quot; do |v|
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        v.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End apache

  # Mysql
  config.vm.define &amp;quot;mysql&amp;quot; do |mysql|

    mysql.vm.hostname = &amp;quot;mysql.hacklab&amp;quot;

    mysql.vm.box = &amp;quot;centos6x64&amp;quot;

    mysql.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 3306, host: 9091

    mysql.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.31&amp;quot;

    mysql.vm.provider &amp;quot;virtualbox&amp;quot; do |y|
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
        y.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
    end

  end
  # End Mysql

end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos iniciar as duas VMs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;==&amp;gt; apache: Importing base box &#39;centos6x64&#39;...
==&amp;gt; apache: Matching MAC address for NAT networking...
==&amp;gt; apache: Setting the name of the VM: lamp_apache_1399901503605_21761
==&amp;gt; apache: Fixed port collision for 22 =&amp;gt; 2222. Now on port 2200.
==&amp;gt; apache: Clearing any previously set network interfaces...
==&amp;gt; apache: Preparing network interfaces based on configuration...
    apache: Adapter 1: nat
    apache: Adapter 2: hostonly
==&amp;gt; apache: Forwarding ports...
    apache: 22 =&amp;gt; 2200 (adapter 1)
    apache: 80 =&amp;gt; 9090 (adapter 1)
==&amp;gt; apache: Running &#39;pre-boot&#39; VM customizations...
==&amp;gt; apache: Booting VM...
==&amp;gt; apache: Waiting for machine to boot. This may take a few minutes...
    apache: SSH address: 127.0.0.1:2200
    apache: SSH username: vagrant
    apache: SSH auth method: private key
    apache: Warning: Connection timeout. Retrying...
    apache: Warning: Connection timeout. Retrying...
    apache: Warning: Remote connection disconnect. Retrying...
==&amp;gt; apache: Machine booted and ready!
==&amp;gt; apache: Checking for guest additions in VM...
==&amp;gt; apache: Setting hostname...
==&amp;gt; apache: Configuring and enabling network interfaces...
==&amp;gt; apache: Mounting shared folders...
    apache: /vagrant =&amp;gt; /Users/gutocarvalho/vagrant/projects/lamp
==&amp;gt; mysql: Importing base box &#39;centos6x64&#39;...
==&amp;gt; mysql: Matching MAC address for NAT networking...
==&amp;gt; mysql: Setting the name of the VM: lamp_mysql_1399901623062_42651
==&amp;gt; mysql: Fixed port collision for 22 =&amp;gt; 2200. Now on port 2201.
==&amp;gt; mysql: Clearing any previously set network interfaces...
==&amp;gt; mysql: Preparing network interfaces based on configuration...
    mysql: Adapter 1: nat
    mysql: Adapter 2: hostonly
==&amp;gt; mysql: Forwarding ports...
    mysql: 22 =&amp;gt; 2201 (adapter 1)
    mysql: 3306 =&amp;gt; 9091 (adapter 1)
==&amp;gt; mysql: Running &#39;pre-boot&#39; VM customizations...
==&amp;gt; mysql: Booting VM...
==&amp;gt; mysql: Waiting for machine to boot. This may take a few minutes...
    mysql: SSH address: 127.0.0.1:2201
    mysql: SSH username: vagrant
    mysql: SSH auth method: private key
    mysql: Warning: Connection timeout. Retrying...
    mysql: Warning: Connection timeout. Retrying...
    mysql: Warning: Remote connection disconnect. Retrying...
    mysql: Warning: Remote connection disconnect. Retrying...
==&amp;gt; mysql: Machine booted and ready!
==&amp;gt; mysql: Checking for guest additions in VM...
==&amp;gt; mysql: Setting hostname...
==&amp;gt; mysql: Configuring and enabling network interfaces...
==&amp;gt; mysql: Mounting shared folders...
    mysql: /vagrant =&amp;gt; /Users/gutocarvalho/vagrant/projects/lamp
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Em cerca de 4 minutos as duas VMs subiram, vamos verificar o status das VMs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant status
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Current machine states:

apache                    running (virtualbox)
mysql                     running (virtualbox)

This environment represents multiple VMs. The VMs are all listed
above with their current state. For more information about a specific
VM, run `vagrant status NAME`.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Perfeito, estão funcionando :)&lt;/p&gt;
&lt;h2 id=&#34;3-manipulando-multi-machines&#34;&gt;3. Manipulando Multi Machines&lt;/h2&gt;
&lt;p&gt;Subindo todas as VMs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Subindo apenas a VM apache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up apache
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Parando todas as VMs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant halt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Parando apenas a VM mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant mysql halt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Recarregando todas as VMs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Recarregando apenas a VM apache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant reload apache
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Você pode usar expressões regulares se quiser ( no caso de várias vms )&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant up /apache[0-9]/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para entrar na VM mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant ssh mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para entrar na VM apache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant ssh apache
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É bastante simples!&lt;/p&gt;
&lt;h2 id=&#34;4-dicas-soltas&#34;&gt;4. Dicas soltas&lt;/h2&gt;
&lt;h3 id=&#34;41-primary-machine&#34;&gt;4.1 Primary machine&lt;/h3&gt;
&lt;p&gt;Observe a ordem em que as máquinas subiram, foi a mesma ordem declarada no Vagranfile, contudo, você pode definir uma VM que deve subir antes das outras, isto é chamado de &lt;strong&gt;primary&lt;/strong&gt;, veja o exemplo de sintaxe abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;config.vm.define &amp;quot;mysql&amp;quot; primary: true do |web|
  code
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Basta especificar isto e ela subirá primeiro que as outras.&lt;/p&gt;
&lt;h3 id=&#34;42-autostart&#34;&gt;4.2 Autostart&lt;/h3&gt;
&lt;p&gt;Se quiser que uma das VMs não inicie automaticamente, especifique isso no define dela&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;config.vm.define &amp;quot;db_slave&amp;quot;, autostart: false
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Feito isto, o vagrant up vai ignorar ela.&lt;/p&gt;
&lt;h2 id=&#34;5-multi-machines-com-diferentes-boxes&#34;&gt;5. Multi Machines com diferentes boxes&lt;/h2&gt;
&lt;p&gt;É possível usar diferentes tipos de box, basta especificar, eu tenho aqui um projeto que sobe um puppetmaster em centos e mais 3 vms com agentes, um debian, um ubuntu e um centos, funciona muito, muito bem.&lt;/p&gt;
&lt;h2 id=&#34;6-conclusão&#34;&gt;6. Conclusão&lt;/h2&gt;
&lt;p&gt;Quanto mais estudo o vagrant, melhor entendo o seu funcionamento e acabo conhecendo novas e excelentes características como esta.&lt;/p&gt;
&lt;p&gt;Com multi machines, construir ambientes complexos passa a ser fácil e rápido, imagina na hora que eu integrar com o o Puppet :)&lt;/p&gt;
&lt;p&gt;Será o mesmo que juntar o queijo e a goiabada, perfeição.&lt;/p&gt;
&lt;h2 id=&#34;7-referências&#34;&gt;7. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.vagrantup.com/v2/multi-machine/&#34;&gt;https://docs.vagrantup.com/v2/multi-machine/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Entenda o vagrant</title>
      <link>https://archives.gutocarvalho.net/post/2014-05-09-entenda-o-vagrant/</link>
      <pubDate>Fri, 09 May 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-05-09-entenda-o-vagrant/</guid>
      <description>&lt;h2 id=&#34;1-sobre-o-vagrant&#34;&gt;1. Sobre o Vagrant&lt;/h2&gt;
&lt;p&gt;O &lt;a href=&#34;http://www.vagrantup.com&#34;&gt;Vagrant&lt;/a&gt; é uma ferramenta que permite que criemos rapidamente ambientes virtuais para fazermos testes, desenvolvimento ou provisionmento de ambientes utilizando as soluções de virtualização mais comuns como o Virtualbox e o VMWare, sendo também compatível com os principais provedores cloud como AWS, Rackspace e Digitalocean. Além disto, tem suporte a várias tecnologias de provisionamento como Puppet, Chef, Salt, Ansible e CFEngine, com isto, você já cria e configura o ambiente em um único processo, é realmente mágico.&lt;/p&gt;
&lt;p&gt;Outros aspecto bacana é que você tem a portabilidade de criar e recriar esses ambientes em qualquer lugar de forma simples e descomplicada bastando apenas ter a &amp;lsquo;receita mágica&amp;rsquo; do vagrant.&lt;/p&gt;
&lt;h2 id=&#34;2-entendendo-a-necessidade&#34;&gt;2. Entendendo a necessidade&lt;/h2&gt;
&lt;p&gt;Desde 2010 eu conhecia o vagrant, mas confesso que não havia dado muita bola para o projeto, como eu usava o &lt;a href=&#34;https://code.google.com/p/ganeti/&#34;&gt;ganeti&lt;/a&gt; na época, para mim era muito prático criar e recriar vms baseadas em templates, no servidor da empresa, não havia a menor necessidade de fazer isso no meu ambiente local (mbp).&lt;/p&gt;
&lt;p&gt;Contudo, nos últimos 2 anos tenho trabalhado intensamente com virtualização e implantação de ambientes Puppet, e a construção de módulos em ambiente controlado é muito importante.&lt;/p&gt;
&lt;p&gt;Eu vinha sofrendo no OSX tanto com o VirtualBox quanto com o VMWARE Fusion para clonar e reconfigurar VMs sempre que eu tinha que construir um novo módulo ou criar um ambiente para algum treinamento ou palestra.&lt;/p&gt;
&lt;p&gt;Era sempre chato no caso do VMWARE clonar (copiando o disco) uma VM, dar boot, corrigir problemas de interface de rede, hostname, dar boot de novo, configurar outras coisas, etc, dar outro boot, era um clico cansativo. No virtualbox idem, apesar de ter o clone a um clique de distância, o que já ajuda, ainda era necessário fazer vários ajustes bem manuais para ter o ambiente do jeito que eu queria, e nem preciso dizer que isso consumia muito, mas muito tempo mesmo, tempo que hoje é precisoso demais para perder com isso, tempo que posso utilizar com minha família por exemplo.&lt;/p&gt;
&lt;p&gt;Para resolver esses problemas e mais alguns outros, depois de alguma insistência de alguns amigos, resolvi brincar com o vagrant. Posso dizer que a brincadeira foi longe e os resultados me impressionaram.&lt;/p&gt;
&lt;h3 id=&#34;3-instalando-vagrant&#34;&gt;3. Instalando Vagrant&lt;/h3&gt;
&lt;p&gt;A instalação é descomplicada, basta entrar na área de &lt;a href=&#34;http://www.vagrantup.com/downloads.html&#34;&gt;downloads&lt;/a&gt; do site e escolher o pacote para o seu sistema operacional. Você vai encontrar pacotes para o CentOS, Ubuntu, Debian, MacOX e Windows. É possível instalar via &lt;a href=&#34;http://docs.vagrantup.com/v2/installation/index.html&#34;&gt;gem&lt;/a&gt; se preferir - sim o vagrant foi escrito em Ruby.&lt;/p&gt;
&lt;p&gt;Depois de fazer o dowload acesse a &lt;a href=&#34;http://docs.vagrantup.com/v2/&#34;&gt;documentação&lt;/a&gt; que é bem clara e siga a risca.&lt;/p&gt;
&lt;p&gt;Ter o virtualbox instalado é pré-requisito, de preferência a última versão.&lt;/p&gt;
&lt;h4 id=&#34;31-osx&#34;&gt;3.1 OSX&lt;/h4&gt;
&lt;p&gt;No meu caso eu peguei o pacote do OSX e instalei com bastante facilidade com alguns cliques.&lt;/p&gt;
&lt;h3 id=&#34;4-iniciando-o-uso-do-vagrant&#34;&gt;4. Iniciando o uso do vagrant&lt;/h3&gt;
&lt;p&gt;Um vez instalado ele está disponível para uso, basta abrir o console e digitar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Usage: vagrant [options] &amp;lt;command&amp;gt; [&amp;lt;args&amp;gt;]

    -v, --version                    Print the version and exit.
    -h, --help                       Print this help.

Common commands:
     box          manages boxes: installation, removal, etc.
     connect      connect to a remotely shared Vagrant environment
     destroy      stops and deletes all traces of the vagrant machine
     halt         stops the vagrant machine
     help         shows the help for a subcommand
     init         initializes a new Vagrant environment by creating a Vagrantfile
     login        log in to Vagrant Cloud
     package      packages a running vagrant environment into a box
     plugin       manages plugins: install, uninstall, update, etc.
     provision    provisions the vagrant machine
     reload       restarts vagrant machine, loads new Vagrantfile configuration
     resume       resume a suspended vagrant machine
     share        share your Vagrant environment with anyone in the world
     ssh          connects to machine via SSH
     ssh-config   outputs OpenSSH valid configuration to connect to the machine
     status       outputs status of the vagrant machine
     suspend      suspends the machine
     up           starts and provisions the vagrant environment

For help on any individual command run `vagrant COMMAND -h`

Additional subcommands are available, but are either more advanced
or not commonly used. To see all subcommands, run the command
`vagrant list-commands`.
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;41-diretório-de-trabalho&#34;&gt;4.1 Diretório de trabalho&lt;/h4&gt;
&lt;p&gt;Eleja um diretório pra trabalhar, no meu caso eu criei um diretório chamado vagrant no diretório home do meu usuário e dentro dele um diretório chamado projects.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir -p ~/vagrant/projects
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;42-boxes&#34;&gt;4.2 Boxes&lt;/h4&gt;
&lt;p&gt;Ao invés de trabalharmos com templates, o vagrant usa o conceito chamado box, que são imagens de sistemas operacionais pré-configurados que vão servir como base para a construção de nossas vms.&lt;/p&gt;
&lt;p&gt;Hoje existe o vagrant cloud que é um repositório de boxes interessante&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://vagrantcloud.com
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Além deste, existe um base pública de boxes no site abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.vagrantbox.es
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E está é a base de boxes públicas da Puppetlabs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://puppet-vagrant-boxes.puppetlabs.com
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;421-instalando-um-box-via-vagrant-cloud&#34;&gt;4.2.1 Instalando um box via vagrant cloud&lt;/h5&gt;
&lt;p&gt;Primeiro procure a box que deseja na cloud&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://vagrantcloud.com/discover/featured
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois insira a box em seu ambiente vagrant&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add puppetlabs/centos-6.5-32-puppet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E depois verifique se a box foi adicionada corretamente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box list
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;centos-6.5-32    (virtualbox, 0)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Maravilha, box adicionada e pronta para uso.&lt;/p&gt;
&lt;h5 id=&#34;422-instalando-uma-box-manualmente&#34;&gt;4.2.2 Instalando uma box manualmente&lt;/h5&gt;
&lt;p&gt;Você pode adicionar boxes manualmente, eu particularmente gosto das boxes da puppetlabs por já virem com o puppet pré-configurado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /tmp
wget http://puppet-vagrant-boxes.puppetlabs.com/centos-65-x64-virtualbox-puppet.box
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos adicionar a box&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box add /tmp/centos-65-x64-virtualbox-puppet.box --name centos6x64pl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E vamos verificar a box&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant box list
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;centos-6.5-32    (virtualbox, 0)
centos6x64pl     (virtualbox, 0)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Maravilha, adicionamos mais uma box com sucesso.&lt;/p&gt;
&lt;h4 id=&#34;43-criando-a-vm&#34;&gt;4.3 Criando a VM&lt;/h4&gt;
&lt;p&gt;Para criar uma nova VM, vamos basicamente criar um diretório para o projeto e iniciar o projeto.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ~/vagrant/projects
mkdir meuprojeto
cd meuprojeto
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois de criar o diretório precisamos rodar o comando init para criar o arquivo de configuração&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant init
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;A `Vagrantfile` has been placed in this directory. You are now
ready to `vagrant up` your first virtual environment! Please read
the comments in the Vagrantfile as well as documentation on
`vagrantup.com` for more information on using Vagrant.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que o vagrant nos disse que criou um arquivo de configuração em nosso diretório, vamos olhar esse arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cat Vagrantfile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

# Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!
VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  # All Vagrant configuration is done here. The most common configuration
  # options are documented and commented below. For a complete reference,
  # please see the online documentation at vagrantup.com.

  # Every Vagrant virtual environment requires a box to build off of.
  config.vm.box = &amp;quot;base&amp;quot;

  # Disable automatic box update checking. If you disable this, then
  # boxes will only be checked for updates when the user runs
  # `vagrant box outdated`. This is not recommended.
  # config.vm.box_check_update = false

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine. In the example below,
  # accessing &amp;quot;localhost:8080&amp;quot; will access port 80 on the guest machine.
  # config.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 8080

  # Create a private network, which allows host-only access to the machine
  # using a specific IP.
  # config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.33.10&amp;quot;

  # Create a public network, which generally matched to bridged network.
  # Bridged networks make the machine appear as another physical device on
  # your network.
  # config.vm.network &amp;quot;public_network&amp;quot;

  # If true, then any SSH connections made will enable agent forwarding.
  # Default value: false
  # config.ssh.forward_agent = true

  # Share an additional folder to the guest VM. The first argument is
  # the path on the host to the actual folder. The second argument is
  # the path on the guest to mount the folder. And the optional third
  # argument is a set of non-required options.
  # config.vm.synced_folder &amp;quot;../data&amp;quot;, &amp;quot;/vagrant_data&amp;quot;

  # Provider-specific configuration so you can fine-tune various
  # backing providers for Vagrant. These expose provider-specific options.
  # Example for VirtualBox:
  #
  # config.vm.provider &amp;quot;virtualbox&amp;quot; do |vb|
  #   # Don&#39;t boot with headless mode
  #   vb.gui = true
  #
  #   # Use VBoxManage to customize the VM. For example to change memory:
  #   vb.customize [&amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;1024&amp;quot;]
  # end
  #
  # View the documentation for the provider you&#39;re using for more
  # information on available options.

  # Enable provisioning with CFEngine. CFEngine Community packages are
  # automatically installed. For example, configure the host as a
  # policy server and optionally a policy file to run:
  #
  # config.vm.provision &amp;quot;cfengine&amp;quot; do |cf|
  #   cf.am_policy_hub = true
  #   # cf.run_file = &amp;quot;motd.cf&amp;quot;
  # end
  #
  # You can also configure and bootstrap a client to an existing
  # policy server:
  #
  # config.vm.provision &amp;quot;cfengine&amp;quot; do |cf|
  #   cf.policy_server_address = &amp;quot;10.0.2.15&amp;quot;
  # end

  # Enable provisioning with Puppet stand alone.  Puppet manifests
  # are contained in a directory path relative to this Vagrantfile.
  # You will need to create the manifests directory and a manifest in
  # the file default.pp in the manifests_path directory.
  #
  # config.vm.provision &amp;quot;puppet&amp;quot; do |puppet|
  #   puppet.manifests_path = &amp;quot;manifests&amp;quot;
  #   puppet.manifest_file  = &amp;quot;site.pp&amp;quot;
  # end

  # Enable provisioning with chef solo, specifying a cookbooks path, roles
  # path, and data_bags path (all relative to this Vagrantfile), and adding
  # some recipes and/or roles.
  #
  # config.vm.provision &amp;quot;chef_solo&amp;quot; do |chef|
  #   chef.cookbooks_path = &amp;quot;../my-recipes/cookbooks&amp;quot;
  #   chef.roles_path = &amp;quot;../my-recipes/roles&amp;quot;
  #   chef.data_bags_path = &amp;quot;../my-recipes/data_bags&amp;quot;
  #   chef.add_recipe &amp;quot;mysql&amp;quot;
  #   chef.add_role &amp;quot;web&amp;quot;
  #
  #   # You may also specify custom JSON attributes:
  #   chef.json = { :mysql_password =&amp;gt; &amp;quot;foo&amp;quot; }
  # end

  # Enable provisioning with chef server, specifying the chef server URL,
  # and the path to the validation key (relative to this Vagrantfile).
  #
  # The Opscode Platform uses HTTPS. Substitute your organization for
  # ORGNAME in the URL and validation key.
  #
  # If you have your own Chef Server, use the appropriate URL, which may be
  # HTTP instead of HTTPS depending on your configuration. Also change the
  # validation key to validation.pem.
  #
  # config.vm.provision &amp;quot;chef_client&amp;quot; do |chef|
  #   chef.chef_server_url = &amp;quot;https://api.opscode.com/organizations/ORGNAME&amp;quot;
  #   chef.validation_key_path = &amp;quot;ORGNAME-validator.pem&amp;quot;
  # end
  #
  # If you&#39;re using the Opscode platform, your validator client is
  # ORGNAME-validator, replacing ORGNAME with your organization name.
  #
  # If you have your own Chef Server, the default validation client name is
  # chef-validator, unless you changed the configuration.
  #
  #   chef.validation_client_name = &amp;quot;ORGNAME-validator&amp;quot;
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;É bem grande mas é bem simples, vamos retirar os comentários e preparar ele para usar a VM que acabamos de baixar.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

		config.vm.hostname = &amp;quot;suavm.seudominio&amp;quot;
		config.vm.box = &amp;quot;centos6x64pl&amp;quot;
		
		config.vm.provider &amp;quot;virtualbox&amp;quot; do |virtualbox|
			virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
			virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
		end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja como ficou bem mais simples de entender, eu disse no arquivo que vou usar a box centos6x64pl, defini memória e quantidade de processadores, mais nada, no caso dessa box ela já vem com uma interface de rede configurada em modo nat.&lt;/p&gt;
&lt;h4 id=&#34;44-iniciando-a-vm&#34;&gt;4.4 Iniciando a VM&lt;/h4&gt;
&lt;p&gt;Para iniciar a VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora aguarde ela carregar, a primeira vez ai demorar alguns minutos pois ele vai copiar o BOX para esse projeto, depois passa a ser bem rápido.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;vagrant up
Bringing machine &#39;default&#39; up with &#39;virtualbox&#39; provider...
==&amp;gt; default: Importing base box &#39;centos6x64&#39;...
==&amp;gt; default: Matching MAC address for NAT networking...
==&amp;gt; default: Setting the name of the VM: meuprojeto_default_1399893568659_66343
==&amp;gt; default: Clearing any previously set network interfaces...
==&amp;gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&amp;gt; default: Forwarding ports...
    default: 22 =&amp;gt; 2222 (adapter 1)
==&amp;gt; default: Running &#39;pre-boot&#39; VM customizations...
==&amp;gt; default: Booting VM...
==&amp;gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection timeout. Retrying...
    default: Warning: Connection timeout. Retrying...
    default: Warning: Remote connection disconnect. Retrying...
==&amp;gt; default: Machine booted and ready!
==&amp;gt; default: Checking for guest additions in VM...
==&amp;gt; default: Setting hostname...
==&amp;gt; default: Mounting shared folders...
    default: /vagrant =&amp;gt; /Users/gutocarvalho/vagrant/projects/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;No caso do meu macbookpro core2duo com disco mecanico, a vm levou 1.48 minutos para ser criada, agora vamos entrar nela.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E você já está rodando sua vm.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[vagrant@meuprojeto ~]$ ifconfig
eth0      Link encap:Ethernet  Endereço de HW 08:00:27:73:BF:1C
          inet end.: 10.0.2.15  Bcast:10.0.2.255  Masc:255.255.255.0
          endereço inet6: fe80::a00:27ff:fe73:bf1c/64 Escopo:Link
          UP BROADCASTRUNNING MULTICAST  MTU:1500  Métrica:1
          RX packets:448 errors:0 dropped:0 overruns:0 frame:0
          TX packets:348 errors:0 dropped:0 overruns:0 carrier:0
          colisões:0 txqueuelen:1000
          RX bytes:47075 (45.9 KiB)  TX bytes:42215 (41.2 KiB)

lo        Link encap:Loopback Local
          inet end.: 127.0.0.1  Masc:255.0.0.0
          endereço inet6: ::1/128 Escopo:Máquina
          UP LOOPBACKRUNNING  MTU:16436  Métrica:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          colisões:0 txqueuelen:0
          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)

[vagrant@meuprojeto ~]$ cat /etc/issue
CentOS release 6.5 (Final)
Kernel \r on an \m

[vagrant@meuprojeto ~]$ df -h
Filesystem                    Size  Used Avail Use% Mounted on
/dev/mapper/VolGroup-lv_root  8,4G  1,1G  6,9G  14% /
tmpfs                         289M     0  289M   0% /dev/shm
/dev/sda1                     485M   34M  426M   8% /boot
/vagrant                      931G  853G   78G  92% /vagrant

[vagrant@meuprojeto ~]$ free -m
             total       used       free     shared    buffers     cached
Mem:           576        109        466          0          9         45
-/+ buffers/cache:         55        521
Swap:          991          0        991

[vagrant@meuprojeto ~]$
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Se quiser criar outro ambiente, basta criar outro diretório, iniciar o seu projeto e configurar o Vagrantfile.&lt;/p&gt;
&lt;h4 id=&#34;44-manipulando-a-vm&#34;&gt;4.4 Manipulando a VM&lt;/h4&gt;
&lt;p&gt;Para iniciar a configuração de uma VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant init
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para iniciar uma VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para desligar a VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant halt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para recarregar uma VM (reboot)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant reload
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para suspender uma VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant suspend
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para fazer resume de uma vm suspensa&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant resume
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para verificar o status de uma VM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant status
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para acessar sua vm&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; vagrant ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para destruir a VM, apagando ela do seu disco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant destroy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para outros comandos e ajuda&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vagrant help
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-dicas-de-configuração&#34;&gt;5. Dicas de configuração&lt;/h2&gt;
&lt;p&gt;Abaixo uma configuração que cria uma máquina virtual baseada no box centos6x84, configura um encaminhamento de portas da porta 80 no guest (vm) para porta 8080 em meu host (osx), isto significa que eu poderei acessar a aplicação da VM como se estivesse rodando localmente na porta 8080.&lt;/p&gt;
&lt;p&gt;Outro detalhe legal é que montaremos o diretório /Users/gutocarvalho/Sites do host (osx) dentro da VM no destino /srv/sites, ou seja, meus arquivos podem ficar no meu host, sendo editados pela minha IDE de preferência estarão sendo servidos pelo Apache do meu guest e meus sites serão acessíveis pela porta 8080, sensacionalmente fácil e prático.&lt;/p&gt;
&lt;p&gt;Independente do Synced Folder específico que está presente no arquivo, o vagrant por DEFAULT monta na VM a raiz do seu projeto, então se eu colocar um arquivo em /Users/gutocarvalho/vagrant/projects/meuprojeto/arquivo.txt (host) ele estará disponível no guest em /vagrant/arquivo.txt.&lt;/p&gt;
&lt;p&gt;Além disto, crio uma segunda interface de rede, em modo rede privada com o endereço IP 192.168.200.20 para comunicação futura com outra máquina.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# -*- mode: ruby -*-
# vi: set ft=ruby :

VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

		config.vm.hostname = &amp;quot;apache.hacklab&amp;quot;
		config.vm.box = &amp;quot;centos6x64&amp;quot;
		config.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 8080
		config.vm.network &amp;quot;private_network&amp;quot;, ip: &amp;quot;192.168.200.20&amp;quot;
		config.vm.synced_folder &amp;quot;/Users/gutocarvalho/vagrant/projects/meuprojeto&amp;quot;, &amp;quot;/srv/sites&amp;quot;

		config.vm.provider &amp;quot;virtualbox&amp;quot; do |virtualbox|
			virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--cpus&amp;quot;, &amp;quot;1&amp;quot; ]
			virtualbox.customize [ &amp;quot;modifyvm&amp;quot;, :id, &amp;quot;--memory&amp;quot;, &amp;quot;600&amp;quot; ]
		end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Existem centenas de outros parâmetros que podemos utilizar, acesse a documentação e leia bastante =&amp;gt; &lt;a href=&#34;http://docs.vagrantup.com&#34;&gt;http://docs.vagrantup.com&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;6-conclusão&#34;&gt;6. Conclusão&lt;/h2&gt;
&lt;p&gt;Começar a trabalhar com vagrant me possibilitou aumentar radicalmente a minha agilidade na criação, testes e desenvolvimento de qualquer coisa em ambiente virtualizado, é realmente uma ferramenta fantástica e simples, recomendo.&lt;/p&gt;
&lt;p&gt;Nos próximos posts eu vou falar sobre configuração de Multi Machines e provisionamento SHELL e PUPPET ;)&lt;/p&gt;
&lt;p&gt;Conforme eu for aprendendo vou compartilhando com vocês.&lt;/p&gt;
&lt;h2 id=&#34;7-referências&#34;&gt;7. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.vagrantup.com/v2/installation/index.html&#34;&gt;http://docs.vagrantup.com/v2/installation/index.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.vagrantup.com/v2/getting-started/index.html&#34;&gt;http://docs.vagrantup.com/v2/getting-started/index.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.vagrantup.com/v2/networking/index.html&#34;&gt;http://docs.vagrantup.com/v2/networking/index.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.vagrantup.com/v2/networking/forwarded_ports.html&#34;&gt;http://docs.vagrantup.com/v2/networking/forwarded_ports.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.vagrantup.com/v2/networking/private_network.html&#34;&gt;http://docs.vagrantup.com/v2/networking/private_network.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.vagrantup.com/v2/synced-folders/&#34;&gt;http://docs.vagrantup.com/v2/synced-folders/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Entenda o Bug Heartbleed</title>
      <link>https://archives.gutocarvalho.net/post/2014-04-10-entenda-o-bug-heartbleed/</link>
      <pubDate>Thu, 10 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-04-10-entenda-o-bug-heartbleed/</guid>
      <description>&lt;h2 id=&#34;1-sobre-o-bug&#34;&gt;1. Sobre o Bug&lt;/h2&gt;
&lt;p&gt;No dia 07 de Abril de 2014 o projeto OpenSSL divulgou um &lt;a href=&#34;https://www.openssl.org/news/secadv_20140407.txt&#34;&gt;boletim&lt;/a&gt; de segurança informando sobre uma grave falha de implementação nas versões 1.0.1f, 1.0.1e, 1.0.1d, 1.0.1c, 1.0.1b, 1.0.1a e 1.0.1 do OpenSSL, a falha foi chamada de Heartbleed.&lt;/p&gt;
&lt;p&gt;O Bug foi reportado por Neel Mehta do time de segurança do google, a correção foi escrita pelos desenvolvedores Adam Langley (&lt;a href=&#34;mailto:agl@chromium.org&#34;&gt;agl@chromium.org&lt;/a&gt;) e Bodo Moeller (&lt;a href=&#34;mailto:bmoeller@acm.org&#34;&gt;bmoeller@acm.org&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;A equipe do OpenSSL recomenda a atualização da lib para versão 1.0.1g ou então a recompilação do pacote OpenSSL com a seguinte flag habilitada&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;-DOPENSSL_NO_HEARTBEATS
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O bug foi inicialmente registrado no &lt;a href=&#34;https://cve.mitre.org/&#34;&gt;CVE&lt;/a&gt; sob o ID &lt;a href=&#34;https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0160&#34;&gt;2014-0160&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;O CVE é uma das maiores e mais respeitadas base de dados de segurança que contém dados do tipo vulnerability (erros de implementação em softwares) e exposure (falhas de configuração ou de uso de software).&lt;/p&gt;
&lt;h2 id=&#34;2-entenda-o-bug&#34;&gt;2. Entenda o Bug&lt;/h2&gt;
&lt;p&gt;A falha é tão séria que permite a leitura de fragmentos de memória dos sistemas operacionais que utilizam o OpenSSL como biblioteca de segurança para seus sistemas e serviços.&lt;/p&gt;
&lt;p&gt;Esses fragmentos são obtidos através de clientes ou até mesmo servidores SSL/TLS maliciosos.&lt;/p&gt;
&lt;p&gt;Estes clientes ou sevidores podem enviar pacotes DTLS com a extensão Heartbeat (recurso da versão 1.0.1) e durante esse processo de comunicação, a cada requisição eles conseguem interceptar um pequeno vazamento de dados da memória do sistema operacional, no total cerca 64kb de dados são expostos. Vale informar que essas requisições podem ocorrer repetidas vezes, vazando mais e mais dados.&lt;/p&gt;
&lt;p&gt;Isto significa que um atacante pode interceptar informações sensíveis ou sigilosas em sistemas que utilizam o openSSL como mecanismo de segurança.&lt;/p&gt;
&lt;h2 id=&#34;3-o-que-pode-ser-interceptado&#34;&gt;3. O que pode ser interceptado?&lt;/h2&gt;
&lt;p&gt;O pessoal da &lt;a href=&#34;http://www.codenomicon.com&#34;&gt;codenomicon&lt;/a&gt; fez diversos testes para simular e validar o bug e os resultados foram surpreendentes, algo que chocou especialistas de segurança no mundo todo.&lt;/p&gt;
&lt;p&gt;Eles atacaram seus próprios servidores - externamente - explorando a falha no OpenSSL e conseguiram capturar informações muito sensíveis sem serem percebidos pelos sistemas de segurança - o exploit não deixa nenhum rastro.&lt;/p&gt;
&lt;p&gt;Não foi necessário utilizar nenhum tipo de informação interna, não foi necessário conhecer o ambiente, tão pouco utilizar credenciais de acesso locais (user/senha). Explorando o bug de forma simples e direta foi possível acessar dados sensíveis como por exemplo nomes de usuários, senhas, mensagens instantâneas que deveriam estar codificadas, mensagens de correio eletrônico e até fragmentos de documentos internos da empresa.&lt;/p&gt;
&lt;p&gt;O mais grave de tudo isto é que foi possível inclusive interceptar e capturar as chaves privadas x.509 que são utilizadas para criptografar tais informações, e uma vez de posse destas chaves, é possível decriptar todos os pacotes de uma determinada origem ou serviço, comprometendo de forma perigosa o sigilo na comunicação de ambientes de toda a empresa.&lt;/p&gt;
&lt;h2 id=&#34;4-como-se-proteger-do-heartbleed&#34;&gt;4. Como se proteger do HeartBleed?&lt;/h2&gt;
&lt;p&gt;A primeira coisa a se fazer é atualizar o OpenSSL, possívelmente sua distribuição Linux ou Unix já deve ter disponibilizado pacotes com essa correção, atualize seu ambiente e reinicie os serviços que utilizam a biblioteca OpenSSL, o restart é necessário para que a versão antiga do OpenSSL seja descarregada da memória, algumas pessoas para ter 100% certeza, reiniciam até mesmo o OS, se você tem janela para isto, é algo que pode ser feito.&lt;/p&gt;
&lt;h2 id=&#34;5-por-que-o-bug-recebeu-o-nome-heartbleed&#34;&gt;5. Por que o bug recebeu o nome HeartBleed?&lt;/h2&gt;
&lt;p&gt;O BUG está relacionado a uma falha na implementação da extensão Heartbeat no protocolo TLS/DTSL (transport layer security protocol), e como ele gera um LEAK (vazamento) foi apelidado assim Heart (de HeartBeat) + Bleed (de sangrar, escorrer), HeartBleed.&lt;/p&gt;
&lt;h2 id=&#34;6-quais-medidas-devo-tomar-além-da-atualização-do-openssl&#34;&gt;6. Quais medidas devo tomar além da atualização do OpenSSL?&lt;/h2&gt;
&lt;h3 id=&#34;61-medidas-para-o-usuário-final&#34;&gt;6.1 Medidas para o usuário final&lt;/h3&gt;
&lt;p&gt;O ideal é que você troque suas senhas nos sistemas e serviços que são oferecidos via HTTPS pela Internet, isto é necessário pois todos os dados que trafegavam em sistemas afetados estão potencialmente comprometidos já que podiam ser interceptados, e neste processo está incluso a sua senha pessoal.&lt;/p&gt;
&lt;h3 id=&#34;62-medidas-para-o-sysadmin-e-developer&#34;&gt;6.2 Medidas para o sysadmin e developer&lt;/h3&gt;
&lt;p&gt;É importante atualizar o OpenSSL, reiniciar os serviços que usam a biblioteca - e se possível o servidor - para liberar a memória e carregar a nova lib OpenSSL.&lt;/p&gt;
&lt;p&gt;É importante revogar certificados antigos, gerar novas chaves e certificados para seus serviços internos. Tem gente até regerando a CA local, mas não é preciso tanto, normalmente a chave do CA está bem protegida e encriptada (pelo menos deveria).&lt;/p&gt;
&lt;p&gt;No caso de serviços externos que usam certificados gerados por terceiros é importante verificar informações no site do seu provedor de certificados, é possível que ele gere uma nova CA, se for esse o caso, você vai revogar os certificadoa antigos e a partir daí você vai gerar uma requisição de assinatura de certificados para cada um dos seus certificados e vai enviar estes arquivos para seu provedor assinar com a nova CA - já criada em um ambiente pós aplicação do bugfix.&lt;/p&gt;
&lt;p&gt;Se eles não publicarem nova CA, você vai então revogar seus certificados antigos e gerar outros novos pelo sistema do provedor, seguindo a mesma lógica, gere as requisições de assinatura e assine no sistema deles, ou então, envie para eles assinarem.&lt;/p&gt;
&lt;p&gt;Pensando no pior cenário, caso você tenha alguma chave ssh para acesso a servidores externos como sua vm pessoal ou github por exemplo, se essa chave foi enviada por IM ou EMAIL, vale a pena gerar outra e trocar - por segurança e paz de espírito, assim você dormirá traquilo.&lt;/p&gt;
&lt;h2 id=&#34;7-informações-sobre-distros-linux&#34;&gt;7. Informações sobre distros linux&lt;/h2&gt;
&lt;p&gt;Como já mencionei acima, a maioria das distros já publicou atualizações para o pacote OpenSSL, então verifique no site do projeto de sua distro qual é a versão corrigida e verifique a versão do pacote instalado em seu servidor - via terminal - para ter certeza de que o pacote foi atualizado.&lt;/p&gt;
&lt;p&gt;Abaixo uma lista das principais distros linux com as versões corrigidas do OpenSSL, acompanhe:&lt;/p&gt;
&lt;p&gt;CentOS 6&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[gutocarvalho@exige ~]$ rpm -qa|grep openssl
openssl-1.0.1e-16.el6_5.7.x86_64
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Fedora 19&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; openssl-1.0.1e-37.fc19.1 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ubuntu 13.10&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; 1.0.1e-3ubuntu1.2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Debian 7&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; 1.0.1e-2+deb7u6
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;8-quais-serviços-são-afetados&#34;&gt;8. Quais serviços são afetados?&lt;/h2&gt;
&lt;p&gt;Todos os serviços que utilizam de alguma forma SSL/TLS são afetados, como por exemplo Apache, Nginx, OpenVPN, Postfix, Dovecot, OpenLDAP, Samba, Jabber, dentre outros.&lt;/p&gt;
&lt;p&gt;Atualizando seu ambiente, trocando suas senhas, regerando suas chaves e certificados, o problema se resolve.&lt;/p&gt;
&lt;h2 id=&#34;9-o-ssh-foi-afetado-pelo-bug&#34;&gt;9. O SSH foi afetado pelo BUG?&lt;/h2&gt;
&lt;p&gt;O serviço SSH não foi afetado, este é um protocolo distinto, fique tranquilo.&lt;/p&gt;
&lt;p&gt;Agora, se o seu servidor roda qualquer outro tipo de serviço que usa SSL, e se o seu servidor disponibiliza esse serviço externamente, e se ele rodava uma versão do OpenSSL com o bug, logo este ambiente está potencialmente comprometido, portanto, é recomendável que você troque suas senhas locais, remotas e chaves ssh para ficar principalmente com a consciência tranquila, além do ambiente protegido.&lt;/p&gt;
&lt;h2 id=&#34;10-há-quanto-tempo-estamos-vulneráveis&#34;&gt;10. Há quanto tempo estamos vulneráveis?&lt;/h2&gt;
&lt;p&gt;Apartentemente o BUG foi descoberto em Dezembro de 2013, contudo, o recurso HeartBeat está disponível desde o início de 2012, com isso nossos ambientes ficaram cerca de 2 anos expostos e vulneráveis ao HeartBleed.&lt;/p&gt;
&lt;h2 id=&#34;11-tirinha-do-xkcd-que-explica-o-bug&#34;&gt;11. Tirinha do XKCD que explica o BUG&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;http://imgs.xkcd.com/comics/heartbleed_explanation.png&#34; alt=&#34;xkcd heartbleed&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;12-referências&#34;&gt;12. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.openssl.org/news/secadv_20140407.txt&#34;&gt;https://www.openssl.org/news/secadv_20140407.txt&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://rhn.redhat.com/errata/RHSA-2014-0376.html&#34;&gt;https://rhn.redhat.com/errata/RHSA-2014-0376.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://heartbleed.com/&#34;&gt;http://heartbleed.com/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://xkcd.com/1354/&#34;&gt;http://xkcd.com/1354/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.digitalocean.com/community/articles/how-to-protect-your-server-against-the-heartbleed-openssl-vulnerability&#34;&gt;https://www.digitalocean.com/community/articles/how-to-protect-your-server-against-the-heartbleed-openssl-vulnerability&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://community.openvpn.net/openvpn/wiki/heartbleed&#34;&gt;https://community.openvpn.net/openvpn/wiki/heartbleed&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://serverfault.com/questions/587414/do-i-need-to-replace-keys-for-openssh-in-response-to-heartbleed&#34;&gt;http://serverfault.com/questions/587414/do-i-need-to-replace-keys-for-openssh-in-response-to-heartbleed&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://superuser.com/questions/739349/does-heartbleed-affect-ssh-keys&#34;&gt;http://superuser.com/questions/739349/does-heartbleed-affect-ssh-keys&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://security.stackexchange.com/questions/55076/what-should-a-website-operator-do-about-the-heartbleed-openssl-exploit&#34;&gt;http://security.stackexchange.com/questions/55076/what-should-a-website-operator-do-about-the-heartbleed-openssl-exploit&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vídeo da palestra de Puppet no CISL</title>
      <link>https://archives.gutocarvalho.net/post/2014-04-08-video-da-palestra-de-puppet-no-cisl/</link>
      <pubDate>Tue, 08 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-04-08-video-da-palestra-de-puppet-no-cisl/</guid>
      <description>&lt;iframe width=&#34;640&#34; height=&#34;480&#34; src=&#34;http://www.youtube.com/embed/LqasY4-npXU&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;O vídeo também está disponível no site do SERPRO/CISL.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://assiste.serpro.gov.br/cisl/puppet.html&#34;&gt;http://assiste.serpro.gov.br/cisl/puppet.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Slidedeck palestra Puppet CISL</title>
      <link>https://archives.gutocarvalho.net/post/2014-04-07-slidedeck-palestra-puppet-cisl/</link>
      <pubDate>Mon, 07 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-04-07-slidedeck-palestra-puppet-cisl/</guid>
      <description>&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/33231110&#34; width=&#34;580&#34; height=&#34;480&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC; border-width:1px 1px 0; margin-bottom:5px; max-width: 100%;&#34; allowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;https://www.slideshare.net/GutoCarvalho/infraestrutura-gil-com-puppet-cisl&#34; title=&#34;Infraestrutura ágil com Puppet - CISL&#34; target=&#34;_blank&#34;&gt;Infraestrutura ágil com Puppet - CISL&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Recall da versão 3.5</title>
      <link>https://archives.gutocarvalho.net/post/2014-04-06-puppet-recall-da-versao-3-dot-5/</link>
      <pubDate>Sun, 06 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-04-06-puppet-recall-da-versao-3-dot-5/</guid>
      <description>&lt;p&gt;A Puppetlabs chamou um &lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/release_notes.html#recalled-on-april-4-2014&#34;&gt;Recall&lt;/a&gt; da versão 3.5, isto significa que essa versão foi removida dos repositórios da puppetlabs e teremos que aguardar até o dia 07 ou 08 de Abril para encontrá-la novamente - após algumas correções.&lt;/p&gt;
&lt;p&gt;Alguns usuários reportaram problemas no Puppet 3.5.0 em ambientes que usam o workaround &lt;strong&gt;Dynamic Environments&lt;/strong&gt;, além disto, algumas mudanças no resource type YUMREPO - recurso que foi totalmente refatorado para melhorar a qualidade e resolver alguns problemas - geraram novos bugs que estão sendo analisados e corrigidos.&lt;/p&gt;
&lt;p&gt;~~Se você já atualizou e não usa nenhum dos recursos acima mencionados, fique tranquilo, não há necessidade de retorno.
~~&lt;/p&gt;
&lt;p&gt;Atualizei para o 3.5.0 para testar e mesmo não tendo nada que usa YUMREPO ou ENVIRONMENTS meu ambiente deixou de funcionar e gerenciar os nodes, ainda não encontrei o problema, vou clonar a VM e insistir para tentar abrir um ticket pelo menos, mas no ambiente de produção fiz o downgrade para 3.4.3.&lt;/p&gt;
&lt;p&gt;Acompanhe a [página]((&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/release_notes.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/release_notes.html&lt;/a&gt;) de release notes para saber mais novidades.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet 3.5 Lançado</title>
      <link>https://archives.gutocarvalho.net/post/2014-04-04-puppet-3-dot-5-lancado/</link>
      <pubDate>Fri, 04 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-04-04-puppet-3-dot-5-lancado/</guid>
      <description>&lt;p&gt;Foi lançado no dia 03 de Abril a versão &lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/release_notes.html#puppet-350&#34;&gt;3.5&lt;/a&gt; do &lt;a href=&#34;http://www.puppetlabs.com&#34;&gt;Puppet&lt;/a&gt;, esta versão traz muitas novidades, correções e melhorias de performance.&lt;/p&gt;
&lt;p&gt;Se você instalou o Puppet através do repositórios da Puppetlabs, faça inicialmente a atualização do puppemaster e depois dos agentes, esta é a recomendação Puppetlabs para atualizar o seu ambiente.&lt;/p&gt;
&lt;p&gt;Se você vai atualizar da versão 2.x para a 3.x não deixe de ler a página &lt;a href=&#34;http://docs.puppetlabs.com/guides/upgrading.html&#34;&gt;upgrading&lt;/a&gt; e  o release notes da versão &lt;a href=&#34;http://docs.puppetlabs.com/puppet/3/reference/release_notes.html&#34;&gt;3.0.0&lt;/a&gt; para saber o que pode quebrar com a atualização.&lt;/p&gt;
&lt;h2 id=&#34;1-principais-novidades&#34;&gt;1. Principais Novidades&lt;/h2&gt;
&lt;h3 id=&#34;11-environments&#34;&gt;1.1. Environments&lt;/h3&gt;
&lt;p&gt;Nova forma de configurar environments, esse novo método é um substituto para o workaround &amp;ldquo;dynamic environments&amp;rdquo;, agora podemos utilizar a diretiva &lt;strong&gt;$confdir/environments&lt;/strong&gt;, e cada diretório que for criado lá dentro será um novo environment. Todas as configurações do diretório criado serão carregadas automaticamente, nenhuma configuração adicional será necessária para utilização deste recurso.&lt;/p&gt;
&lt;h3 id=&#34;12-import-deprecated&#34;&gt;1.2 Import Deprecated&lt;/h3&gt;
&lt;p&gt;Nova forma de carregar manifests, a forma clássica &lt;strong&gt;import &amp;ldquo;subdir/*.pp&amp;rdquo;&lt;/strong&gt; que normalmente utilizamos no &lt;strong&gt;site.pp&lt;/strong&gt; pode ser deixada para trás, agora podemos setar a diretiva &lt;strong&gt;$confdir/manifests&lt;/strong&gt; e definir o diretório em que estão nossos manifests, o puppet vai ler o diretório e carregar todos os manifests existentes - recursivamente.&lt;/p&gt;
&lt;h3 id=&#34;13-config-settings&#34;&gt;1.3 Config Settings&lt;/h3&gt;
&lt;p&gt;Agora poderemos alterar as configurações do puppet sem necessariamente editar, modificar ou recarregar o arquivo &lt;strong&gt;puppet.conf&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Abaixo a sintaxe do comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# puppet config set &amp;lt;SETTING NAME&amp;gt; &amp;lt;VALUE&amp;gt; --section &amp;lt;CONFIG SECTION&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Abaixo veja um exemplo da seção agent do puppet.conf&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[agent]
graph = true
pluginsync = true
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Vamos adicionar uma diretiva a seção &lt;strong&gt;agent&lt;/strong&gt; através do novo comando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet config set report true --section agent
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após rodar o comando você vai verificar que a diretiva foi adicionada ao arquivo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[agent]
report = true
graph = true
pluginsync = true
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Você pode adicionar, remover ou alterar o valor de uma diretiva  com ele.&lt;/p&gt;
&lt;h3 id=&#34;15-global-facts&#34;&gt;1.5 Global Facts&lt;/h3&gt;
&lt;p&gt;Essa talvez seja uma das novidades mais interessantes desta versão, e vai certamente ajudar a diferenciar fatos de variáveis em nossos manifests e templates, algo que gerava - e ainda gera - confusão e dúvidas entre usuários iniciantes.&lt;/p&gt;
&lt;p&gt;Até a versão 3.4 a forma recomendada de declarar um fato era assim&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$::operationalsystem
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja que fatos deveriam ser declarados como se fossem variáveis globais - topo de escopo, era ai que morava a confusão, e além disto, neste modelo o nomes dos fatos &lt;strong&gt;não&lt;/strong&gt; são protegidos, podendo ser sobrescritos por variáveis locais se estiverem declarados incorretamente.&lt;/p&gt;
&lt;p&gt;Com o recurso &lt;strong&gt;global facts&lt;/strong&gt; podemos declarar fatos através da variável protegida &lt;strong&gt;$facts&lt;/strong&gt;, essa variável vai conter todos os fatos de um node, e estes poderão ser extraídos da seguinte forma:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$facts[operationalsystem]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Usando global facts a Puppetlabs pretende deixar o código do Puppet mais legível, limpo, evitando poluir os namespaces de variáveis globais.&lt;/p&gt;
&lt;p&gt;Esse recurso vem desligado no Puppet 3.5, mas você pode ativá-lo com o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet config set trusted_node_data true --section master
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ele provavelmente virá habilitado por padrão na versão 4.&lt;/p&gt;
&lt;h3 id=&#34;16-structured-facts-early-version&#34;&gt;1.6 Structured Facts (Early Version)&lt;/h3&gt;
&lt;p&gt;Todos os valores de fatos retornados na versão &lt;strong&gt;1.x&lt;/strong&gt; do facter são strings, o que limita muito a construção de módulos com manifests e templates mais complexos. Já no facter &lt;strong&gt;2.0&lt;/strong&gt; - que será padrão no Puppet 4 - temos suporte a vários tipos dados como Boleanos, Strings, Arrays e Hashs. Na versão 3.5 já é possível utilizar esse recurso, porém, ele precisa ser habilitado manualmente.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet config set stringify_facts false --section master
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vale lembrar que isso ainda é bem novo no Puppet, está funcionando de forma estável, contudo, alguns sistemas externos como o PuppetDB ainda não tem suporte a esses diferentes tipos de dados, logo quando fatos personalizados forem enviados para o PuppetDB, estes serão convertidos em strings.&lt;/p&gt;
&lt;p&gt;A Puppetlabs assegura que entre o Puppet e o Facter tudo funciona bem, isso em si já possibilta construir ou modificar nossos custom facts para usar esses novos tipos de dados, então aproveite.&lt;/p&gt;
&lt;h3 id=&#34;17-future-parser&#34;&gt;1.7 Future Parser&lt;/h3&gt;
&lt;p&gt;Desde o Puppet 3.2.1 o Future Parser está presente, porém agora a Puppetlabs informa que ele está mais maduro para ambientes maiores e mais complexos. O Puppet Future Parser será o novo parser na versão 4 do Puppet, ele será compatível com a nova linguagem do Puppet, esta nova linguagem vai deixar de ser baseada em estados e passará a ser baseada em expressões, o que segundo a puppetlabs trará maior flexibilidade dentro do que se pode fazer hoje com o Puppet.&lt;/p&gt;
&lt;p&gt;Na versão 3.5 é necessário habilitar esse recurso manualmente, mas fique ciente de que a Puppetlabs informa que não é aconselhável seu uso em produção.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet config set parser future --section master
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;18-ordering&#34;&gt;1.8 Ordering&lt;/h3&gt;
&lt;p&gt;Quem já tem alguma experiência com o Puppet sabe que é possível especificar a ordem de execução de nossos manifests criando dependências entre nossos rescursos, fazemos isto geralmente através dos meta-parâmetros before, require, notify e subscribe, com isto, temos como garantir a ordem em que as
coisas vão acontecer, porém, novos entusiastas do Puppet tem muita
dificuldade em estabelecer essa ordem, isto ocorre por não conhecerem a fundo
meta-parâmetros ou regras de relacionamento com chaining arrows.&lt;/p&gt;
&lt;p&gt;Quem está começando com o Puppet geralmente espera que ele execute o manifest em modo na ordem em que escreve o seu manifest - TOP DOWN, porém não é assim que acontece.&lt;/p&gt;
&lt;p&gt;Na série 3.x é possível definir esse comportamento ajustando o valor da diretiva &lt;strong&gt;ordering&lt;/strong&gt; para &lt;strong&gt;manifest&lt;/strong&gt;, podemos fazer isto com o comando abaixo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet config set ordering manifest --section master
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Funciona bem, contudo, não é algo que eu indico ou recomendo, principalmente se você vai compartilhar código com alguém, ou se vai liberar seus módulos públicamente. Em classes simples até dá para pensar, mas em módulos e em ambiente produtivo é melhor estudar, entender e aplicar recursos de relacionamento, pois sem eles pode ficar bem difícil entender seu código.&lt;/p&gt;
&lt;h3 id=&#34;19-suporte-a-novos-sistemas-operacionais&#34;&gt;1.9 Suporte a novos sistemas operacionais&lt;/h3&gt;
&lt;p&gt;O Puppet agora funciona no RHEL 7 e tem suporte pleno ao systemd. Em breve Fedora 19 e 20 também serão suportados, ambos estão em fase final de testes.&lt;/p&gt;
&lt;h3 id=&#34;110-deixa-de-ser-suportado&#34;&gt;1.10 Deixa de ser suportado&lt;/h3&gt;
&lt;p&gt;A Puppetlabs deixa de suportar o sistema operacional Fedora 18.&lt;/p&gt;
&lt;h3 id=&#34;111-melhoria-de-performance&#34;&gt;1.11 Melhoria de performance&lt;/h3&gt;
&lt;p&gt;A versão 3.5 está bem mais rápida! A puppetlabs encontrou algumas situações relacionadas ao &lt;strong&gt;puppet cert list&lt;/strong&gt;, &lt;strong&gt;definitions&lt;/strong&gt; e &lt;strong&gt;geração de módulos&lt;/strong&gt; que eram bem mais lentas do que deveriam ser, e após o devido tratamento a performance de todos estes recursos, e mais alguns outros, foi melhorada sensivelmente.&lt;/p&gt;
&lt;h2 id=&#34;2-correções&#34;&gt;2. Correções&lt;/h2&gt;
&lt;p&gt;Acessa a lista completa de correções da versão 3.5.0&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tickets.puppetlabs.com/browse/PUP/fixforversion/11009&#34;&gt;https://tickets.puppetlabs.com/browse/PUP/fixforversion/11009&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-referências&#34;&gt;3. Referências&lt;/h2&gt;
&lt;h5 id=&#34;puppet-530&#34;&gt;Puppet 5.3.0&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/release_notes.html#puppet-350&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/release_notes.html#puppet-350&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;environments&#34;&gt;Environments&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/environments.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/environments.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/dirs_modulepath.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/dirs_modulepath.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;import&#34;&gt;Import&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/dirs_manifest.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/dirs_manifest.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;puppet-config&#34;&gt;Puppet Config&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/config_set.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/config_set.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;global-facts&#34;&gt;Global Facts&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html#getting-new-features-early&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html#getting-new-features-early&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;structured-facts&#34;&gt;Structured Facts&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html#getting-new-features-early&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/config_important_settings.html#getting-new-features-early&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;future-parser&#34;&gt;Future Parser&lt;/h5&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/experiments_future.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/experiments_future.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://puppetlabs.com/blog/puppet-3-2-introduces-an-experimental-parser-and-new-iteration-features&#34;&gt;http://puppetlabs.com/blog/puppet-3-2-introduces-an-experimental-parser-and-new-iteration-features&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Mudança de agenda Palestra Puppet CISL</title>
      <link>https://archives.gutocarvalho.net/post/2014-04-01-mudanca-de-agenda-palestra-puppet-cisl/</link>
      <pubDate>Tue, 01 Apr 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-04-01-mudanca-de-agenda-palestra-puppet-cisl/</guid>
      <description>&lt;p&gt;Hoje eu estaria ministrando uma &lt;a href=&#34;http://www.softwarelivre.gov.br/eventos/palestra-tecnica-do-cisl-infraestrutura-agil-com-puppet/&#34;&gt;palestra&lt;/a&gt; sobre Puppet no CISL, mas como meu filho Artur nasceu nesta madrugada ela foi remarcada para o dia &lt;strong&gt;07/04/2014&lt;/strong&gt;, das 10 as 12 horas, no SERPRO, SGAN, Quadra 601, Módulo &amp;ldquo;V&amp;rdquo;, Brasília/DF.&lt;/p&gt;
&lt;p&gt;O tema será &lt;a href=&#34;http://www.softwarelivre.gov.br/eventos/palestra-tecnica-do-cisl-infraestrutura-agil-com-puppet/&#34;&gt;Infraestrutura Ágil com Puppet&lt;/a&gt;. Vou apresentar o conceito de gerência de configurações, a ferramenta Puppet e suas características, faremos uma análise e comparação do método de administração manual com o método de gerência automatizada, e vou falar sobre alguns cases de Puppet no governo federal.&lt;/p&gt;
&lt;p&gt;Pretendo também falar sobre o Mcollective e demonstrar seu uso ao vivo, além do PuppetDB e Foreman.&lt;/p&gt;
&lt;p&gt;A palestra será transmitida ao vivo pela web.&lt;/p&gt;
&lt;p&gt;Participe.&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Utilizando módulo Puppetlabs Apache</title>
      <link>https://archives.gutocarvalho.net/post/2014-03-28-utilizando-modulo-puppetlabs-apache-httpd/</link>
      <pubDate>Fri, 28 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-03-28-utilizando-modulo-puppetlabs-apache-httpd/</guid>
      <description>&lt;h2 id=&#34;1-módulos-da-puppetlabs&#34;&gt;1. Módulos da Puppetlabs&lt;/h2&gt;
&lt;p&gt;Como informei no post &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/03/26/utilizando-modulo-puppetlabs-mysql/&#34;&gt;anterior&lt;/a&gt;, resolvi iniciar uma série de posts para divulgar os excelentes módulos da Puppetlabs, muita gente não os usa e não os conhece. Estes módulos são maduros e bem testados, afinal são construídos de forma coletiva pela comunidade puppet.&lt;/p&gt;
&lt;p&gt;Não vale a pena investir tempo reinventando a roda, use estes módulos!&lt;/p&gt;
&lt;h2 id=&#34;2-método-aplicado&#34;&gt;2. Método aplicado&lt;/h2&gt;
&lt;p&gt;A ideia aqui não é mostrar como se instala e configura o PuppetMaster, isso já foi bem coberto neste blog e nas wikis do meu site, partirei da ideia de que você já tem um ambiente rodando e em produção. Eu simplesmente vou mostrar alguns exemplos de uso do módulo para facilitar a configuração.&lt;/p&gt;
&lt;h2 id=&#34;3-entendendo-os-módulos&#34;&gt;3. Entendendo os módulos&lt;/h2&gt;
&lt;p&gt;Todos os módulos da Puppetlabs tem um arquivo &lt;strong&gt;README&lt;/strong&gt;, este arquivo contém informações mais do que suficientes para entender seu funcionamento e fazer
uso dele.&lt;/p&gt;
&lt;p&gt;Você vai encontrar os módulos da puppetlabs no &lt;a href=&#34;http://forge.puppetlabs.com/puppetlabs&#34;&gt;Forge&lt;/a&gt; e no &lt;a href=&#34;https://github.com/puppetlabs/&#34;&gt;Github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;No caso do Github existem outros projetos no repositório além dos módulos, normalmente os módulos terão o nome de puppetlabs-module, mas na descrição estará bem claro.&lt;/p&gt;
&lt;h2 id=&#34;4-sobre-o-módulo-puppetlabs-apache&#34;&gt;4. Sobre o módulo Puppetlabs Apache&lt;/h2&gt;
&lt;p&gt;Este módulo é bastante interessante, particularmente eu o uso para gerenciar meus servidores apache, com ele consigo instalar o Apache, habilitar módulos, criar vhost, configurar vhosts e muito mais.&lt;/p&gt;
&lt;h3 id=&#34;41-classes&#34;&gt;4.1 Classes&lt;/h3&gt;
&lt;h4 id=&#34;411-public-classes&#34;&gt;4.1.1 Public Classes&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;apache: Guides the basic setup of Apache.&lt;/li&gt;
&lt;li&gt;apache::dev: Installs Apache development libraries. (Note: On FreeBSD, you must declare apache::package or apache before apache::dev.)&lt;/li&gt;
&lt;li&gt;apache::mod::[name]: Enables specific Apache HTTPD modules.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;412-private-classes&#34;&gt;4.1.2 Private Classes&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;apache::confd::no_accf: Creates the no-accf.conf configuration file in conf.d, required by FreeBSD&amp;rsquo;s Apache 2.4.&lt;/li&gt;
&lt;li&gt;apache::default_confd_files: Includes conf.d files for FreeBSD.&lt;/li&gt;
&lt;li&gt;apache::default_mods: Installs the Apache modules required to run the default configuration.&lt;/li&gt;
&lt;li&gt;apache::package: Installs and configures basic Apache packages.&lt;/li&gt;
&lt;li&gt;apache::params: Manages Apache parameters.&lt;/li&gt;
&lt;li&gt;apache::service: Manages the Apache daemon.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;42-defined-types&#34;&gt;4.2 Defined Types&lt;/h3&gt;
&lt;h4 id=&#34;421-public-defined-types&#34;&gt;4.2.1 Public Defined Types&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;apache::balancer: Creates an Apache balancer cluster.&lt;/li&gt;
&lt;li&gt;apache::balancermember: Defines members of mod_proxy_balancer.&lt;/li&gt;
&lt;li&gt;apache::listen: Based on the title, controls which ports Apache binds to for listening. Adds Listen directives to ports.conf in the Apache HTTPD configuration directory. Titles take the form &amp;lsquo;&amp;rsquo;, &amp;lsquo;:&amp;rsquo;, or &amp;lsquo;:&amp;rsquo;.&lt;/li&gt;
&lt;li&gt;apache::mod: Used to enable arbitrary Apache HTTPD modules for which there is no specific apache::mod::[name] class.&lt;/li&gt;
&lt;li&gt;apache::namevirtualhost: Enables name-based hosting of a virtual host. Adds all NameVirtualHost directives to the ports.conf file in the Apache HTTPD configuration directory. Titles take the form &amp;lsquo;&lt;em&gt;&amp;rsquo;, &amp;lsquo;&lt;/em&gt;:&amp;rsquo;, &amp;lsquo;&lt;em&gt;default&lt;/em&gt;:, &amp;lsquo;&amp;rsquo;, or &amp;lsquo;:&amp;rsquo;.&lt;/li&gt;
&lt;li&gt;apache::vhost: Allows specialized configurations for virtual hosts that have requirements outside the defaults.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;422-private-defined-types&#34;&gt;4.2.2 Private Defined Types&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;apache::peruser::multiplexer: Enables the Peruser module for FreeBSD only.&lt;/li&gt;
&lt;li&gt;apache::peruser::processor: Enables the Peruser module for FreeBSD only.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;43-templates&#34;&gt;4.3 Templates&lt;/h3&gt;
&lt;p&gt;The Apache module relies heavily on templates to enable the vhost and apache::mod defined types. These templates are built based on Facter facts around your operating system. Unless explicitly called out, most templates are not meant for configuration.&lt;/p&gt;
&lt;h2 id=&#34;5-instalando-o-módulo-apache&#34;&gt;5. Instalando o módulo Apache&lt;/h2&gt;
&lt;p&gt;No servidor puppetmaster acesse o diretório de módulos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /etc/puppet/modules
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos instalar o módulo apache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet module install puppetlabs-apache
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: Preparing to install into /etc/puppet/modules ...
Notice: Downloading from https://forge.puppetlabs.com ...
Notice: Installing -- do not interrupt ...
/etc/puppet/modules
└─┬ puppetlabs-apache (v1.0.1)
  └── puppetlabs-concat (v1.0.2)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que ele instalou o módulo concat que é dependência para este módulo.&lt;/p&gt;
&lt;h2 id=&#34;5-utilizando-o-módulo&#34;&gt;5. Utilizando o módulo&lt;/h2&gt;
&lt;p&gt;Edite o arquivo &lt;strong&gt;/etc/puppet/manifests/site.pp&lt;/strong&gt; e insira o código abaixo no node que receberá as configurações para instalação do Apache HTTPd.&lt;/p&gt;
&lt;h3 id=&#34;51-para-instalar-o-apache-httpd-server&#34;&gt;5.1 Para instalar o Apache HTTPD Server&lt;/h3&gt;
&lt;p&gt;É importante você saber que configurações do apache que &lt;strong&gt;não&lt;/strong&gt; são gerenciadas pelo Puppet serão removidas, esse módulo leva em conta que seu apache só será gerido pelo Puppet, logo tome cuidado ao usar em produção, pense em migrar o ambiente, será mais seguro. Eu criei uma nova VM, avaliei a VM antiga, escrevi toda a configuração, copiei os arquivos de aplicação e rodei o puppet, isso me permitiu desativar a VM antiga com segurança.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
node &amp;ldquo;apache.hacklab&amp;rdquo; {
include apache
include apache::mod::php
include apache::mod::alias
include apache::mod::rewrite
include apache::mod::ssl
include apache::mod::vhost_alias
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Eu coloquei neste exemplo as configurações que normalmente utilizo em meus ambientes, agora vamos aplicar.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Loading facts in /etc/puppet/modules/concat/lib/facter/concat_basedir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /var/lib/puppet/lib/facter/puppet_vardir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/root_home.rb
Info: Loading facts in /var/lib/puppet/lib/facter/pe_version.rb
Info: Loading facts in /var/lib/puppet/lib/facter/concat_basedir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/facter_dot_d.rb
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395824850&#39;
Notice: /Stage[main]/Apache/Package[httpd]/ensure: created
Info: /Stage[main]/Apache/Package[httpd]: Scheduling refresh of Class[Apache::Service]
Notice: /Stage[main]/Apache::Mod::Ssl/File[ssl.conf]/ensure: defined content as &#39;{md5}a3d9c9dac9163536b63c2801bdd43ea8&#39;
Info: /Stage[main]/Apache::Mod::Ssl/File[ssl.conf]: Scheduling refresh of Service[httpd]
Notice: /Stage[main]/Apache/File[/etc/httpd/conf/httpd.conf]/content:
...
...
...
...
Info: FileBucket got a duplicate file {md5}27a5c8d9e75351b08b8ca1171e8a0bbd
Info: /Stage[main]/Apache/File[/etc/httpd/conf/httpd.conf]: Filebucketed /etc/httpd/conf/httpd.conf to puppet with sum 27a5c8d9e75351b08b8ca1171e8a0bbd
Notice: /Stage[main]/Apache/File[/etc/httpd/conf/httpd.conf]/content: content changed &#39;{md5}27a5c8d9e75351b08b8ca1171e8a0bbd&#39; to &#39;{md5}227489018cada97a86d93b5ffafd6d4b&#39;
Info: /Stage[main]/Apache/File[/etc/httpd/conf/httpd.conf]: Scheduling refresh of Class[Apache::Service]
Notice: /Stage[main]/Apache::Mod::Php/Apache::Mod[php5]/Package[php]/ensure: created
Notice: /Stage[main]/Apache::Mod::Ssl/Apache::Mod[ssl]/Package[mod_ssl]/ensure: created
Info: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_Listen 443]: Filebucketed /var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_Listen 443 to puppet with sum 462e40c14c182d965ae6448e832ebb9a
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_Listen 443]/ensure: removed
Info: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_NameVirtualHost *:443]: Filebucketed /var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_NameVirtualHost *:443 to puppet with sum 235a73c5a3abcbafdd73c00f8c639b89
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_NameVirtualHost *:443]/ensure: removed
Info: /var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments: Scheduling refresh of Exec[concat_/etc/httpd/conf/ports.conf]
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/Exec[concat_/etc/httpd/conf/ports.conf]/returns: executed successfully
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/Exec[concat_/etc/httpd/conf/ports.conf]: Triggered &#39;refresh&#39; from 1 events
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/etc/httpd/conf/ports.conf]/content:
--- /etc/httpd/conf/ports.conf	2014-03-26 05:46:43.562816901 -0300
+++ /tmp/puppet-file20140326-3322-1da7azk-0	2014-03-26 06:08:06.286816834 -0300
@@ -3,7 +3,5 @@
 # Managed by Puppet
 # ************************************

-Listen 443
 Listen 80
-NameVirtualHost *:443
 NameVirtualHost *:80

Info: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/etc/httpd/conf/ports.conf]: Filebucketed /etc/httpd/conf/ports.conf to puppet with sum bc388698a3c11221869ded2030460038
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/etc/httpd/conf/ports.conf]/content: content changed &#39;{md5}bc388698a3c11221869ded2030460038&#39; to &#39;{md5}ac3b658e433eba85f350d4068b0ef826&#39;
Info: Concat[/etc/httpd/conf/ports.conf]: Scheduling refresh of Class[Apache::Service]
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-intranet.seusite.com.br.conf]: Filebucketed /etc/httpd/conf.d/25-intranet.seusite.com.br.conf to puppet with sum d03969fa47021eceeadeea38ef4805fb
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-intranet.seusite.com.br.conf]/ensure: removed
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-www.seusite.com.br.conf]: Filebucketed /etc/httpd/conf.d/25-www.seusite.com.br.conf to puppet with sum 230bc8bf6cd2bab7019c1c9cfa62df11
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-www.seusite.com.br.conf]/ensure: removed
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-blog.seusite.com.br.conf]: Filebucketed /etc/httpd/conf.d/25-blog.seusite.com.br.conf to puppet with sum 0d1676f1185addac23548ca2c36a8759
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-blog.seusite.com.br.conf]/ensure: removed
Info: FileBucket got a duplicate file {md5}a3d9c9dac9163536b63c2801bdd43ea8
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/ssl.conf.rpmsave]: Filebucketed /etc/httpd/conf.d/ssl.conf.rpmsave to puppet with sum a3d9c9dac9163536b63c2801bdd43ea8
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/ssl.conf.rpmsave]/ensure: removed
Info: FileBucket got a duplicate file {md5}98540d3009ecc6435d8770c24a71258a
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/welcome.conf]: Filebucketed /etc/httpd/conf.d/welcome.conf to puppet with sum 98540d3009ecc6435d8770c24a71258a
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/welcome.conf]/ensure: removed
Info: FileBucket got a duplicate file {md5}50015ff8bb23090aae4f8556987c5e40
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/php.conf]: Filebucketed /etc/httpd/conf.d/php.conf to puppet with sum 50015ff8bb23090aae4f8556987c5e40
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/php.conf]/ensure: removed
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-mobile.seusite.com.br.conf]: Filebucketed /etc/httpd/conf.d/25-mobile.seusite.com.br.conf to puppet with sum ed928ada5c97974fddc0bc4cbf268483
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/25-mobile.seusite.com.br.conf]/ensure: removed
Info: FileBucket got a duplicate file {md5}41f59421026a473a0378c58d539069c6
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/ssl.conf.rpmnew]: Filebucketed /etc/httpd/conf.d/ssl.conf.rpmnew to puppet with sum 41f59421026a473a0378c58d539069c6
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/ssl.conf.rpmnew]/ensure: removed
Info: FileBucket got a duplicate file {md5}e92bea7e9d70a9ecdc61edd7c0a2f59a
Info: /Stage[main]/Apache/File[/etc/httpd/conf.d/README]: Filebucketed /etc/httpd/conf.d/README to puppet with sum e92bea7e9d70a9ecdc61edd7c0a2f59a
Notice: /Stage[main]/Apache/File[/etc/httpd/conf.d/README]/ensure: removed
Info: /etc/httpd/conf.d: Scheduling refresh of Class[Apache::Service]
Info: Class[Apache::Service]: Scheduling refresh of Service[httpd]
Notice: /Stage[main]/Apache::Service/Service[httpd]/ensure: ensure changed &#39;stopped&#39; to &#39;running&#39;
Info: /Stage[main]/Apache::Service/Service[httpd]: Unscheduling refresh on Service[httpd]
Notice: Finished catalog run in 30.00 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que o puppet instalou o apache, ajustou os arquivos de configuração e reiniciou o serviço, tudo em 30 segundos, agora podemos verificar se a porta 80 está como LISTEN.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ntpl|grep :80
tcp        0      0 :::80        :::*     LISTEN       2414/httpd
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Podemos verificar se está respondendo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl localhost
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;p&gt;{% codeblock retorno do acesso localhost lang:html %}&lt;/p&gt;
&lt;!DOCTYPE HTML PUBLIC &#34;-//W3C//DTD HTML 3.2 Final//EN&#34;&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Index of /&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
&lt;h1&gt;Index of /&lt;/h1&gt;
&lt;table&gt;&lt;tr&gt;&lt;th&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/icons/blank.gif&#34; alt=&#34;[ICO]&#34;&gt;&lt;/th&gt;&lt;th&gt;&lt;a href=&#34;?C=N;O=D&#34;&gt;Name&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href=&#34;?C=M;O=A&#34;&gt;Last modified&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href=&#34;?C=S;O=A&#34;&gt;Size&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href=&#34;?C=D;O=A&#34;&gt;Description&lt;/a&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th colspan=&#34;5&#34;&gt;&lt;hr&gt;&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;th colspan=&#34;5&#34;&gt;&lt;hr&gt;&lt;/th&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;&lt;/html&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Veja que o site está respondendo perfeitamente. Vale a pena mencionar que o diretório apache, seja no Debian ou no CentOS, sofrerá uma mudança na organização  interna de diretórios e arquivos, isto é uma característica deste módulo, vai ficar diferente, mas tudo vai funcionar e seu servidor web estará devidamente automatizado.&lt;/p&gt;
&lt;h3 id=&#34;52-criando-vhosts&#34;&gt;5.2 Criando vhosts&lt;/h3&gt;
&lt;p&gt;Vamos criar um VHOST para cada um dos seguintes sites&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.seusite.com.br
http://blog.seusite.com.br
http://mobile.seusite.com.br
http://intranet.seusite.com.br
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos ao código&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;node &amp;ldquo;apache.hacklab&amp;rdquo; {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;include apache
include apache::mod::php
include apache::mod::alias
include apache::mod::rewrite
include apache::mod::ssl
include apache::mod::vhost_alias

# criando vhost simples

apache::vhost { &#39;www.seusite.com.br&#39;:
	port          =&amp;gt; &#39;80&#39;,
	docroot       =&amp;gt; &#39;/var/www/seusite&#39;,
}

# criando vhost especificando owners e options

apache::vhost { &#39;blog.seusite.com.br&#39;:
	port          =&amp;gt; &#39;80&#39;,
	docroot       =&amp;gt; &#39;/var/www/blog&#39;,
	docroot_owner =&amp;gt; &#39;apache&#39;,
	docroot_group =&amp;gt; &#39;apache&#39;,
	options       =&amp;gt; [&#39;Indexes&#39;,&#39;FollowSymLinks&#39;,&#39;MultiViews&#39;],
	override      =&amp;gt; [&#39;none&#39;],
}

# criando um vhost especificando configurações personalizadas de php

apache::vhost { &#39;mobile.seusite.com.br&#39;:
            port            =&amp;gt; &#39;80&#39;,
            docroot         =&amp;gt; &#39;/var/www/activesync&#39;,
            docroot_owner   =&amp;gt; &#39;apache&#39;,
            docroot_group   =&amp;gt; &#39;apache&#39;,
            options         =&amp;gt;  [&#39;All&#39;],
            override        =&amp;gt;  [&#39;All&#39;],
            custom_fragment =&amp;gt; [
                    &amp;quot;php_flag magic_quotes_gpc off \n&amp;quot;,
                    &amp;quot;php_flag register_globals off \n&amp;quot;,
                    &amp;quot;php_flag magic_quotes_runtime off \n&amp;quot;,
                    &amp;quot;php_flag short_open_tag on \n&amp;quot;,
                    &amp;quot;Alias /Microsoft-Server-ActiveSync /var/www/activesync/index.php&amp;quot;
            ],
    }


# criando vhost ssl usando certificados default

apache::vhost { &#39;intranet.seusite.com.br&#39;:
	port          =&amp;gt; &#39;443&#39;,
	docroot       =&amp;gt; &#39;/var/www/intranet&#39;,
	docroot_owner =&amp;gt; &#39;apache&#39;,
	docroot_group =&amp;gt; &#39;apache&#39;,
	options       =&amp;gt; [&#39;all&#39;],
	override      =&amp;gt; [&#39;all&#39;],
	ssl           =&amp;gt; true,
	# pode especificar um certificado se quiser
	#ssl_cert =&amp;gt; &#39;/etc/ssl/intranet.cert&#39;,
	#ssl_key  =&amp;gt; &#39;/etc/ssl/intranet.key&#39;,
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Cödigo no lugar, agora vamos rodar o puppet&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Loading facts in /etc/puppet/modules/concat/lib/facter/concat_basedir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /var/lib/puppet/lib/facter/puppet_vardir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/root_home.rb
Info: Loading facts in /var/lib/puppet/lib/facter/pe_version.rb
Info: Loading facts in /var/lib/puppet/lib/facter/concat_basedir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/facter_dot_d.rb
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395825015&#39;
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[intranet.seusite.com.br]/Apache::Listen[443]/Concat::Fragment[Listen 443]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_Listen 443]/ensure: created
Info: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[intranet.seusite.com.br]/Apache::Listen[443]/Concat::Fragment[Listen 443]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_Listen 443]: Scheduling refresh of Exec[concat_/etc/httpd/conf/ports.conf]
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[intranet.seusite.com.br]/Apache::Namevirtualhost[*:443]/Concat::Fragment[NameVirtualHost *:443]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_NameVirtualHost *:443]/ensure: created
Info: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[intranet.seusite.com.br]/Apache::Namevirtualhost[*:443]/Concat::Fragment[NameVirtualHost *:443]/File[/var/lib/puppet/concat/_etc_httpd_conf_ports.conf/fragments/10_NameVirtualHost *:443]: Scheduling refresh of Exec[concat_/etc/httpd/conf/ports.conf]
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/Exec[concat_/etc/httpd/conf/ports.conf]/returns: executed successfully
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/Exec[concat_/etc/httpd/conf/ports.conf]: Triggered &#39;refresh&#39; from 2 events
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/etc/httpd/conf/ports.conf]/content:
--- /etc/httpd/conf/ports.conf	2014-03-26 06:08:06.382816833 -0300
+++ /tmp/puppet-file20140326-3642-1h8p4wc-0	2014-03-26 06:10:34.465816827 -0300
@@ -3,5 +3,7 @@
 # Managed by Puppet
 # ************************************

+Listen 443
 Listen 80
+NameVirtualHost *:443
 NameVirtualHost *:80

Info: FileBucket got a duplicate file {md5}ac3b658e433eba85f350d4068b0ef826
Info: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/etc/httpd/conf/ports.conf]: Filebucketed /etc/httpd/conf/ports.conf to puppet with sum ac3b658e433eba85f350d4068b0ef826
Notice: /Stage[main]/Apache/Concat[/etc/httpd/conf/ports.conf]/File[/etc/httpd/conf/ports.conf]/content: content changed &#39;{md5}ac3b658e433eba85f350d4068b0ef826&#39; to &#39;{md5}bc388698a3c11221869ded2030460038&#39;
Info: Concat[/etc/httpd/conf/ports.conf]: Scheduling refresh of Class[Apache::Service]
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[intranet.seusite.com.br]/File[25-intranet.seusite.com.br.conf]/ensure: created
Info: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[intranet.seusite.com.br]/File[25-intranet.seusite.com.br.conf]: Scheduling refresh of Service[httpd]
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[mobile.seusite.com.br]/File[25-mobile.seusite.com.br.conf]/ensure: created
Info: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[mobile.seusite.com.br]/File[25-mobile.seusite.com.br.conf]: Scheduling refresh of Service[httpd]
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[blog.seusite.com.br]/File[25-blog.seusite.com.br.conf]/ensure: created
Info: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[blog.seusite.com.br]/File[25-blog.seusite.com.br.conf]: Scheduling refresh of Service[httpd]
Info: Class[Apache::Service]: Scheduling refresh of Service[httpd]
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[www.seusite.com.br]/File[25-www.seusite.com.br.conf]/ensure: created
Info: /Stage[main]/Main/Node[puppet.hacklab]/Apache::Vhost[www.seusite.com.br]/File[25-www.seusite.com.br.conf]: Scheduling refresh of Service[httpd]
Notice: /Stage[main]/Apache::Service/Service[httpd]: Triggered &#39;refresh&#39; from 5 events
Notice: Finished catalog run in 10.81 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Em menos de 11 segundos ele fez a configuração de 4 vhosts em nosso servidor, agora você só precisa colocar os arquivos de aplicação no diretório que foi declarado em seus vhosts, afinal o servidor já está pronto para rodando.&lt;/p&gt;
&lt;h2 id=&#34;6-amarrando-as-pontas&#34;&gt;6. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Neste post eu abordei a instalação do apache e a criação de vhosts simples, mas esse módulo tem muito, muito mais recursos, leia o README para ver, conhecer e entender seus vastos recursos.&lt;/p&gt;
&lt;p&gt;O uso do Puppet torna a administração do seu servidor web um processo limpo, organizado, rápido e eficiente, vale a pena usá-lo.&lt;/p&gt;
&lt;h2 id=&#34;7-referências&#34;&gt;7. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppetlabs/puppetlabs-apache&#34;&gt;https://github.com/puppetlabs/puppetlabs-apache&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://forge.puppetlabs.com/puppetlabs&#34;&gt;http://forge.puppetlabs.com/puppetlabs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/modules_fundamentals.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/modules_fundamentals.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Utilizando módulo Puppetlabs MySQL</title>
      <link>https://archives.gutocarvalho.net/post/2014-03-26-utilizando-modulo-puppetlabs-mysql/</link>
      <pubDate>Wed, 26 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-03-26-utilizando-modulo-puppetlabs-mysql/</guid>
      <description>&lt;h2 id=&#34;1-módulos-da-puppetlabs&#34;&gt;1. Módulos da Puppetlabs&lt;/h2&gt;
&lt;p&gt;Resolvi iniciar uma série de posts para divulgar os excelentes módulos da Puppetlabs, muita gente não os usa e não os conhece. Estes módulos são maduros e bem testados, afinal são construídos de forma coletiva pela comunidade puppet.&lt;/p&gt;
&lt;p&gt;Não vale a pena investir tempo reinventando a roda, use estes módulos!&lt;/p&gt;
&lt;h2 id=&#34;2-método-aplicado&#34;&gt;2. Método aplicado&lt;/h2&gt;
&lt;p&gt;A ideia aqui não é mostrar como se instala e configura o PuppetMaster, isso já foi bem coberto neste blog e nas wikis do meu site, partirei da ideia de que você já tem um ambiente rodando e em produção. Eu simplesmente vou mostrar alguns exemplos de uso do módulo para facilitar a configuração.&lt;/p&gt;
&lt;h2 id=&#34;3-entendendo-os-módulos&#34;&gt;3. Entendendo os módulos&lt;/h2&gt;
&lt;p&gt;Todos os módulos da Puppetlabs tem um arquivo &lt;strong&gt;README&lt;/strong&gt;, este arquivo contém informações mais do que suficientes para entender seu funcionamento e fazer
uso dele.&lt;/p&gt;
&lt;p&gt;Você vai encontrar os módulos da puppetlabs no &lt;a href=&#34;http://forge.puppetlabs.com/puppetlabs&#34;&gt;Forge&lt;/a&gt; e no &lt;a href=&#34;https://github.com/puppetlabs/&#34;&gt;Github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;No caso do Github existem outros projetos no repositório além dos módulos, normalmente os módulos terão o nome de puppetlabs-module, mas na descrição estará bem claro.&lt;/p&gt;
&lt;h2 id=&#34;4-sobre-o-módulo-puppetlabs-mysql&#34;&gt;4. Sobre o módulo Puppetlabs MySQL&lt;/h2&gt;
&lt;p&gt;Este módulo é bastante interessante, particularmente eu o uso para gerenciar todos os meus servidores mysql, ele possui as seguintes classes.&lt;/p&gt;
&lt;p&gt;Public classes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mysql::server: Installs and configures MySQL.&lt;/li&gt;
&lt;li&gt;mysql::server::account_security: Deletes default MySQL accounts.&lt;/li&gt;
&lt;li&gt;mysql::server::monitor: Sets up a monitoring user.&lt;/li&gt;
&lt;li&gt;mysql::server::mysqltuner: Installs MySQL tuner script.&lt;/li&gt;
&lt;li&gt;mysql::server::backup: Sets up MySQL backups via cron.&lt;/li&gt;
&lt;li&gt;mysql::bindings: Installs various MySQL language bindings.&lt;/li&gt;
&lt;li&gt;mysql::client: Installs MySQL client (for non-servers).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Private classes&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mysql::server::install: Installs packages.&lt;/li&gt;
&lt;li&gt;mysql::server::config: Configures MYSQL.&lt;/li&gt;
&lt;li&gt;mysql::server::service: Manages service.&lt;/li&gt;
&lt;li&gt;mysql::server::root_password: Sets MySQL root password.&lt;/li&gt;
&lt;li&gt;mysql::server::providers: Creates users, grants, and databases.&lt;/li&gt;
&lt;li&gt;mysql::bindings::java: Installs Java bindings.&lt;/li&gt;
&lt;li&gt;mysql::bindings::perl: Installs Perl bindings.&lt;/li&gt;
&lt;li&gt;mysql::bindings::python: Installs Python bindings.&lt;/li&gt;
&lt;li&gt;mysql::bindings::ruby: Installs Ruby bindings.&lt;/li&gt;
&lt;li&gt;mysql::client::install: Installs MySQL client.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Cada uma destas classes tem diversos parâmetros, portanto, recomendo uma leitura completa no README do módulo antes de iniciar suas aventuras.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppetlabs/puppetlabs-mysql&#34;&gt;https://github.com/puppetlabs/puppetlabs-mysql&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;4-instalando-o-módulo-mysql&#34;&gt;4. Instalando o módulo Mysql&lt;/h2&gt;
&lt;p&gt;No servidor puppetmaster acesse o diretório de módulos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /etc/puppet/modules
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E inicie uma busca por módulos da puppetlabs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet module search puppetlabs
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja os módulos disponíveis (filtrado)&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;puppetlabs-activemq
puppetlabs-apache
puppetlabs-appdirector
puppetlabs-apt
puppetlabs-awsdemo_profiles
puppetlabs-azure
puppetlabs-bacula
puppetlabs-boundary
puppetlabs-ceilometer
puppetlabs-cinder
puppetlabs-cloud_provisioner
puppetlabs-cloudformation
puppetlabs-concat
puppetlabs-corosync
puppetlabs-dashboard
puppetlabs-denyhosts
puppetlabs-dism
puppetlabs-drbd
puppetlabs-f5
puppetlabs-firewall
puppetlabs-gcc
puppetlabs-gce_compute
puppetlabs-git
puppetlabs-glance
puppetlabs-grizzly
puppetlabs-haproxy
puppetlabs-havana
puppetlabs-heat
puppetlabs-horizon
puppetlabs-inifile
puppetlabs-java
puppetlabs-java_ks
puppetlabs-keystone
puppetlabs-kwalify
puppetlabs-lib_puppet
puppetlabs-logentries
puppetlabs-lvm
puppetlabs-mcollective
puppetlabs-mongodb
puppetlabs-motd
puppetlabs-mount_providers
puppetlabs-mrepo
puppetlabs-mssql
puppetlabs-mysql
puppetlabs-neutron
puppetlabs-newrelic
puppetlabs-nginx
puppetlabs-node_gce
puppetlabs-node_openstack
puppetlabs-nodejs
puppetlabs-nova
puppetlabs-ntp
puppetlabs-opennebula
puppetlabs-openstack
puppetlabs-passenger
puppetlabs-pe_gem
puppetlabs-pe_upgrade
puppetlabs-postgresql
puppetlabs-puppetdb
puppetlabs-quantum
puppetlabs-rabbitmq
puppetlabs-razor
puppetlabs-reboot
puppetlabs-registry
puppetlabs-rsync
puppetlabs-ruby
puppetlabs-sqlite
puppetlabs-stdlib
puppetlabs-stunnel
puppetlabs-swift
puppetlabs-tftp
puppetlabs-vcenter
puppetlabs-vcli_rsyslog
puppetlabs-vcsrepo
puppetlabs-vswitch
puppetlabs-win_desktop_shortcut
puppetlabs-xinetd
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Vamos instalar o módulo mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet module install puppetlabs-mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Notice: Preparing to install into /etc/puppet/modules ...
Notice: Downloading from https://forge.puppetlabs.com ...
Notice: Installing -- do not interrupt ...
/etc/puppet/modules
└─┬ puppetlabs-mysql (v2.2.3)
  └── puppetlabs-stdlib (v4.1.0)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que ele instalou o módulo stdlib que é dependência para este módulo.&lt;/p&gt;
&lt;h2 id=&#34;5-utilizando-o-módulo&#34;&gt;5. Utilizando o módulo&lt;/h2&gt;
&lt;p&gt;Edite o arquivo /etc/puppet/manifests/site.pp e insira as configuações abaixo no node que receberá as configurações para instalação do MYSQL Server.&lt;/p&gt;
&lt;h3 id=&#34;51-para-instalar-o-mysql-server&#34;&gt;5.1 Para instalar o Mysql Server&lt;/h3&gt;
&lt;p&gt;{% codeblock lang:puppet %}
node &amp;ldquo;mysql.hacklab&amp;rdquo; {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;class { &#39;mysql::server&#39;:

	root_password    =&amp;gt; &#39;suasenha&#39;,

	override_options =&amp;gt; {
		&#39;mysqld&#39; =&amp;gt; {
			&#39;connect_timeout&#39;                 =&amp;gt; &#39;60&#39;,
			&#39;bind_address&#39;                    =&amp;gt; &#39;0.0.0.0&#39;,
			&#39;max_connections&#39;                 =&amp;gt; &#39;100&#39;,
			&#39;max_allowed_packet&#39;              =&amp;gt; &#39;512M&#39;,
			&#39;thread_cache_size&#39;               =&amp;gt; &#39;16&#39;,
			&#39;query_cache_size&#39;                =&amp;gt; &#39;128M&#39;,
		}
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Observe que é uma configuração bastante objetiva e direta, e eu uso a diretiva override_options para definir algumas configurações diretamente no aquivo my.cnf, sem depender dos parâmetros do módulo diretamente. Agora vamos aplicar a configuração.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /var/lib/puppet/lib/facter/puppet_vardir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/root_home.rb
Info: Loading facts in /var/lib/puppet/lib/facter/pe_version.rb
Info: Loading facts in /var/lib/puppet/lib/facter/facter_dot_d.rb
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395658656&#39;
Notice: /Stage[main]/Mysql::Server::Install/Package[mysql-server]/ensure: created
Notice: /Stage[main]/Mysql::Server::Config/File[/etc/mysql]/ensure: created
Notice: /Stage[main]/Mysql::Server::Config/File[/etc/my.cnf]/content:
--- /etc/my.cnf	2014-02-12 17:42:13.000000000 -0200
+++ /tmp/puppet-file20140324-2025-10nhr9y-0	2014-03-24 07:58:32.036141657 -0300
@@ -1,10 +1,46 @@
+[client]
+port = 3306
+socket = /var/lib/mysql/mysql.sock
+
+[isamchk]
+key_buffer_size = 16M
+
 [mysqld]
-datadir=/var/lib/mysql
-socket=/var/lib/mysql/mysql.sock
-user=mysql
-# Disabling symbolic-links is recommended to prevent assorted security risks
-symbolic-links=0
+basedir = /usr
+bind_address = 0.0.0.0
+connect_timeout = 60
+datadir = /var/lib/mysql
+expire_logs_days = 10
+key_buffer_size = 16M
+log-error = /var/log/mysqld.log
+max_allowed_packet = 512M
+max_binlog_size = 100M
+max_connections = 1400
+myisam_recover = BACKUP
+pid-file = /var/run/mysqld/mysqld.pid
+port = 3306
+query_cache_limit = 1M
+query_cache_size = 128M
+skip-external-locking
+socket = /var/lib/mysql/mysql.sock
+ssl = false
+ssl-ca = /etc/mysql/cacert.pem
+ssl-cert = /etc/mysql/server-cert.pem
+ssl-key = /etc/mysql/server-key.pem
+thread_cache_size = 16
+thread_stack = 256K
+tmpdir = /tmp
+user = mysql

 [mysqld_safe]
-log-error=/var/log/mysqld.log
-pid-file=/var/run/mysqld/mysqld.pid
+log-error = /var/log/mysqld.log
+nice = 0
+socket = /var/lib/mysql/mysql.sock
+
+[mysqldump]
+max_allowed_packet = 16M
+quick
+quote-names
+
+
+!includedir /etc/mysql/conf.d/

Info: /Stage[main]/Mysql::Server::Config/File[/etc/my.cnf]: Filebucketed /etc/my.cnf to puppet with sum 8ace886bbe7e274448bc8bea16d3ead6
Notice: /Stage[main]/Mysql::Server::Config/File[/etc/my.cnf]/content: content changed &#39;{md5}8ace886bbe7e274448bc8bea16d3ead6&#39; to &#39;{md5}995ee9b1c5173f66fe1e8adf81d1e0f0&#39;
Notice: /Stage[main]/Mysql::Server::Config/File[/etc/mysql/conf.d]/ensure: created
Notice: /Stage[main]/Mysql::Server::Service/Service[mysqld]/ensure: ensure changed &#39;stopped&#39; to &#39;running&#39;
Info: /Stage[main]/Mysql::Server::Service/Service[mysqld]: Unscheduling refresh on Service[mysqld]
Notice: /Stage[main]/Mysql::Server::Root_password/Mysql_user[root@localhost]/password_hash: defined &#39;password_hash&#39; as &#39;*686FAFB0D22504AC4005869A48377E6056C40F6A&#39;
Notice: /Stage[main]/Mysql::Server::Root_password/File[/root/.my.cnf]/ensure: defined content as &#39;{md5}c51fe9a952a98fdd64ad44e0f4b9e660&#39;
Notice: Finished catalog run in 53.98 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que o puppet instalou o mysqlserver, ajustou a senha de root, e alterou o arquivo de configuração. Agora verifique se o serviço está rodando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ntpl|grep 3306
tcp        0      0 0.0.0.0:3306     0.0.0.0:*  OUÇA     2495/mysqld
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tente se conectar no mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 74
Server version: 5.1.73 Source distribution

Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

mysql&amp;gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Tudo perfeito.&lt;/p&gt;
&lt;h3 id=&#34;52-criando-database-usuário-e-grant&#34;&gt;5.2 Criando database, usuário e grant&lt;/h3&gt;
&lt;p&gt;Abaixo vamos ajustar a configuração do node para criar um banco de dados para a aplicação teampass, já vamos definir o nome do banco, nome de usuário de acesso ao banco, senha do usuário e qual o host autoriado a acessar este banco com estas credenciais.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
node &amp;ldquo;mysql.hacklab&amp;rdquo; {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# instalando mysql server

class { &#39;mysql::server&#39;:
	root_password    =&amp;gt; &#39;suasenha&#39;,
	override_options =&amp;gt; {
		&#39;mysqld&#39; =&amp;gt; {
			&#39;connect_timeout&#39;                 =&amp;gt; &#39;60&#39;,
			&#39;bind_address&#39;                    =&amp;gt; &#39;0.0.0.0&#39;,
			&#39;max_connections&#39;                 =&amp;gt; &#39;1400&#39;,
			&#39;max_allowed_packet&#39;              =&amp;gt; &#39;512M&#39;,
			&#39;thread_cache_size&#39;               =&amp;gt; &#39;16&#39;,
			&#39;query_cache_size&#39;                =&amp;gt; &#39;128M&#39;,
		}
	}
}

# sistema teampass

    mysql::db { &#39;prod_teampass&#39;:
            user     =&amp;gt; &#39;teampass_user&#39;,
            password =&amp;gt; &#39;senha_teampass&#39;,
            host     =&amp;gt; &#39;teampass.hacklab&#39;,
            grant    =&amp;gt; [&#39;all&#39;],
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Feito os ajustes vamos rodar o puppet&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /var/lib/puppet/lib/facter/puppet_vardir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/root_home.rb
Info: Loading facts in /var/lib/puppet/lib/facter/pe_version.rb
Info: Loading facts in /var/lib/puppet/lib/facter/facter_dot_d.rb
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395659211&#39;
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Mysql::Db[prod_teampass]/Mysql_database[prod_teampass]/ensure: created
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Mysql::Db[prod_teampass]/Mysql_user[teampass_user@teampass.hacklab]/ensure: created
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Mysql::Db[prod_teampass]/Mysql_grant[teampass_user@teampass.hacklab/prod_teampass.*]/ensure: created
Notice: Finished catalog run in 5.91 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Base criada, usuário criado, grant criado, simples, rápido e fácil.&lt;/p&gt;
&lt;h3 id=&#34;53-criando-usuário-gutocarvalho&#34;&gt;5.3 Criando usuário gutocarvalho&lt;/h3&gt;
&lt;p&gt;Agora vamos criar o usuário gutocarvalho, vamos configurar uma senha e determinar o host de origem dos acessos deste usuário.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
node &amp;ldquo;mysql.hacklab&amp;rdquo; {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# instalando mysql server

class { &#39;mysql::server&#39;:
	root_password    =&amp;gt; &#39;suasenha&#39;,
	override_options =&amp;gt; {
		&#39;mysqld&#39; =&amp;gt; {
			&#39;connect_timeout&#39;                 =&amp;gt; &#39;60&#39;,
			&#39;bind_address&#39;                    =&amp;gt; &#39;0.0.0.0&#39;,
			&#39;max_connections&#39;                 =&amp;gt; &#39;1400&#39;,
			&#39;max_allowed_packet&#39;              =&amp;gt; &#39;512M&#39;,
			&#39;thread_cache_size&#39;               =&amp;gt; &#39;16&#39;,
			&#39;query_cache_size&#39;                =&amp;gt; &#39;128M&#39;,
		}
	}
}

# sistema teampass

    mysql::db { &#39;prod_teampass&#39;:
            user     =&amp;gt; &#39;teampass_user&#39;,
            password =&amp;gt; &#39;senha_teampass&#39;,
            host     =&amp;gt; &#39;teampass.hacklab&#39;,
            grant    =&amp;gt; [&#39;all&#39;],
    }

# usuario gutocarvalho

    mysql_user{ &#39;gutocarvalho@10.138.25.102&#39;:
            ensure        =&amp;gt; present,
            password_hash =&amp;gt; mysql_password(&#39;minhasenha&#39;),
            require       =&amp;gt; Class[&#39;mysql::server&#39;],
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Vamos aplicar a configuração&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /var/lib/puppet/lib/facter/puppet_vardir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/root_home.rb
Info: Loading facts in /var/lib/puppet/lib/facter/pe_version.rb
Info: Loading facts in /var/lib/puppet/lib/facter/facter_dot_d.rb
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395659615&#39;
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Mysql_user[gutocarvalho@10.138.25.102]/ensure: created
Notice: Finished catalog run in 5.79 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que o usuário foi criado no mysql.&lt;/p&gt;
&lt;h3 id=&#34;54-configurando-grant-para-usuário&#34;&gt;5.4 Configurando grant para usuário&lt;/h3&gt;
&lt;p&gt;Agora vamos ver como definir um grant para um usuário, no caso vamos dizer ao puppet que o usuário gutocarvalho terá permissão de SELECT no banco prod_teampass.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
node &amp;ldquo;mysql.hacklab&amp;rdquo; {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# instalando mysql server

class { &#39;mysql::server&#39;:
	root_password    =&amp;gt; &#39;suasenha&#39;,
	override_options =&amp;gt; {
		&#39;mysqld&#39; =&amp;gt; {
			&#39;connect_timeout&#39;                 =&amp;gt; &#39;60&#39;,
			&#39;bind_address&#39;                    =&amp;gt; &#39;0.0.0.0&#39;,
			&#39;max_connections&#39;                 =&amp;gt; &#39;1400&#39;,
			&#39;max_allowed_packet&#39;              =&amp;gt; &#39;512M&#39;,
			&#39;thread_cache_size&#39;               =&amp;gt; &#39;16&#39;,
			&#39;query_cache_size&#39;                =&amp;gt; &#39;128M&#39;,
		}
	}
}

# sistema teampass

    mysql::db { &#39;prod_teampass&#39;:
            user     =&amp;gt; &#39;teampass_user&#39;,
            password =&amp;gt; &#39;senha_teampass&#39;,
            host     =&amp;gt; &#39;teampass.hacklab&#39;,
            grant    =&amp;gt; [&#39;all&#39;],
    }

# usuario gutocarvalho

	mysql_user { &#39;gutocarvalho@10.138.25.102&#39;:
            ensure        =&amp;gt; present,
            password_hash =&amp;gt; mysql_password(&#39;minhasenha&#39;),
            require       =&amp;gt; Class[&#39;mysql::server&#39;],
   }

# grant para usuario gutocarvalho no banco teampass

	mysql_grant { &#39;gutocarvalho@10.138.25.102/prod_teampass.*&#39;:
            user       =&amp;gt; &#39;gutocarvalho@10.138.25.102&#39;,
            table      =&amp;gt; &#39;prod_teampass.*&#39;,
            privileges =&amp;gt; [&#39;SELECT&#39;],
	}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Vamos aplicar a configuração&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/puppet_vardir.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/root_home.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/pe_version.rb
Info: Loading facts in /etc/puppet/modules/stdlib/lib/facter/facter_dot_d.rb
Info: Loading facts in /var/lib/puppet/lib/facter/puppet_vardir.rb
Info: Loading facts in /var/lib/puppet/lib/facter/root_home.rb
Info: Loading facts in /var/lib/puppet/lib/facter/pe_version.rb
Info: Loading facts in /var/lib/puppet/lib/facter/facter_dot_d.rb
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395660070&#39;
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Mysql_grant[gutocarvalho@10.138.25.102/prod_teampass.*]/ensure: created
Notice: Finished catalog run in 7.50 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O grant foi criado.&lt;/p&gt;
&lt;h2 id=&#34;6-amarrando-as-pontas&#34;&gt;6. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Neste post eu abordei apenas estes três procedimentos, são os mais comuns, os mais usados. Com o que você fez até aqui, já dá para ter uma ideia de como instalar, configurar e utilizar um módulo da puppetlabs.&lt;/p&gt;
&lt;p&gt;Observe que a declaração dos recursos no node serve como uma documentação, como o Miguel Filho diz, é uma verdadeira documentação executável, tudo o que você precisa saber sobre esse servidor de banco está ali, e com esse dados você inclusive consegue reconstruir a máquina rapidamente.&lt;/p&gt;
&lt;p&gt;O uso do Puppet torna a administração do sgbd um processo limpo, organizado, rápido e eficiente, vale a pena usá-lo.&lt;/p&gt;
&lt;h2 id=&#34;7-referências&#34;&gt;7. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppetlabs/puppetlabs-mysql&#34;&gt;https://github.com/puppetlabs/puppetlabs-mysql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://forge.puppetlabs.com/puppetlabs&#34;&gt;http://forge.puppetlabs.com/puppetlabs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/puppet/latest/reference/modules_fundamentals.html&#34;&gt;http://docs.puppetlabs.com/puppet/latest/reference/modules_fundamentals.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>God gerenciando processo do Unicorn</title>
      <link>https://archives.gutocarvalho.net/post/2014-03-25-god-gerenciando-processo-do-unicorn/</link>
      <pubDate>Tue, 25 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-03-25-god-gerenciando-processo-do-unicorn/</guid>
      <description>&lt;h2 id=&#34;necessidade&#34;&gt;Necessidade&lt;/h2&gt;
&lt;p&gt;Lembrando do poeta Juvenal e suas sátiras, temos a famosa frase:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Quis custodiet ipsos custodes?
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Que traduzindo para pt_BR seria algo como:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Quem guardará os guardiões?
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ou em outra interpretação livre:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Quem vigiará os vigilantes?
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Isto se aplica a nossos cenários com o Puppetmaster. O UNICORN é o webserver do Puppet, o puppet é o nosso gerenciador de configurações, é ele que cuida de todo o nosso ambiente e infraestrutura. Através do Puppet podemos inclusive gerenciar serviços, mantendo estes habilitados e rodando, contudo, quem vai gerenciar o serviço do próprio Puppet?&lt;/p&gt;
&lt;p&gt;É aqui que entra o God, será através dele que vamos garantir que o processo do UNICORN esteja sempre rodando, e por consequência, o próprio serviço do Puppet.&lt;/p&gt;
&lt;h2 id=&#34;sobre-o-god&#34;&gt;Sobre o GOD&lt;/h2&gt;
&lt;p&gt;O &lt;a href=&#34;http://godrb.com/&#34;&gt;GOD&lt;/a&gt; é um framework de monitoramento todo escrito em Ruby, o seu criador propõe que o gerenciamento de processos e tarefas deve ser um procedimento simples, principalmente quando estamos fazendo o deploy de nossa aplicação, e isto o motivou a criar o GOD. Seu objetivo é torná-lo uma alternativa simples e robusta para monitoramento de aplicações.&lt;/p&gt;
&lt;p&gt;É possível além de manipular e monitorar processos e tarefas, enviar notificações para diversos serviços detre eles e-mail, jabber, twitter e outros.&lt;/p&gt;
&lt;p&gt;O God consegue monitorar processos e tarefas simples, e você pode criar grupos de processos ou tarefas para monitorar. Todas as configurações e tratamento de de condições são feitos em ruby.&lt;/p&gt;
&lt;h2 id=&#34;instalação-do-god&#34;&gt;Instalação do God&lt;/h2&gt;
&lt;p&gt;Instale o god&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gem install god
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o diretório para o god&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /etc/god
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie os arquivos de log e ajuste suas permissões&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;touch /var/log/unicorn_puppetmaster.log
touch /var/log/unicorn_stderr.log
chown puppet:puppet /var/log/unicorn_*.log
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;configuração-do-god&#34;&gt;Configuração do God&lt;/h2&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/god/puppetmaster.god&lt;/strong&gt; com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;God.watch do |w|
  w.name = &amp;quot;puppetmaster&amp;quot;
  w.interval = 30.seconds
  w.pid_file = &amp;quot;/var/run/puppet/puppetmaster_unicorn.pid&amp;quot;
  w.log = &amp;quot;/var/log/unicorn_puppetmaster.log&amp;quot;
  w.dir = &amp;quot;/etc/puppet&amp;quot;

  w.start = &amp;quot;ulimit -v 750000 &amp;amp;&amp;amp; exec /usr/bin/unicorn -c /etc/puppet/unicorn.conf -D&amp;quot;
  w.stop = &amp;quot;kill -QUIT `cat #{w.pid_file}`&amp;quot;
  w.restart = &amp;quot;kill -USR2 `cat #{w.pid_file}`&amp;quot;

  w.start_grace = 10.seconds
  w.restart_grace = 10.seconds

  w.uid = &amp;quot;puppet&amp;quot;
  w.gid = &amp;quot;puppet&amp;quot;

  w.behavior(:clean_pid_file)

  # determine the state on startup
  w.transition(:init, { true =&amp;gt; :up, false =&amp;gt; :start }) do |on|
    on.condition(:process_running) do |c|
      c.running = true
    end
  end

  # determine when process has finished starting
  w.transition([:start, :restart], :up) do |on|
    on.condition(:process_running) do |c|
      c.running = true
    end

    # failsafe
    on.condition(:tries) do |c|
      c.times = 5
      c.transition = :start
    end
  end

  # start if process is not running
  w.transition(:up, :start) do |on|
    on.condition(:process_exits)
  end

  w.start_if do |start|
    start.condition(:process_running) do |c|
      c.interval = 5.seconds
      c.running = false
    end
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Crie o arquivo /&lt;strong&gt;etc/init/god.conf&lt;/strong&gt; com o conteúdo abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;start on stopped rc RUNLEVEL=[2345]

stop on starting rc RUNLEVEL=[!2345]

env HOME=/etc/puppet

console output
respawn
respawn limit 10 120
exec /usr/bin/god --log-level info -D -c &#39;/etc/god/*.god&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Inicie o god&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;start god
god start/running, process 1976
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique o status dos serviços mantidos pelo god&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god status
puppetmaster: init
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Aguarde e verifique novamente se o serviço subiu (up)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god status
puppetmaster: up
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Quando aparecer UP, significará que o serviço subiu, você pode checar diretamente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps aux|grep unicorn
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída do comando&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;puppet    1398  0.2  4.8 140252 48676 ?        S    18:22   0:01 unicorn master -c /etc/puppet/unicorn.conf -D
puppet    1404  0.0  4.5 140216 46484 ?        S    18:22   0:00 unicorn worker[0] -c /etc/puppet/unicorn.conf -D
puppet    1405  0.0  4.5 140220 46484 ?        S    18:22   0:00 unicorn worker[1] -c /etc/puppet/unicorn.conf -D
puppet    1406  0.0  4.5 140224 46484 ?        S    18:22   0:00 unicorn worker[2] -c /etc/puppet/unicorn.conf -D
puppet    1407  0.0  4.5 140228 46488 ?        S    18:22   0:00 unicorn worker[3] -c /etc/puppet/unicorn.conf -D
puppet    1408  0.0  4.5 140232 46488 ?        S    18:22   0:00 unicorn worker[4] -c /etc/puppet/unicorn.conf -D
puppet    1409  0.0  4.5 140236 46488 ?        S    18:22   0:00 unicorn worker[5] -c /etc/puppet/unicorn.conf -D
puppet    1410  0.0  4.5 140240 46492 ?        S    18:22   0:00 unicorn worker[6] -c /etc/puppet/unicorn.conf -D
puppet    1411  0.0  4.5 140244 46492 ?        S    18:22   0:00 unicorn worker[7] -c /etc/puppet/unicorn.conf -D
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O unicorn está rodando, agora para testar se o god está funcionando na inicialização, reinicie o seu servidor e verifique se o serviço vai carregar automaticamente.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;reboot
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;manipulando-o-god&#34;&gt;Manipulando o God&lt;/h2&gt;
&lt;p&gt;Para carregar um novo serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god load servico
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para iniciar um serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god start servico
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para parar um serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god stop servico
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para reiniciar um serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god restart servico
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para verificar o status dos serviços mantidos pelo god&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god status
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para verificar o status de um serviço específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god status servico
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para ver outros comandos do God&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;god --help
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;amarrando-as-pontas&#34;&gt;Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Com o GOD vamos ter a garantia de que alguém estará protegendo e monitorando o processo de nosso puppemaster, e caso o processo falhe, caso  o processo caia, o GOD irá iniciá-lo novamente. Isto traz maior disponibilidade para nosso ambiente e maior controle dos processos. Vale a pena investir nele.&lt;/p&gt;
&lt;p&gt;Com o GOD, não há necessiade de criar um script INIT para o serviço já que será ele que vai cuidar do processo, no tutorial acima, criamos apenas um init no upstart para o GOD, o resto é com ele.&lt;/p&gt;
&lt;h2 id=&#34;referências&#34;&gt;Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://godrb.com/&#34;&gt;http://godrb.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://trateotu.proxy.nl/centos-6-5-puppet-v3-nginx-unicorn-and-god/&#34;&gt;http://trateotu.proxy.nl/centos-6-5-puppet-v3-nginx-unicorn-and-god/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.unixh4cks.com/index.php/Puppetmaster_:_Nginx_%2B_Unicorn&#34;&gt;http://wiki.unixh4cks.com/index.php/Puppetmaster_:_Nginx_%2B_Unicorn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://projects.puppetlabs.com/projects/1/wiki/using_unicorn&#34;&gt;http://projects.puppetlabs.com/projects/1/wiki/using_unicorn&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Rodando PuppetMaster com Nginx e Unicorn no CentOS</title>
      <link>https://archives.gutocarvalho.net/post/2014-03-25-rodando-puppetmaster-com-nginx-e-unicorn-no-centos/</link>
      <pubDate>Tue, 25 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-03-25-rodando-puppetmaster-com-nginx-e-unicorn-no-centos/</guid>
      <description>&lt;h2 id=&#34;1-acelerando-e-escalando-master-com-unicorn-e-nginx&#34;&gt;1. Acelerando e escalando master com Unicorn e Nginx&lt;/h2&gt;
&lt;p&gt;No post &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/03/25/rodando-puppetmaster-com-nginx-e-unicorn-no-ubuntu/&#34;&gt;anterior&lt;/a&gt; demonstrei esse procedimento no Ubuntu, agora vamos ver como fazer no CentOS.&lt;/p&gt;
&lt;p&gt;O UNICORN é um servidor web especializado em apps ruby, escrito em ruby e focado em performance, muito mais eficiente e rápido do que o webrick, e também com melhor performance se compararmos com apache + passenger.&lt;/p&gt;
&lt;h2 id=&#34;2-cenário&#34;&gt;2. Cenário&lt;/h2&gt;
&lt;p&gt;Neste cenário utilizei apenas uma VM para instalar e validar o funcionamento do puppetmaster com unicorn.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CentOS 6.5&lt;/li&gt;
&lt;li&gt;1 VM VMWARE, Puppet Master (1 VPCU, 1GB RAM, 4GB DISCO)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-procedimento&#34;&gt;3. Procedimento&lt;/h2&gt;
&lt;p&gt;Abaixo segue o procedimento passo a passo para configuração deste cenário.&lt;/p&gt;
&lt;h3 id=&#34;31-configurando-hostname&#34;&gt;3.1 Configurando hostname&lt;/h3&gt;
&lt;p&gt;Ajuste o nome do seu servidor nos seguintes arquivos para puppet.hacklab&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# echo NETWORKING=yes &amp;gt; /etc/sysconfig/network
# echo HOSTNAME=puppet.hacklab &amp;gt;&amp;gt; /etc/sysconfig/network
# echo 127.0.0.1 localhost puppet.hacklab puppet &amp;gt; /etc/hosts
# hostname puppet.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça logout e login e depois rode o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# hostname
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ele precisa retornar o nome&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;32-instalando-repositório&#34;&gt;3.2 Instalando repositório&lt;/h3&gt;
&lt;p&gt;Faça o download do pacote release da puppetlabs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install http://yum.puppetlabs.com/el/6/products/x86_64/puppetlabs-release-6-10.noarch.rpm
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;33-instalando-puppetmaster&#34;&gt;3.3 Instalando puppetmaster&lt;/h3&gt;
&lt;p&gt;Instale o puppetmaster&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install puppet-server
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Desative o daemon puppetmaster no boot pois vamos usar o unicorn&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chkconfig puppetmaster off
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Desligue o daemon puppetmaster - se estiver ligado - para que a porta 8140 seja liberada para o nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;service puppetmaster stop
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;34-instalando-unicorn&#34;&gt;3.4 Instalando Unicorn&lt;/h3&gt;
&lt;p&gt;Instale as dependências necessárias&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install make gcc ruby-devel rubygems
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o unicorn e rack utilizando gem (não tem pacotes deb)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gem install unicorn rack
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/puppet/config.ru&lt;/strong&gt; como seguinte conteúdo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# a config.ru, for use with every rack-compatible webserver.
# SSL needs to be handled outside this, though.

# if puppet is not in your RUBYLIB:
# $LOAD_PATH.unshift(&#39;/opt/puppet/lib&#39;)

$0 = &amp;quot;master&amp;quot;

# if you want debugging:
# ARGV &amp;lt;&amp;lt; &amp;quot;--debug&amp;quot;

ARGV &amp;lt;&amp;lt; &amp;quot;--rack&amp;quot;

# Rack applications typically don&#39;t start as root.  Set --confdir and --vardir
# to prevent reading configuration from ~puppet/.puppet/puppet.conf and writing
# to ~puppet/.puppet
ARGV &amp;lt;&amp;lt; &amp;quot;--confdir&amp;quot; &amp;lt;&amp;lt; &amp;quot;/etc/puppet&amp;quot;
ARGV &amp;lt;&amp;lt; &amp;quot;--vardir&amp;quot;  &amp;lt;&amp;lt; &amp;quot;/var/lib/puppet&amp;quot;

# NOTE: it&#39;s unfortunate that we have to use the &amp;quot;CommandLine&amp;quot; class
#  here to launch the app, but it contains some initialization logic
#  (such as triggering the parsing of the config file) that is very
#  important.  We should do something less nasty here when we&#39;ve
#  gotten our API and settings initialization logic cleaned up.
#
# Also note that the &amp;quot;$0 = master&amp;quot; line up near the top here is
#  the magic that allows the CommandLine class to know that it&#39;s
#  supposed to be running master.
#
# --cprice 2012-05-22

require &#39;puppet/util/command_line&#39;
# we&#39;re usually running inside a Rack::Builder.new {} block,
# therefore we need to call run *here*.
run Puppet::Util::CommandLine.new.execute
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Caso as configurações do puppet estejam em um diretório diferente do padrão, ajuste a linha confdir, a mesma coisa para o diretório em que ficam os arquivos variáveis&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ARGV &amp;lt;&amp;lt; &amp;quot;--confdir&amp;quot; &amp;lt;&amp;lt; &amp;quot;/etc/puppet&amp;quot;
ARGV &amp;lt;&amp;lt; &amp;quot;--vardir&amp;quot;  &amp;lt;&amp;lt; &amp;quot;/var/lib/puppet&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/puppet/unicorn.conf&lt;/strong&gt; com o seguinte conteúdo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; worker_processes 8
    working_directory &amp;quot;/etc/puppet&amp;quot;
    listen &#39;/var/run/puppet/puppetmaster_unicorn.sock&#39;, :backlog =&amp;gt; 512
    timeout 120
    pid &amp;quot;/var/run/puppet/puppetmaster_unicorn.pid&amp;quot;

    preload_app true
    if GC.respond_to?(:copy_on_write_friendly=)
      GC.copy_on_write_friendly = true
    end

    before_fork do |server, worker|
      old_pid = &amp;quot;#{server.config[:pid]}.oldbin&amp;quot;
      if File.exists?(old_pid) &amp;amp;&amp;amp; server.pid != old_pid
        begin
          Process.kill(&amp;quot;QUIT&amp;quot;, File.read(old_pid).to_i)
        rescue Errno::ENOENT, Errno::ESRCH
          # someone else did our job for us
        end
      end
    end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Caso as configurações do puppet estejam em diretório diferente do padrão, ajuste a diretiva working_directory.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;working_directory &amp;quot;/etc/puppet&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o serviço para testar o unicorn&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@ubuntu:/etc/puppet# unicorn -c unicorn.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja a saída esperada&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;I, [2014-03-23T15:14:30.028793 #2067]  INFO -- : Refreshing Gem list
I, [2014-03-23T15:14:31.142611 #2067]  INFO -- : unlinking existing socket=/var/run/puppet/puppetmaster_unicorn.sock
I, [2014-03-23T15:14:31.142844 #2067]  INFO -- : listening on addr=/var/run/puppet/puppetmaster_unicorn.sock fd=6
I, [2014-03-23T15:14:31.170260 #2073]  INFO -- : worker=0 spawned pid=2073
I, [2014-03-23T15:14:31.186108 #2073]  INFO -- : worker=0 ready
I, [2014-03-23T15:14:31.199679 #2074]  INFO -- : worker=1 spawned pid=2074
I, [2014-03-23T15:14:31.207474 #2074]  INFO -- : worker=1 ready
I, [2014-03-23T15:14:31.224235 #2075]  INFO -- : worker=2 spawned pid=2075
I, [2014-03-23T15:14:31.243385 #2075]  INFO -- : worker=2 ready
I, [2014-03-23T15:14:31.256398 #2076]  INFO -- : worker=3 spawned pid=2076
I, [2014-03-23T15:14:31.266525 #2076]  INFO -- : worker=3 ready
I, [2014-03-23T15:14:31.280448 #2077]  INFO -- : worker=4 spawned pid=2077
I, [2014-03-23T15:14:31.289763 #2077]  INFO -- : worker=4 ready
I, [2014-03-23T15:14:31.310051 #2078]  INFO -- : worker=5 spawned pid=2078
I, [2014-03-23T15:14:31.320665 #2078]  INFO -- : worker=5 ready
I, [2014-03-23T15:14:31.339841 #2079]  INFO -- : worker=6 spawned pid=2079
I, [2014-03-23T15:14:31.355532 #2079]  INFO -- : worker=6 ready
I, [2014-03-23T15:14:31.357241 #2067]  INFO -- : master process ready
I, [2014-03-23T15:14:31.362016 #2080]  INFO -- : worker=7 spawned pid=2080
I, [2014-03-23T15:14:31.367252 #2080]  INFO -- : worker=7 ready
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Se houver uma saída similar é sinal de que está fucionando como esperado, dê um CTRL+C para interromper o processo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;^C
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/init/unicorn.conf&lt;/strong&gt; com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# When to start the service
start on runlevel [2345]

# When to stop the service
stop on runlevel [016]

# Automatically restart process if crashed
respawn
respawn limit 5 15

# Upstart will expect the process executed to call fork(2) exactly twice.
expect daemon

exec /usr/bin/unicorn -c /etc/puppet/unicorn.conf -D
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Inicie o serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; start unicorn
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique se o unicorn está realmente rodando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps aux|grep unicorn
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A saída será similar a esta abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;puppet    2164  0.1  4.7 140108 48580 ?        S    15:37   0:01 unicorn master -D -c /etc/puppet/unicorn.conf
puppet    2170  0.0  4.5 140072 46376 ?        S    15:37   0:00 unicorn worker[0] -D -c /etc/puppet/unicorn.conf
puppet    2171  0.0  4.5 140076 46376 ?        S    15:37   0:00 unicorn worker[1] -D -c /etc/puppet/unicorn.conf
puppet    2172  0.0  4.5 140080 46376 ?        S    15:37   0:00 unicorn worker[2] -D -c /etc/puppet/unicorn.conf
puppet    2173  0.0  4.5 140084 46376 ?        S    15:37   0:00 unicorn worker[3] -D -c /etc/puppet/unicorn.conf
puppet    2174  0.0  4.5 140088 46380 ?        S    15:37   0:00 unicorn worker[4] -D -c /etc/puppet/unicorn.conf
puppet    2175  0.0  4.5 140092 46380 ?        S    15:37   0:00 unicorn worker[5] -D -c /etc/puppet/unicorn.conf
puppet    2176  0.0  4.5 140096 46380 ?        S    15:37   0:00 unicorn worker[6] -D -c /etc/puppet/unicorn.conf
puppet    2177  0.0  6.5 159236 66328 ?        S    15:37   0:00 unicorn worker[7] -D -c /etc/puppet/unicorn.conf
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;35-instalando-o-nginx&#34;&gt;3.5 Instalando o Nginx&lt;/h3&gt;
&lt;p&gt;Instale o nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ative o nginx no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chkconfig nginx on
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/nginx/conf.d/puppetmaster.conf&lt;/strong&gt; com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;upstream puppetmaster_unicorn {
    server unix:/var/run/puppet/puppetmaster_unicorn.sock fail_timeout=0;
}

server {
    listen 8140;

    ssl on;
    ssl_session_timeout 5m;
    ssl_certificate /var/lib/puppet/ssl/certs/puppet.hacklab.pem;
    ssl_certificate_key /var/lib/puppet/ssl/private_keys/puppet.hacklab.pem;
    ssl_client_certificate /var/lib/puppet/ssl/ca/ca_crt.pem;
    ssl_ciphers SSLv2:-LOW:-EXPORT:RC4+RSA;
    ssl_verify_client optional;

    root /usr/share/empty;

    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Client-Verify $ssl_client_verify;
    proxy_set_header X-Client-DN $ssl_client_s_dn;
    proxy_set_header X-SSL-Issuer $ssl_client_i_dn;
    proxy_read_timeout 120;

    location / {
        proxy_pass http://puppetmaster_unicorn;
        proxy_redirect off;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Lembre-se de ajustar o nome do certificado de acordo com seu FQDN, após r 	einicie o nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/nginx restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verfique se a porta 8140 está em modo listen&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@puppet:/etc/nginx/sites-enabled# netstat -ntpl|grep 8140
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tcp    0      0 0.0.0.0:8140    0.0.0.0:*  OUÇA       2204/nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;37-testando-o-puppet&#34;&gt;3.7 Testando o Puppet&lt;/h3&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/puppet/manifests/site.pp&lt;/strong&gt; com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;node &amp;quot;puppet.hacklab&amp;quot; {

        package { &#39;htop&#39;:
                ensure =&amp;gt; present,
        }

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos testar se o puppet está funcionando.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@puppet:/etc/puppet# puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída do comando e observe o puppet aplicando a configuração&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395600179&#39;
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Package[htop]/ensure: created
Info: Creating state file /var/lib/puppet/state/state.yaml
Notice: Finished catalog run in 3.56 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja o log do Nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tail -f /var/log/nginx/access.log
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe o nginx atuando como reverse proxy do unicorn&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;192.168.200.1 - - [21/Mar/2014:04:11:14 -0300] &amp;quot;GET /production/file_metadatas/plugins?links=manage&amp;amp;recurse=true&amp;amp;checksum_type=md5&amp;amp;ignore=.svn&amp;amp;ignore=CVS&amp;amp;ignore=.git HTTP/1.1&amp;quot; 200 46650 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [21/Mar/2014:04:11:24 -0300] &amp;quot;POST /production/catalog/puppet.hacklab HTTP/1.1&amp;quot; 200 77809 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [21/Mar/2014:04:11:26 -0300] &amp;quot;GET /production/file_metadata/modules/concat/concatfragments.sh?links=manage HTTP/1.1&amp;quot; 200 307 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [21/Mar/2014:04:11:27 -0300] &amp;quot;GET /production/file_metadata/modules/postgresql/validate_postgresql_connection.sh?links=manage HTTP/1.1&amp;quot; 200 326 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [21/Mar/2014:04:11:32 -0300] &amp;quot;GET /production/file_metadata/modules/puppetdb/routes.yaml?links=manage HTTP/1.1&amp;quot; 200 302 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [21/Mar/2014:04:11:32 -0300] &amp;quot;PUT /production/report/puppet.hacklab HTTP/1.1&amp;quot; 200 9 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [23/Mar/2014:15:42:55 -0300] &amp;quot;GET /production/node/puppet.hacklab? HTTP/1.1&amp;quot; 200 84 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [23/Mar/2014:15:42:56 -0300] &amp;quot;GET /production/file_metadatas/plugins?ignore=.svn&amp;amp;ignore=CVS&amp;amp;ignore=.git&amp;amp;checksum_type=md5&amp;amp;links=manage&amp;amp;recurse=true HTTP/1.1&amp;quot; 200 283 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [23/Mar/2014:15:43:00 -0300] &amp;quot;POST /production/catalog/puppet.hacklab HTTP/1.1&amp;quot; 200 1022 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
192.168.200.1 - - [23/Mar/2014:15:43:04 -0300] &amp;quot;PUT /production/report/puppet.hacklab HTTP/1.1&amp;quot; 200 9 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Configuração aplicada, isto significa que o puppetmaster está rodando com Unicorn e Nginx, encaixe perfeito.&lt;/p&gt;
&lt;h2 id=&#34;4-amarrando-as-pontas&#34;&gt;4. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Como eu já mencionei no post anterior, é um processo relativamente simples e bastante rápido, utilizamos apenas pacotes oficiais da puppetlabs e neste caso CentOS, e usamos dois gems. Se quiser pode integrar o puppetdb no mesmo cenário. Com esse setup o puppetmaster fica rápido e escalável, recomendo.&lt;/p&gt;
&lt;h2 id=&#34;5-referências&#34;&gt;5. Referências&lt;/h2&gt;
&lt;p&gt;Projects&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://unicorn.bogomips.org/&#34;&gt;http://unicorn.bogomips.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.nginx.org/Main&#34;&gt;http://wiki.nginx.org/Main&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://puppetlabs.com/&#34;&gt;http://puppetlabs.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Blogs&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://linuxmoz.com/rhel-centos-install-puppet-nginx-unicorn/&#34;&gt;http://linuxmoz.com/rhel-centos-install-puppet-nginx-unicorn/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tomayko.com/writings/unicorn-is-unix&#34;&gt;http://tomayko.com/writings/unicorn-is-unix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.unixh4cks.com/index.php/Puppetmaster_:_Nginx_%2B_Unicorn&#34;&gt;http://wiki.unixh4cks.com/index.php/Puppetmaster_:_Nginx_%2B_Unicorn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://projects.puppetlabs.com/projects/1/wiki/using_unicorn&#34;&gt;http://projects.puppetlabs.com/projects/1/wiki/using_unicorn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.prontab.com/2011/01/this-page-should-outline-how-to-set-up.html&#34;&gt;http://www.prontab.com/2011/01/this-page-should-outline-how-to-set-up.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Rodando PuppetMaster com Nginx e Unicorn no Ubuntu</title>
      <link>https://archives.gutocarvalho.net/post/2014-03-25-rodando-puppetmaster-com-nginx-e-unicorn-no-ubuntu/</link>
      <pubDate>Tue, 25 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-03-25-rodando-puppetmaster-com-nginx-e-unicorn-no-ubuntu/</guid>
      <description>&lt;h2 id=&#34;1-acelerando-e-escalando-master-com-unicorn-e-nginx&#34;&gt;1. Acelerando e escalando master com Unicorn e Nginx&lt;/h2&gt;
&lt;p&gt;Neste post pretendo demonstrar como instalar e rodar o PuppetMaster utilizando o UNICORN como servidor de aplicação e NGINX como proxy reverso.&lt;/p&gt;
&lt;p&gt;Se deseja fazer esse procedimento no CentOS, acesse esse &lt;a href=&#34;http://gutocarvalho.net/octopress/2014/03/25/rodando-puppetmaster-com-nginx-e-unicron-no-centos/&#34;&gt;link&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;O UNICORN é um servidor web especializado em apps ruby, escrito em ruby e focado em performance, muito mais eficiente e rápido do que o webrick, e também com melhor performance se compararmos com apache + passenger.&lt;/p&gt;
&lt;h2 id=&#34;2-cenário&#34;&gt;2. Cenário&lt;/h2&gt;
&lt;p&gt;Neste cenário utilizei apenas uma VM para instalar e validar o funcionamento do puppetmaster com unicorn.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu 12.04&lt;/li&gt;
&lt;li&gt;1 VM VMWARE, Puppet Master (1 VPCU, 1GB RAM, 4GB DISCO)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-procedimento&#34;&gt;3. Procedimento&lt;/h2&gt;
&lt;p&gt;Abaixo segue o procedimento passo a passo para configuração deste cenário.&lt;/p&gt;
&lt;h3 id=&#34;31-configurando-hostname&#34;&gt;3.1 Configurando hostname&lt;/h3&gt;
&lt;p&gt;Ajuste o nome do seu servidor nos seguintes arquivos para puppet.hacklab&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# echo puppet.hacklab &amp;gt; /etc/hostname
# echo 127.0.0.1 localhost puppet.hacklab puppet &amp;gt; /etc/hosts
# hostname puppet.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça logout e login e depois rode o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# hostname
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ele precisa retornar o nome&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;32-instalando-repositório&#34;&gt;3.2 Instalando repositório&lt;/h3&gt;
&lt;p&gt;Faça o download do pacote release da puppetlabs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://apt.puppetlabs.com/puppetlabs-release-precise.deb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instalando o repositório da puppetlabs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dpkg -i puppetlabs-release-precise.deb
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;33-instalando-puppetmaster&#34;&gt;3.3 Instalando puppetmaster&lt;/h3&gt;
&lt;p&gt;Instale o puppetmaster&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install puppetmaster
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Desative o daemon puppetmaster no boot pois vamos usar o unicorn&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;update-rc.d -f puppetmaster disable
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Desligue o daemon puppetmaster para que a porta 8140 seja liberada para o nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/puppetmaster stop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Comente as linhas abaixo no /etc/puppet/puppet.conf (&lt;strong&gt;importante!&lt;/strong&gt;)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ssl_client_header = SSL_CLIENT_S_DN
ssl_client_verify_header = SSL_CLIENT_VERIFY
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;34-instalando-unicorn&#34;&gt;3.4 Instalando Unicorn&lt;/h3&gt;
&lt;p&gt;Instale as dependências necessárias&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install make gcc ruby-dev rubygems
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o unicorn e rack utilizando gem (não tem pacotes deb)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gem install unicorn rack
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/puppet/config.ru&lt;/strong&gt; como seguinte conteúdo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# a config.ru, for use with every rack-compatible webserver.
# SSL needs to be handled outside this, though.

# if puppet is not in your RUBYLIB:
# $LOAD_PATH.unshift(&#39;/opt/puppet/lib&#39;)

$0 = &amp;quot;master&amp;quot;

# if you want debugging:
# ARGV &amp;lt;&amp;lt; &amp;quot;--debug&amp;quot;

ARGV &amp;lt;&amp;lt; &amp;quot;--rack&amp;quot;

# Rack applications typically don&#39;t start as root.  Set --confdir and --vardir
# to prevent reading configuration from ~puppet/.puppet/puppet.conf and writing
# to ~puppet/.puppet
ARGV &amp;lt;&amp;lt; &amp;quot;--confdir&amp;quot; &amp;lt;&amp;lt; &amp;quot;/etc/puppet&amp;quot;
ARGV &amp;lt;&amp;lt; &amp;quot;--vardir&amp;quot;  &amp;lt;&amp;lt; &amp;quot;/var/lib/puppet&amp;quot;

# NOTE: it&#39;s unfortunate that we have to use the &amp;quot;CommandLine&amp;quot; class
#  here to launch the app, but it contains some initialization logic
#  (such as triggering the parsing of the config file) that is very
#  important.  We should do something less nasty here when we&#39;ve
#  gotten our API and settings initialization logic cleaned up.
#
# Also note that the &amp;quot;$0 = master&amp;quot; line up near the top here is
#  the magic that allows the CommandLine class to know that it&#39;s
#  supposed to be running master.
#
# --cprice 2012-05-22

require &#39;puppet/util/command_line&#39;
# we&#39;re usually running inside a Rack::Builder.new {} block,
# therefore we need to call run *here*.
run Puppet::Util::CommandLine.new.execute
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Caso as configurações do puppet estejam em um diretório diferente do padrão, ajuste a linha confdir, a mesma coisa para o diretório em que ficam os arquivos variáveis&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ARGV &amp;lt;&amp;lt; &amp;quot;--confdir&amp;quot; &amp;lt;&amp;lt; &amp;quot;/etc/puppet&amp;quot;
ARGV &amp;lt;&amp;lt; &amp;quot;--vardir&amp;quot;  &amp;lt;&amp;lt; &amp;quot;/var/lib/puppet&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/puppet/unicorn.conf&lt;/strong&gt; com o seguinte conteúdo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; worker_processes 8
    working_directory &amp;quot;/etc/puppet&amp;quot;
    listen &#39;/var/run/puppet/puppetmaster_unicorn.sock&#39;, :backlog =&amp;gt; 512
    timeout 120
    pid &amp;quot;/var/run/puppet/puppetmaster_unicorn.pid&amp;quot;

    preload_app true
    if GC.respond_to?(:copy_on_write_friendly=)
      GC.copy_on_write_friendly = true
    end

    before_fork do |server, worker|
      old_pid = &amp;quot;#{server.config[:pid]}.oldbin&amp;quot;
      if File.exists?(old_pid) &amp;amp;&amp;amp; server.pid != old_pid
        begin
          Process.kill(&amp;quot;QUIT&amp;quot;, File.read(old_pid).to_i)
        rescue Errno::ENOENT, Errno::ESRCH
          # someone else did our job for us
        end
      end
    end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Caso as configurações do puppet estejam em diretório diferente do padrão, ajuste a diretiva working_directory.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;working_directory &amp;quot;/etc/puppet&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o serviço para testar o unicorn&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@ubuntu:/etc/puppet# unicorn -c unicorn.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja a saída esperada&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;I, [2014-03-22T00:09:14.089524 #2415]  INFO -- : Refreshing Gem list
I, [2014-03-22T00:09:15.402416 #2415]  INFO -- : listening on addr=/var/run/puppet/puppetmaster_unicorn.sock fd=8
I, [2014-03-22T00:09:15.432006 #2438]  INFO -- : worker=0 spawned pid=2438
I, [2014-03-22T00:09:15.444172 #2438]  INFO -- : worker=0 ready
I, [2014-03-22T00:09:15.462684 #2439]  INFO -- : worker=1 spawned pid=2439
I, [2014-03-22T00:09:15.476063 #2439]  INFO -- : worker=1 ready
I, [2014-03-22T00:09:15.494481 #2440]  INFO -- : worker=2 spawned pid=2440
I, [2014-03-22T00:09:15.519071 #2440]  INFO -- : worker=2 ready
I, [2014-03-22T00:09:15.566899 #2441]  INFO -- : worker=3 spawned pid=2441
I, [2014-03-22T00:09:15.579692 #2441]  INFO -- : worker=3 ready
I, [2014-03-22T00:09:15.600440 #2442]  INFO -- : worker=4 spawned pid=2442
I, [2014-03-22T00:09:15.652091 #2442]  INFO -- : worker=4 ready
I, [2014-03-22T00:09:15.663205 #2443]  INFO -- : worker=5 spawned pid=2443
I, [2014-03-22T00:09:15.676469 #2443]  INFO -- : worker=5 ready
I, [2014-03-22T00:09:15.724854 #2444]  INFO -- : worker=6 spawned pid=2444
I, [2014-03-22T00:09:15.735700 #2415]  INFO -- : master process ready
I, [2014-03-22T00:09:15.751096 #2445]  INFO -- : worker=7 spawned pid=2445
I, [2014-03-22T00:09:15.758621 #2444]  INFO -- : worker=6 ready
I, [2014-03-22T00:09:15.760709 #2445]  INFO -- : worker=7 ready
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Se houver uma saída similar é sinal de que está fucionando como esperado, dê um CTRL+C para interromper o processo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;^C
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/init/unicorn&lt;/strong&gt; com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
# When to start the service
start on runlevel [2345]

# When to stop the service
stop on runlevel [016]

# Automatically restart process if crashed
respawn
respawn limit 5 15

# Upstart will expect the process executed to call fork(2) exactly twice.
expect daemon

exec /usr/local/bin/unicorn -c /etc/puppet/unicorn.conf -D
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Inicie o serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; start unicorn
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique se o unicorn está realmente rodando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps aux|grep unicorn
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A saída será similar a esta abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;puppet    1889  0.5  9.1 119412 45380 ?        S    20:05   0:01 unicorn master -D -c /etc/puppet/unicorn.conf
puppet    1896  0.0  8.7 119376 43416 ?        S    20:05   0:00 unicorn worker[0] -D -c /etc/puppet/unicorn.conf
puppet    1897  0.0  8.7 119380 43416 ?        S    20:05   0:00 unicorn worker[1] -D -c /etc/puppet/unicorn.conf
puppet    1898  0.0  8.7 119384 43416 ?        S    20:05   0:00 unicorn worker[2] -D -c /etc/puppet/unicorn.conf
puppet    1899  0.0  8.7 119388 43416 ?        S    20:05   0:00 unicorn worker[3] -D -c /etc/puppet/unicorn.conf
puppet    1900  0.0  8.7 119392 43416 ?        S    20:05   0:00 unicorn worker[4] -D -c /etc/puppet/unicorn.conf
puppet    1901  0.0  8.7 119396 43416 ?        S    20:05   0:00 unicorn worker[5] -D -c /etc/puppet/unicorn.conf
puppet    1902  0.0  8.7 119400 43416 ?        S    20:05   0:00 unicorn worker[6] -D -c /etc/puppet/unicorn.conf
puppet    1903  0.0  8.7 119404 43416 ?        S    20:05   0:00 unicorn worker[7] -D -c /etc/puppet/unicorn.conf
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;35-instalando-o-nginx&#34;&gt;3.5 Instalando o Nginx&lt;/h3&gt;
&lt;p&gt;Instale o nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ative o nginx no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;update-rc.d -f nginx defaults
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/nginx/sites-available/puppetmaster&lt;/strong&gt; com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;    upstream puppetmaster_unicorn {
        server unix:/var/run/puppet/puppetmaster_unicorn.sock fail_timeout=0;
    }

    server {
        listen 8140;

        ssl on;
        ssl_session_timeout 5m;
        ssl_certificate /var/lib/puppet/ssl/certs/puppet.hacklab.pem;
        ssl_certificate_key /var/lib/puppet/ssl/private_keys/puppet.hacklab.pem;
        ssl_client_certificate /var/lib/puppet/ssl/ca/ca_crt.pem;
        ssl_ciphers SSLv2:-LOW:-EXPORT:RC4+RSA;
        ssl_verify_client optional;

        root /usr/share/empty;

        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Client-Verify $ssl_client_verify;
        proxy_set_header X-Client-DN $ssl_client_s_dn;
        proxy_set_header X-SSL-Issuer $ssl_client_i_dn;
        proxy_read_timeout 120;

        location / {
            proxy_pass http://puppetmaster_unicorn;
            proxy_redirect off;
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Lembre-se de ajustar o nome do certificado de acordo com seu FQDN, crie o link simbólico em seguida&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -s /etc/nginx/sites-available/puppetmaster /etc/nginx/sites-enabled/puppetmaster
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reinicie o nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/nginx restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verfique se a porta 8140 está em modo listen&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@puppet:/etc/nginx/sites-enabled# netstat -ntpl|grep 8140
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tcp        0      0 0.0.0.0:8140            0.0.0.0:*               LISTEN      9960/nginx
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;37-testando-o-puppet&#34;&gt;3.7 Testando o Puppet&lt;/h3&gt;
&lt;p&gt;Crie o arquivo &lt;strong&gt;/etc/puppet/manifests/site.pp&lt;/strong&gt; com o conteúdo abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;node &amp;quot;puppet.hacklab&amp;quot; {

        package { &#39;htop&#39;:
                ensure =&amp;gt; present,
        }

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos testar se o puppet está funcionando.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@puppet:/etc/puppet# puppet agent -t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Info: Retrieving plugin
Info: Caching catalog for puppet.hacklab
Info: Applying configuration version &#39;1395768087&#39;
Notice: /Stage[main]/Main/Node[puppet.hacklab]/Package[htop]/ensure: ensure changed &#39;purged&#39; to &#39;present&#39;
Notice: Finished catalog run in 11.98 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja o log do Nginx&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tail -f /var/log/nginx/access.log
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe o nginx atuando como reverse proxy do unicorn&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;172.16.184.153 - - [25/Mar/2014:17:19:54 +0000] &amp;quot;POST /production/catalog/puppet.hacklab HTTP/1.1&amp;quot; 400 121 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:19:55 +0000] &amp;quot;PUT /production/report/puppet.hacklab HTTP/1.1&amp;quot; 200 9 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:20:45 +0000] &amp;quot;GET /production/node/puppet.hacklab? HTTP/1.1&amp;quot; 200 4115 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:20:45 +0000] &amp;quot;GET /production/file_metadatas/plugins?ignore=.svn&amp;amp;ignore=CVS&amp;amp;ignore=.git&amp;amp;checksum_type=md5&amp;amp;links=manage&amp;amp;recurse=true HTTP/1.1&amp;quot; 200 283 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:20:50 +0000] &amp;quot;POST /production/catalog/puppet.hacklab HTTP/1.1&amp;quot; 400 164 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:20:50 +0000] &amp;quot;PUT /production/report/puppet.hacklab HTTP/1.1&amp;quot; 200 9 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:21:23 +0000] &amp;quot;GET /production/node/puppet.hacklab? HTTP/1.1&amp;quot; 200 4115 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:21:23 +0000] &amp;quot;GET /production/file_metadatas/plugins?ignore=.svn&amp;amp;ignore=CVS&amp;amp;ignore=.git&amp;amp;checksum_type=md5&amp;amp;links=manage&amp;amp;recurse=true HTTP/1.1&amp;quot; 200 283 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:21:28 +0000] &amp;quot;POST /production/catalog/puppet.hacklab HTTP/1.1&amp;quot; 200 1022 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
172.16.184.153 - - [25/Mar/2014:17:21:41 +0000] &amp;quot;PUT /production/report/puppet.hacklab HTTP/1.1&amp;quot; 200 9 &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Configuração aplicada, isto significa que o puppetmaster está rodando com Unicorn e Nginx, encaixe perfeito.&lt;/p&gt;
&lt;h2 id=&#34;4-amarrando-as-pontas&#34;&gt;4. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;É um processo relativamente simples e bastante rápido, utilizamos apenas pacotes oficiais da puppetlabs e ubuntu, e dois gems. Se quiser pode integrar o puppetdb no mesmo cenário. Com esse setup o puppetmaster fica rápido e escalável, recomendo.&lt;/p&gt;
&lt;h2 id=&#34;5-referências&#34;&gt;5. Referências&lt;/h2&gt;
&lt;p&gt;Projects&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://unicorn.bogomips.org/&#34;&gt;http://unicorn.bogomips.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.nginx.org/Main&#34;&gt;http://wiki.nginx.org/Main&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://puppetlabs.com/&#34;&gt;http://puppetlabs.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Blogs&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://tomayko.com/writings/unicorn-is-unix&#34;&gt;http://tomayko.com/writings/unicorn-is-unix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://linuxmoz.com/rhel-centos-install-puppet-nginx-unicorn/&#34;&gt;http://linuxmoz.com/rhel-centos-install-puppet-nginx-unicorn/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tomayko.com/writings/unicorn-is-unix&#34;&gt;http://tomayko.com/writings/unicorn-is-unix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.unixh4cks.com/index.php/Puppetmaster_:_Nginx_%2B_Unicorn&#34;&gt;http://wiki.unixh4cks.com/index.php/Puppetmaster_:_Nginx_%2B_Unicorn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://projects.puppetlabs.com/projects/1/wiki/using_unicorn&#34;&gt;http://projects.puppetlabs.com/projects/1/wiki/using_unicorn&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.prontab.com/2011/01/this-page-should-outline-how-to-set-up.html&#34;&gt;http://www.prontab.com/2011/01/this-page-should-outline-how-to-set-up.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Palestra de Puppet no CISL</title>
      <link>https://archives.gutocarvalho.net/post/2014-03-21-palestra-de-puppet-no-cisl/</link>
      <pubDate>Fri, 21 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-03-21-palestra-de-puppet-no-cisl/</guid>
      <description>&lt;p&gt;Recebi um convite para ministrar uma palestra de Puppet no CISL - Comitê de Implementação de Software Livre do Governo Federal. A &lt;a href=&#34;http://www.softwarelivre.gov.br/eventos/palestra-tecnica-do-cisl-infraestrutura-agil-com-puppet/&#34;&gt;palestra&lt;/a&gt; será no dia 07/04/2014, das 10 as 12 horas, no SERPRO, SGAN, Quadra 601, Módulo &amp;ldquo;V&amp;rdquo;, Brasília/DF.&lt;/p&gt;
&lt;p&gt;O tema será &lt;a href=&#34;http://www.softwarelivre.gov.br/eventos/palestra-tecnica-do-cisl-infraestrutura-agil-com-puppet/&#34;&gt;Infraestrutura Ágil com Puppet&lt;/a&gt;. Vou apresentar o conceito de gerência de configurações, a ferramenta Puppet e suas características, faremos uma análise e comparação do método de administração manual com o método de gerência automatizada, e vou falar sobre alguns cases de Puppet no governo federal.&lt;/p&gt;
&lt;p&gt;Pretendo também falar sobre o Mcollective e demonstrar seu uso ao vivo, além do PuppetDB e Foreman.&lt;/p&gt;
&lt;p&gt;A palestra será transmitida ao vivo pela web.&lt;/p&gt;
&lt;p&gt;Participe.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Treinamento Oficial Puppet em São Paulo</title>
      <link>https://archives.gutocarvalho.net/post/2014-03-21-treinamento-oficial-puppet-em-sao-paulo/</link>
      <pubDate>Fri, 21 Mar 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-03-21-treinamento-oficial-puppet-em-sao-paulo/</guid>
      <description>&lt;p&gt;O uso de Puppet está crescendo bastante no Brasil, vejo muita gente começando a estudar e trabalhar com gerência de configurações, e a maioria está adotando o Puppet como solução. Eu faço o possível para divulgar esta tecnologia nos eventos, listas, blogs, wikis, tentando ao máximo ajudar os profissionais que estão implantando e iniciando a automatização de seus ambientes.&lt;/p&gt;
&lt;p&gt;Normalmente eu recebo muitos e-mails com dúvidas acerca de treinamentos, e são esses e-mails que motivaram este post. Até hoje só tivemos uma turma de Puppet Fundamentals no Brasil - treinamento oficial, e eu tive a oportunidade de ser o instrutor deste treinamento em 2013. Em 2014 teremos mais uma turma em São Paulo, e as inscrições já estão abertas.&lt;/p&gt;
&lt;p&gt;Desta vez o treinamento está a cargo da INSTRUCT, a primeira empresa a estabelecer parceria com Puppetlabs no Brasil. O instrutor encarregado da turma será o especialista Miguel Filho, que também é o primeiro profissional certificado - na prova oficial - da américa latina, além de PCP, Miguel também é RCHE e LPIC3, o que demonstra sua experiência, conhecimento e preparo para ministrar esse curso.&lt;/p&gt;
&lt;p&gt;O curso &lt;a href=&#34;http://instruct.com.br/puppet-fundamentals.html&#34;&gt;Puppet Fundamentals&lt;/a&gt; vai acontecer nos dias 27, 28 e 29 de Maio em São Paulo.&lt;/p&gt;
&lt;p&gt;Vale lembrar que não é muito fácil organizar esse treinamento no Brasil, é a segunda vez que teremos essa oportunidade, então, eu recomendo aproveitar esta chance.&lt;/p&gt;
&lt;p&gt;Esse treinamento oferece sólidos conceitos para a prova de certificação PCP 201 e tem reconhecimento garantido no mercado - principalmente em Brasília e São Paulo.&lt;/p&gt;
&lt;p&gt;Interessados podem entrar em contato com a INSTRUCT pelo email &lt;a href=&#34;mailto:contato@instruct.com.br&#34;&gt;contato at instruct.com.br&lt;/a&gt; ou se cadastrar no &lt;a href=&#34;http://www.instruct.com.br/cadastro-treinamento.html&#34;&gt;site&lt;/a&gt; para mais obter mais
informações.&lt;/p&gt;
&lt;p&gt;A instruct também disponibilizou uma apostila gratuitamente - sob licença creative commons - para ajudar os iniciantes nos primeiros passos com a ferramenta.&lt;/p&gt;
&lt;p&gt;Se quiser baixar apostila, segue o link &lt;a href=&#34;http://instruct.com.br/static/apostila-puppet.pdf&#34;&gt;http://instruct.com.br/static/apostila-puppet.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;É isso!&lt;/p&gt;
&lt;p&gt;[]s&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Ativando ActiveSync em Zimbra com Z-PUSH</title>
      <link>https://archives.gutocarvalho.net/post/2014-01-25-ativando-activesync-em-zimbra-com-z-push/</link>
      <pubDate>Sat, 25 Jan 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-01-25-ativando-activesync-em-zimbra-com-z-push/</guid>
      <description>&lt;p&gt;Em um de meus clientes, instalei o Zimbra 7.x versão Community, essa versão funciona muito bem, é uma ferramenta excelente, particularmente a melhor suite de correio livre - IMHO, contudo, ela não possui dois recursos importantes, o primeiro é o sistema granular de BKP de caixas postais, e o segundo é o sistema de acesso mobile através do protocolo ActiveSync. Estes dois recursos só estão presentes na versão paga da ferramenta.&lt;/p&gt;
&lt;p&gt;Sem o ActiveSync só é possível configurar o recebimento e envio de mensagens via IMAP e SMTP em seu dispositivo móvel, a sincronização de agenda, contatos, notas e tarefas não está disponível.&lt;/p&gt;
&lt;p&gt;Este post pretende abordar como habilitar o ActiveSync no Zimbra através do projeto &lt;a href=&#34;http://z-push.sourceforge.net/soswp/&#34;&gt;Z-PUSH&lt;/a&gt; + &lt;a href=&#34;http://sourceforge.net/projects/zimbrabackend/&#34;&gt;ZimbraBackend&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;1-requisitos&#34;&gt;1. Requisitos&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Você precisa criar um domínio para acesso externo, ex: mobile.seudominio.com.br&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Você precisa de um servidor de APP WEB com suporte a aplicações PHP já que o Z-PUSH foi escrito nesta linguagem.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;O seu servidor WEB precisa enxergar o servidor Zimbra.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Recomenda-se utilização de conexão segura SSL neste serviço.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;11-versões&#34;&gt;1.1 Versões&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Z-PUSH versão 2.1.1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ZimbraBackend release 58.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CentOS 6.5 - 64 bits&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Apache HTTPd 2.2.x como servidor de APP WEB.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PHP 5.3.x&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2-instalando-e-configurando-httpd-e-php&#34;&gt;2. Instalando e configurando HTTPd e PHP&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;# yum install httpd php5 php-process
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;21-configurando-vhost&#34;&gt;2.1 Configurando VHOST&lt;/h3&gt;
&lt;p&gt;Crie o arquivo abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/httpd/conf.d/mobile.seudominio.com.br.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ajuste o vhost conforme suas necessidades, veja o exemplo abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;VirtualHost *:80&amp;gt;
  ServerName mobile.seudominio.com.br
  Alias /Microsoft-Server-ActiveSync /srv/activesync/index.php
  DocumentRoot /srv/activesync
  &amp;lt;Directory /srv/activesync&amp;gt;
    Options All
    AllowOverride All
    Order allow,deny
    Allow from all
  &amp;lt;/Directory&amp;gt;
  ErrorLog /var/log/httpd/mobile.seudominio.com.br_error.log
  ServerSignature Off
  CustomLog /var/log/httpd/mobile.seudominio.com.br_access.log combined
  php_flag magic_quotes_gpc off
  php_flag register_globals off
  php_flag magic_quotes_runtime off
  php_flag short_open_tag on
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe que estou usando HTTP puro, contudo, recomendo uso de HTTPS.&lt;/p&gt;
&lt;h3 id=&#34;22-criando-diretórios&#34;&gt;2.2 Criando diretórios&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;# mkdir /srv/activesync
# mkdir /srv/activesync/state
# mkdir /var/log/z-push
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-instalando-z-push&#34;&gt;3. Instalando Z-PUSH&lt;/h2&gt;
&lt;p&gt;Acesse o diretório tmp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# cd /tmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça o download do projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# wget http://zarafa-deutschland.de/z-push-download/final/2.1/z-push-2.1.1-1788.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Descompacte o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# tar zxvf z-push-2.1.1-1788.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse o diretório do projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# cd z-push-2.1.1-1788
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Copie os arquivos para o diretório documentroot configurado no vhost&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# mv * /srv/activesync/
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-instalando-backend-zimbra-no-z-push&#34;&gt;4. Instalando Backend Zimbra no Z-PUSH&lt;/h2&gt;
&lt;p&gt;Acesse o diretório tmp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# cd /tmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça download do ZimbraBackend no site do projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# wget http://ufpr.dl.sourceforge.net/project/zimbrabackend/Release58/zimbra58.tgz     
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Descompacte o projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# tar zxvf zimbra58.tgz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse o diretório do projeto&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# cd zimbra58
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Mova o diretório z-push-2 para /srv/activesync/backend/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# mv z-push-2 /srv/activesync/backend/zimbra
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-configurando&#34;&gt;5. Configurando&lt;/h2&gt;
&lt;h3 id=&#34;51-permissões&#34;&gt;5.1 Permissões&lt;/h3&gt;
&lt;p&gt;Ajuste owner, group e as permissões de arquivos e diretórios&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# chown -R apache:apache /srv/activesync
# chown -R apache:apache /var/log/z-push
# find /srv/activesync -type f -exec chmod 664 {} \;
# find /srv/activesync -type d -exec chmod 775 {} \;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;52-z-push&#34;&gt;5.2 Z-PUSH&lt;/h3&gt;
&lt;p&gt;Edite o arquivo /srv/activesync/config.php e ajuste as linhas abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;define(&#39;TIMEZONE&#39;, &#39;America/Sao_Paulo&#39;);
define(&#39;STATE_DIR&#39;, &#39;/srv/activesync/state/&#39;);
define(&#39;BACKEND_PROVIDER&#39;, &#39;BackendZimbra&#39;);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;53-zimbra-backend&#34;&gt;5.3 Zimbra Backend&lt;/h3&gt;
&lt;p&gt;Edite o arquivo /srv/activesync/backend/zimba/config.php e ajuste as linhas abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; define(&#39;ZIMBRA_URL&#39;, &#39;https://ip-ou-dns-do-zimbra&#39;);
 define(&#39;ZIMBRA_USER_DIR&#39;, &#39;zimbra&#39;);
 define(&#39;ZIMBRA_SYNC_CONTACT_PICTURES&#39;, true);
 define(&#39;ZIMBRA_VIRTUAL_CONTACTS&#39;,true);
 define(&#39;ZIMBRA_VIRTUAL_APPOINTMENTS&#39;,true);
 define(&#39;ZIMBRA_VIRTUAL_TASKS&#39;,true);
 define(&#39;ZIMBRA_IGNORE_EMAILED_CONTACTS&#39;,true);
 define(&#39;ZIMBRA_HTML&#39;,true);
 define(&#39;ZIMBRA_TIMEZONE&#39;, &#39;America/Sao_Paulo&#39;);
 define(&#39;ZIMBRA_ENFORCE_VALID_EMAIL&#39;, true);
 define(&#39;ZIMBRA_SMART_FOLDERS&#39;,true);
 define(&#39;ZIMBRA_RETRIES_ON_HOST_CONNECT_ERROR&#39;,5);
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;6-testando&#34;&gt;6. Testando&lt;/h2&gt;
&lt;p&gt;Agora acesse o endereço abaixo para testar a autenticação&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://mobile.seudominio.com.br/Microsoft-Server-ActiveSync
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após autenticar você ira cair em uma página com os seguintes dados&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Z-Push - Open Source ActiveSync

Version 2.1.1-1788
GET not supported

This is the Z-Push location and can only be accessed by Microsoft ActiveSync-capable devices

More information about Z-Push can be found at:
Z-Push homepage
Z-Push download page at BerliOS
Z-Push Bugtracker and Roadmap

All modifications to this sourcecode must be published and returned to the community.

Please see AGPLv3 License for details.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Se essa tela aparecer, sua autenticação funcionou, agora você pode partir para configuração do seu IOS ou Android, basta adicionar uma conta EXCHANGE preenchendo os dados corretamente.&lt;/p&gt;
&lt;h2 id=&#34;8-verificando-logs&#34;&gt;8. Verificando logs&lt;/h2&gt;
&lt;p&gt;Você pode acompanhar sua conexão pelos logs.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# tail -f /var/log/z-push/z-push.log /var/log/z-push/z-push-error.log
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;9-amarrando-as-pontas&#34;&gt;9. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Os passos são simples e o Z-PUSH implementa muito bem o ActiveSync. O mais interessante disso tudo é que você poderá desabilitar o IMAP e SMTP externo uma vez que você poderá enviar e receber mensagens utilizando ACTIVESYNC, além disto, sua agenda, contatos, notas e tarefas estarão disponíveis para sincronização em seu dispositivo móvel.&lt;/p&gt;
&lt;h2 id=&#34;7-referências&#34;&gt;7. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.bluhm-de.com/installing-z-push-for-zimbra-8-on-centos-6&#34;&gt;http://www.bluhm-de.com/installing-z-push-for-zimbra-8-on-centos-6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://aubreykloppers.wordpress.com/2012/10/16/z-push-and-zimbrabackend-the-zimbra-companion-for-mobility/&#34;&gt;http://aubreykloppers.wordpress.com/2012/10/16/z-push-and-zimbrabackend-the-zimbra-companion-for-mobility/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://b3n.org/setup-your-own-activesync-server-with-zimbra-and-z-push/&#34;&gt;http://b3n.org/setup-your-own-activesync-server-with-zimbra-and-z-push/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.andreabalboni.com/cms/microsoft-active-sync-vmware-zimbra-8-z-push-backend-zimbra/&#34;&gt;http://www.andreabalboni.com/cms/microsoft-active-sync-vmware-zimbra-8-z-push-backend-zimbra/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.iwayvietnam.com/tuanta/2013/03/12/setup-z-push-with-zimbra-to-synchronize-emails-calendar-and-contacts-with-mobile-devices/&#34;&gt;http://blog.iwayvietnam.com/tuanta/2013/03/12/setup-z-push-with-zimbra-to-synchronize-emails-calendar-and-contacts-with-mobile-devices/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;No próximo post irei abordar como fazer o BKP granular de caixas postais com alguns scripts.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet, separando dados do código com extlookup e hiera</title>
      <link>https://archives.gutocarvalho.net/post/2014-01-25-puppet-separando-dados-do-codigo-com-extlookup-e-hiera/</link>
      <pubDate>Sat, 25 Jan 2014 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2014-01-25-puppet-separando-dados-do-codigo-com-extlookup-e-hiera/</guid>
      <description>&lt;h2 id=&#34;1-separando-dados-de-código&#34;&gt;1. Separando dados de código&lt;/h2&gt;
&lt;p&gt;Durante a implantação do Puppet nós vamos migrando todos aqueles
procedimentos manuais, artesanais, sejam checklists, sejam tutoriais,
fazendo isto de forma gradativa e progressiva, no entanto, ao escrever
novo código, para deixá-lo flexível, é necessário utilizar variáveis,
constantes, fatos e parâmetros personalizados em classes e definições.&lt;/p&gt;
&lt;p&gt;Para entender este conceito de forma mais fácil, procure lembrar se você já precisou escrever uma classe genérica, ou mesmo uma base class para aplicar em vários nodes, porém em um node, ou um grupo de nodes, algumas pequenas mudanças deveriam ser levadas em conta. Quando temos esse tipo de cenário nós normalmente usamos e abusamos de tratamentos condicionais, expressões, cases e seletores em busca de um código mais flexível e inteligente, com isto, nosso código acaba se tornando uma mescla de dados (variáveis, constantes, fatos, parâmetros e atributos) com código, veja esse exemplo simples:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$dnsserver    = &#39;8.8.8.8&#39;
$searchdomain = &#39;hacklab&#39;
 
file { &#39;/etc/resolv.conf&#39;:
  ensure  =&amp;gt; present
  content =&amp;gt; &amp;quot;search ${searchdomain}\n nameserver ${dnsserver}\n&amp;quot;,
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe que os dados e o código estão no mesmo arquivo que chamamos de manifest, e se desejamos alterar por exemplo o endereço &lt;strong&gt;8.8.8.8&lt;/strong&gt; ou o domínio de pesquisa &lt;strong&gt;hacklab&lt;/strong&gt; precisaremos editar o manifest que também possui o código, e isto pode gerar algum tipo de problema caso a edição não seja cuidadosa e altere a sintaxe do manifest.&lt;/p&gt;
&lt;p&gt;Pensando nisto, a Puppetlabs criou algumas ferramentas para separar dados de código, facilitando a edição e preservando os manifests de nossos módulos.&lt;/p&gt;
&lt;h2 id=&#34;2-o-pioneiro-extlookup&#34;&gt;2. O pioneiro: Extlookup&lt;/h2&gt;
&lt;p&gt;O primeiro recurso criado para resolver este problema foi o extlookup, com ele é possível especificar um local externo para buscar dados.&lt;/p&gt;
&lt;p&gt;O exemplo abaixo foi retirado do site do R.I.Piennar (&lt;a href=&#34;http://www.devco.net&#34;&gt;http://www.devco.net&lt;/a&gt;) o criador do extlookup.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;class snmp::config {

   if $fqdn == &amp;quot;www.mesintogravida.com.br&amp;quot; {
      $contactname = &#39;webmaster&#39;
      $contactemail = &#39;webmaster@mesintogravida.com.br&#39;
   }
 
   elsif $domain == &amp;quot;mesintogravida.com.br&amp;quot; {
      $contactname = &#39;contato&#39;
      $contactemail = &#39;contato@mesintogravida.com.br&#39;
   }
   else {
      $contactname = &#39;Jessica Macedo&#39;
      $contactemail = &#39;jessica@mesintogravida.com.br&#39;
   }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe que para cada tratamento algum valor é associado a uma variável, tudo dentro do código, veja que são as mesmas variáveis repetidas diversas vezes, não há reutilização de código, temos escrever mais e ainda corremos o risco de alterar os dados e causar um problema de sintaxe no código, basta esquecer de fechar uma aspa para gerar um erro em diversos nodes.&lt;/p&gt;
&lt;p&gt;No exemplo acima, primeiro é verificado o FQDN, se for &lt;a href=&#34;http://www.mesintogravida.com.br&#34;&gt;www.mesintogravida.com.br&lt;/a&gt; valores específicos são associados as duas variáveis abaixo, caso o FQDN não seja o esperado, é verificado então se o domínio é mesintogravida.com.br, se for, outros valores serão associados as variáveis, caso o domínio não seja hacklab, um valor comum será associado aquelas variáveis no último tratamento.&lt;/p&gt;
&lt;p&gt;Usando o conceito do extlookup, faríamos apenas a seguinte definição dentro de nosso manifest (removendo todo o tratamento condicional if elsif else).&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$contactname = extlookup(&amp;quot;contactname&amp;quot;)
$contactemail = extlookup(&amp;quot;contactemail&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Bem simples e elegante, contudo, em nosso site.pp precisamos determinar como o extlookup vai funcionar, o primeiro passo é determinar a precedência de pesquisa , faremos isto da seguinte forma:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$extlookup_precedence = [&amp;quot;%{fqdn}&amp;quot;, &amp;quot;domain/%{domain}&amp;quot;, &amp;quot;common&amp;quot;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E depois será necessário definir o local onde estão os arquivos com os dados:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$extlookup_datadir = /etc/puppet/manifests/extdata
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No caso do extlookup o formato para armazenar os dados é o CSV, dentro do diretório &lt;strong&gt;/etc/puppet/manifests/extdata&lt;/strong&gt; serão criados arquivos CSV como os exemplos abaixo:&lt;/p&gt;
&lt;p&gt;Arquivo &lt;strong&gt;/etc/puppet/manifests/extdata/hosts/www.mesintogravida.com.br.csv&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;contactemail,webmaster@mesintogravida.com.br
contactname,webmaster
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Arquivo &lt;strong&gt;/etc/puppet/manifests/extdata/domain/mesintogravida.com.br.csv&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;contactemail,contato@mesintogravida.com.br
contactname,contato
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Arquivo &lt;strong&gt;/etc/puppet/manifests/extdata/common.csv&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;contactemail,jessica@mesintogravida.com.br
contactname,jessica
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com a pesquisa seguindo a precedência definida no site.pp, economizamos 15 linhas em nosso manifest e não precisamos fazer o tratamento condicional.&lt;/p&gt;
&lt;h3 id=&#34;21-entendendo-pesquisa-extlookup&#34;&gt;2.1 Entendendo pesquisa extlookup&lt;/h3&gt;
&lt;p&gt;Entenda a forma de pesquisa que será feita pelo extlookup conforme configurações feitas no site.pp&lt;/p&gt;
&lt;h4 id=&#34;211-fqdn&#34;&gt;2.1.1 FQDN&lt;/h4&gt;
&lt;p&gt;Primeiro a ordem de pesquisa verifica se existe um arquivo dentro de &lt;strong&gt;/etc/puppet/manifests/extdata/hosts&lt;/strong&gt; com o nome &lt;strong&gt;&lt;a href=&#34;http://www.mesintogravida.com.br.csv&#34;&gt;www.mesintogravida.com.br.csv&lt;/a&gt;&lt;/strong&gt;, se existir e ele vai ler e atribuir os valores presentes no arquivo para as variáveis.&lt;/p&gt;
&lt;h4 id=&#34;212-domain&#34;&gt;2.1.2 DOMAIN&lt;/h4&gt;
&lt;p&gt;Caso ele não encontre um arquivo com o nome completo do host (fqdn), ele vai procurar por um arquivo com o nome do domínio dentro de &lt;strong&gt;/etc/puppet/manifests/extdata/domain&lt;/strong&gt; com o nome &lt;strong&gt;mesintogravida.com.br.csv&lt;/strong&gt;, se existir, ele vai ler o arquivo e atribuir o valor presente no arquivo para as variáveis.&lt;/p&gt;
&lt;h4 id=&#34;213-common&#34;&gt;2.1.3 COMMON&lt;/h4&gt;
&lt;p&gt;Caso ele não encontre um arquivo com o nome do domínio, ele lerá por último o arquivo &lt;strong&gt;/etc/puppet/manifests/extdata/common/common.csv&lt;/strong&gt;, que pela lógica terá as configurações comuns para nodes que não tenham tratamentos diferenciados.&lt;/p&gt;
&lt;h3 id=&#34;22-vantagens-no-uso-do-extlookup&#34;&gt;2.2 Vantagens no uso do extlookup&lt;/h3&gt;
&lt;p&gt;Observe que retiramos os dados de dentro do código, agora só é preciso editar arquivos CSV (comma separeted values) para mudar o comportamento de um manifest, isto facilita a administração, torna nossos manifests mais flexíveis e simples de manipular.&lt;/p&gt;
&lt;p&gt;Nós também diminuímos o risco de falhas decorrentes de mudanças de dados em nossos manifests e além disto, otimizamos o código de nosso módulo, no exemplo mostrado nós economizamos cerca de 15 linhas.&lt;/p&gt;
&lt;h3 id=&#34;22-limitações-do-extlookup&#34;&gt;2.2 Limitações do extlookup&lt;/h3&gt;
&lt;p&gt;Infelizmente o extlookup só consegue ler dados de arquivos CSV (comma separeted values), cada linha no CSV traz algum tipo de informação separada por virgulas, isso para alguns cenários engessa e limita as possibilidades de tratamento.&lt;/p&gt;
&lt;p&gt;Com o tempo os admins foram querendo mais recursos e mais facilidades de uso, suporte a outros tipos de armazenamento e o extlookup precisou evoluir. É importante falar que ele foi um passo importante antes da criação de seu sucessor chamado HIERA.&lt;/p&gt;
&lt;p&gt;Antes de entrarmos no hiera é importante dizer que o extlookup continua disponível e funcionando no Puppet 3.x.x.&lt;/p&gt;
&lt;h2 id=&#34;3-o-sucessor-hiera&#34;&gt;3. O sucessor: Hiera&lt;/h2&gt;
&lt;p&gt;O Hiera é uma ferramenta que faz lookup (busca) por dados de configuração de seus manifests, ele foi criado pelo R.I.Piennar (que também crio ou o extlookup) para tornar o puppet mais eficiente e permitir que você defina dados relacionados a um node sem precisar repetir código.&lt;/p&gt;
&lt;p&gt;Podemos dizer que o HIERA é uma evolução do extlookup, porém ele foi escrito do zero, logo é um evolução inspirada no extlookup, mas com código completamente novo.&lt;/p&gt;
&lt;h3 id=&#34;31-mas-porque-o-hiera&#34;&gt;3.1 Mas porque o Hiera?&lt;/h3&gt;
&lt;p&gt;O Hiera torna o puppet melhor ao permitir separar os dados do código, ele retira essencialmente os dados de dentro de uma manifest e armazena externamente. É através do HIERA que você irá consultar estes dados conforme sua necessidade - tal como o extlookup fazia.&lt;/p&gt;
&lt;p&gt;O Hiera facilita:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A configuração de seus nodes: Podemos ter configurações com dados default ou então vários níveis de overrides nestes dados.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A reutilização de módulos: Você não precisa editar código, precisa apenas colocar os dados no hiera.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A publicação do seu módulo: Você não precisa mais ficar limpando vários pedaços do seu módulo para publicá-lo no forge ou github, os dados estão fora do manifest, tornado essa tarefa bem mais simples.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A elaboração e um código sem repetição!&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Com o Hiera você pode:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Escrever dados comuns para a maioria dos seus nodes&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Sobrescrever dados para nodes específicos&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Definir a hierarquia de pesquisa de dados&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;32-hiera-datasources&#34;&gt;3.2 Hiera datasources&lt;/h3&gt;
&lt;p&gt;No momento o HIERA suporta nativamente os datasources YAML e JSON.&lt;/p&gt;
&lt;p&gt;Exemplo de datasource YAML&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
# array
apache-packages:
    - apache2
    - apache2-common
    - apache2-utils

# string
apache-service: apache2

# interpolated facter variable 
hosts_entry: sandbox.%{fqdn}

# hash
sshd_settings: 
    root_allowed: &amp;quot;no&amp;quot;
    password_allowed: &amp;quot;yes&amp;quot;

# alternate hash notation
sshd_settings: {root_allowed: &amp;quot;no&amp;quot;, password_allowed: &amp;quot;yes&amp;quot;}

# to return &amp;quot;true&amp;quot; or &amp;quot;false&amp;quot;
sshd_settings: {root_allowed: no, password_allowed: yes}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Exemplo de datasource JSON&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;{   
    &amp;quot;apache-packages&amp;quot; : [
    &amp;quot;apache2&amp;quot;,
    &amp;quot;apache2-common&amp;quot;,
    &amp;quot;apache2-utils&amp;quot;
    ],

    &amp;quot;hosts_entry&amp;quot; :  &amp;quot;sandbox.%{fqdn}&amp;quot;,

    &amp;quot;sshd_settings&amp;quot; : {
                        &amp;quot;root_allowed&amp;quot; : &amp;quot;no&amp;quot;, 
                        &amp;quot;password_allowed&amp;quot; : &amp;quot;no&amp;quot;
                      }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;O Hiera não suporta o datasource CSV.&lt;/p&gt;
&lt;h3 id=&#34;321-outros-tipos-de-datasource&#34;&gt;3.2.1 Outros tipos de datasource&lt;/h3&gt;
&lt;p&gt;Você certamente vai encontrar projetos no github que permitem que o hiera use outros tipos de backend, eu particularmente recomendo os projetos do desenvolvedor Craig Dunn, ele criou 3 plugins que permitem que o HIERA use backends GPG, HTTP e MYSQL.&lt;/p&gt;
&lt;p&gt;Visite os projetos:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://github.com/crayfishx/hiera-gpg
https://github.com/crayfishx/hiera-http
https://github.com/crayfishx/hiera-mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-instalando-hiera&#34;&gt;5. Instalando Hiera&lt;/h2&gt;
&lt;p&gt;Para instalar o Hiera habilite os repositórios puppetlabs no Debian ou CentOS.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apt.puppetlabs.com (se for debian)
yum.puppetlabs.com (se for centos/rhel)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para instalar no Debian&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install hiera
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para instalar no CentOS&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install hiera
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se preferir instale usando o RAL (tanto faz o OS).&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet resource package hiera ensure=present
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se você estiver utilizando o Puppet 3 ele já deve estar instalado em seu ambiente. Aqui no meu ambiente estou usando CentOS 6.5 - 64 Bits e Puppet 3.4.2.&lt;/p&gt;
&lt;h2 id=&#34;5-configurando-hiera&#34;&gt;5. Configurando Hiera&lt;/h2&gt;
&lt;p&gt;A primeira coisa a se fazer é criar o arquivo &lt;strong&gt;/etc/puppet/hiera.yaml&lt;/strong&gt; e definir a hierarquia de pesquisa, o backend e o local onde ele deverá procurar os arquivos, veja o modelo abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
:hierarchy:
   - host/%{fqdn}
   - host/%{hostname}
   - os/%{osfamily}
   - domain/%{domain}
   - common
:backends:
   - yaml
:yaml:
   :datadir: /etc/puppet/hieradata 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe que na configuração do arquivo, estamos definindo a seguinte precedência de pesquisa:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;HOST/FQDN&lt;/li&gt;
&lt;li&gt;HOST/HOSTNAME&lt;/li&gt;
&lt;li&gt;OS/OSFAMILY&lt;/li&gt;
&lt;li&gt;DOMAIN/DOMAIN&lt;/li&gt;
&lt;li&gt;COMMON&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;E definimos também que o backend é o YAML e que os arquivos YAML ficarão no diretório /etc/puppet/hieradata, crie o diretório se ele não existir.&lt;/p&gt;
&lt;p&gt;Neste modelo eu estou utilizando o backend YAML.&lt;/p&gt;
&lt;h3 id=&#34;51-tipos-de-datasources&#34;&gt;5.1 Tipos de datasources&lt;/h3&gt;
&lt;p&gt;O Hiera pode trabalhar tanto com data sources estáticos, quanto dinâmicos (com interpolação de tokens e variáveis).&lt;/p&gt;
&lt;p&gt;Exemplo de datasource estático (common):&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
:hierarchy:
   - common
:backends:
   - yaml
:yaml:
   :datadir: /etc/puppet/hieradata 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Exemplo de datasource dinâmico (osfamily):&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
:hierarchy:
   - %{osfamily}
:backends:
   - yaml
:yaml:
   :datadir: /etc/puppet/hieradata 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Exemplo de datasource combinado (dinâmico e estático):&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
:hierarchy:
   - host/%{fqdn}
   - host/%{hostname}
   - os/%{osfamily}
   - domain/%{domain}
   - common
:backends:
   - yaml
:yaml:
   :datadir: /etc/puppet/hieradata 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;6-criando-manifest&#34;&gt;6. Criando Manifest&lt;/h2&gt;
&lt;p&gt;Agora vamos criar um manifest sem separação de dados e logo após vamos mostrar o mesmo manifest utilizando o Hiera.&lt;/p&gt;
&lt;h3 id=&#34;61-sem-hiera&#34;&gt;6.1 Sem Hiera&lt;/h3&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class webapps {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;### tratamentos e definiçoes #############

# primeiro tratamento: verifica fqdn

case $::fqdn {

    &#39;defiant.hackab&#39;: {
        $nameserver = [ &amp;quot;8.8.8.8&amp;quot;, &amp;quot;8.8.4.4&amp;quot; ]
    }
    &#39;voyager.hacklab&#39;: {
        $nameserver = [ &amp;quot;208.67.222.222&amp;quot;, &amp;quot;208.67.220.220&amp;quot; ]
    }
    default: {
        $nameserver = [ &amp;quot;10.0.1.1&amp;quot; ]
    }

}

# segundo tratamento: verifica dominio

case $::domain {
    &#39;hacklab&#39;: {
        $user = &#39;admin&#39;
    }
    default: {
        $user = &#39;gutocarvalho&#39;
    }
}

# terceiro tratamento: verifica o sistema operacional

case $::operatingsystem {
    Debian: {
        $editor_package = &#39;vim&#39;
        $http_package = &#39;apache2&#39;
        }
    RedHat: {
        $editor_package = &#39;vim-enhanced&#39;
        $http_package = &#39;httpd&#39;
        }
}

# definindo uma constante simples

$puppet_ipaddr = &#39;192.168.56.60&#39;

### declarando recursos ###############################

# gerenciando resolv.conf (fqdn)

file { &#39;/etc/resolv.conf&#39;:
    ensure  =&amp;gt; present,
    owner   =&amp;gt; &#39;root&#39;,
    group   =&amp;gt; &#39;root&#39;,
    mode    =&amp;gt; &#39;0644&#39;,
    content =&amp;gt; template(&#39;webapps/resolv.conf.erb&#39;),
}

# gerenciando usuarios (domain)

user { $user:
    ensure =&amp;gt; present,
}

# gerenciando pacotes (operatingsystem)

package { $editor_package:
    ensure =&amp;gt; present,
}

package { $http_package:
    ensure =&amp;gt; present,
}

# gerenciando host puppet (common)

host { &#39;puppet.hacklab&#39;:
    ensure     =&amp;gt; present,
    ip         =&amp;gt; $puppet_ipaddr,
    host_alias =&amp;gt; &#39;puppet&#39;,
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Veja o template resolv.conf.erb definido neste manifest.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;% hiera_nameserver.each do |val| -%&amp;gt;
  nameserver &amp;lt;%= val %&amp;gt;  
&amp;lt;% end -%&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe quantas vezes repetimos as mesmas variáveis em cada tratamento.&lt;/p&gt;
&lt;h3 id=&#34;62-com-hiera&#34;&gt;6.2 Com Hiera&lt;/h3&gt;
&lt;p&gt;Agora vamos utilizar o HIERA e modificar o manifest, veja como fica:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class webapps::hiera {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;### tratamentos e definiçoes #############

$hiera_nameserver = hiera_array(&#39;nameserver&#39;)
$hiera_user = hiera_array(&#39;users&#39;)
$hiera_editor_package = hiera(&#39;editor_package&#39;)
$hiera_http_package = hiera(&#39;http_package&#39;)
$hiera_puppet_ipaddr = hiera(&#39;puppet_ipaddr&#39;)

### declarando recursos ###############################

# gerenciando resolv.conf (fqdn)

    file { &#39;/etc/resolv.conf&#39;:
            ensure  =&amp;gt; present,
            owner   =&amp;gt; &#39;root&#39;,
            group   =&amp;gt; &#39;root&#39;,
            mode    =&amp;gt; &#39;0644&#39;,
            content =&amp;gt; template(&#39;webapps/resolv.conf.erb&#39;),
    }

    # gerenciando usuarios (domain)

    user { $hiera_user:
            ensure =&amp;gt; present,
    }

    # imprimindo nome do ambiente (environment)

    notify { &amp;quot;Ambiente de ${hiera_myenv}&amp;quot;: }

    # gerenciando pacotes (operatingsystem)

    package { $hiera_editor_package:
            ensure =&amp;gt; present,
    }

    package { $hiera_http_package:
            ensure =&amp;gt; present,
    }

    # gerenciando host puppet (common)

    host { &#39;puppet.hacklab&#39;:
            ensure       =&amp;gt; present,
            ip           =&amp;gt; $hiera_puppet_ipaddr,
            host_aliases =&amp;gt; puppet,
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Observe que não há dados no manifest, apenas código, agora vamos ver como criar os arquivos que conterão os dados.&lt;/p&gt;
&lt;h4 id=&#34;621-arquivos-yaml&#34;&gt;6.2.1 Arquivos YAML&lt;/h4&gt;
&lt;p&gt;Acompanhe abaixo o conteúdo dos arquivos.&lt;/p&gt;
&lt;p&gt;Arquivo /etc/puppet/hieradata/host/defiant.hacklab.yaml&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
nameserver:
   - 8.8.8.8
   - 8.8.4.4
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Arquivo /etc/puppet/hieradata/host/voyager.hacklab.yaml&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
nameserver:
   - 208.67.222.222
   - 208.67.220.220
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Arquivo /etc/puppet/hieradata/domain/hacklab.yaml&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
nameserver:
   - 10.0.0.10
user:
   - admin
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Arquivo /etc/puppet/hieradata/os/Debian.yaml&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
editor_package: vim
http_package: apache2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Arquivo /etc/puppet/hieradata/os/RedHat.yaml&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
editor_package: vim-enhanced
http_package: httpd
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Arquivo /etc/puppet/hieradata/common.yaml&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;---
nameserver:
  - 10.0.1.1
  - 8.8.8.8
  - 8.8.4.4
  - 208.67.222.222
  - 208.67.220.220
user:
  - gutocarvalho
puppet_ipaddr:
   - 192.168.56.60
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Com o Hiera os dados ficam fora do arquivo deixando o código mais limpo, coeso, evitando repetição e erros de edição.&lt;/p&gt;
&lt;h2 id=&#34;7-comandos-e-consultas-hiera&#34;&gt;7. Comandos e consultas Hiera&lt;/h2&gt;
&lt;p&gt;Para invocar o hiera para uma pesquisa seguindo a hierarquia definida.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# hiera ntp_server
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para invocar o hiera especificando parâmetros de busca&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# hiera ntp_server -yaml web01.example.com.yaml 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É bem simples fazer a pesquisa e testar se vai retornar o que você está esperando.&lt;/p&gt;
&lt;h2 id=&#34;8-referências&#34;&gt;8. Referências&lt;/h2&gt;
&lt;p&gt;Puppetlabs Misc&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://puppetlabs.com/blog/the-problem-with-separating-data-from-puppet-code/&#34;&gt;https://puppetlabs.com/blog/the-problem-with-separating-data-from-puppet-code/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://puppetlabs.com/blog/first-look-installing-and-using-hiera/&#34;&gt;https://puppetlabs.com/blog/first-look-installing-and-using-hiera/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hiera&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/index.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/index.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/installing.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/installing.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/configuring.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/configuring.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/lookup_types.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/lookup_types.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/data_sources.htm&#34;&gt;http://docs.puppetlabs.com/hiera/1/data_sources.htm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/variables.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/variables.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/puppet.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/puppet.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/complete_example.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/complete_example.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/command_line.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/command_line.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/custom_backends.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/custom_backends.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/hiera/1/release_notes.html&#34;&gt;http://docs.puppetlabs.com/hiera/1/release_notes.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Misc&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://pt.wikipedia.org/wiki/Comma-separated_values&#34;&gt;http://pt.wikipedia.org/wiki/Comma-separated_values&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.devco.net/archives/2009/08/31/complex_data_and_puppet.php&#34;&gt;http://www.devco.net/archives/2009/08/31/complex_data_and_puppet.php&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Mcollective em CentOS com ActiveMQ e Puppet</title>
      <link>https://archives.gutocarvalho.net/post/2013-12-30-mcollective-em-centos-com-activemq-e-puppet/</link>
      <pubDate>Mon, 30 Dec 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-12-30-mcollective-em-centos-com-activemq-e-puppet/</guid>
      <description>&lt;p&gt;Novo &lt;a href=&#34;http://gutocarvalho.net/puppet/doku.php?id=instalando:centos_mcollective_activemq&#34;&gt;artigo&lt;/a&gt; publicado na nova wiki de Puppet. Este artigo aborda a instalação do orquestrador Mcollective utilizando Apache ActiveMQ como sistema de mensageria. No artigo também é abordada a instalação dos agentes Puppet e Facter Facts, ambos para manipular puppet e facter nos nodes gerenciados em seu parque de servidores.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Nova wiki sobre Puppet</title>
      <link>https://archives.gutocarvalho.net/post/2013-12-28-nova-wiki-sobre-puppet/</link>
      <pubDate>Sat, 28 Dec 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-12-28-nova-wiki-sobre-puppet/</guid>
      <description>&lt;p&gt;Devido a muitas mensagens em listas de discussão e contatos através deste  site, todos relacionados a puppet e artigos antigos que escrevi na &lt;a href=&#34;http://gutocarvalho.net/dokuwiki&#34;&gt;wiki&lt;/a&gt; principal deste site, decidi então criar uma wiki focada em &lt;a href=&#34;http://www.puppetlabs.com&#34;&gt;Puppet&lt;/a&gt; com artigos atualizados e bem testados, também aproveitei para disponibilizar as &lt;a href=&#34;http://gutocarvalho.net/vms/&#34;&gt;VMs&lt;/a&gt; utilizadas para gerar os artigos.&lt;/p&gt;
&lt;p&gt;O endereço desta nova wiki é &lt;a href=&#34;http://gutocarvalho.net/puppet&#34;&gt;http://gutocarvalho.net/puppet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Até o momento já temos quatro artigos publicados, são eles:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/puppet/doku.php?id=instalando:centos&#34;&gt;Instalando servidor Puppet Master em CentOS (gerenciando 1 node)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/puppet/doku.php?id=instalando:centos_passenger&#34;&gt;Utilizando Passenger para rodar o Puppet Master&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/puppet/doku.php?id=instalando:centos_dashboard&#34;&gt;Instalando Puppet Dashboard&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/puppet/doku.php?id=instalando:centos_dashboard_passenger&#34;&gt;Utilizando Passenger para rodar o Puppet Dashboard&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Estou utilizando um método mais objetivo para escrever estes artigos, sem muita teoria, indo direto ao ponto de interesse dos leitores, depois vou inserir a teoria atualizada e suavizada, abordando apenas o realmente necessário.&lt;/p&gt;
&lt;p&gt;Na próxima semana teremos mais artigos, o próximo passo é fazer uma abordagem do mcollective (orquestrador) e em seguida começaremos com uma série &amp;lsquo;cookbook&amp;rsquo; criando diversos módulos e também vamos explorar os excelentes módulos oferecidos pela puppetlabs.&lt;/p&gt;
&lt;p&gt;Se quiser contribuir com revisões entre em contato por e-mail para que eu passe os dados de edição na wiki.&lt;/p&gt;
&lt;p&gt;[]s&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>LVM novas dicas</title>
      <link>https://archives.gutocarvalho.net/post/2013-12-25-lvm-novas-dicas/</link>
      <pubDate>Wed, 25 Dec 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-12-25-lvm-novas-dicas/</guid>
      <description>&lt;h2 id=&#34;1-novas-dicas&#34;&gt;1. Novas dicas&lt;/h2&gt;
&lt;p&gt;Já mostrei algumas dicas de LVM aqui neste &lt;a href=&#34;http://gutocarvalho.net/octopress/2013/05/17/lvm-dicas-rapidas/&#34;&gt;post&lt;/a&gt;, mas essa semana eu passei por alguns apertos que me ajudaram a descobrir novos macetes que compartilho aqui com vocês.&lt;/p&gt;
&lt;p&gt;O Zabbix vinha alertando que alguns servidores estavam com pouco de espaço em algumas partições, aproveitando o final do ano partimos para realizar alguns ajustes e expandir algumas partições.&lt;/p&gt;
&lt;p&gt;Abaixo respondo algumas perguntas comuns e compartilho as soluções encontradas.&lt;/p&gt;
&lt;h3 id=&#34;11-linux-single-vs-livecd&#34;&gt;1.1 Linux Single vs LiveCD&lt;/h3&gt;
&lt;p&gt;Devo usar linux single para fazer a manutenção de uma partição ou um livecd?&lt;/p&gt;
&lt;p&gt;Na realidade depende, se você quer redimensionar uma partição que não seja a / ou /usr, fazendo o procedimento da forma recomendada, verificando os discos antes e depois de redimensionar (e2fsck) é bem possível utilizar o linux single, desmontar a partição e depois utilizar as ferramentas LVM para aumentá-la ou diminuí-la, dependendo de sua necessidade.&lt;/p&gt;
&lt;p&gt;Se precisa mexer no / ou /usr, e vai seguir as recomendações verificando as partições antes e depois de redimensionar (e2fsck), prefira utilizar sempre um livecd pois em modo single você não vai conseguir desmontar o / ou /usr.&lt;/p&gt;
&lt;p&gt;Vou pode também fazer resize &lt;strong&gt;on-the-fly&lt;/strong&gt;, sem verificar os volumes, veremos isto mais a frente.&lt;/p&gt;
&lt;h3 id=&#34;12-devo-adicionar-um-novo-disco-ou-expandir-o-disco-existente-em-caso-de-máquina-virtual&#34;&gt;1.2 Devo adicionar um novo disco ou expandir o disco existente em caso de máquina virtual?&lt;/h3&gt;
&lt;p&gt;Se você está utilizando um hypervisor - como o VMWARE - que permite a utilização de discos inteligentes, é possível apenas aumentar o disco (inclusive com a vm ligada), criar uma nova partição com o espaço livre que acrescentou, forçar a releitura da geometria do disco, transformá-la em PV, adicioná-la ao VG e depois utilizar o novo espaço livre no VG para expandir o LV que necessita de disco.&lt;/p&gt;
&lt;h4 id=&#34;121-vários-discos-em-uma-vm-vmware&#34;&gt;1.2.1 Vários discos em uma VM (VMWARE)&lt;/h4&gt;
&lt;p&gt;Já me perguntaram se tem algum problema ter vários discos em uma VM, eu particularmente não vejo, mas o pessoal especializado em VMWARE alerta que ter vários discos pode aumentar a complexidade de administração e a VM terá maior custo no cluster HA do VMWARE, vale o alerta. Outro detalhe é que perder algum destes discos significará perder o VG, por isso sempre esteja com o seu backup em dia.&lt;/p&gt;
&lt;h3 id=&#34;13-eu-dei-boot-em-modo-rescue-utilizando-o-cddvd-da-distribuição-porém-no-shell-os-comandos-pvdisplay-vgdisplay-e-lvdisplay-não-mostram-nada&#34;&gt;1.3 Eu dei boot em modo rescue utilizando o CD/DVD da distribuição, porém no shell os comandos pvdisplay, vgdisplay e lvdisplay não mostram nada.&lt;/h3&gt;
&lt;p&gt;Isso pode acontecer, inclusive aconteceu comigo recentemente e foi o que me motivou a escrever este post.&lt;/p&gt;
&lt;p&gt;No caso do CentOS 6.x e Debian 7.x, o modo rescue não está ativando os volumes LVM por default, então neste caso precisamos fazer isto manualmente.&lt;/p&gt;
&lt;h4 id=&#34;131-resolvendo-a-questão&#34;&gt;1.3.1 Resolvendo a questão&lt;/h4&gt;
&lt;p&gt;Você pode forçar a detecção desta forma no shell do livecd&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# lvm pvscan
# lvm vgscan
# lvm lvscan
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No meu caso ele até detectou o PV e até encontrou o VG, contudo não vi os LVs. Para ativar os VGs e LVs precisamos utilizar o seguinte comando:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# lvm vgchange -a y
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A partir daí você conseguirá enxergar e manipular os volumes lógicos, fica a dica.&lt;/p&gt;
&lt;h3 id=&#34;14-devo-fazer-resize-on-the-fly-de-partições-ext3ext4&#34;&gt;1.4 Devo fazer resize on-the-fly de partições ext3/ext4?&lt;/h3&gt;
&lt;p&gt;O recurso existe e funciona muito bem desde o kernel 2.6, você pode ver neste &lt;a href=&#34;http://theducks.org/2009/11/expanding-lvm-on-boot-disk-under-vmware-3-5-without-rebooting/&#34;&gt;post&lt;/a&gt; um exemplo disto, contudo você não rodará o e2fsck para checar sua partição antes e depois de fazer o resize, e caso o resize2fs reclame você terá de fazer o resize da forma tradicional.&lt;/p&gt;
&lt;p&gt;Eu acho arriscado dependendo da criticidade e do tamanho do volume, prefiro estar em um ambiente LiveCD com as partições desmontadas para fazer a manutenção. Em determinados cenários eu particularmente acho que o risco de corromper a partição é maior do que o benefício de fazer o resize on-the-fly, mas em determinados cenários pode ser a salvação da pátria, então vamos entender como isso funciona.&lt;/p&gt;
&lt;h3 id=&#34;141-método-on-the-fly-adicionando-nova-partição&#34;&gt;1.4.1 Método on-the-fly adicionando nova partição&lt;/h3&gt;
&lt;p&gt;Primeiro aumente o tamanho do disco no VMWARE com a VM ligada mesmo, isto só é possível com discos THIN.&lt;/p&gt;
&lt;p&gt;Depois vá no OS, se você aumentou por exemplo espaço do disco SDA, entre nas configurações deste disco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# cfdisk /dev/sda
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se você não está enxergando o espaço que você adicionou, saia do cfdisk e rode o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# echo &#39;1&#39; &amp;gt; /sys/class/scsi_disk/0\:0\:0\:0/device/rescan
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Entre novamente no cfdisk e verifique se está enxergando o espaço livre&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# cfdisk /dev/sda 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora crie uma nova partição do tipo LVM como espaço em disco que você adicionou, depois saia do cfdisk e transforme essa nova partição em PV (volume físico)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# pvcreate /dev/sdaX
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se o sei OS não deixou você rodar o comando e está pendido reboot, apenas rode o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; # partprobe -s
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tente novamente, agora vai funcionar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# pvcreate /dev/sdaX
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione o PV ao VG existente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# vgextent vg_nome /dev/sdaX
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Expanda seu LV (exemplo /opt)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# lvextent -L +100G /dev/mapper/vg_nome_opt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça o resize da partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# resiz2fs -p /dev/mappaer/vg_nome_opt 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rode o DF para verificar se a partição aumentou&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# df -h
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E a magia on-the-fly aconteceu.&lt;/p&gt;
&lt;p&gt;Eu fiz em dois servidores em produção, sem downtime, sem reboot, sem umount, funciona mesmo.&lt;/p&gt;
&lt;h3 id=&#34;142-método-on-the-fly-expandindo-um-pv-existente&#34;&gt;1.4.2 Método on-the-fly expandindo um PV existente&lt;/h3&gt;
&lt;p&gt;É possível fazer o resize do PV existente ao invés de criar um novo PV, neste &lt;a href=&#34;http://theducks.org/2009/11/expanding-lvm-partitions-in-vmware-on-the-fly&#34;&gt;post&lt;/a&gt; você verá esse procedimento de forma detalhada, contudo, isto envolve deletar e recriar uma partição de seu disco, e ao recriar você precisa marcar o setor exato de início e fim, segundo o tutorial funciona, mas eu acho arriscado, e só funcionará de forma fácil se o seu PV for a última partição do disco, enfim, é mais uma alternativa, fica a dica.&lt;/p&gt;
&lt;h2 id=&#34;2-referências&#34;&gt;2. Referências&lt;/h2&gt;
&lt;p&gt;Oficiais:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.tldp.org/HOWTO/LVM-HOWTO/activatevgs.html&#34;&gt;http://www.tldp.org/HOWTO/LVM-HOWTO/activatevgs.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.redhat.com/archives/anaconda-devel-list/2012-April/msg00210.html&#34;&gt;http://www.redhat.com/archives/anaconda-devel-list/2012-April/msg00210.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Blogs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://theducks.org/2009/11/expanding-lvm-partitions-in-vmware-on-the-fly&#34;&gt;http://theducks.org/2009/11/expanding-lvm-partitions-in-vmware-on-the-fly&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://theducks.org/2009/11/expanding-lvm-on-boot-disk-under-vmware-3-5-without-rebooting/&#34;&gt;http://theducks.org/2009/11/expanding-lvm-on-boot-disk-under-vmware-3-5-without-rebooting/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.linuxuser.co.uk/features/resize-your-disks-on-the-fly-with-lvm&#34;&gt;http://www.linuxuser.co.uk/features/resize-your-disks-on-the-fly-with-lvm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dailypackage.fedorabook.com/index.php?/archives/159-System-Recovery-Week-Using-LVM-In-Rescue-Mode.html=&#34;&gt;http://dailypackage.fedorabook.com/index.php?/archives/159-System-Recovery-Week-Using-LVM-In-Rescue-Mode.html=&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://grokbase.com/t/centos/centos/11187s4xr4/livecd-system-recovery-mounting-lvm&#34;&gt;http://grokbase.com/t/centos/centos/11187s4xr4/livecd-system-recovery-mounting-lvm&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Palestras e Oficinas no Consegi 2013</title>
      <link>https://archives.gutocarvalho.net/post/2013-08-17-palestras-e-oficinas-no-consegi-2013/</link>
      <pubDate>Sat, 17 Aug 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-08-17-palestras-e-oficinas-no-consegi-2013/</guid>
      <description>&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/25327069&#34; width=&#34;100%&#34; height=&#34;356&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;max-width:427px;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px&#34; allowfullscreen webkitallowfullscreen mozallowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;https://www.slideshare.net/GutoCarvalho/cultura-devops-e-integrao-entre-infra-e-devel&#34; title=&#34;Cultura DevOps e integração entre infra e devel&#34; target=&#34;_blank&#34;&gt;Cultura DevOps e integração entre infra e devel&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/25326688&#34; width=&#34;100%&#34; height=&#34;356&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;max-width:427px;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px&#34; allowfullscreen webkitallowfullscreen mozallowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;https://www.slideshare.net/GutoCarvalho/puppet-oficina&#34; title=&#34;Oficina de infraestrutura como código (apresentando o Puppet)&#34; target=&#34;_blank&#34;&gt;Oficina de infraestrutura como código (apresentando o Puppet)&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/25326630&#34; width=&#34;100%&#34; height=&#34;356&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;max-width:427px;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px&#34; allowfullscreen webkitallowfullscreen mozallowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;https://www.slideshare.net/GutoCarvalho/ferrmentas&#34; title=&#34;Ferramentas para infraestrutura ágil&#34; target=&#34;_blank&#34;&gt;Ferramentas para infraestrutura ágil&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Limpando fila de jobs do Puppet Dashboard</title>
      <link>https://archives.gutocarvalho.net/post/2013-06-22-limpando-fila-de-jobs-do-puppet-dashboard/</link>
      <pubDate>Sat, 22 Jun 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-06-22-limpando-fila-de-jobs-do-puppet-dashboard/</guid>
      <description>&lt;h2 id=&#34;1-sobre-o-dashboard&#34;&gt;1. Sobre o dashboard&lt;/h2&gt;
&lt;p&gt;O puppet dashboard é a ferramenta que nos permite acompanhar as mudanças que estão ocorrendo em um parque gerenciado pelo puppet, com ele todo o ciclo de vida de um node estará dentro do dashboard a partir do momento que um host começa a ser gerenciado.&lt;/p&gt;
&lt;h2 id=&#34;2-como-ele-funciona&#34;&gt;2. Como ele funciona?&lt;/h2&gt;
&lt;p&gt;Para o puppet dashboard ser atualizado, a configuração do puppet agente precisa ter a diretiva report ativada, com isto, toda a vez que o puppet agent rodar na máquina gerenciada, um relatório será enviado ao master.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;report = true
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Além desta diretiva, precisamos configurar o puppetmaster para enviar os reports recebido dos agentes para o dashboard. No dashboard, precisamos ativar os serviço workers, este serviço processa os relatórios recebidos do puppetmaster e alimenta a base do dashboard, isto atualiza os dados na interface web e você poderá então acompanhar o que está acontecendo em seus nodes.&lt;/p&gt;
&lt;h2 id=&#34;3-problemas-comuns&#34;&gt;3. Problemas comuns&lt;/h2&gt;
&lt;p&gt;Quando o dashboard para de atualizar as informações, você normalmente verá no canto superior esquerdo uma mensagem com o título &amp;lsquo;Pending Tasks&amp;rsquo; e ao lado dela o número de tarefas que estão aguardando processamento.&lt;/p&gt;
&lt;p&gt;Quando isto ocorre, provavelmente seu processo workers está parado, essa é a causa mais comum, basta reiniciar o processo e isso se resolve.&lt;/p&gt;
&lt;p&gt;No debian&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/puppet-dashboard-workers restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No CentOS&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;service puppet-dashboard-workers restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No manual do Puppet Dashboard as dicas param ai, qualquer problema além disto você precisa se virar.&lt;/p&gt;
&lt;h2 id=&#34;4-problemas-incomuns&#34;&gt;4. Problemas incomuns&lt;/h2&gt;
&lt;p&gt;Já ocorreu comigo duas vezes um problema bastante incomum que não estava relacionado aos processos workers, mas sim aos relatórios que ficam no diretório /usr/share/puppet-dashboard/spool, este diretório acolhe todos os arquivos recebidos do puppetmaster para processamento e inserção na base do dashboard.&lt;/p&gt;
&lt;h3 id=&#34;41-entendendo-o-problema&#34;&gt;4.1 Entendendo o problema&lt;/h3&gt;
&lt;p&gt;As vezes os workers não conseguem processar algum relatório e isso trava toda a fila de processamento. Na primeira vez que tive esse problema eu apelei, removi o dashboard, recriei a base e reinstalei o dashboard, meu dia estava corrido e era mais fácil e rápido fazer isto, contudo ontem (2013-06-21) eu tive novamente esse problema, desta vez com mais calma pesquisei e achei uma solução mais elegante no fórum do Puppet.&lt;/p&gt;
&lt;h3 id=&#34;42-solucionando-o-problema&#34;&gt;4.2 Solucionando o problema&lt;/h3&gt;
&lt;p&gt;A primeira coisa ser feita é analisar o arquivo /usr/share/puppet-dashboard/log/delayed_job.log para tentar achar o report que está quebrando o processamento, contudo nem sempre é fácil interpretar esse arquivo, principalmente se você tem uma quantidade relativamente grande de nodes sendo gerenciados pelo puppet.&lt;/p&gt;
&lt;p&gt;Caso não consiga identificar o problema para destravar o processamento da fila, você pode simplesmente parar os workers, limpar o spool, limpar os jobs e reativar os workers, veja o passo a passo.&lt;/p&gt;
&lt;h4 id=&#34;421-passo-a-passo&#34;&gt;4.2.1 Passo a passo&lt;/h4&gt;
&lt;p&gt;Acesse o diretório do spool&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /usr/share/puppet-dashboard/spool
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pare os processos worker&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/puppet-dashboard-workers stop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Apague os relatórios YAML&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rm -rf *.yaml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Limpe os jobs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake jobs:clear RAILS_ENV=production
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Inicie o workers&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/puppet-dashboard-workers start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Isso deve ser suficiente para que seu dashboard volte a atualizar as informações referentes aos seus nodes.&lt;/p&gt;
&lt;h3 id=&#34;43-avaliando-as-possíveis-causas&#34;&gt;4.3 Avaliando as possíveis causas&lt;/h3&gt;
&lt;p&gt;Não posso afirmar com 100% de certeza, contudo, alguns nodes que estive configurando em versões antigas do CentOS (5.x) reclamaram do certificado do master (CRL) e me apresentaram vários erros estranhos quando rodei o comando &amp;ldquo;puppet agent &amp;ndash;test&amp;rdquo; neles. Acredito que  a tentativa de rodar o puppet sem sucesso pode ter gerado algum tipo de relatório mal formado que o workers não conseguiu processar, esse é o meu chute pelo menos, quando tiver dado mais concretos passo para vocês.˚&lt;/p&gt;
&lt;h2 id=&#34;5-referências&#34;&gt;5. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.mail-archive.com/puppet-users@googlegroups.com/msg40277.html&#34;&gt;http://www.mail-archive.com/puppet-users@googlegroups.com/msg40277.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Mirror Yum CentOS</title>
      <link>https://archives.gutocarvalho.net/post/2013-06-22-mirror-yum-centos/</link>
      <pubDate>Sat, 22 Jun 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-06-22-mirror-yum-centos/</guid>
      <description>&lt;p&gt;Em um cliente me foi solicitado criar um mirror local para pacotes CentOS 5 e 6, abaixo compartilho os scripts que foram criados, vai que te ajuda ;)&lt;/p&gt;
&lt;p&gt;Os scripts utilizam rsync para pegar os pacotes.&lt;/p&gt;
&lt;h2 id=&#34;1-scripts&#34;&gt;1. Scripts&lt;/h2&gt;
&lt;h3 id=&#34;11-centos-baseupdatesextrasmedia&#34;&gt;1.1. CentOS Base/Updates/Extras/Media&lt;/h3&gt;
&lt;p&gt;Este baixa pacotes oficiais CentOS para CentOS 5 e 6.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/bash

LOCKFILE=&amp;quot;/var/lock/subsys/rsync_centos_updates&amp;quot;
CENTOSDIR=&amp;quot;/srv/mirror/centos&amp;quot;
MIRROR6=&amp;quot;rsync://mirror.steadfast.net/centos/6.4&amp;quot;
MIRROR5=&amp;quot;rsync://mirror.steadfast.net/centos/5.9&amp;quot;
if [ -f $LOCKFILE ]; then
    echo &amp;quot;Updates via rsync already running.&amp;quot;
    exit 0
else
	if [ -d $CENTOSDIR ] ; then
	   touch $LOCKFILE
           rsync -avSHP $MIRROR6 --delete --exclude &#39;local*&#39; --exclude isos --exclude SRPMS $CENTOSDIR
           rsync -avSHP $MIRROR5 --delete --exclude &#39;local*&#39; --exclude isos --exclude SRPMS $CENTOSDIR
	   rm -f $LOCKFILE
	else
	    echo &amp;quot;Target directory $CENTOSDIR not present.&amp;quot;
	fi
fi
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;12-epel&#34;&gt;1.2. Epel&lt;/h3&gt;
&lt;p&gt;Este baixa pacotes EPEL para CentOS 5 e 6.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;!/bin/bash

LOCKFILE=&amp;quot;/var/lock/subsys/rsync_updates_epel&amp;quot;

EPELDIR6=&amp;quot;/srv/mirror/epel/centos/6/x86_64&amp;quot;
MIRROR6=&amp;quot;rsync://fedora.mirror.nexicom.net/Fedora-EPEL/6/x86_64/&amp;quot;

EPELDIR5=&amp;quot;/srv/mirror/epel/centos/5/x86_64&amp;quot;
MIRROR5=&amp;quot;rsync://fedora.mirror.nexicom.net/Fedora-EPEL/5/x86_64/&amp;quot;

if [ -f $LOCKFILE ]; then
    echo &amp;quot;Updates via rsync already running.&amp;quot;
    exit 0
else
	if [ -d $EPELDIR6 ] &amp;amp;&amp;amp; [ -d $EPELDIR5 ] ; then
	   touch $LOCKFILE
           rsync -avSHP $MIRROR6 --delete --exclude SRPMS $EPELDIR6/
           rsync -avSHP $MIRROR5 --delete --exclude SRPMS $EPELDIR5/
	   rm -f $LOCKFILE
	else
	    echo &amp;quot;Target directory $EPELDIR6 or $EPELDIR5 not present.&amp;quot;
	fi
fi
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;13-puppetlabs&#34;&gt;1.3. PuppetLabs&lt;/h3&gt;
&lt;p&gt;Este baixa pacotes oficiais Puppet para CentOS 5 e 6.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/bash

LOCKFILE=&amp;quot;/var/lock/subsys/rsync_updates_puppet&amp;quot;

PUPPETDIR5=&amp;quot;/srv/mirror/puppet/products/5/x86_64&amp;quot;
MIRROR5=&amp;quot;rsync://yum.puppetlabs.com/packages/yum/el/5/products/x86_64/&amp;quot;

DEPPUPPETDIR5=&amp;quot;/srv/mirror/puppet/dependencies/5/x86_64&amp;quot;
DEPMIRROR5=&amp;quot;rsync://yum.puppetlabs.com/packages/yum/el/5/dependencies/x86_64/&amp;quot;

PUPPETDIR6=&amp;quot;/srv/mirror/puppet/products/6/x86_64&amp;quot;
MIRROR6=&amp;quot;rsync://yum.puppetlabs.com/packages/yum/el/6/products/x86_64/&amp;quot;

DEPPUPPETDIR6=&amp;quot;/srv/mirror/puppet/dependencies/6/x86_64&amp;quot;
DEPMIRROR6=&amp;quot;rsync://yum.puppetlabs.com/packages/yum/el/6/dependencies/x86_64/&amp;quot;

PARAMS=&amp;quot;-av --exclude SRPMS --delete&amp;quot;

if [ -f $LOCKFILE ]; then
    echo &amp;quot;Updates via rsync already running.&amp;quot;
    exit 0
else
	if [ -d $PUPPETDIR5 ] &amp;amp;&amp;amp; [ -d $PUPPETDIR6 ] &amp;amp;&amp;amp; [ -d $DEPPUPPETDIR5 ] &amp;amp;&amp;amp; [ -d $DEPPUPPETDIR6 ]   ; then
	   touch $LOCKFILE
	   rsync $PARAMS $MIRROR6 $PUPPETDIR6
	   rsync $PARAMS $MIRROR5 $PUPPETDIR5
	   rsync $PARAMS $DEPMIRROR6 $DEPPUPPETDIR6
	   rsync $PARAMS $DEPMIRROR5 $DEPPUPPETDIR5
	   rm -f $LOCKFILE
	else
	    echo &amp;quot;Target directory $PUPPETDIR5 or $PUPPETDIR6 not present.&amp;quot;
	fi
fi
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;13-zabbix&#34;&gt;1.3. Zabbix&lt;/h3&gt;
&lt;p&gt;Este baixa pacotes oficiais Zabbix para CentOS 5 e 6.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/bash

LOCKFILE=&amp;quot;/var/lock/subsys/rsync_updates_zabbix&amp;quot;

ZBXDIR5=&amp;quot;/srv/mirror/zabbix/centos/5/x86_64&amp;quot;
MIRROR5=&amp;quot;rsync://repo.zabbixzone.com/centos/5/x86_64/&amp;quot;

ZBXDIR6=&amp;quot;/srv/mirror/zabbix/centos/6/x86_64&amp;quot;
MIRROR6=&amp;quot;rsync://repo.zabbixzone.com/centos/6/x86_64/&amp;quot;

PARAMS=&amp;quot;-av --exclude SRPMS --delete&amp;quot;

if [ -f $LOCKFILE ]; then
    echo &amp;quot;Updates via rsync already running.&amp;quot;
    exit 0
else
        if [ -d $ZBXDIR5 ] &amp;amp;&amp;amp; [ -d $ZBXDIR6 ] ; then
           touch $LOCKFILE
           rsync $PARAMS $MIRROR6 $ZBXDIR6
           rsync $PARAMS $MIRROR5 $ZBXDIR5
           rm -f $LOCKFILE
        else
            echo &amp;quot;Target directory $ZBXDIR5 or $ZBXDIR6 not present.&amp;quot;
        fi
fi
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;2-apache-config&#34;&gt;2. Apache Config&lt;/h2&gt;
&lt;p&gt;No apache apenas criei um arquivo chamado mirror.conf dentro de /etc/httpd/conf.d com o conteúdo abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#
# repositorio
#

Alias /mirror /srv/mirror

&amp;lt;Directory /srv/mirror&amp;gt;
	Options Indexes
	Options +FollowSymLinks
	AllowOverride none
	Order Allow,Deny
	Allow from all
&amp;lt;/Directory&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;3-yum-config&#34;&gt;3. YUM Config&lt;/h2&gt;
&lt;h3 id=&#34;31-para-centos-6&#34;&gt;3.1 Para CentOS 6&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# repositorio centos

[base]
name=CentOS 6.4 Base x86_64
baseurl=http://mirror.local/mirror/centos/6.4/os/x86_64
enabled=1
gpgcheck=0
exclude=puppet*,zabbix*

[updates]
name=CentOS 6.4 Updates x86_64
baseurl=http://mirror.local/mirror/centos/6.4/updates/x86_64
enabled=1
gpgcheck=0
exclude=puppet*,zabbix*

# repositorio epel, pacotes extras enterprise

[epel]
name=CentOS 6 EPEL x86_64
baseurl=http://mirror.local/epel/centos/6/x86_64
enabled=1
gpgcheck=0
exclude=puppet*

# puppet-agent packages from http://yum.puppetlabs.com/

[puppet-products]
name=CentOS 6 PuppetLabs Packages x86_64
baseurl=http://mirror.local/mirror/puppet/products/6/x86_64
enabled=1
gpgcheck=0

[puppet-dependencies]
name=CentOS 6 PuppetLabs Packages x86_64
baseurl=http://mirror.local/mirror/puppet/dependencies/6/x86_64
enabled=1
gpgcheck=0
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;31-para-centos-5&#34;&gt;3.1 Para CentOS 5&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[base]
name=CentOS 5 Base x86_64
baseurl=http://mirror.local/mirror/centos/5.9/os/x86_64
enabled=1
gpgcheck=0
exclude=puppet*,zabbix*

[updates]
name=CentOS 5 Updates x86_64
baseurl=http://mirror.local/mirror/centos/5.9/updates/x86_64
enabled=1
gpgcheck=0
exclude=puppet*,zabbix*

# repositorio epel, pacotes extras enterprise

[epel]
name=CentOS 5 EPEL x86_64
baseurl=http://mirror.local/epel/centos/5/x86_64
enabled=1
gpgcheck=0
exclude=puppet*

# puppet-agent packages from http://yum.puppetlabs.com/

[puppet-products]
name=CentOS 5 PuppetLabs Packages x86_64
baseurl=http://mirror.local/mirror/puppet/products/5/x86_64
enabled=1
gpgcheck=0

[puppet-dependencies]
name=CentOS 5 PuppetLabs Packages x86_64
baseurl=http://mirror.local/mirror/puppet/dependencies/5/x86_64
enabled=1
gpgcheck=0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Time machine via console</title>
      <link>https://archives.gutocarvalho.net/post/2013-06-01-time-machine-via-console/</link>
      <pubDate>Sat, 01 Jun 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-06-01-time-machine-via-console/</guid>
      <description>&lt;p&gt;Estive pesquisando sobre como deletar manualmente backups antigos do time machine e descobri o comando tmutil, ele pode ser utilizado para realizar essa tarefa via console, mas não é só isto, o tmutil permite manipular de forma direta o time machine, veja abaixo alguns comandos interessantes.&lt;/p&gt;
&lt;p&gt;Para listar os backups existentes em seu disco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil listbackups
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;/Volumes/GutoWD1TB/Backups.backupdb/kaiten/2013-04-02-085203
/Volumes/GutoWD1TB/Backups.backupdb/kaiten/2013-04-02-134033
/Volumes/GutoWD1TB/Backups.backupdb/kaiten/2013-04-19-125352
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Para saber qual o backup mais recente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil latestbackup
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/Volumes/GutoWD1TB/Backups.backupdb/kaiten/2013-04-19-125352
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para habilitar backups automáticos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil enable
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para desabilitar backups automáticos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil disable
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para habilitar snapshots locais do time machine (no mesmo disco)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil enablelocal
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para desabilitar snapshots locais do time machine&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil disablelocal
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para iniciar um backup manualmente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil startbackup
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para interromper um backup em progresso&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil stopbackup
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para criar um snapshot local (no mesmo disco)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil snapshot
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para deletar todos os backups de um dispositivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil delete /Volumes/drive_name/Backups.backupdb/old_mac_name
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para deletar um snapshot específico de um dispositivo específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil delete /Volumes/drive_name/Backups.backupdb/mac_name/YYYY-MM-DD-hhmmss
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para associar um disco ao time machine&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil setdestination /Volumes/backupdrive
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para associar um ponto de montagem afp via rede ao time machine&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil setdestination afp://user:password@server-address/directory
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para adicionar um diretório a lista de exclusão&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil addexclusion /Downloads
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para remover um diretório da lista de exclusão&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil removeexclusion /Downloads
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para comparar os arquivos de backup com os arquivos atuais em seu disco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil compare
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;- 181B                          /Volumes/GutoWD1TB/Backups.backupdb/kaiten/2013-06-01-201328/OSX/.com.apple.backupd.mvlist.plist
+ 0B                            /.dbfseventsd
!         (mtime)               /.DocumentRevisions-V100/.cs
! 12.0M   (size, mtime)         /.DocumentRevisions-V100/.cs/ChunkStorage/0/0/0/18
! 2.4M    (size, mtime)         /.DocumentRevisions-V100/.cs/ChunkStoreDatabase-wal
!         (mtime)               /.DocumentRevisions-V100/ChunkTemp
!         (mtime)               /.DocumentRevisions-V100/PerUID/501/110/com.apple.documentVersions
+ 1.2K                          /.DocumentRevisions-V100/PerUID/501/110/com.apple.documentVersions/B849E3FA-CBC3-4E33-8859-E278C049B78A.markdown
! 2.7M    (size, mtime)         /.DocumentRevisions-V100/db-V1/db.sqlite-wal
!         (mtime)               /.DocumentRevisions-V100/staging
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Entenda as legendas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;+ significa arquivo novo
- significa arquivo removido
! significa arquivo modificado
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para comparar apenas o tamanho dos arquivos do backup com os atuais em disco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil -s
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para comparar arquivos do disco com um backup mais antigo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil compare /Volumes/TimeMachineDriveName/Backups.backupdb/mac_name/AAAA-MM-DD-hhmmss
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para saber mais&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tmutil --help
tmutil help &amp;lt;verb&amp;gt;
man tmutil
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Comunidade dokuwiki-br</title>
      <link>https://archives.gutocarvalho.net/post/2013-05-30-comunidade-dokuwiki-br/</link>
      <pubDate>Thu, 30 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-05-30-comunidade-dokuwiki-br/</guid>
      <description>&lt;p&gt;Estive conversando com um colega da lista zabbix-brasil (Mário Carvalho) sobre a ferramenta Dokuwiki, a partir da conversa, surgiu a ideia de criar uma lista de discussão para ajudar pessoas que desejam trocar ideias e informações sobre a ferramenta em português.&lt;/p&gt;
&lt;p&gt;Enfim, lista criada, agora é começar a divulgar.&lt;/p&gt;
&lt;p&gt;Endereço da lista:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://groups.google.com/forum/#!forum/dokuwiki-br
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse, participe, compartilhe!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Copy APP</title>
      <link>https://archives.gutocarvalho.net/post/2013-05-21-copy-app/</link>
      <pubDate>Tue, 21 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-05-21-copy-app/</guid>
      <description>&lt;h2 id=&#34;1-cloud-storage-com-o-copy&#34;&gt;1. Cloud Storage com o COPY&lt;/h2&gt;
&lt;p&gt;Ontem eu encontrei um post no Google Plus falando sobre a APP &lt;a href=&#34;https://www.copy.com/home/?r=X36W03&amp;amp;signup=1&#34;&gt;COPY&lt;/a&gt;, quando olhei, eu pensei que fosse mais uma dessas APP de CLOUD Storage que vão me oferecer míseros 2 gigas, algo que não vale a pena investir já que uso o Dropbox e tenho cerca de 18 gigas atualmente (tudo na base de invites), contudo, vi que eles anunciaram 15GB de cara, isso me deixou bastante interessado e fui olhar de perto.&lt;/p&gt;
&lt;p&gt;Por trás do COPY está a empresa &lt;a href=&#34;https://www.barracuda.com/&#34;&gt;Barracuda Networks&lt;/a&gt; que possui uma grande experiência com serviços de segurança, rede, armazenamento e backup. No lançamento do COPY eles estavam oferecendo apenas 5 gigas, mas agora estão mais agressivos oferecendo 15 gigas já de início.&lt;/p&gt;
&lt;p&gt;A COPY parece ser o primeiro concorrente para valer do DROPBOX, a aplicação é praticamente um clone, tem todas as features do DROPBOX e oferece uma interface web mais polida, além disto, há uma integração com as principais redes sociais (Google Plus, Facebook e Twitter).&lt;/p&gt;
&lt;p&gt;Veja abaixo um vídeo sobre o COPY:&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/m36ZMdE-vro&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;2-sincronização&#34;&gt;2. Sincronização&lt;/h2&gt;
&lt;p&gt;De ontem para hoje eu instalei no Macbook Pro, Android, IOS e no IMac, já sincronizei dados entre os dispositivos, subi arquivos pequenos e subi uma discografia de 1 GB com vários arquivos mp3, a discografia subiu em menos de 10 minutos, nem preciso dizer que o DROPBOX fica muito atrás na velocidade de UPLOAD e também na velocidade de DOWNLOAD (apesar de ser um ótimo serviço). O Download da discografia em outro dispositivo levou cerca de 25 minutos, demorou mais para descer do que para subir.&lt;/p&gt;
&lt;h3 id=&#34;21-notificações&#34;&gt;2.1 Notificações&lt;/h3&gt;
&lt;p&gt;Senti falta dos indicadores e notificações nos ícones como temos no DROPBOX, algo como  já foi sincronizado (verde), sincronizando (amarelo), isso o Copy ainda não tem.&lt;/p&gt;
&lt;h3 id=&#34;22-pause-sync&#34;&gt;2.2 Pause Sync&lt;/h3&gt;
&lt;p&gt;Esse recurso é essencial, não tem no em várias apps de cloud storage, mas vem nativamente no COPY, com isso, se quisermos parar por alguma razão a sincronização é só clicar no PAUSE, acredite, isto é muito útil.&lt;/p&gt;
&lt;h2 id=&#34;3-pastas-compartilhadas&#34;&gt;3. Pastas compartilhadas&lt;/h2&gt;
&lt;p&gt;Ontem também compartilhei uma pasta com a Jéssica (@jemmacedo), fiz isso rapidinho e sem dificuldades, o compartilhamento funcionou muito bem e continua funcionando.&lt;/p&gt;
&lt;h2 id=&#34;4-armazenamento&#34;&gt;4. Armazenamento&lt;/h2&gt;
&lt;p&gt;Outra questão interessante, quando você cria a conta já tem 15 Gigas de cara e chegará a 17 gigas fazendo um simples compartilhamento de link em alguma rede social. Você pode também fazer indicações de amigos, mas não é como o DROPBOX que pede acesso a sua conta do GMAIL e sai mandando convites a torto e direito, no COPY é um por um, você preenche nome, sobrenome e e-mail, contudo, cada pessoa que instalar te dá mais 5 GB de espaço enquanto o DROPBOX dá 500MB para a mesma coisa. No momento já estou com 52 GB de espaço por lá, tudo via referrals e bonus.&lt;/p&gt;
&lt;h2 id=&#34;5-arquivos-públicos&#34;&gt;5. Arquivos públicos&lt;/h2&gt;
&lt;p&gt;Quando desejar compartilhar um arquivo de forma pública você pode escolher as redes sociais (Facebook, Twitter, Google Plus ou E-mail),
é gerado um LINK e este será postado nas redes sociais ou no e-mail.&lt;/p&gt;
&lt;p&gt;Compartilhar por e-mail traz as mesmas vantagens do DROPBOX, vai o link apenas e não o arquivo anexo, evitando limitações de anexo e
deixando o coitado do administrador do servidor de e-mail mais feliz,
afinal e-mail não é para isto.&lt;/p&gt;
&lt;h2 id=&#34;6-company&#34;&gt;6. Company&lt;/h2&gt;
&lt;p&gt;Ele oferece ainda um recurso chamado &lt;strong&gt;company&lt;/strong&gt;, que te permite criar um folder dentro do seu compartilhamento e definir usuários que podem utilizar esse folder, a versão free é bem simples mas existem planos pagos que habilitam mais recursos de controle, e não é cobrado por pessoa como em outros sistemas, é uma taxa única anual, mais simples e honesto - eu acho.&lt;/p&gt;
&lt;p&gt;O que isso resolve?&lt;/p&gt;
&lt;p&gt;Sabe quando você tem uma conta Dropbox pessoal e não quer misturar com a conta Dropbox de trabalho (é, tem muita gente que tem duas), pelo o que eu entendi o recurso company existe para resolver isto. Ao invés de ficar trocando de contas, o company trata isso de forma elegante - em minha humilde opinião, claro.&lt;/p&gt;
&lt;p&gt;Mas isso não é igual a compartilhar uma pasta? Parecido, mas não é igual, afinal você tem mais recursos de controle, como grupos por exemplo, a versão &amp;lsquo;comercial&amp;rsquo; ainda oferece revogação de acesso
e além disto, o espaço &lt;strong&gt;company&lt;/strong&gt; não usa seu espaço de usuário,
aparentemente é um storage separado.&lt;/p&gt;
&lt;h2 id=&#34;7-plataformas-suportadas&#34;&gt;7. Plataformas suportadas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Linux&lt;/li&gt;
&lt;li&gt;Windows&lt;/li&gt;
&lt;li&gt;OSX&lt;/li&gt;
&lt;li&gt;Android&lt;/li&gt;
&lt;li&gt;IOS&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;8-planos&#34;&gt;8. Planos&lt;/h2&gt;
&lt;p&gt;Eles tem dois tipos de planos, o pessoal e o company.&lt;/p&gt;
&lt;h3 id=&#34;81-personal-plans&#34;&gt;8.1 Personal Plans&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Free 15 GB =&amp;gt; Sem custo e pode aumentar conforme indicações.&lt;/li&gt;
&lt;li&gt;Pro 250 GB =&amp;gt; U$ 9.9 dólares por mês ou U$ 99.00 por ano.&lt;/li&gt;
&lt;li&gt;Pro 500 GB =&amp;gt; U$ 14.99 dólares por mês ou U$ 149.00 por ano.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;82-company-plans&#34;&gt;8.2 Company Plans&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;100 GB =&amp;gt; U$ 399.00 por ano&lt;/li&gt;
&lt;li&gt;250 GB =&amp;gt; U$ 699.00 por ano&lt;/li&gt;
&lt;li&gt;500 GB =&amp;gt; U$ 999.00 por ano&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;83-planos-copy-vs-planos-dropbox&#34;&gt;8.3 Planos Copy vs Planos Dropbox&lt;/h3&gt;
&lt;p&gt;Em relação aos planos PRO que são similares ao Personal do COPY&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DROPBOX FREE  =&amp;gt; 2 GB&lt;/li&gt;
&lt;li&gt;DROPBOX 100GB =&amp;gt; U$ 9.99 por mês ou U$ 99 por ano&lt;/li&gt;
&lt;li&gt;DROPBOX 200GB =&amp;gt; U$ 19.99 por mês ou U$ 199 por ano&lt;/li&gt;
&lt;li&gt;DROPBOX 500GB =&amp;gt; U$ 49.99 por mês ou U$ 499 por ano&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O Dropbox tem planos para empresas mas depende da quantidade de usuários, é necessário solicitar um orçamento, contudo, segundo
o site do Dropbox, a partir de U$ 785,00 o uso de disco é ilimitado
mas não deixa claros se os usuários também.&lt;/p&gt;
&lt;h2 id=&#34;9-screenshots&#34;&gt;9. Screenshots&lt;/h2&gt;
&lt;h3 id=&#34;91-web-interface&#34;&gt;9.1 Web Interface&lt;/h3&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_web_interface_folders.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[web interface folders]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_web_interface_sharing.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[web interface sharing]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_web_company.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[web interface company]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_web_planos.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[copy planos]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h3 id=&#34;92-osx-interface&#34;&gt;9.2 OSX Interface&lt;/h3&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_osx_tela1.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[copy osx tela 1]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_osx_tela2.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[copy osx tela 2]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_osx_tela3.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[copy osx tela 3]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_osx_tela4.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[copy osx tela 4]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-05-21/copy_osx_tela5.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[copy osx tela 5]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;10-amarrando-as-pontas&#34;&gt;10. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Ainda é cedo para falar bem ou mal, mas estou gostando, o serviço promete, está estável e funcional, e parece que em breve se tornará viral, e isso será um desafio para a equipe que mantém a infra do serviço.&lt;/p&gt;
&lt;p&gt;Vale lembrar que o serviço é novo, tem pouca gente usando em comparação com o DROPBOX, se saturar de usuários, poderá ficar igualmente lento, vamos aguardar e acompanhar a evolução do COPY.&lt;/p&gt;
&lt;h2 id=&#34;11-referências&#34;&gt;11. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.copy.com&#34;&gt;https://www.copy.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.copy.com/about&#34;&gt;https://www.copy.com/about&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.copy.com/about/pr&#34;&gt;https://www.copy.com/about/pr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.copy.com/developer&#34;&gt;https://www.copy.com/developer&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.copy.com/about/tos&#34;&gt;https://www.copy.com/about/tos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.copy.com/about/dmca&#34;&gt;https://www.copy.com/about/dmca&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Dokuwiki atualizando versão</title>
      <link>https://archives.gutocarvalho.net/post/2013-05-20-dokuwiki-atualizando-versao/</link>
      <pubDate>Mon, 20 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-05-20-dokuwiki-atualizando-versao/</guid>
      <description>&lt;h2 id=&#34;1-dokuwiki&#34;&gt;1. Dokuwiki&lt;/h2&gt;
&lt;p&gt;O dokuwiki é um sistema de blog que não usa banco de dados SQL, leve, simples e rápido, foi a minha escolha para aposentar o velho mediawiki.&lt;/p&gt;
&lt;p&gt;Esse post é uma nota mental para me lembrar dos passos para atualizar o dokuwiki ;)&lt;/p&gt;
&lt;h2 id=&#34;2-atualização-do-dokuwiki&#34;&gt;2. Atualização do dokuwiki&lt;/h2&gt;
&lt;h3 id=&#34;21-backup&#34;&gt;2.1 Backup&lt;/h3&gt;
&lt;p&gt;Faça o backup do seu dokuwiki.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar jcvf dokuwiki-AAAA-MM-DD.tar dokuwiki/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto o backup completo está feito, e como não tem banco SQL, é só isso mesmo, está tudo em disco, arquivos texto.&lt;/p&gt;
&lt;h3 id=&#34;22-download&#34;&gt;2.2 Download&lt;/h3&gt;
&lt;p&gt;Faça o download da versão mais nova.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://www.splitbrain.org/_media/projects/dokuwiki/dokuwiki-2013-05-10.tgz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No momento deste post esta é a versão mais nova.&lt;/p&gt;
&lt;h3 id=&#34;23-atualização&#34;&gt;2.3 Atualização&lt;/h3&gt;
&lt;p&gt;Acesse o diretório do dokuwiki&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd dokuwiki/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Atualize os arquivos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar -xzvf ../dokuwiki-2013-05-10.tgz --strip-components=1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, dokuwiki atualizado, essa foi rápida ;)&lt;/p&gt;
&lt;h3 id=&#34;24-mensagem-de-upgrade&#34;&gt;2.4 Mensagem de upgrade&lt;/h3&gt;
&lt;p&gt;Pode ser que ele continue mostrando que há atualização, mesmo após atualizar, então você tem duas opções, limpar o cache, aguardar 1 dia ou rodar um touch no arquivo doku.php, eu faço sempre a terceira.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;touch doku.php
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E pronto, mensagem a de atualização sumiu.&lt;/p&gt;
&lt;h2 id=&#34;3-referências&#34;&gt;3. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.dokuwiki.org/changes&#34;&gt;https://www.dokuwiki.org/changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.dokuwiki.org/install:upgrade&#34;&gt;https://www.dokuwiki.org/install:upgrade&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.dokuwiki.org/install:unpacking&#34;&gt;https://www.dokuwiki.org/install:unpacking&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>LVM dicas rápidas</title>
      <link>https://archives.gutocarvalho.net/post/2013-05-17-lvm-dicas-rapidas/</link>
      <pubDate>Fri, 17 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-05-17-lvm-dicas-rapidas/</guid>
      <description>&lt;h2 id=&#34;1-lvm&#34;&gt;1. LVM&lt;/h2&gt;
&lt;p&gt;LVM significa &amp;ldquo;Logic Volume Manager&amp;rdquo;, em português &amp;ldquo;Gerenciador de volume lógico&amp;rdquo;, ele gerencia discos e dispositivos de armazenamento em massa. No LVM um volume é o equivalente a uma partição de um disco.&lt;/p&gt;
&lt;h2 id=&#34;11-usos-do-lvm&#34;&gt;1.1 Usos do LVM&lt;/h2&gt;
&lt;p&gt;O LVM é muito utilizado em servidores linux por oferecer uma capacidade de ajuste dinâmico de seus volumes.&lt;/p&gt;
&lt;p&gt;Se você por exemplo que refazer o desenho de partições de um disco, no método tradicional você precisaria fazer backup dos dados, apagar as partições, criar um novo layout de partições, formatar as partições, reinstalar o sistema operacional e depois ainda fazer o restore dos dados, algo chato e demorado.&lt;/p&gt;
&lt;p&gt;Se você utilizar LVM estará administrando seu armazenamento em uma camada de abstração, você trabalhará com volumes físicos (PV), grupos de volumes (VG) e volumes lógicos (LV), guarde esses nomes.&lt;/p&gt;
&lt;p&gt;Quando você cria uma partição do disco destinada a uso via LVM esta partição será um PV (Physical Volume), e fará parte de algum VG (Volume Group), já os LV são &amp;lsquo;fatias&amp;rsquo; de algum VG.&lt;/p&gt;
&lt;p&gt;Um VG pode ser criado com um ou mais PVs e o LVM lhe permite adicionar outros PVs a um VG para aumentar a capacidade de armazenamento quando for necessário.&lt;/p&gt;
&lt;p&gt;Imagine um VG como se fosse um grande dispositivo de armazenamento composto por vários PVs, a capacidade total de armazenamento de um VG é a soma da capacidade dos PVs associados a ele.&lt;/p&gt;
&lt;p&gt;LVs (Logical Volumes) são fatias do seu VG (volume group), imagine que você tem um VG com capacidade de 100 GB, você pode ter 10 LVs de 10GB ou dois LVs de 50GB, isso é configurável, para o sistema operacional linux, um LV equivale a uma partição de um disco, pode ser formatada e montada da mesma forma que uma partição de um disco comum.&lt;/p&gt;
&lt;p&gt;A grande vantagem do LVM é que você pode redimensionar VGs e LVs, aumentando ou diminuindo seu tamanho, e se estiver utilizando um sistema de arquivos que suporte resize, algo como ext3 ou ext4, poderá também aumentar e diminuir o sistema de arquivos sem precisar reconstruir todas as partições e reinstalar seu ambiente.&lt;/p&gt;
&lt;h3 id=&#34;12-vantagens&#34;&gt;1.2 Vantagens&lt;/h3&gt;
&lt;p&gt;Se o seu /var está quase cheio, e se você estiver utilizando LVM, bastará adicionar um novo PV (Physical Volume) ao VG (Volume Group) que possui o LV (Logical Volume) utilizado para o o ponto de montagem /VAR, após aumentar a capacidade do VG, você poderá com poucos comandos - em poucos minutos - aumentar o tamanho do /var sem grandes impactos em seu ambiente.&lt;/p&gt;
&lt;p&gt;Especificamente para aumentar ou diminuir o /var, será necessário parar a máquina, mas dependendo da partição não será preciso.&lt;/p&gt;
&lt;p&gt;Você pode também diminuir um LV que não esteja usando muito espaço para aumentar outro que esteja precisando de espaço, desde que estejam no mesmo VG.&lt;/p&gt;
&lt;p&gt;O LVM torna a administração de partições algo muito flexível.&lt;/p&gt;
&lt;h3 id=&#34;13-desvantagens&#34;&gt;1.3 Desvantagens&lt;/h3&gt;
&lt;p&gt;Um VG é composto por PVs, se um PV quebrar você perde o VG e os LVs, isso pode ser um grande problema, portanto, é importante ter confiança nos discos envolvidos em um ambiente LVM.&lt;/p&gt;
&lt;p&gt;Se possível é interessante utilizar RAID para poder perder um ou mais discos de um LVM sem perder seu VG inteiro.&lt;/p&gt;
&lt;p&gt;Há quem diga também que por ser uma camada a mais em seu ambiente, haverá perda de performance em relação a gravação e leitura em um PV, contudo, acho que isso é imperceptível na grande maioria dos ambientes.&lt;/p&gt;
&lt;p&gt;Normalmente o LVM versão 2 já vem instalado na maioria das distribuições linux, em Debian e CentOS está disponível desde a instalação.&lt;/p&gt;
&lt;h2 id=&#34;2-mão-na-massa&#34;&gt;2. Mão na massa&lt;/h2&gt;
&lt;p&gt;Vamos aprender a trabalhar com LVM, no estilo dicas rápidas.&lt;/p&gt;
&lt;h3 id=&#34;21-criando-partição-lvm&#34;&gt;2.1 Criando partição LVM&lt;/h3&gt;
&lt;p&gt;Vamos particionar o disco sdb como exemplo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fdisk /dev/sdb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse a ajuda&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): m
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Command action
   a   toggle a bootable flag
   b   edit bsd disklabel
   c   toggle the dos compatibility flag
   d   delete a partition
   l   list known partition types
   m   print this menu
   n   add a new partition
   o   create a new empty DOS partition table
   p   print the partition table
   q   quit without saving changes
   s   create a new empty Sun disklabel
   t   change a partition&#39;s system id
   u   change display/entry units
   v   verify the partition table
   w   write table to disk and exit
   x   extra functionality (experts only)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Vamos criar uma nova partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): n
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Escolha o tipo de partição&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Partition type:
   p   primary (0 primary, 0 extended, 4 free)
   e   extended

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Eu escolhi primária, as quatro primeiras partições de um disco podem ser primárias, se você pretende ter mais de quatro partições, crie 3 primárias e uma extendida.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Select (default p): p
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Esta será a primeira partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Partition number (1-4, default 1): 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora o fdisk me pergunta em qual setor essa partição deve começar e depois ele também pergunta o tamanho, eu vou dar ENTER e depois ENTER para usar todo o disco a partir do primeiro setor.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;First sector (2048-125829119, default 2048):
Using default value 2048
Last sector, +sectors or +size{K,M,G} (2048-125829119, default 125829119):
Using default value 125829119
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vou imprimir as partições&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): p
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Disk /dev/sdb: 64.4 GB, 64424509440 bytes
255 heads, 63 sectors/track, 7832 cylinders, total 125829120 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xe61fc21b

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048   125829119    62913536   83  Linux
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que uma partição foi criada, agora vamos definir o tipo da partição, veja os tipos disponíveis&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;command (m for help): l
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris
 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec (FAT-
 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec (FAT-
 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec (FAT-
 4  FAT16 &amp;lt;32M      40  Venix 80286     85  Linux extended  c7  Syrinx
 5  Extended        41  PPC PReP Boot   86  NTFS volume set da  Non-FS data
 6  FAT16           42  SFS             87  NTFS volume set db  CP/M / CTOS / .
 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility
 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       df  BootIt
 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access
 a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O
 b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor
 c  W95 FAT32 (LBA) 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs
 e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT
 f  W95 Ext&#39;d (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/
10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b
11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor
12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor
14  Hidden FAT16 &amp;lt;3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary
16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS
17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware aMKCORE
18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto
1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep
1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT
1e  Hidden W95 FAT1 80  Old Minix
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos definir o tipo da partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): t
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Escolha LVM (tipo 8e)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Selected partition 1
Hex code (type L to list codes): 8e
Changed system type of partition 1 to 8e (Linux LVM)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos imprimir novamente a tabela de partições do disco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;command (m for help): p
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Disk /dev/sdb: 64.4 GB, 64424509440 bytes
255 heads, 63 sectors/track, 7832 cylinders, total 125829120 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xe61fc21b

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048   125829119    62913536   8e  Linux LVM
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Ótimo, tudo certo, agora vamos gravar essa configuração no disco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): w
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;The partition table has been altered!

Calling ioctl() to re-read partition table.
Syncing disks.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora já podemos sair do fdisk&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Command (m for help): q
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, para ter certeza que está tudo certo rode o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fdisk -l /dev/sdb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Disk /dev/sdb: 64.4 GB, 64424509440 bytes
128 heads, 39 sectors/track, 25206 cylinders, total 125829120 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xe61fc21b

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048   125829119    62913536   8e  Linux LVM
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que a partição sdb1 foi criada corretamente&lt;/p&gt;
&lt;h3 id=&#34;22-criando-pv&#34;&gt;2.2 Criando PV&lt;/h3&gt;
&lt;p&gt;Agora que já temos uma partição LVM, podemos criar um volume físico (PV)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pvcreate /dev/sdb1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos checar os PVs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pvscan
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja detalhes dos PVs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pvdisplay
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;quot;/dev/sdb1&amp;quot; is a new physical volume of &amp;quot;60.00 GiB&amp;quot;
  --- NEW Physical volume ---
  PV Name               /dev/sdb1
  VG Name
  PV Size               60.00 GiB
  Allocatable           NO
  PE Size               0
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               KtmCte-RHtK-XgTi-rLnd-qGL0-0OZe-8KHm4b
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Beleza, agora podemos criar um VG&lt;/p&gt;
&lt;h3 id=&#34;23-criando-vg&#34;&gt;2.3 Criando VG&lt;/h3&gt;
&lt;p&gt;Depois de criar os volumes físicos, podemos criar os grupos de volume&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vgcreate fileserver /dev/sdb1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique os VGs existentes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vgscan
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja detalhes dos VGs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vgdisplay
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;--- Volume group ---
  VG Name               fileserver
  System ID
  Format                lvm2
  Metadata Areas        1
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                1
  Act PV                1
  VG Size               60.00 GiB
  PE Size               4.00 MiB
  Total PE              15359
  Alloc PE / Size       0 / 0
  Free  PE / Size       15359 / 60.00 GiB
  VG UUID               JYkvTQ-hZ3R-Mib0-tIzm-CXmr-7NWH-UPu8UT
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;24-adicionando-pv-a-vg&#34;&gt;2.4 Adicionando PV a VG&lt;/h3&gt;
&lt;p&gt;Se você quer expandir o seu VG adicionando outra partição use o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vgextend fileserver /dev/sdc1
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;25-criando-lv&#34;&gt;2.5 Criando LV&lt;/h3&gt;
&lt;p&gt;Agora que temos um grupo de volumes, vamos criar um volume lógico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lvcreate --name public --size 40G fileserver
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verique os LVs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lvscan
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja detalhes dos LVs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lvdisplay
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  --- Logical volume ---
  LV Path                /dev/fileserver/fileserver-public
  LV Name                public
  VG Name                fileserver
  LV UUID                Qn8u3P-Olgx-whQE-eLPn-OiaH-eguo-jfM8Vg
  LV Write Access        read/write
  LV Creation host, time debian64, 2013-05-16 11:51:59 -0300
  LV Status              available
  # open                 1
  LV Size                40.00 GiB
  Current LE             39424
  Segments               2
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           254:2
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;26-formatando-a-partição&#34;&gt;2.6 Formatando a partição&lt;/h3&gt;
&lt;p&gt;Depois de criar o LV já podemos formatá-lo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkfs.ext4 /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;27-montando-a-partição&#34;&gt;2.7 Montando a partição&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;mkdir /srv/public
mount /dev/mapper/fileserver-public /srv/public   
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;28-configurando-fstab&#34;&gt;2.8 Configurando fstab&lt;/h3&gt;
&lt;p&gt;Verifique o identificador único das partições&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;blkid /dev/sdb1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/dev/mapper/fileserver-public: UUID=&amp;quot;811782cc-ddc3-43ca-8ba8-f67efa80f229&amp;quot; TYPE=&amp;quot;ext4&amp;quot;     
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No fstab insira a seguinte linha&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;UUID=811782cc-ddc3-43ca-8ba8-f67efa80f229 /srv/public               ext4    defaults 0       1
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;29-aumentando-lv-ext4&#34;&gt;2.9 Aumentando LV (ext4)&lt;/h3&gt;
&lt;p&gt;Desmonte a partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;umount /srv/public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos estender o volume lógico adicionando mais 114 GB ao LV&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lvextend -L +114GB /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Extending logical volume fileserver to 154.00 GiB
Logical volume mirrordata successfully resized 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;E depois vamos passar o e2fsck para o verificar o LV&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;e2fsck -f /dev/mapper/fileserver-public 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos aumentar a partição ext4&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;resize2fs -p /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rode novamente o e2fsck para checar a partição que fora estendida&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;e2fsck -f /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Monte a nova partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mount /srv/public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, partição estendida.&lt;/p&gt;
&lt;h3 id=&#34;210-diminuindo-lv-ext4&#34;&gt;2.10 Diminuindo LV (ext4)&lt;/h3&gt;
&lt;p&gt;Desmonte o filesystem&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;umount /srv/public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Antes de prosseguir verifique a partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;e2fsck -f /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Diminua o LV em 40GB&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;resize2fs -p /dev/mapper/fileserver-public 40G
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Diminua a partição ext4 em 40 gigas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lvreduce -L 40G /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique a partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;e2fsck -f /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rode mais uma vez o o resize para se certificar que partição vai ficar do mesmo tamanho do LV&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;resize2fs -p /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verifique a partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;e2fsck -f /dev/mapper/fileserver-public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Monte a partição&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mount /srv/public
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto.&lt;/p&gt;
&lt;h2 id=&#34;3-referências&#34;&gt;3. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.tldp.org/HOWTO/LVM-HOWTO/&#34;&gt;http://www.tldp.org/HOWTO/LVM-HOWTO/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://sourceware.org/lvm2/&#34;&gt;http://sourceware.org/lvm2/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux)&#34;&gt;http://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux)&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://pubmem.wordpress.com/2010/09/16/how-to-resize-lvm-logical-volumes-with-ext4-as-filesystem/&#34;&gt;http://pubmem.wordpress.com/2010/09/16/how-to-resize-lvm-logical-volumes-with-ext4-as-filesystem/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://www.howtoforge.com/linux_lvm_p2&#34;&gt;http://www.howtoforge.com/linux_lvm_p2&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress Table of Contents</title>
      <link>https://archives.gutocarvalho.net/post/2013-05-17-octopress-table-of-contents/</link>
      <pubDate>Fri, 17 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-05-17-octopress-table-of-contents/</guid>
      <description>&lt;p&gt;Algumas pessoas tem me perguntado como eu criei a &amp;ldquo;Table of contents&amp;rdquo; em meus posts, eu simplesmente segui as orientações deste &lt;a href=&#34;http://brizzled.clapper.org/blog/2012/02/04/generating-a-table-of-contents-in-octopress/&#34;&gt;post&lt;/a&gt;, em breve devo traduzir isto pra facilitar - aqui mesmo.&lt;/p&gt;
&lt;p&gt;Este post é uma nota mental :)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress feeds por categoria</title>
      <link>https://archives.gutocarvalho.net/post/2013-05-15-octopress-feeds-por-categoria/</link>
      <pubDate>Wed, 15 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-05-15-octopress-feeds-por-categoria/</guid>
      <description>&lt;p&gt;Hoje eu precisei aprender a habilitar feeds xml por categoria em meu octopress, esse procedimento é simples, o recurso é nativo, contudo, vem desabilitado.&lt;/p&gt;
&lt;p&gt;Primeiro acesse o feed principal e veja que o arquivo chama-se atom.xml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://gutocarvalho/octopress/atom.xml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora ative o feed de categorias no arquivo _config.yml&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;category_feeds: true
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E depois rode um generate e deploy&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake generate &amp;amp;&amp;amp; rake deploy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A partir daí basta entrar na página de uma categoria&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://gutocarvalho.net/octopress/categories/puppet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Neste mesmo diretório teremos um arquivo chamado atom.xml, acesse o arquivo para visualizar o feed XML.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://gutocarvalho.net/octopress/categories/puppet/atom.xml
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Simples, rápido e sem gambiarras.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando Zabbix 2 no Debian com pacotes oficiais Zabbix</title>
      <link>https://archives.gutocarvalho.net/post/2013-05-08-instalando-zabbix-2-no-debian-com-pacotes-oficiais-zabbix/</link>
      <pubDate>Wed, 08 May 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-05-08-instalando-zabbix-2-no-debian-com-pacotes-oficiais-zabbix/</guid>
      <description>&lt;p&gt;Neste &lt;a href=&#34;http://gutocarvalho.net/octopress/2013/01/14/instalando-zabbix-2x-em-debian-squeeze&#34;&gt;post&lt;/a&gt; eu já mostrei como instalar o zabbix 2 compilando, agora
vou mostrar como instalar o zabbix 2 utilizando os pacotes oficiais da zabbix.org para debian.&lt;/p&gt;
&lt;h2 id=&#34;1-instalando-chave&#34;&gt;1. Instalando chave&lt;/h2&gt;
&lt;h3 id=&#34;11-adicionando-chave-manualmente&#34;&gt;1.1 Adicionando chave manualmente&lt;/h3&gt;
&lt;p&gt;Faça o download da chave e adicionei ao seu chaveiro.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://repo.zabbix.com/zabbix-official-repo.key -O - | apt-key add -
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;12-adicionando-chave-via-pacote&#34;&gt;1.2 Adicionando chave via pacote&lt;/h3&gt;
&lt;p&gt;Faça o download do pacote release&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://repo.zabbix.com/zabbix/2.0/debian/pool/main/z/zabbix-release/zabbix-release_2.0-1squeeze_all.deb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o pacote&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dpkg -i zabbix-release_2.0-1squeeze_all.deb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Esse pacote além de instalar a chave, já adiciona o repositório, portato se optar por ele, pule o passo 2.&lt;/p&gt;
&lt;h2 id=&#34;2-configurando-repositório&#34;&gt;2. Configurando repositório&lt;/h2&gt;
&lt;p&gt;Adicione a linha abaixo ao sources.list do seu squeeze&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;deb http://repo.zabbix.com/zabbix/2.0/debian squeeze main
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Atualize os índices de pacotes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude update
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, já é possível encontrar os pacotes em uma pesquisa&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude search zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;p   zabbix-agent                                      - network monitoring solution - agent
p   zabbix-frontend-php                               - network monitoring solution - PHP front-end
p   zabbix-get                                        - network monitoring solution - get
p   zabbix-java-gateway                               - network monitoring solution - java-gateway
p   zabbix-proxy-mysql                                - network monitoring solution - proxy (using MySQL)
p   zabbix-proxy-pgsql                                - network monitoring solution - proxy (using PostgreSQL)
p   zabbix-proxy-sqlite3                              - network monitoring solution - proxy (using SQLite3)
p   zabbix-release                                    - Zabbix official repository configuration
p   zabbix-sender                                     - network monitoring solution - sender
p   zabbix-server-mysql                               - network monitoring solution - server (using MySQL)
p   zabbix-server-pgsql                               - network monitoring solution - server (using PostgreSQL)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;E podemos verificar a versão&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude show zabbix-agent|grep ^Version
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Version: 1:2.0.6-1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pacotes na última versão&lt;/p&gt;
&lt;h2 id=&#34;3-instalando-o-zabbix-server&#34;&gt;3. Instalando o Zabbix Server&lt;/h2&gt;
&lt;p&gt;Acompanhe duas formas de instalar o zabbix-server&lt;/p&gt;
&lt;h3 id=&#34;31-zabbix-server-com-backend-pgsql&#34;&gt;3.1 Zabbix Server com backend pgsql&lt;/h3&gt;
&lt;p&gt;Instalando o zabbix server com banco de dados postgresql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-server-pgsql
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;31-zabbix-server-com-backend-mysql&#34;&gt;3.1 Zabbix Server com Backend mysql&lt;/h3&gt;
&lt;p&gt;Instalando o zabbix server com banco de dados mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-server-mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-instalando-zabbix-agent&#34;&gt;4. Instalando Zabbix Agent&lt;/h2&gt;
&lt;p&gt;Instalando o agente de monitoramento do zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-agent
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-instalando-zabbix-java-gateway&#34;&gt;5. Instalando Zabbix Java Gateway&lt;/h2&gt;
&lt;p&gt;Instalando o gateway de monitoramento de aplicações JAVA e máquina virtual java.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-java-gateway
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;6-instalando-zabbix-proxy&#34;&gt;6. Instalando Zabbix Proxy&lt;/h2&gt;
&lt;p&gt;Acompanhe 3 formas de instalar o Zabbix Proxy.&lt;/p&gt;
&lt;h2 id=&#34;61-proxy-com-backend-mysql&#34;&gt;6.1 Proxy com backend mysql&lt;/h2&gt;
&lt;p&gt;Instalando zabbix proxy com banco de dados mysql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-proxy-mysql
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;62-proxy-com-backend-pgsql&#34;&gt;6.2 Proxy com backend pgsql&lt;/h2&gt;
&lt;p&gt;Instalando zabbix proxy com banco de dados pgsql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-proxy-pgsql
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;63-proxy-com-backend-sqlite3&#34;&gt;6.3 Proxy com backend sqlite3&lt;/h2&gt;
&lt;p&gt;Instalando zabbix proxy com banco de dados sqlite3&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-proxy-sqlite3
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;7instalando-frontend-php&#34;&gt;7.Instalando Frontend PHP&lt;/h2&gt;
&lt;p&gt;Instalando frontend web para configuração e visualização de dados de monitoramento&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-frontend-php
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;8-instalando-get--sender&#34;&gt;8. Instalando Get &amp;amp; Sender&lt;/h2&gt;
&lt;p&gt;Instalando ferramentas de consulta ao agente (get) e envio de dados (sender) ao servidor.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install zabbix-get
aptitude install zabbix-sender
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Utilizar pacotes facilita e muito a administração de seu ambiente, principalmente
em caso de atualização, usar os pacotes mantidos pela zabbix.org é certeza de ter
sempre as últimas versões do Zabbix empacotadas.&lt;/p&gt;
&lt;p&gt;Se precisa de agilidade use os pacotes/binários, não pense duas vezes.&lt;/p&gt;
&lt;p&gt;[s]
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress com aside de comentários recentes</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-25-octopress-disqus-recent-comment-aside/</link>
      <pubDate>Thu, 25 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-25-octopress-disqus-recent-comment-aside/</guid>
      <description>&lt;p&gt;Pesquisando sobre aside (widget) para o disqus no octopress, encontrei um post no site &lt;a href=&#34;http://arshad.github.io/blog/2012/05/04/recent-comments-in-octopress/&#34;&gt;arshad&lt;/a&gt; que explica como fazer isto em poucos passos, vamos para a explicação.&lt;/p&gt;
&lt;h2 id=&#34;1-criando-aside&#34;&gt;1. Criando aside&lt;/h2&gt;
&lt;p&gt;Vamos criar um arquivo chamado &lt;strong&gt;recent_comment.html&lt;/strong&gt; dentro de /caminho/para/octopress/source/_includes/custom/asides&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;touch /path/to/octopress/source/_includes/custom/asides/recent_comment.html
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;2-adicionando-código-ao-arquivo&#34;&gt;2. Adicionando código ao arquivo&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;section&amp;gt;
  &amp;lt;h1&amp;gt;Recent Comments&amp;lt;/h1&amp;gt;
  &amp;lt;div id=&amp;quot;dsq-recentcomments&amp;quot; class=&amp;quot;dsq-widget&amp;quot;&amp;gt;&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://disqus.com/forums/{{ site.disqus_short_name }}/recent_comments_widget.js?hide_avatars=1;num_items=4&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/section&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;21-sobre-os-parâmetros-disponíveis&#34;&gt;2.1 Sobre os parâmetros disponíveis&lt;/h3&gt;
&lt;p&gt;Para esconder avatar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hide_avatars=0 (values : 0 show, 1 hide)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Quantidade de comentários a serem mostrados&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;num_items=4
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tamanho máximo de caracteres por comentários&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;xcerpt_length=140
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;3-adicione-o-aside-ao-_configyml&#34;&gt;3. Adicione o aside ao _config.yml&lt;/h2&gt;
&lt;p&gt;Procure o parâmetro default asides e insira após recent_posts.html&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;custom/asides/recent_comment.html
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após o ajuste a configuração do parâmetro ficará desse jeito&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;default_asides: [custom/asides/links.html, asides/recent_posts.html, custom/asides/recent_comment.html, asides/github.html, asides/twitter.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4-faça-o-rebuild-do-seu-site&#34;&gt;4. Faça o rebuild do seu site&lt;/h2&gt;
&lt;p&gt;Agora basta fazer o rebuild&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake generate &amp;amp;&amp;amp; rake deploy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após finalizar o comando, você verá o aside funcionando, simples assim.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>FLISOL 2013 BR/DF</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-24-flisol-2013-df/</link>
      <pubDate>Wed, 24 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-24-flisol-2013-df/</guid>
      <description>&lt;h2 id=&#34;1-o-que-é-o-flisol&#34;&gt;1. O que é o FLISOL?&lt;/h2&gt;
&lt;figure class=&#34;right&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/logo_flisol.png&#34;/&gt;
&lt;/figure&gt;

&lt;p&gt;O Festival Latino Americano de Instalação de Software Livre – FLISol é um evento internacional, realizado anualmente, e que ocorre de forma simultânea em diversas cidades da América Latina. O Flisol é um evento descentralizado, onde diversas comunidades organizam e realizam seu festival, de forma voluntária, tendo como principal objetivo promover o uso de software livre, apresentando sua filosofia, alcance, avanços e desenvolvimento ao público em geral.&lt;/p&gt;
&lt;p&gt;O Flisol acontece, historicamente, no 4º sábado de abril (em 2006 foi no 25 de março; em 2007, 28 de abril; 2008, 26 de abril; 2009 e 2010, no dia 24 de abril; 2011, no dia 9 de abril; 2012, no dia 28 de abril). O Flisol 2013 está marcado para o dia 27 de abril.&lt;/p&gt;
&lt;p&gt;O evento é gratuito e aberto a todo o público: curiosos, interessados e amantes do Software Livre. Nesse dia os voluntários propõe a instalação de Software Livre, como distribuições de Gnu/Linux, sistemas BSD, e aplicativos livres para Windows em geral. Alguns eventos também contam com palestras, oficinas, sala de degustação e gravações de mídias (live-CD/DVD e/ou pendrives).&lt;/p&gt;
&lt;h3 id=&#34;11-flisol-df&#34;&gt;1.1. FLISOL-DF&lt;/h3&gt;
&lt;p&gt;A cada ano a organização do FLISOL no Distrito Federal escolhe um local diferente para realização do evento, neste ano o evento será no IESB OESTE – Ceilândia Norte, QNN 31 – Áreas Especiais B/C/D/E, Ceilândia – DF.&lt;/p&gt;
&lt;p&gt;Mais detalhes no site &lt;a href=&#34;http://www.flisoldf.blog.br&#34;&gt;http://www.flisoldf.blog.br&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;12-lista-de-atividades&#34;&gt;1.2. Lista de atividades&lt;/h3&gt;
&lt;p&gt;Acesse a &lt;a href=&#34;http://sistema.flisoldf.blog.br/public/atividades&#34;&gt;lista de atividades&lt;/a&gt; do evento e faça sua inscrição nas palestras e oficinas em que deseje participar.&lt;/p&gt;
&lt;h2 id=&#34;2-minhas-atividades-no-flisol-df&#34;&gt;2. Minhas atividades no FLISOL-DF&lt;/h2&gt;
&lt;p&gt;Eu vou apresentar quatro trabalhos no FLISOL deste ano, veja os detalhes a seguir.&lt;/p&gt;
&lt;h3 id=&#34;21-monitoramento-avançado-com-zabbix-20&#34;&gt;2.1. Monitoramento avançado com Zabbix 2.0&lt;/h3&gt;
&lt;p&gt;Horário: 11:00hs&lt;/p&gt;
&lt;p&gt;Sala: Espaço Ubuntu - Sala BA11 - Bloco B&lt;/p&gt;
&lt;p&gt;A palestra tem o objetivo de apresentar a ferramenta de monitoração Zabbix e os seus principais recursos na versão 2.0. A atividade abordará conceitos de monitoramento, fará uma introducão ao zabbix e apresentará os seus recursos comuns. Em um segundo momento demonstrará os novos recursos do zabbix 2.0 como: zabbix distribuído (proxy/node), zabbix monitorando aplicações java com JMX Gateway e tuning de Zabbix para grandes ambientes.&lt;/p&gt;
&lt;h3 id=&#34;22-oficina-de-instalação-de-zabbix-20&#34;&gt;2.2. Oficina de instalação de Zabbix 2.0&lt;/h3&gt;
&lt;p&gt;Horário: 14:00hs&lt;/p&gt;
&lt;p&gt;Sala: Espaço Mandriva - Sala BA5 - Bloco B&lt;/p&gt;
&lt;p&gt;Oficina de instalação do Zabbix Server, Zabbix Frontend, Zabbix Agent, Zabbix Proxy e JMX Gateway.&lt;/p&gt;
&lt;h2 id=&#34;23-infraestrutura-ágil&#34;&gt;2.3. Infraestrutura ágil&lt;/h2&gt;
&lt;p&gt;Horário: 15:00hs&lt;/p&gt;
&lt;p&gt;Sala: Espaço Fedora - Sala BA6 - Bloco B&lt;/p&gt;
&lt;p&gt;Apresentar o conceito de gerência de configurações, orquestração e provisionamento utilizando as ferramentas Puppet e Mcollective. Demonstrar que com o uso destas tecnologias o administrador de sistemas terá condições de administrar centenas de servidores de forma descomplicada, centraliza e ágil. Dentre as principais vantagens no uso de gerência de configurações estão: Diminuição de custos, Diminuição de incidentes, Padronização do ambiente, Diminui o tempo gasto com mudanças, Controle e acompanhamento do ciclo de vida do parque de servidores.&lt;/p&gt;
&lt;h2 id=&#34;24-o-que-é-devops-afinal&#34;&gt;2.4. O que é DevOps afinal?&lt;/h2&gt;
&lt;p&gt;Horário: 16:00hs&lt;/p&gt;
&lt;p&gt;Sala: Espaço Puppy - Sala AA1 - Bloco A&lt;/p&gt;
&lt;p&gt;O objetivo é esclarecer de forma objetiva o que significa DevOps, mostrar como esse movimento se iniciou, apresentar suas principais características e indicar um caminho para que se consiga absorver e internalizar essa cultura no ambiente corporativo. DevOps é essencialmente uma cultura que busca entregar sistemas melhores, com menor custo, fazendo isto de forma mais rápida e com menor risco. Dentro de DevOps trabalhamos intensamente automação, principalmente automação de infraestrutura com gerência de configurações, orquestração e provisionamento, falaremos muito de infraestrutura como código.&lt;/p&gt;
&lt;p&gt;Nos vemos no FLISOL.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Melhores Práticas</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-22-puppet-melhores-praticas/</link>
      <pubDate>Mon, 22 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-22-puppet-melhores-praticas/</guid>
      <description>&lt;h2 id=&#34;1-melhores-práticas&#34;&gt;1. Melhores Práticas&lt;/h2&gt;
&lt;p&gt;Neste post vou agrupar algumas dicas aprendidas no dia-a-dia em produção, são dicas que me ajudaram, espero que lhe seja útil também.&lt;/p&gt;
&lt;h2 id=&#34;2-organizando-o-sitepp&#34;&gt;2. Organizando o site.pp&lt;/h2&gt;
&lt;p&gt;Evite deixar o arquivo site.pp lotado de código, use o recurso &lt;strong&gt;import&lt;/strong&gt;, separe as configurações em arquivos para ficar mais organizado.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetmanifestssitepp&#34;&gt;/etc/puppet/manifests/site.pp&lt;/h1&gt;
&lt;h1 id=&#34;importando-manifests-em-diretórios&#34;&gt;importando manifests em diretórios&lt;/h1&gt;
&lt;p&gt;import &amp;ldquo;nodes/&lt;em&gt;.pp&amp;rdquo;      # importando manifest com declaração de nodes
import &amp;ldquo;classes/&lt;/em&gt;.pp&amp;rdquo;    # importando classes simples&lt;/p&gt;
&lt;h1 id=&#34;importando-manifests&#34;&gt;importando manifests&lt;/h1&gt;
&lt;p&gt;import &amp;ldquo;filebucket.pp&amp;rdquo;   # importando configurações do filebucket
import &amp;ldquo;providers.pp&amp;rdquo;    # importando configurações globais de providers
import &amp;ldquo;globals.pp&amp;rdquo;      # importando configuraçoes globais variadas
import &amp;ldquo;extdata.pp&amp;rdquo;      # importando configurações de extlookup&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Sempre que houver alguma alteração em um manifest importado no site.pp, será necessário reiniciar o puppetmaster ou apache (se estiver usando passenger).&lt;/p&gt;
&lt;h3 id=&#34;11-arquivo-filebucketpp&#34;&gt;1.1 Arquivo filebucket.pp:&lt;/h3&gt;
&lt;p&gt;Neste arquivo eu normalmente insiro configurações do filebucket.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;define-the-bucket&#34;&gt;Define the bucket&lt;/h1&gt;
&lt;p&gt;filebucket { &amp;lsquo;main&amp;rsquo;:
server =&amp;gt; puppet,
path   =&amp;gt; false,&lt;/p&gt;
&lt;h1 id=&#34;due-to-a-known-issue-path-must-be-set-to-false-for-remote-filebuckets&#34;&gt;Due to a known issue, path must be set to false for remote filebuckets.&lt;/h1&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;h1 id=&#34;specify-it-as-the-default-target&#34;&gt;Specify it as the default target&lt;/h1&gt;
&lt;p&gt;File { backup =&amp;gt; main }
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;12-arquivo-providerspp&#34;&gt;1.2 Arquivo providers.pp:&lt;/h3&gt;
&lt;p&gt;Neste arquivo normalmente insiro configurações acerca de providers.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
case $operatingsystem {
&amp;lsquo;Debian&amp;rsquo;: {
Package { provider =&amp;gt; &amp;lsquo;aptitude&amp;rsquo; }
}
&amp;lsquo;RedHat&amp;rsquo;: {
case $operatingsystemrelease {
&amp;lsquo;4&amp;rsquo;    : {
Package { provider =&amp;gt; &amp;lsquo;up2date&amp;rsquo; }
}
}
}
}
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;13-arquivo-extdatapp&#34;&gt;1.3 Arquivo extdata.pp:&lt;/h3&gt;
&lt;p&gt;Neste arquivo determino o escopo da busca para external data.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$extlookup_datadir = &amp;ldquo;/etc/puppet/manifests/extdata&amp;rdquo;
$extlookup_precedence = [&amp;ldquo;host/%{fqdn}&amp;rdquo;, &amp;ldquo;host/%{hostname}&amp;rdquo;, &amp;ldquo;domain/%{domain}&amp;rdquo;, &amp;ldquo;env/%{environment}&amp;rdquo;, &amp;ldquo;common&amp;rdquo;]
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Apesar do recurso extlookup não ser muito utilizado depois da criação do HIERA,
ainda tenho módulos que utilizam esse tipo de configuração.&lt;/p&gt;
&lt;h3 id=&#34;14-arquivo-globalspp&#34;&gt;1.4 Arquivo globals.pp:&lt;/h3&gt;
&lt;p&gt;Neste arquivo coloco configurações globais, normalmente variáveis
que possam ser de interesse de vários módulos.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$dnssearch = [ &amp;lsquo;dominio&amp;rsquo;, &amp;lsquo;dominio.com.br&amp;rsquo;, ]
$nameservers = [ &amp;lsquo;172.16.1.1&amp;rsquo;, ]
$zabbixserver = &amp;lsquo;192.168.20.134&amp;rsquo;
$baculaserver = &amp;lsquo;192.168.20.135&amp;rsquo;
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Lembre-se de declarar corretamente as variáveis de topo de escopo, veja o exemplo abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$::dnsseearch
$::nameservers
$::zabbixserver
$::baculaserver
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;15-diretório-classes&#34;&gt;1.5 Diretório classes&lt;/h3&gt;
&lt;p&gt;Neste diretório costumo colocar classes simples, normalmente classes organizacionais que contém outras classes, ou mesmo classes &lt;strong&gt;base&lt;/strong&gt; como a classe linux-server que é carregada em todos os nodes linux sem exceção.&lt;/p&gt;
&lt;p&gt;Exemplo de manifest classes/linux-server.pp (classe organizacional):&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class linux-server {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    include hosts             # configura arquivo hosts
    include mailaliases       # configura aliases de correio local
    include utils             # instala pacotes dos sysadmins
    include aptrepos          # configura repositórios apt
    include rcfiles           # empurra screenrc e bashrc do root
    include vimeditor         # instala e configura vim e vimrc
    include ntp               # instala e cofigura ntp server
    include locale            # configura locale
    include timezone          # configure timezone
    include users             # cria usuários dos sysadmins
    include suoders           # configura sudoers
    include ssh:server        # instala e configura ssh server
    include snmp::server      # instala e configura snmp server
    include zabbix::agent     # instala e configura zabbix agent
    include puppet::agent     # configura puppet agent
    include bacula::agent     # instala e configura bacula agent
    include postfix::local    # instala e configura postfix local
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Exemplo de manifest classes/utils.pp (classe simples):&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class utils {&lt;/p&gt;
&lt;h1 id=&#34;declarando-que-o-tzdata-tem-que-estar-sempre-em-sua-ultima-versao&#34;&gt;declarando que o tzdata tem que estar sempre em sua ultima versao&lt;/h1&gt;
&lt;p&gt;package { &amp;lsquo;tzdata&amp;rsquo;: ensure =&amp;gt; latest }&lt;/p&gt;
&lt;h1 id=&#34;declarando-que-os-seguintes-pacotes-devem-estar-presentes-sysadmin-packages&#34;&gt;declarando que os seguintes pacotes devem estar presentes (sysadmin packages)&lt;/h1&gt;
&lt;p&gt;package { [ &amp;lsquo;screen&amp;rsquo;,
&amp;lsquo;lynx&amp;rsquo;,
&amp;lsquo;elinks&amp;rsquo;,
&amp;lsquo;rsync&amp;rsquo;,
&amp;lsquo;telnet&amp;rsquo;,
&amp;lsquo;ftp&amp;rsquo;,
&amp;lsquo;wget&amp;rsquo;,
&amp;lsquo;bzip2&amp;rsquo;,
&amp;lsquo;unzip&amp;rsquo;,
&amp;lsquo;traceroute&amp;rsquo;,
&amp;lsquo;tcpdump&amp;rsquo;,
&amp;lsquo;iptraf&amp;rsquo;,
&amp;lsquo;ccze&amp;rsquo;,
&amp;lsquo;htop&amp;rsquo;,
&amp;lsquo;less&amp;rsquo;,
&amp;lsquo;dnsutils&amp;rsquo;,
&amp;lsquo;nmap&amp;rsquo;, ]:
ensure  =&amp;gt; installed,
}
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Considero uma classe simples algo que tem um manifest e no máximo um arquivo estático ou dinâmico (template), qualquer coisa maior recomendo construir um módulo, fica mais organizado.&lt;/p&gt;
&lt;p&gt;Minhas classes simples utilizam os diretórios abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/puppet/files      # arquivos estáticos
/etc/puppet/templates  # arquivos dinâmicos
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;16-diretório-nodes&#34;&gt;1.6 Diretório nodes&lt;/h3&gt;
&lt;p&gt;No diretório nodes costumo criar manifests separados para agrupar declarações de nodes em um mesmo contexto, fica mais organizado,
fácil de entender e administrar.&lt;/p&gt;
&lt;p&gt;Exemplo de manifest nodes/apache.pp:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
node &amp;ldquo;apache01.dominio&amp;rdquo; {
include apache2
include php5
include aplicacao
}
node &amp;ldquo;apache02.dominio&amp;rdquo; {
include apache2
include php5
include aplicacao
}
node &amp;ldquo;apache03.dominio&amp;rdquo; {
include apache2
include php5
include aplicacao
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Exemplo de manifest nodes/haproxy.pp:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
node &amp;ldquo;haproxy01.dominio&amp;rdquo; {
include haproxy
include haproxy::httpmode::phppool
include haproxy::httmode::phppool
}
node &amp;ldquo;haproxy02.dominio&amp;rdquo; {
include haproxy
include haproxy::tcpmode::imap
include haproxy::tcpmode::smtp
}
{% endcodeblock %}&lt;/p&gt;
&lt;h2 id=&#34;2-puppetconf&#34;&gt;2 Puppet.conf&lt;/h2&gt;
&lt;p&gt;Algumas configurações importantes no puppet.conf dos agentes&lt;/p&gt;
&lt;h3 id=&#34;21-runinterval&#34;&gt;2.1 runinterval&lt;/h3&gt;
&lt;p&gt;O parâmetro &lt;strong&gt;runinterval&lt;/strong&gt; define o intervalo entre as checagens que o agente faz ao servidor puppet, neste exemplo ele fará a checagem a cada 3600 segundos ou 60 minutos.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;runinterval=3600
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;22-splay--splaylimit&#34;&gt;2.2 splay &amp;amp; splaylimit&lt;/h3&gt;
&lt;p&gt;Podemos utilizar o splay para evitar que todos os agentes solicitem o catálogo ao mesmo tempo.&lt;/p&gt;
&lt;p&gt;Com esse recurso ativo, o agente vai entrar em &lt;strong&gt;sleep&lt;/strong&gt; quando chegar no momento de consultar o servidor. O agente será acionado dentro da
janela &lt;strong&gt;splaylimit&lt;/strong&gt; de forma &lt;strong&gt;randômica&lt;/strong&gt;, isto é fundamental para aliviar
a carga no puppetmaster em um cenário com muitos nodes.&lt;/p&gt;
&lt;p&gt;Veja um exemplo de configuração de splay:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;splay=true
splaylimit=1800
runinterval=3600
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No exemplo acima o &lt;strong&gt;splay&lt;/strong&gt; está ligado e o limit está definido para 1800, logo ele vai trabalhar em uma janela de 1800 segundos após o tempo do &lt;strong&gt;runinterval&lt;/strong&gt; ter se esgotado, com isto,
o tempo máximo entre checagens poder checar até 5400 segundos ou 90 minutos, lembrando que isso é o tempo máximo uma vez que os acionamentos são randômicos.&lt;/p&gt;
&lt;h2 id=&#34;3-módulos&#34;&gt;3. Módulos&lt;/h2&gt;
&lt;h3 id=&#34;31-pense-em-bibliotecas&#34;&gt;3.1 Pense em bibliotecas&lt;/h3&gt;
&lt;p&gt;Pense em módulos como se fossem bibliotecas, quando for construir um módulo tente ao máximo construí-lo de forma que se alguém colocar este módulo no diretório /etc/puppet/modules tudo funcione de primeira, sem necessidade de alteração de código, permitindo
que alguma funcionalidade nova seja agregada ao seu ambiente
de forma simples e direta.&lt;/p&gt;
&lt;h3 id=&#34;32-carregamento-do-módulo&#34;&gt;3.2 Carregamento do módulo&lt;/h3&gt;
&lt;p&gt;Construa módulos que tenham capacidade de serem lidos pelo auto-loader, isto significa que eles devem ter a estrutura recomendada
pela puppetlabs.&lt;/p&gt;
&lt;p&gt;Módulo que não é carregado pelo auto-loader (jeito antigo):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# /etc/puppet/modules/modulename/init.pp
import &amp;quot;classes/*.pp&amp;quot;
import &amp;quot;definitions/*.pp&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Módulo que é carregado pelo auto-loader (jeito certo):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# /etc/puppet/modules/modulename/init.pp
class modulename {}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se você construir um módulo incompatível com o auto-loader, você precisa fazer o import no arquivo site.pp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import modulename
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se não fizer isso, o módulo não será carregado, por isto, procure seguir sempre as recomendações e crie módulos compatíveis com o auto-loader.&lt;/p&gt;
&lt;h3 id=&#34;33-namespace&#34;&gt;3.3 Namespace&lt;/h3&gt;
&lt;p&gt;Ao criar classes em módulos siga a nomenclatura abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;nome_do_modulo
nome_do_modulo::nome_da_classe
nome_do_modulo::nome_do_diretorio::nome_da_classe
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja o exemplo do módulo apache:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetlabspuppetmodulesapachemanifests&#34;&gt;/etc/puppetlabs/puppet/modules/apache/manifests&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;# init.pp
  class apache { }
# ssl.pp
  class apache::ssl { }
# vhost.pp
  define apache::vhost () { }
# params/confs.pp
  class apache::params::confs { }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Essa estrutura em escopo torna o nome das classes do módulo única, diferenciando dos demais módulos, evitando conflitos e problemas de carregamento, siga sempre esse modelo.&lt;/p&gt;
&lt;h3 id=&#34;34-forge-e-github&#34;&gt;3.4 Forge e Github&lt;/h3&gt;
&lt;p&gt;Não comece do zero, pesquise e reutilize código existente no Puppet Forge e Github.&lt;/p&gt;
&lt;h3 id=&#34;35-documentação&#34;&gt;3.5 Documentação&lt;/h3&gt;
&lt;p&gt;Escreva um README detalhado, não deixe de preencher os metadados do seu módulo, crie a documentação de suas classes e definições usando
RDoc Markup.&lt;/p&gt;
&lt;p&gt;Use os comandos &lt;strong&gt;puppet module&lt;/strong&gt; e &lt;strong&gt;puppet doc&lt;/strong&gt; para lhe ajudar com a documentação.&lt;/p&gt;
&lt;h2 id=&#34;4-estilo-de-código&#34;&gt;4. Estilo de código&lt;/h2&gt;
&lt;p&gt;Acesse a página &lt;a href=&#34;http://docs.puppetlabs.com/guides/style_guide.html&#34;&gt;style guide&lt;/a&gt;, ou o meu post &lt;a href=&#34;http://gutocarvalho.net/octopress/2013/04/20/puppet-style-guide&#34;&gt;guia de estilos&lt;/a&gt; para aprender a escrever seus manifests de forma mais eficiente.&lt;/p&gt;
&lt;h3 id=&#34;41-puppet-parser-validate&#34;&gt;4.1 Puppet parser validate&lt;/h3&gt;
&lt;p&gt;Para validar a sintaxe de código em um manifest você pode utilizar o comando puppet parser, veja abaixo o exemplo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet parser validate manifest.pp
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;42-puppet-lint&#34;&gt;4.2 Puppet-lint&lt;/h3&gt;
&lt;p&gt;Use o &lt;a href=&#34;http://puppet-lint.com&#34;&gt;puppet lint&lt;/a&gt; para verificar se o seu manifest está com a estrutura de acordo com o &lt;a href=&#34;http://docs.puppetlabs.com/guides/style_guide.html&#34;&gt;style guide&lt;/a&gt; do Puppet.&lt;/p&gt;
&lt;h2 id=&#34;5-enc-external-node-classifier&#34;&gt;5. ENC (External node classifier)&lt;/h2&gt;
&lt;p&gt;Instale um ENC em seu ambiente, isto te permite acompanhar o ciclo de vida de seus node, e além disto, oferece controles para associar
classes parametrizadas a nodes ou grupos de nodes.&lt;/p&gt;
&lt;p&gt;Os ENCs oferecem visualizações de status do seus nodes, é possível visualizar quando ocorreu uma mudança, é possível visualizar erros
decorrentes de mudanças, é possível extrair dados (fatos) dos nodes.&lt;/p&gt;
&lt;p&gt;Os ENCs mais conhecidos são Puppet Dashboard e Foreman, o que possui
mais recursos é o Foreman.&lt;/p&gt;
&lt;h2 id=&#34;6-repositório-puppetlabs&#34;&gt;6. Repositório Puppetlabs&lt;/h2&gt;
&lt;p&gt;Recomendo a utilização de pacotes do repositório oficial da Puppetlabs. Eles oferecem repositórios para Debian, Ubuntu, RHEL, Centos e derivados EL (Enterprise Linux).&lt;/p&gt;
&lt;p&gt;Repositório APT&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apt.puppetlabs.com
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Repositório YUM&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum.puppetlabs.com
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;7-passenger&#34;&gt;7. Passenger&lt;/h2&gt;
&lt;p&gt;O pacote puppetmaster por default usa um servidor web embutido chamado  &amp;lsquo;webrick&amp;rsquo;, este servidor web deve ser utilizado apenas para fins de desenvolvimento e testes, ele não suportará mais do que 25
conexões simultâneas, e se suportar irá alocar grande quantidade
de recursos de seu servidor, gerando extrema lentidão e alto
load. Em resumo o puppetmaster usando webrick não escala.&lt;/p&gt;
&lt;p&gt;Em ambientes de produção é recomendando utilizar o pacote puppetmaster-passenger que já integra o puppetmaster ao Apache2
com mod-passenger, com isto, sua capacidade e robustez serão equivalentes a capacidade do apache2, este por sua vez é um servidor web reconhecidamente eficaz, rápido e escalável.&lt;/p&gt;
&lt;p&gt;O passenger pode ser utilizado inclusive para rodar o puppet-dashboard.&lt;/p&gt;
&lt;h2 id=&#34;8-orquestrador-e-mq-message-queue&#34;&gt;8. Orquestrador e MQ (Message Queue)&lt;/h2&gt;
&lt;p&gt;É importante ter um orquestrador funcionando, eventualmente pode surgir a necessidade de rodar algum comando de forma paralela e
em tempo real em seus nodes, e você não pode ficar na mão nesse
momento.&lt;/p&gt;
&lt;p&gt;O orquestrador que recomendo é o Marionette Collective (Mcollective ou MCO).&lt;/p&gt;
&lt;p&gt;O Mcollective depende de um sistema MQ para funcionar, recomendo
o ActiveMQ. É possível utilizar o RabbitMQ, porém o criador do MCO
não é muito fã desse projeto, e algumas features do MCO só vão
funcionar com ActiveMQ.&lt;/p&gt;
&lt;p&gt;Veja o post &lt;a href=&#34;http://gutocarvalho.net/octopress/2013/02/07/instalando-mcollective-em-debian-squeeze-com-ambiente-puppet/&#34;&gt;Intalando o Mcollective em Debian Squeeze&lt;/a&gt; para aprender a instalar e configurar este orquestrador.&lt;/p&gt;
&lt;h2 id=&#34;9-manuteção-em-puppet-dashboard&#34;&gt;9. Manuteção em Puppet Dashboard&lt;/h2&gt;
&lt;p&gt;Se você está utilizando o ENC Puppet Dashboard, tome cuidado como crescimento do banco, se você não configurar o MYSQL corretamente
ou não levar em conta espaço em disco, pode ter alguma surpresa
depois de alguns meses, além da lentidão, um disk full pode para
seu ENC e será trabalhoso resolver o problema.&lt;/p&gt;
&lt;p&gt;A puppetlabs oferece um &lt;a href=&#34;http://docs.puppetlabs.com/dashboard/manual/1.2/maintaining.html&#34;&gt;manual&lt;/a&gt; com dados e comandos para fazer manutenção na base do dashboard, isto é muito útil e pode
te livrar de um grande problema.&lt;/p&gt;
&lt;h3 id=&#34;91-otimização-da-base&#34;&gt;9.1 Otimização da base&lt;/h3&gt;
&lt;p&gt;Para otimizar a sua base, basta rodar o comando abaixo na VM do ENC dentro do diretório do dashboard.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo -u puppet-dashboard rake RAILS_ENV=production db:raw:optimize
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;92-limpeza-da-base&#34;&gt;9.2 Limpeza da base&lt;/h3&gt;
&lt;p&gt;Para limpar a base e manter os dados dos últimos 30 dias, basta rodar o comando abaixo no diretório do dashboard.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo -u puppet-dashboard rake RAILS_ENV=production reports:prune upto=1 unit=mon
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;93-limpeza-agendada&#34;&gt;9.3 Limpeza agendada&lt;/h3&gt;
&lt;p&gt;Para inserir uma rotina de limpeza mensal do banco no cron, use o comando abaixo dentro do diretório do dashboard.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo -u puppet-dashboard rake cron:cleanup
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;10-ambiente-puppet&#34;&gt;10. Ambiente Puppet&lt;/h2&gt;
&lt;p&gt;Dicas gerais:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Se possível instale o PuppetMaster em uma VM dedicada.&lt;/li&gt;
&lt;li&gt;Se possível instale o ENC em uma VM dedicada.&lt;/li&gt;
&lt;li&gt;Se possível separe o banco do ENC em uma VM dedicada.&lt;/li&gt;
&lt;li&gt;Se possível instale o Orquestrador + MQ em uma VM dedicada.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Não vejo necessidade de rodar o Puppet, ENC ou Orquestrador em máquinas físicas, seu consumo de I/O e recursos não justifica isto, já o banco do ENC é interessante rodar em uma máquina física ligada
a um STORAGE com uma LUN em um RAID GROUP com discos rápidos.&lt;/p&gt;
&lt;h3 id=&#34;101-características&#34;&gt;10.1 Características&lt;/h3&gt;
&lt;h4 id=&#34;1011-puppetmaster&#34;&gt;10.1.1 PuppetMaster&lt;/h4&gt;
&lt;p&gt;Para atender até 1000 nodes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;4 Processadores&lt;/li&gt;
&lt;li&gt;6 Gigas de RAM&lt;/li&gt;
&lt;li&gt;BARRA com 30 GB&lt;/li&gt;
&lt;li&gt;/VAR  com 120 GB (no caso de ter storeconfig ligado)&lt;/li&gt;
&lt;li&gt;Distribuição 64 Bits&lt;/li&gt;
&lt;li&gt;Recomendo Debian&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;1012-enc-app-web-sem-banco&#34;&gt;10.1.2 ENC (app web sem banco)&lt;/h4&gt;
&lt;p&gt;Para atender até 1000 nodes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2 Processadores&lt;/li&gt;
&lt;li&gt;4 Gigas de RAM&lt;/li&gt;
&lt;li&gt;BARRA com 30 GB&lt;/li&gt;
&lt;li&gt;/VAR  com 60 GB&lt;/li&gt;
&lt;li&gt;Distribuição 64 Bits&lt;/li&gt;
&lt;li&gt;Recomendo Debian&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ENCs: Puppet Dashboard ou Foreman&lt;/p&gt;
&lt;p&gt;Dá para colocar o PuppetDB na mesma máquina - se for o caso.&lt;/p&gt;
&lt;h4 id=&#34;1013-enc-banco&#34;&gt;10.1.3 ENC BANCO&lt;/h4&gt;
&lt;p&gt;Para armazenar dados de até 1000 nodes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;4 Processadores&lt;/li&gt;
&lt;li&gt;6 Gigas de RAM&lt;/li&gt;
&lt;li&gt;BARRA com 30 GB&lt;/li&gt;
&lt;li&gt;/VAR  com 300 GB&lt;/li&gt;
&lt;li&gt;Distribuição 64 Bits&lt;/li&gt;
&lt;li&gt;Recomendo Debian&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;1014-orquestrador-e-mq&#34;&gt;10.1.4 ORQUESTRADOR e MQ&lt;/h4&gt;
&lt;p&gt;Para orquestrar até 1000 nodes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2 Processadores&lt;/li&gt;
&lt;li&gt;4 Gigas de RAM&lt;/li&gt;
&lt;li&gt;BARRA com 30 GB&lt;/li&gt;
&lt;li&gt;/VAR  com 30 GB&lt;/li&gt;
&lt;li&gt;Distribuição 64 Bits&lt;/li&gt;
&lt;li&gt;Recomendo Debian&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ActiveMQ/RabbitMQ, Mcollective Client/Server.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Style Guide</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-20-puppet-style-guide/</link>
      <pubDate>Sat, 20 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-20-puppet-style-guide/</guid>
      <description>&lt;h2 id=&#34;1-puppet-guia-de-estilos&#34;&gt;1. Puppet Guia de estilos&lt;/h2&gt;
&lt;p&gt;Neste post eu vou trazer algumas dicas da puppetlabs sobre estilo de código. No site da Puppetlabs há uma página chamada &lt;a href=&#34;http://docs.puppetlabs.com/guides/style_guide.html&#34;&gt;style guide&lt;/a&gt; explicando isto em inglês, eu pretendo me inspirar nesta página e estender as dicas na medida do possível.&lt;/p&gt;
&lt;p&gt;O principal objetivo do style guide é apresentar como utilizar a sintaxe do Puppet de forma mais eficiente. Quando usamos a sintaxe coerentemente, temos ganhos na velocidade de processamento de nossos manifests, além disto, nosso código fica mais legível e elegante.&lt;/p&gt;
&lt;p&gt;O parser do Puppet é bastante flexível e mesmo quando você produz algo fora padrões esperados, ele consegue entender, processar e aplicar as configurações descritas em seu manifest, contudo, ele levará mais tempo para processar o manifest, logo podemos dizer que certos tipos de código dificultam vida do parser, isto diminui a performance do agente quando ele for aplicar suas configurações, além disto, a aplicação do manifest pode ter algum comportamento inesperado.&lt;/p&gt;
&lt;p&gt;Acompanhe o artigo para entender a melhor forma de usar sintaxe do Puppet.&lt;/p&gt;
&lt;h2 id=&#34;2-dicas-gerais&#34;&gt;2. Dicas Gerais&lt;/h2&gt;
&lt;h3 id=&#34;21-código-de-fácil-leitura&#34;&gt;2.1 Código de fácil leitura&lt;/h3&gt;
&lt;p&gt;Se você tiver que optar em escrever um código obscuro e complexo e um código mais legível, procure sempre optar por escrever um código legível, seja para você, seja para outras pessoas. Isto pode parecer subjetivo, mas quando trabalhamos em equipe ou quando compartilhamos nosso código, quanto mais legível melhor. Além disto, isto evita situações em que você relê um código escrito meses atrás e não consegue entender o que estava fazendo.&lt;/p&gt;
&lt;h3 id=&#34;22-herança-em-classes&#34;&gt;2.2 Herança em classes&lt;/h3&gt;
&lt;p&gt;A Puppetlabs em regra geral pede para evitarmos o uso de herança entre classes, eles acreditam que isso dificulta a leitura e o entendimento do código.&lt;/p&gt;
&lt;p&gt;Em minha opinião esse recurso pode ser muito útil em alguns casos, logo recomendo que você estude bem como funciona o conceito antes de utilizar, mais a frente voltaremos a falar disto.&lt;/p&gt;
&lt;h3 id=&#34;23-módulos&#34;&gt;2.3 Módulos&lt;/h3&gt;
&lt;p&gt;Quando for escrever módulos já planeje e desenhe seu módulo primeiro para funcionar com auto loading, segundo para que funcione tanto com um ENC quanto sem um ENC (External Node Classifier). O Foreman e Puppet Dashboard são exemplos de ENC.&lt;/p&gt;
&lt;p&gt;Pense também em criar seu módulo utilizando o comando &lt;strong&gt;puppet module generate&lt;/strong&gt; para que você siga a estrutura correta e recomendada,
escreva o README bem detalhado e não deixe de preencher os metadados.&lt;/p&gt;
&lt;h3 id=&#34;24-declaração-de-classes&#34;&gt;2.4 Declaração de classes&lt;/h3&gt;
&lt;p&gt;Antes de entrar no assunto, vamos entender os conceitos DEFINIR e DECLARAR no universo Puppet.&lt;/p&gt;
&lt;p&gt;Quando falarmos &lt;strong&gt;definir&lt;/strong&gt;, significa que vamos escrever nosso manifest, ou seja, vamos colocar código lá.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;class guto {
user { &amp;lsquo;guto&amp;rsquo;:
ensure =&amp;gt; present,
}
}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Quando falarmos &lt;strong&gt;declarar&lt;/strong&gt;, significa que vamos executar o código de nosso manifest, ou seja, vamos aplicar a configuração.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class { &amp;lsquo;guto&amp;rsquo;: }
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A puppetlabs não recomenda que durante a &lt;strong&gt;definição&lt;/strong&gt; de uma classe, seja feita também &lt;strong&gt;declaração&lt;/strong&gt; de outra classe.&lt;/p&gt;
&lt;p&gt;Na minha opinião essa recomendação é feita pois este tipo declaração pode dificultar a ação do parser, aumentando o tempo de processamento do catálogo e além disto, pode gerar algum tipo de comportamento indesejável ao aplicar o manifest.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class sudo {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package { &#39;sudo&#39;:
	ensure =&amp;gt; present,
}

class { &#39;guto&#39;: }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A declaração de classes deve ser utilizada o mais próximo possível do escopo do &lt;strong&gt;node&lt;/strong&gt;, eles recomendam que sejamos conservadores com isto, contudo, há o recurso &lt;strong&gt;include&lt;/strong&gt; que permite múltipla declaração de classes, se você precisar declarar outra classe, use include ou então verifique se não é melhor utilizar herança.&lt;/p&gt;
&lt;h2 id=&#34;3-metadados-do-módulo&#34;&gt;3. Metadados do módulo&lt;/h2&gt;
&lt;p&gt;Todo o módulo deve ter um arquivo de metadados, essa é uma recomendação importante principalmente se você deseja compartilhar seu módulo no forge ou github.&lt;/p&gt;
&lt;p&gt;Quando você gera seu módulo usando o comando &lt;strong&gt;puppet module&lt;/strong&gt;, o exemplo de metadados abaixo é criado, a partir daí é só ajustar.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;name &#39;myuser-mymodule&#39;
version &#39;0.0.1&#39;
author &#39;Author of the module - for shared modules this is Puppet Labs&#39;
summary &#39;One line description of the module&#39;
description &#39;Longer description of the module including an example&#39;
license &#39;The license the module is release under - generally GPLv2 or Apache&#39;
project_page &#39;The URL where the module source is located&#39;
dependency &#39;otheruser/othermodule&#39;, &#39;&amp;gt;= 1.2.3&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Um guia completo sobre a estrutura de um módulo pode ser encontrado no projeto &lt;a href=&#34;https://github.com/puppetlabs/puppet-module-tool/blob/master/README.markdown&#34;&gt;puppet-module-tool&lt;/a&gt; no github.&lt;/p&gt;
&lt;h2 id=&#34;4-indentação&#34;&gt;4. Indentação&lt;/h2&gt;
&lt;p&gt;Se o seu manifest seguir as recomendações abaixo, estará dentro dos
moldes descritos no guia de estilo.&lt;/p&gt;
&lt;p&gt;O seu manifest…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Deve usar &lt;strong&gt;two-space soft tab&lt;/strong&gt; (tab convertida para 2 espaços)&lt;/li&gt;
&lt;li&gt;Não deve usar &lt;strong&gt;tab&lt;/strong&gt; (literal)&lt;/li&gt;
&lt;li&gt;Não deve ter &lt;strong&gt;trailing whitespace&lt;/strong&gt; em seu código&lt;/li&gt;
&lt;li&gt;Não deve extraploar &lt;strong&gt;80 caracteres&lt;/strong&gt; por linha&lt;/li&gt;
&lt;li&gt;Deve ter todas as &lt;strong&gt;setas&lt;/strong&gt; (comma arrows) &lt;strong&gt;=&amp;gt;&lt;/strong&gt; alinhadas&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Eu particularmente uso soft tab no &lt;strong&gt;vim&lt;/strong&gt; ou &lt;em&gt;sublime text 2&lt;/em&gt;* com 4 espaços, mas a recomendação deles é clara, 2 espaços para estar dentro dos padrões puppetlabs.&lt;/p&gt;
&lt;h3 id=&#34;41-puppet-lint&#34;&gt;4.1 Puppet-lint&lt;/h3&gt;
&lt;p&gt;Use o &lt;a href=&#34;http://puppet-lint.com&#34;&gt;puppet lint&lt;/a&gt; para verificar se o seu manifest está de acordo com o &lt;a href=&#34;http://docs.puppetlabs.com/guides/style_guide.html&#34;&gt;style guide&lt;/a&gt; do Puppet.&lt;/p&gt;
&lt;h2 id=&#34;5-comentários&#34;&gt;5. Comentários&lt;/h2&gt;
&lt;p&gt;O Puppet permite vários tipo de comentários, porém o recomendado é utilizar hash.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# Este é o tipo comentário recomendado
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A puppetlabs não recomenda o uso dos estilos de comentários abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// Comentário em formato não recomendado
/* Comentário em formato não recomendado */
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;6-quoting&#34;&gt;6. Quoting&lt;/h2&gt;
&lt;p&gt;Todas as &lt;strong&gt;strings&lt;/strong&gt; que não contenham &lt;strong&gt;variáveis&lt;/strong&gt; devem usar &lt;strong&gt;single quotes&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
&amp;lsquo;string em single quote&amp;rsquo;
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Quando for necessário &lt;strong&gt;interpolar&lt;/strong&gt; strings e variáveis, use &lt;strong&gt;double quoting&lt;/strong&gt; e &lt;strong&gt;chaves&lt;/strong&gt; nas variáveis para identificá-las.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
&amp;ldquo;string e ${variável}&amp;rdquo;
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Valores específicos de &lt;strong&gt;atributos&lt;/strong&gt; não precisam de quote.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
ensure =&amp;gt; present,
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;O uso de &lt;strong&gt;quotes&lt;/strong&gt; é opcional quando uma &lt;strong&gt;string&lt;/strong&gt; for &lt;strong&gt;alfa-numérica&lt;/strong&gt; e desde que não seja o &lt;strong&gt;título&lt;/strong&gt; de um recurso.&lt;/p&gt;
&lt;h3 id=&#34;61-interpolação-de-variável&#34;&gt;6.1 Interpolação de variável&lt;/h3&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
&amp;ldquo;/etc/${file}.conf&amp;rdquo;
&amp;ldquo;${::operatingsystem} is not supported by ${module_name}&amp;rdquo;
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
&amp;ldquo;/etc/$file.conf&amp;rdquo;
&amp;ldquo;$::operatingsystem is not supported by $module_name&amp;rdquo;
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;62-valor-de-atributos&#34;&gt;6.2 Valor de atributos&lt;/h3&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
mode =&amp;gt; $my_mode
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
mode =&amp;gt; &amp;ldquo;$my_mode&amp;rdquo;
mode =&amp;gt; &amp;ldquo;${my_mode}&amp;rdquo;
{% endcodeblock %}&lt;/p&gt;
&lt;h2 id=&#34;7-resources&#34;&gt;7. Resources&lt;/h2&gt;
&lt;h3 id=&#34;71-resource-names&#34;&gt;7.1 Resource names&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Todos&lt;/strong&gt; os resource names devem usar &lt;strong&gt;quote&lt;/strong&gt;, no entanto, o puppet permite o uso de &lt;strong&gt;nomes&lt;/strong&gt; para &lt;strong&gt;títulos&lt;/strong&gt; sem quotes desde que o nome não tenha hífen ou espaços, contudo, para seguir um padrão consistente, use sempre quote.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Variáveis&lt;/strong&gt; ou &lt;strong&gt;fatos&lt;/strong&gt; não necessitam de &lt;strong&gt;quotes&lt;/strong&gt; quando forem utilizadas como título.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
package { &amp;lsquo;htop&amp;rsquo;: ensure =&amp;gt; present }
package { $package_name: ensure =&amp;gt; present }
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
package { htop: ensure =&amp;gt; present }
package { &amp;ldquo;${package_name}&amp;quot;: ensure =&amp;gt; present }
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;72-alinhamento&#34;&gt;7.2. Alinhamento&lt;/h3&gt;
&lt;p&gt;Todos os atributos e valores de um recurso devem estar alinhados em seu bloco,
as setas devem ter um espaço após o nome do atributo mais longo.&lt;/p&gt;
&lt;p&gt;Apesar de ser uma recomendação estética, isto facilita muito a leitura.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
package { &amp;lsquo;pacote&amp;rsquo;:
ensure =&amp;gt; present,
}&lt;/p&gt;
&lt;p&gt;service { &amp;lsquo;servico&amp;rsquo;:
ensure     =&amp;gt; running,
enable     =&amp;gt; true,
hasrestart =&amp;gt; true,
hasstatus  =&amp;gt; true,
require    =&amp;gt; Package[&amp;lsquo;pacote&amp;rsquo;],
}&lt;/p&gt;
&lt;p&gt;file { &amp;lsquo;main.cf&amp;rsquo;:
path    =&amp;gt; &amp;ldquo;/etc/pacote/pacote.conf&amp;rdquo;,
source  =&amp;gt; &amp;ldquo;/root/puppet/pacote.conf&amp;rdquo;,
owner   =&amp;gt; &amp;lsquo;root&amp;rsquo;,
group   =&amp;gt; &amp;lsquo;root&amp;rsquo;,
mode    =&amp;gt; 644,
require =&amp;gt; Package[&amp;lsquo;pacote&amp;rsquo;],
notify  =&amp;gt; Service[&amp;lsquo;servico&amp;rsquo;],
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
package { &amp;lsquo;pacote&amp;rsquo;:
ensure =&amp;gt; present,
}&lt;/p&gt;
&lt;p&gt;service { &amp;lsquo;servico&amp;rsquo;:
ensure =&amp;gt; running,
enable =&amp;gt; true,
hasrestart =&amp;gt; true,
hasstatus =&amp;gt; true,
require =&amp;gt; Package[&amp;lsquo;pacote&amp;rsquo;],
}&lt;/p&gt;
&lt;p&gt;file { &amp;lsquo;main.cf&amp;rsquo;:
path =&amp;gt; &amp;ldquo;/etc/pacote/pacote.conf&amp;rdquo;,
source =&amp;gt; &amp;ldquo;/root/puppet/pacote.conf&amp;rdquo;,
owner =&amp;gt; &amp;lsquo;root&amp;rsquo;,
group =&amp;gt; &amp;lsquo;root&amp;rsquo;,
mode =&amp;gt; 644,
require =&amp;gt; Package[&amp;lsquo;pacote&amp;rsquo;],
notify =&amp;gt; Service[&amp;lsquo;servico&amp;rsquo;],
}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;73-ordenação-de-atributos&#34;&gt;7.3. Ordenação de atributos&lt;/h3&gt;
&lt;p&gt;Se a declaração de um recurso possuir o atributo &lt;strong&gt;ensure&lt;/strong&gt;, este deve preceder qualquer outro atributo, ele sempre vem primeiro.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file { &amp;lsquo;/tmp/readme.txt&amp;rsquo;:
ensure =&amp;gt; file,
owner  =&amp;gt; &amp;lsquo;0&amp;rsquo;,
group  =&amp;gt; &amp;lsquo;0&amp;rsquo;,
mode   =&amp;gt; &amp;lsquo;0644&amp;rsquo;,
}
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;74-múltiplos-resources&#34;&gt;7.4 Múltiplos resources&lt;/h3&gt;
&lt;p&gt;A puppetlabs só recomenda o uso de múltiplos resources para tornar o código mais legível, portando, evite o uso a não ser que isso seja realmente necessário.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file { &amp;lsquo;/tmp/a&amp;rsquo;:
content =&amp;gt; &amp;lsquo;a&amp;rsquo;,
}&lt;/p&gt;
&lt;p&gt;file { &amp;lsquo;/tmp/b&amp;rsquo;:
content =&amp;gt; &amp;lsquo;b&amp;rsquo;,
}&lt;/p&gt;
&lt;p&gt;file { &amp;lsquo;/tmp/c&amp;rsquo;:
content =&amp;gt; &amp;lsquo;c&amp;rsquo;,
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file {
&amp;ldquo;/tmp/a&amp;rdquo;:
content =&amp;gt; &amp;ldquo;a&amp;rdquo;;
&amp;ldquo;/tmp/b&amp;rdquo;:
content =&amp;gt; &amp;ldquo;b&amp;rdquo;;
&amp;ldquo;/tmp/c&amp;rdquo;:
content =&amp;gt; &amp;ldquo;c&amp;rdquo;;
}
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;75-links-simbólicos&#34;&gt;7.5 Links simbólicos&lt;/h3&gt;
&lt;p&gt;Apenas para deixar o código mais limpo e legível, recomenda-se declarar o link simbólico de forma explícita.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file { &amp;lsquo;/var/log/syslog&amp;rsquo;:
ensure =&amp;gt; link,
target =&amp;gt; &amp;lsquo;/var/log/messages&amp;rsquo;,
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file { &amp;lsquo;/var/log/syslog&amp;rsquo;:
ensure =&amp;gt; &amp;lsquo;/var/log/messages&amp;rsquo;,
}
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;76-file-modes&#34;&gt;7.6 File modes&lt;/h3&gt;
&lt;p&gt;Devemos representar as permissões de arquivos e diretórios com 4 dígitos ao invés de 3 dígitos.&lt;/p&gt;
&lt;p&gt;As permissões devem ser declaradas usando &lt;strong&gt;single-quote&lt;/strong&gt;, &lt;strong&gt;sempre&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file { &amp;lsquo;/var/log/syslog&amp;rsquo;:
ensure =&amp;gt; present,
mode   =&amp;gt; &amp;lsquo;0644&amp;rsquo;,
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file { &amp;lsquo;/var/log/syslog&amp;rsquo;:
ensure =&amp;gt; present,
mode   =&amp;gt; 644,
}
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;77-resource-defaults&#34;&gt;7.7 Resource Defaults&lt;/h3&gt;
&lt;p&gt;Podemos declarar alguns padrões para uso de recursos, porém, isso deve ser utilizado com cuidado, este tipo de declaração deve ser feita apenas no nível mais alto do seu ecosistema de manifests. Especificamente, eles devem ser declarados:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No topo de escopo dentro do arquivo site.pp&lt;/li&gt;
&lt;li&gt;Em classes que não serão herdadas&lt;/li&gt;
&lt;li&gt;Em classes em que não você não declara outras classes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Se essas recomendações não forem seguidas poderão ocorrer comportamentos inesperados durante a execução de seus manifests, principalmente se
essa configuração for propagada ou herdada de alguma forma.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetlabspuppetmanifestssitepp&#34;&gt;/etc/puppetlabs/puppet/manifests/site.pp:&lt;/h1&gt;
&lt;p&gt;File {
mode  =&amp;gt; &amp;lsquo;0644&amp;rsquo;,
owner =&amp;gt; &amp;lsquo;root&amp;rsquo;,
group =&amp;gt; &amp;lsquo;root&amp;rsquo;,
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
#/etc/puppetlabs/puppet/modules/ssh/manifests/init.pp
File {
mode  =&amp;gt; &amp;lsquo;0600&amp;rsquo;,
owner =&amp;gt; &amp;lsquo;nobody&amp;rsquo;,
group =&amp;gt; &amp;lsquo;nogroup&amp;rsquo;,
}&lt;/p&gt;
&lt;p&gt;class {&amp;lsquo;ssh::client&amp;rsquo;:
ensure =&amp;gt; present,
}
{% endcodeblock %}&lt;/p&gt;
&lt;h2 id=&#34;8-condicionais&#34;&gt;8. Condicionais&lt;/h2&gt;
&lt;h3 id=&#34;81-mantenha-suas-declarações-simples&#34;&gt;8.1 Mantenha suas declarações simples&lt;/h3&gt;
&lt;p&gt;A Puppetalabs não recomenda misturar resource types e condicionais, isto está bem ligado ao uso de &lt;strong&gt;seletores&lt;/strong&gt;, portanto, faça o tratamento condicional fora do resource type, é mais eficaz do ponto de vista de processamento do catálogo e além disto, fica mais legível e elegante.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$file_mode = $::operatingsystem ? {
debian =&amp;gt; &amp;lsquo;0007&amp;rsquo;,
redhat =&amp;gt; &amp;lsquo;0776&amp;rsquo;,
fedora =&amp;gt; &amp;lsquo;0007&amp;rsquo;,
}&lt;/p&gt;
&lt;p&gt;file { &amp;lsquo;/tmp/readme.txt&amp;rsquo;:
content =&amp;gt; &amp;ldquo;Hello World\n&amp;rdquo;,
mode    =&amp;gt; $file_mode,
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
file { &amp;lsquo;/tmp/readme.txt&amp;rsquo;:
mode =&amp;gt; $::operatingsystem ? {
debian =&amp;gt; &amp;lsquo;0777&amp;rsquo;,
redhat =&amp;gt; &amp;lsquo;0776&amp;rsquo;,
fedora =&amp;gt; &amp;lsquo;0007&amp;rsquo;,
}
}
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;82-estado-default-em-case-e-seletores&#34;&gt;8.2 Estado Default em Case e Seletores&lt;/h3&gt;
&lt;p&gt;Tanto em CASE quanto em SELETORES, podemos utilizar o statement DEFAULT, ou seja, isto determina um valor default se não casar com nenhuma opção do CASE ou SELETOR.&lt;/p&gt;
&lt;p&gt;case:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
case $var {
valor1:  { bloco de código }
valor2:  { bloco de código }
default: { bloco de codigo }
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;seletor:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$file_mode = $::operatingsystem ? {
debian  =&amp;gt; &amp;lsquo;0007&amp;rsquo;,
redhat  =&amp;gt; &amp;lsquo;0776&amp;rsquo;,
fedora  =&amp;gt; &amp;lsquo;0007&amp;rsquo;,
default =&amp;gt; &amp;lsquo;0077&amp;rsquo;,
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A puppetlabs recomenda que a opção default esteja presente em qualquer tratamento condicional que o suporte, e recomenda ainda que seja associada a função fail, esta função interrompe o processamento do catálogo caso o sistema
não seja compatível com o tratamento condicional definido.&lt;/p&gt;
&lt;p&gt;exemplo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
case $::operatingsystem {
centos, redhat: { $apache = &amp;ldquo;httpd&amp;rdquo; }
debian, ubuntu: { $apache = &amp;ldquo;apache2&amp;rdquo; }
default: { fail(&amp;ldquo;Sistema operacional não reconhecido&amp;rdquo;) }
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;No exemplo acima, o &lt;strong&gt;CASE&lt;/strong&gt; verifica qual é o sistema operacional do node - usando o &lt;strong&gt;fato&lt;/strong&gt;, caso o valor detectado não case com nenhuma das opções do CASE, o &lt;strong&gt;default&lt;/strong&gt; é acionado e executa a função &lt;strong&gt;fail&lt;/strong&gt;, isto interrompe o processamento do catálogo e retorna um erro que poderá ser visualizado em seu ENC ou no log do agente.&lt;/p&gt;
&lt;h2 id=&#34;9-classes&#34;&gt;9. Classes&lt;/h2&gt;
&lt;p&gt;Recomenda-se separar classes e definições em arquivos distintos no diretório manifest de seu módulo.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetlabspuppetmodulesapachemanifests&#34;&gt;/etc/puppetlabs/puppet/modules/apache/manifests&lt;/h1&gt;
&lt;pre&gt;&lt;code&gt;# init.pp
  class apache { }
# ssl.pp
  class apache::ssl { }
# virtual_host.pp
  define apache::virtual_host () { }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;É importante entender que isto não altera em nada o funcionamento do módulo,
tem o mesmo efeito de declarar tudo no arquivo init.pp, contudo, separando
os arquivos temos uma estrutura que facilita o entendimento e torna o todo
mais legível.&lt;/p&gt;
&lt;h3 id=&#34;91-nomes-de-classes&#34;&gt;9.1 Nomes de classes&lt;/h3&gt;
&lt;p&gt;Observe que o nome das classes dentro dos arquivos utiliza escopos, a regra é clara, o nome da classe recebe o nome do módulo + o nome da classe, veja o exemplo:
{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetlabspuppetmodulesapachemanifests-1&#34;&gt;/etc/puppetlabs/puppet/modules/apache/manifests&lt;/h1&gt;
&lt;h1 id=&#34;sslpp&#34;&gt;ssl.pp&lt;/h1&gt;
&lt;p&gt;class apache::ssl
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Caso você queria criar um diretório para organizar melhor seu módulo a regra passa a incluir o nome do diretório, veja o exemplo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetlabspuppetmodulesapachemanifests-2&#34;&gt;/etc/puppetlabs/puppet/modules/apache/manifests&lt;/h1&gt;
&lt;h1 id=&#34;confparameterspp&#34;&gt;conf/parameters.pp&lt;/h1&gt;
&lt;p&gt;class apache::conf::parameters
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Essa estrutura em escopo torna o nome das classes do módulo única, diferenciando dos demais módulos, evitando conflitos e problemas
de carregamento, siga sempre essa estrutura.&lt;/p&gt;
&lt;h3 id=&#34;92-organização-interna&#34;&gt;9.2 Organização interna&lt;/h3&gt;
&lt;p&gt;As classes precisam ser organizadas de forma a manter um estilo e estrutura consistente. Abaixo uma lista com itens importantes encontrados em um classe
que foi construída seguindo a lógica do style guide.&lt;/p&gt;
&lt;p&gt;A classe&amp;hellip;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Deve definir parâmetros&lt;/li&gt;
&lt;li&gt;Deve validar parâmetros&lt;/li&gt;
&lt;li&gt;Deve interromper a execução em falha de validação&lt;/li&gt;
&lt;li&gt;Deve oferecer parâmetros default&lt;/li&gt;
&lt;li&gt;Pode ter declaração de variáveis locais&lt;/li&gt;
&lt;li&gt;Pode ter relação com outras classes
&lt;ul&gt;
&lt;li&gt;Class[&amp;lsquo;apache&amp;rsquo;] -&amp;gt; Class[&amp;lsquo;local_yum&amp;rsquo;]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Pode sobrescrever (override) resources&lt;/li&gt;
&lt;li&gt;Pode declarar resources&lt;/li&gt;
&lt;li&gt;Pode declarar relação entre resources dentro de condicionais&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Exemplo de uma classe que segue essas recomendações:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;class myservice($ensure=&amp;lsquo;running&amp;rsquo;) {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;  # checagem condicional
 
  if $ensure in [ running, stopped ] {  
    $ensure_real = $ensure
  } else {
    # interrompendo execução em caso de falta de parâmetro
    fail(&#39;ensure parameter must be running or stopped&#39;)
  }
  case $::operatingsystem {
    centos: {
      $package_list = &#39;openssh-server&#39;
    }
    solaris: {
      $package_list = [ SUNWsshr, SUNWsshu ]
    }
    default: {
  	   # interrompendo execução caso o sistema operacional seja desconhecido
      fail(&amp;quot;Module ${module_name} does not support ${::operatingsystem}&amp;quot;)
  
    }
  
  }

  # variável de uso local
  $variable = &#39;something&#39;

  Package { ensure =&amp;gt; present, }

  File { owner =&amp;gt; &#39;0&#39;, group =&amp;gt; &#39;0&#39;, mode =&amp;gt; &#39;0644&#39; }

  package { $package_list: }

  file { &amp;quot;/tmp/${variable}&amp;quot;:
    ensure =&amp;gt; present,
  }

  service { &#39;myservice&#39;:
    ensure    =&amp;gt; $ensure_real,
    hasstatus =&amp;gt; true,
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;93-relações-encadeadas&#34;&gt;9.3 Relações encadeadas&lt;/h3&gt;
&lt;p&gt;O puppet nos oferece duas formas de trabalhar com relações, a primeira é usando meta-parâmetros como &lt;strong&gt;require&lt;/strong&gt;, &lt;strong&gt;before&lt;/strong&gt;, &lt;strong&gt;notify&lt;/strong&gt; e &lt;strong&gt;subscribe&lt;/strong&gt; e a segunda é usando uma cadeia de relações, para entender veja dois exemplos básicos, o primeiro precedência e o segundo notificação.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Precedência via meta-parâmetro&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;package { &amp;lsquo;httpd&amp;rsquo;:
ensure =&amp;gt; installed,
before =&amp;gt; Service[httpd],
}&lt;/p&gt;
&lt;p&gt;service { &amp;lsquo;httpd&amp;rsquo;:
ensure =&amp;gt; running,
}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Precedência usando cadeia de relacionamento&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;Package[&amp;lsquo;httpd&amp;rsquo;] -&amp;gt; Service[&amp;lsquo;httpd&amp;rsquo;]&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Notificando via meta-parâmetro&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;file { &amp;lsquo;httpdconf&amp;rsquo;:
path   =&amp;gt; &amp;lsquo;/etc/httpd/httpd.conf&amp;rsquo;
ensure =&amp;gt; present,
notify =&amp;gt; Service[httpd]&lt;/p&gt;
&lt;p&gt;service { &amp;lsquo;httpd&amp;rsquo;:
ensure =&amp;gt; running,
}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Notificando via cadeia de relacionamento&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
File[&amp;lsquo;httpdconf&amp;rsquo;] ~&amp;gt; Service[&amp;lsquo;httpd&amp;rsquo;]
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Cadeias de relacionamento são recursos úteis mas devem ser utilizados com cuidado, recomenda-se
utilizar cadeias com regras da esquera para direta sempre, evite outras variações&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
Package[&amp;lsquo;httpd&amp;rsquo;] -&amp;gt; Service[&amp;lsquo;httpd&amp;rsquo;]
File[&amp;lsquo;httpconf&amp;rsquo;] ~&amp;gt; Service[&amp;lsquo;httpd&amp;rsquo;]
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
Service[&amp;lsquo;httpd&amp;rsquo;] &amp;lt;- Package[&amp;lsquo;httpd&amp;rsquo;]
Service[&amp;lsquo;httpd&amp;rsquo;] &amp;lt;~ File[&amp;lsquo;httpdconf&amp;rsquo;]
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Quando possível, utilize meta-parâmetros ao invés de relacionamento interno.&lt;/p&gt;
&lt;h3 id=&#34;94-classes-internas&#34;&gt;9.4 Classes internas&lt;/h3&gt;
&lt;p&gt;No início já falamos disto, devemos evitar criar classes dentro de classes, ou mesmo definições dentro de classes.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class apache {
class ssl { &amp;hellip; }
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Outra forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class apache {
define config() { &amp;hellip; }
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Prefira sempre criar um arquivo separado e declarar uma única classe ou uma única definição neste arquivo.&lt;/p&gt;
&lt;h3 id=&#34;95-classes-e-herança&#34;&gt;9.5 Classes e herança&lt;/h3&gt;
&lt;p&gt;Herança pode ser usada em módulos, mas deve ser utilizada entre as classes do módulo. Se o seu objetivo é  herdar uma classe de outro módulo, pense em usar o &lt;strong&gt;include&lt;/strong&gt; ao invés do &lt;strong&gt;inherits&lt;/strong&gt;. O simples ato de fazer herança entre módulos já viola o proprio conceito de modularidade, evite isto ao máximo.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ssh { &amp;hellip; }&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;class ssh::client inherits ssh { ... }

class ssh::server inherits ssh { ... }

class ssh::server::solaris inherits ssh::server { ... }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ssh inherits server { &amp;hellip; }&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;class ssh::client inherits workstation { ... }

class wordpress inherits apache { ... }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;96-variáveis-e-namespace&#34;&gt;9.6 Variáveis e namespace&lt;/h3&gt;
&lt;p&gt;Quando usarmos váriaveis de topo de escopo ou fatos, devemos declará-las de forma a evitar carregamento de uma variável com o mesmo nome
mas em escopo local.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$::operatingsystem
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$operatingsystem
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Se não fizermos isto e houver uma variável com o mesmo nome em escopo
local, ou seja, se você por alguma razão criou uma variável em um
manifest do seu módulo com o nome &lt;strong&gt;operatingsystem&lt;/strong&gt;, por ordem
de precedência a variável de escopo &lt;strong&gt;local&lt;/strong&gt; será carregada e não a  variável - ou fato - de topo de escopo, desta forma seu código pode ter um comportamento indesejado.&lt;/p&gt;
&lt;h3 id=&#34;97-nome-de-variáveis&#34;&gt;9.7 Nome de variáveis&lt;/h3&gt;
&lt;p&gt;Quando for definir variáveis, procure usar apenas letras, números
e underscore. Não use hífen ou travessão.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$foo_bar123
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
$foo-bar123
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;98-classes-e-parâmetros&#34;&gt;9.8 Classes e Parâmetros&lt;/h3&gt;
&lt;p&gt;Em classes parametrizadas e definições, devemos tomar um cuidado especial na hora da declaração. Parâmetros obrigatórios devem ser listados antes de parâmetros opcionais.&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;certa&lt;/strong&gt; de fazer:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ntp (
$servers,
$options   = &amp;ldquo;iburst&amp;rdquo;,
$multicast = false
) {}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A forma &lt;strong&gt;não&lt;/strong&gt; recomendada:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ntp (
$options   = &amp;ldquo;iburst&amp;rdquo;,
$servers,
$multicast = false
) {}
{% endcodeblock %}&lt;/p&gt;
&lt;h2 id=&#34;10-testes&#34;&gt;10. Testes&lt;/h2&gt;
&lt;p&gt;Todos os manifests de um módulo devem ter um manifest de teste no diretório tests, isso é chamado de smoking test, o objetivo do
smoking test é demonstrar como uma classe ou definição deve
ser declarada.&lt;/p&gt;
&lt;p&gt;exemplo de manifest:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetmodulesntpmanifestsinitpp&#34;&gt;/etc/puppet/modules/ntp/manifests/init.pp&lt;/h1&gt;
&lt;p&gt;class ntp {
package { &amp;lsquo;ntp&amp;rsquo;:
ensure =&amp;gt; present,
}
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;exemplo de smoking test:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;h1 id=&#34;etcpuppetmodulesntptestsinitpp&#34;&gt;/etc/puppet/modules/ntp/tests/init.pp&lt;/h1&gt;
&lt;p&gt;class { ntp: }
{% endcodeblock %}&lt;/p&gt;
&lt;h2 id=&#34;11-puppet-doc&#34;&gt;11. Puppet DOC&lt;/h2&gt;
&lt;p&gt;O Puppet Doc é um recurso que nos permite documentar nossas classes e definições utilizando RDoc markup. Esse documentação inline é
importante para facilitar a geração de documentação online, isto
significa que uma vez gerada, poderá ser extraída pelo própio puppet
doc quando desejar informações e comentários das classes e definções
de seu módulo.&lt;/p&gt;
&lt;p&gt;Modelo para classes:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;    # == Class: example_class
    #
    # Full description of class example_class here.
    #
    # === Parameters
    #
    # Document parameters here.
    #
    # [*ntp_servers*]
    #   Explanation of what this parameter affects and what it defaults to.
    #   e.g. &amp;quot;Specify one or more upstream ntp servers as an array.&amp;quot;
    #
    # === Variables
    #
    # Here you should define a list of variables that this module would require.
    #
    # [*enc_ntp_servers*]
    #   Explanation of how this variable affects the funtion of this class and if it
    #   has a default. e.g. &amp;quot;The parameter enc_ntp_servers must be set by the
    #   External Node Classifier as a comma separated list of hostnames.&amp;quot; (Note,
    #   global variables should not be used in preference to class parameters  as of
    #   Puppet 2.6.)
    #
    # === Examples
    #
    #  class { &#39;example_class&#39;:
    #    ntp_servers =&amp;gt; [ &#39;pool.ntp.org&#39;, &#39;ntp.local.company.com&#39; ]
    #  }
    #
    # === Authors
    #
    # Author Name &amp;lt;author@example.com&amp;gt;
    #
    # === Copyright
    #
    # Copyright 2011 Your name here, unless otherwise noted.
    #
    class example_class {

    }

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Modelo para definições:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;    # == Define: example_resource
    #
    # Full description of defined resource type example_resource here.
    #
    # === Parameters
    #
    # Document parameters here
    #
    # [*namevar*]
    #   If there is a parameter that defaults to the value of the title string
    #   when not explicitly set, you must always say so.  This parameter can be
    #   referred to as a &amp;quot;namevar,&amp;quot; since it&#39;s functionally equivalent to the
    #   namevar of a core resource type.
    #
    # [*basedir*]
    #   Description of this variable.  For example, &amp;quot;This parameter sets the
    #   base directory for this resource type.  It should not contain a trailing
    #   slash.&amp;quot;
    #
    # === Examples
    #
    # Provide some examples on how to use this type:
    #
    #   example_class::example_resource { &#39;namevar&#39;:
    #     basedir =&amp;gt; &#39;/tmp/src&#39;,
    #   }
    #
    # === Authors
    #
    # Author Name &amp;lt;author@example.com&amp;gt;
    #
    # === Copyright
    #
    # Copyright 2011 Your name here, unless otherwise noted.
    #
    define example_class::example_resource($basedir) {

    }

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Cloud Magic APP</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-19-cloud-magic-app/</link>
      <pubDate>Fri, 19 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-19-cloud-magic-app/</guid>
      <description>&lt;p&gt;Há alguns dias encontrei essa ferramenta pesquisando soluções para sincronizar os contatos do IOS com os contados do Android. Ela não estava relacionada com minha necessidade, porém, como fiquei curioso para ver como funcionava, instalei no celular e logo depois no meu navegador Chrome.&lt;/p&gt;
&lt;p&gt;A proposta da ferramenta é simples, ela indexa suas mensagens de correio do gmail, posts no twitter, status do facebook, dados de arquivos no dropbox, google drive, evernote, dentre outros, e te permite fazer uma busca simples e eficiente de todo o seu conteúdo em nuvem.&lt;/p&gt;
&lt;p&gt;Percebi que essa ferramenta ajuda a resolver algumas situações importantes, são elas:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Quando você não se lembre exatamente quando você postou um link sobre algum assunto no Facebook ou outra rede social, mas precisa encontrar essa informação.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Quando você não consegue encontrar aquele e-mail que você mandou para alguém, o qual havia uma informação importante, porém você se lembra de ter tocado no mesmo assunto em alguma rede social e gostaria de combinar a pesquisa, extrapolando o gmail.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Quando alguém disse que você postou algo sobre um assunto mas você não se lembra se foi no twitter, facebook ou por e-mail, e gostaria de rever esse seu post.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Aqui apresentei apenas três situações que já me ocorreram e foram resolvidas usando o CloudMagic.&lt;/p&gt;
&lt;p&gt;Atualmente ele consegue pesquisar em muitas redes sociais e serviços CLOUD, abaixo alguns exemplos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GMAIL&lt;/li&gt;
&lt;li&gt;GTALK&lt;/li&gt;
&lt;li&gt;EVERNOTE&lt;/li&gt;
&lt;li&gt;DROPBOX&lt;/li&gt;
&lt;li&gt;GOOGLE DRIVE&lt;/li&gt;
&lt;li&gt;GOOGLE APPS&lt;/li&gt;
&lt;li&gt;FACEBOOK&lt;/li&gt;
&lt;li&gt;TWITTER&lt;/li&gt;
&lt;li&gt;ICLOUD&lt;/li&gt;
&lt;li&gt;EXCHANGE&lt;/li&gt;
&lt;li&gt;HOTMAIL&lt;/li&gt;
&lt;li&gt;MSN&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Além destas, existem outras redes, acesse o site do &lt;a href=&#34;https://cloudmagic.com/k/faq&#34;&gt;cloudmagic&lt;/a&gt; para saber mais.&lt;/p&gt;
&lt;p&gt;Veja abaixo um vídeo que explica melhor o funcionamento da ferramenta.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/F1tH-S2HjGg&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;A ferramenta é bacana, recomendo.&lt;/p&gt;
&lt;p&gt;Até 50 pesquisas por mês é de graça, acima disto custa U$ 4.99 por mês.&lt;/p&gt;
&lt;p&gt;Para todas aquelas pessoas que trabalham diariamente em redes sociais (analistas/jornalistas/blogueiros/micro-bloqueiros), esta parece ser uma ferramenta muito eficiente ao preço de um cafezinho expresso por mês.&lt;/p&gt;
&lt;p&gt;Fica a dica!&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>DevOpsDays Brasil 2013</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-18-devopsdays-brasil-2013/</link>
      <pubDate>Thu, 18 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-18-devopsdays-brasil-2013/</guid>
      <description>&lt;figure class=&#34;right&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-04-18/devopsdays.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[DevOps Days Logo]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Tenho o prazer de anunciar que vamos receber o evento DevOpsDays no Brasil em 2013, o evento irá acontecer no dia 17 de Agosto, a cidade escolhida desta vez foi o Rio de Janeiro.&lt;/p&gt;
&lt;p&gt;A &lt;a href=&#34;http://devopsdays.org/events/2013-brazil/propose/&#34;&gt;chamada de trabalhos&lt;/a&gt; está aberta, envie suas propostas, eu já enviei as minhas :)&lt;/p&gt;
&lt;p&gt;O Brasil já recebeu este evento em 2010 em São Paulo, agora novamente teremos a oportunidade de trocar experiências sobre a cultura DevOPs.&lt;/p&gt;
&lt;p&gt;Para maiores informações acesse o site &lt;a href=&#34;http://www.devopsdays.org&#34;&gt;devopsdays&lt;/a&gt; e o &lt;a href=&#34;http://www.devopsdays.org/blog&#34;&gt;blog&lt;/a&gt; do evento.&lt;/p&gt;
&lt;p&gt;Se você não sabe o que significa devops e não conhece este evento, acompanhe o post que eu escrevi explicando o que é &lt;a href=&#34;http://gutocarvalho.net/octopress/2013/03/16/o-que-e-um-devops-afinal/&#34;&gt;devops&lt;/a&gt; para entender melhor o termo e o evento em si.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>How linux is built</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-17-how-linux-is-built/</link>
      <pubDate>Wed, 17 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-17-how-linux-is-built/</guid>
      <description>&lt;p&gt;Eu vi este vídeo hoje (2013-04-17) no Google Plus, há muito tempo eu não encontrava algo sobre o Linux com dados realmente atualizados, parece que finalmente encontrei. Para quem ainda não conhece, ou mesmo para aqueles que querem saber mais sobre o alcance do linux, esse é um vídeo esclarecedor.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/yVpbFMhOAwE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;</description>
    </item>
    
    
    
    <item>
      <title>Mailbox APP</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-17-mailbox-app/</link>
      <pubDate>Wed, 17 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-17-mailbox-app/</guid>
      <description>&lt;p&gt;Há algumas semanas vi um vídeo no site &amp;ldquo;The Verge&amp;rdquo;&amp;quot; sobre esse novo APP de correio - específico para GMAIL - chamado Mailbox, a nova aplicação fez tanto sucesso que o Dropbox comprou a empresa sem pensar duas vezes.&lt;/p&gt;
&lt;p&gt;Quando instalei esta APP, entrei em uma fila para ativação, parece que a procura foi tão grande que eles tiveram que liberar o uso aos poucos para não sobrecarregar sua infra.&lt;/p&gt;
&lt;p&gt;Em apenas seis semanas após o lançamento eles atingiram a marca de 1 milhão de contas de e-mail configuradas, algo respeitável.&lt;/p&gt;
&lt;p&gt;Ontem especificamente percebi que a APP estava liberada para uso, comecei a usar e confesso que gostei da forma proposta pela APP para processar as mensagens, esta APP torna possível zerar sua inbox diariamente, fica a dica.&lt;/p&gt;
&lt;p&gt;Veja o vídeo de divulgação do MailApp&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/CICMxwgm274&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Veja o vídeo &amp;ldquo;Hands On&amp;rdquo; do pessoal do site &amp;ldquo;The Verge&amp;rdquo;.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/FG-h8pDXfoE&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Para quem estava triste com o fim o Sparrow, parece que o MailApp é um bom substituto para o IOS.&lt;/p&gt;
&lt;p&gt;Acesse o blog deles para saber mais =&amp;gt; &lt;a href=&#34;http://www.mailboxapp.com/blog/&#34;&gt;http://www.mailboxapp.com/blog/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A aplicação é FREE e não há mais fila de espera.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Sincronizando contatos entre IOS e Android</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-17-sincronizando-contatos-entre-ios-e-android/</link>
      <pubDate>Wed, 17 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-17-sincronizando-contatos-entre-ios-e-android/</guid>
      <description>&lt;p&gt;Eu uso dois celulares, um iphone 4 (trabalho) e um android S3 (pessoal), desde de 2010 sou usuário apple e sincronizo meus contatos e todo o restante via icloud, porém ao pegar o segundo celular (S3) fiquei com uma grande dificuldade de sincronizar os contatos entre IOS e Android.&lt;/p&gt;
&lt;p&gt;No Macbook eu instalei o KIES que é o software da SAMSUNG para sincronizar contatos, agenda e afins entre OSX e Android, porém, o KIES funciona de forma bem instável no OSX, além disto, ele só puxa as coisas do OSX para o Android e não manda as coisas do Android para o OSX, ou seja, crei um contato no S3, terei que criar na mão no OSX para que depois ele apareça no iphone via icloud.&lt;/p&gt;
&lt;p&gt;Era uma situação bem chata e ficou ainda mais difícil quando coloquei uma ROM personalizada no S3 (cyanogenmod), a partir daí o KIES não reconhece mais seu celular.&lt;/p&gt;
&lt;p&gt;Estava quase retornando para a STOCK ROM (firmware do fabricante) quando pesquisando na Google Play achei um software sensacional para resolver este
problema.&lt;/p&gt;
&lt;p&gt;O Software chama-se &amp;ldquo;&lt;a href=&#34;http://bit.ly/15lVgcB&#34;&gt;SmoothSync for Cloud Contacts&lt;/a&gt;&amp;rdquo;, ele foi escrito por Martin Gajda. Este software permite two-way-sync entre seu Android e iCloud. Sincronizar utilizando este método (two-way-sync), significa que se eu criar algo no Android ele vai aparecer no IOS, se eu criar algo no IOS ele vai aparecer no Android.&lt;/p&gt;
&lt;p&gt;O software é pago, custa o equivalente a um café expresso com um pão de queijo, logo, na minha opinião compensa muito, comprei e recomendo.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Vale a pena usar o Puppet em infra pequena?</title>
      <link>https://archives.gutocarvalho.net/post/2013-04-17-vale-a-pena-usar-o-puppet-em-infra-pequena/</link>
      <pubDate>Wed, 17 Apr 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-04-17-vale-a-pena-usar-o-puppet-em-infra-pequena/</guid>
      <description>&lt;figure class=&#34;right&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/duvidas.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Duvidas]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Hoje eu recebi um e-mail em que me fora perguntado se valia a pena usar o Puppet
em infra pequena. Esta mesma pessoa mencionou que administra uma infra com
cerca e 4 servidores LINUX. Para conseguir responder este tipo de questionamento
eu faço sempre uma reflexão e me pergunto quanto vale &lt;strong&gt;o meu tempo&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;No meu caso, meu tempo é precioso, com ele posso fazer coisas maravilhosas,
posso estudar, posso pesquisar, posso testar novas tecnologias, posso documentar,
posso ensinar, posso executar projetos e além disso posso ter um tempo de
qualidade com minha família, portanto, o meu tempo vale muito.&lt;/p&gt;
&lt;p&gt;Sabendo que meu tempo vale muito, e principalmente sabendo que ele pode ser aproveitado
de diversas formas interessantes - como mencionei acima, penso que investir cerca de 3 a 4 horas
deste tempo para preparar um destes 4 servidores, executando tarefas repetitivas
e manuais, não é realmente a melhor forma de aproveitá-lo.&lt;/p&gt;
&lt;p&gt;Ao usar o Puppet, mesmo em uma infra pequena, eu conseguirei investir só o que é realmente
necessário para aquela tarefa, e farei isso de forma ágil. Ao invés de
consumir horas e as vezes dias do meu precioso tempo, eu consigo fazer a mesma
tarefa poucos em minutos e poderei utilizar o tempo restante para outras atividades.&lt;/p&gt;
&lt;p&gt;{% blockquote %}
É importante entender que além da diminuição de tempo investido em atividades cotidianas, o uso do puppet oferece um maior controle do meu parque, me permite padronizar meus servidores, me permite automatizar atividades e tarefas, me oferece garantia de integridade de minhas configurações, me permite controlar mudanças de forma ágil e segura, principalmente se for um ambiente crítico. O Puppet me ajuda a diminuir o índice de falhas e incidentes, tornando meus ambientes mais disponíveis e estáveis, não importando se eu tenho 4 ou 4 mil máquinas.
{% endblockquote %}&lt;/p&gt;
&lt;p&gt;Portanto, seu o seu tempo também é precioso, o Puppet é a ferramenta ideal para você recuperá-lo,  permitindo inclusive que você passe a agregar valor ao seu negócio e a sua vida, além de deixar seu ambiente muito mais eficiente, ágil e estável.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>O que é DevOps afinal?</title>
      <link>https://archives.gutocarvalho.net/post/2013-03-16-o-que-e-um-devops-afinal/</link>
      <pubDate>Sat, 16 Mar 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-03-16-o-que-e-um-devops-afinal/</guid>
      <description>&lt;figure&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/bluedevops.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Blue DevOps]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;h2 id=&#34;1-papo-sobre-devops&#34;&gt;1. Papo sobre DevOps&lt;/h2&gt;
&lt;p&gt;Hoje vim falar sobre a buzzword &lt;strong&gt;DevOPs&lt;/strong&gt;. Algumas pessoas tem me procurado pelo blog para conversar sobre este termo, e normalmente eles querem que eu responda as seguintes perguntas:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;O que significa DevOps?&lt;/li&gt;
&lt;li&gt;DevOps é um movimento?&lt;/li&gt;
&lt;li&gt;DevOps é uma filosofia, é um conceito ou uma cultura?&lt;/li&gt;
&lt;li&gt;DevOps é uma metodologia?&lt;/li&gt;
&lt;li&gt;DevOps é algum tipo de ambiente ou grupo de ferramentas ?&lt;/li&gt;
&lt;li&gt;O especialista DevOps é um devel que entende de infra?&lt;/li&gt;
&lt;li&gt;O especialista DevOps é um sysadmin que entende de devel?&lt;/li&gt;
&lt;li&gt;DevOps é um cargo? é um setor ou um departamento?&lt;/li&gt;
&lt;li&gt;DevOps só funciona em startups ou serve para o ambiente corporativo?&lt;/li&gt;
&lt;li&gt;O DevOps é algo novo?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ao longo do texto eu pretendo responder a todas estas questões, mas para respondê-las vamos precisar entender algumas coisas antes.&lt;/p&gt;
&lt;h2 id=&#34;2-como-tudo-começou&#34;&gt;2. Como tudo começou?&lt;/h2&gt;
&lt;p&gt;Para que possamos compreender de forma plena, precisamos ir ao cerne desta história. O movimento DevOPs não começou em um lugar só, existem muitos lugares que dão pistas sobre as origens do termo, mas aparentemente as informações mais &lt;a href=&#34;http://itrevolution.com/the-convergence-of-devops/&#34;&gt;concretas&lt;/a&gt; sobre as origens deste movimento nos levam ao ano de 2008. Neste ano, começaram a utilizar o termo &lt;strong&gt;infraestrutura ágil&lt;/strong&gt; em algumas listas de discussão com foco em desenvolvimento ágil, e na mesma época durante evento &lt;strong&gt;Agile 2008&lt;/strong&gt;, surgiram conversas que abordavam o tema metodologia ágil para a administração de infraestrutura, inspirada no modelo ágil de desenvolvimento, no entanto, foi a lista de discussão européia com nome &lt;strong&gt;agile-sysadmin&lt;/strong&gt; que começou a abordar o tema com propriedade, com isso ela ajudou a colocar os primeiros tijolos na ponte que faria a ligação entre developers e sysadmins. Um dos participantes desta lista era Patrick Debois (@patrickdebois), além de muito ativo ele era e ainda é um grande entusiasta do assunto.&lt;/p&gt;
&lt;p&gt;O termo DevOPS só foi criado de fato em 2009 durante a conferência Velocity da O&amp;rsquo;Reilly, nesta conferência John Allspaw (Etsy.com) e Paul Hammond (Typekit) apresentaram o trabalho &lt;strong&gt;10+ Deploys Per Day: Dev and Ops Cooperation at Flickr&lt;/strong&gt;, veja abaixo os slides desta palestra.&lt;/p&gt;
&lt;center&gt;&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/1628368?rel=0&#34; width=&#34;597&#34; height=&#34;486&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px&#34; allowfullscreen webkitallowfullscreen mozallowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;http://www.slideshare.net/jallspaw/10-deploys-per-day-dev-and-ops-cooperation-at-flickr&#34; title=&#34;10+ Deploys Per Day: Dev and Ops Cooperation at Flickr&#34; target=&#34;_blank&#34;&gt;10+ Deploys Per Day: Dev and Ops Cooperation at Flickr&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/jallspaw&#34; target=&#34;_blank&#34;&gt;John Allspaw&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;&lt;/center&gt;&lt;br&gt;
&lt;p&gt;A palestra acima deixou Patrick Debois muito animado, foi então que ele teve a ideia de criar um encontro chamado DevOpsDay, este encontro ocorreu em Ghent no final de 2009, foi um encontro de dois dias e aparentemente foi lá que tudo começou.&lt;/p&gt;
&lt;p&gt;De lá para cá, Patrick Debois, Gildas Le Nadan, Andrew Clay Shafer, Kris Buytaert, JezzHumble, Lindsay Holmwood, John Willis, Chris Read, Julian Simpson, R.I.Piennar (mcollective) e muitos outros levaram o evento para diversas localidades, dentre elas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;New York 2012&lt;/li&gt;
&lt;li&gt;Rome 2012&lt;/li&gt;
&lt;li&gt;Mountain View 2012&lt;/li&gt;
&lt;li&gt;India 2012&lt;/li&gt;
&lt;li&gt;Tokyo 2012&lt;/li&gt;
&lt;li&gt;Austin 2012&lt;/li&gt;
&lt;li&gt;Goteborg 2011&lt;/li&gt;
&lt;li&gt;Bangalore 2011&lt;/li&gt;
&lt;li&gt;Melbourne 2011&lt;/li&gt;
&lt;li&gt;Mountain View 2011&lt;/li&gt;
&lt;li&gt;Boston 2011&lt;/li&gt;
&lt;li&gt;Göteborg 2011&lt;/li&gt;
&lt;li&gt;Sao Paulo 2010&lt;/li&gt;
&lt;li&gt;Hamburg 2010&lt;/li&gt;
&lt;li&gt;Mountain View 2010 (video intro)&lt;/li&gt;
&lt;li&gt;Sydney 2010&lt;/li&gt;
&lt;li&gt;Ghent 2009&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;É importante falar que ao levar o evento para diversos países, estas pessoas foram responsáveis por disseminar
a cultura DevOps pelo globo, com isso, direta ou indiretamente eles se tornaram a força motriz de uma discreta revolução
no mundo da TI.&lt;/p&gt;
&lt;p&gt;Inicialmente a cultura DevOps se mostrou muito presente no ambiente das startups,  porém, algum tempo depois começou a fazer parte do mundo corporativo, aqui neste texto procuro trazer a visão da cultura DevOps no meio corporativo.&lt;/p&gt;
&lt;p&gt;Na abertura do evento DevOpsDay há sempre um vídeo de intro, veja dois deles:&lt;/p&gt;
&lt;p&gt;Ghent 2009&lt;/p&gt;
&lt;iframe width=&#34;420&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/EOveXZhJpr4&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Mountain View 2010&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/a0N2ugDwi5g&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2 id=&#34;3-devops-manifest&#34;&gt;3. DevOps Manifest&lt;/h2&gt;
&lt;p&gt;Apesar de terem organizado o DevOpsDays em diversos países, não foi estabelecido um manifesto para o assunto, logo existem muitas interpretações acerca deste termo.&lt;/p&gt;
&lt;p&gt;Mas antes de argumentar acerca do possível conteúdo de um manifesto DevOps, primeiro temos que entender a dinâmica na relação entre as áreas de infraestrutura (infra) e desenvolvimento (devel).&lt;/p&gt;
&lt;h2 id=&#34;4-analisando-infra-e-devel&#34;&gt;4. Analisando Infra e Devel&lt;/h2&gt;
&lt;p&gt;Para entender melhor o que DevOps significa, precisamos então analisar de forma prática e direta a vida de sysadmins, desenvolvedores e o cotidiano destas áreas, eu espero que isto lhe ajude a compreender melhor o assunto adiante.&lt;/p&gt;
&lt;p&gt;Vamos imaginar - hipoteticamente - uma empresa de comunicação que desenvolve aplicações web em sua maioria para portais de notícias, e em alguns casos também faz aplicações web internas (rh, financeiro, administrativo), nessa empresa o devel trabalha com PHP, PYTHON, RUBY e JAVA.&lt;/p&gt;
&lt;p&gt;Para um melhor entendimento, considere as duas características abaixo como cotidianas nesta empresa fictícia:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;O Devel está começando a trabalhar com metodologias ágeis (pró-ativo, evolutivo e contínuo).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A Infra continua trabalhando no modelo tradicional de administração (manual, caótico e reativo).&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;41-infra-em-foco&#34;&gt;4.1 Infra em foco&lt;/h3&gt;
&lt;p&gt;A infra é composta em parte pelos sysadmins, estes rapazes e moças tem a missão de manter os sistemas funcionando, são eles que fazem os deploys e os rollbacks das aplicações do devel, é responsabilidade deles manter o ambiente de produção intacto.&lt;/p&gt;
&lt;p&gt;Os sysadmins tem que rodar as aplicações, monitorar o funcionamento, a performance, avaliar e propor melhorias de forma a manter as aplicações sob seu cuidado a pleno vapor - rodando de forma rápida e estável, além disto, eles devem planejar as mudanças com cautela, tentando minimizar os riscos envolvidos.&lt;/p&gt;
&lt;p&gt;Eles se preocupam com segurança, estabilidade e principalmente com o acordo de nível de serviço (SLA) de cada produto sob sua responsabilidade, esta preocupação é fundamental para o negócio.&lt;/p&gt;
&lt;p&gt;Entenda que se uma aplicação parar de funcionar isto vai impactar no SLA, podendo significar perdas financeiras significativas relacionadas ao produto, afinal produto fora significa cliente insatisfeito e prejuízo, seja ele financeiro, seja ele institucional, e no caso da sustentação do produto, isto significa que a prestadora do serviço, neste caso a empregadora dos sysadmins, pode ser multada. De toda o jeito, o que ocorre de forma direta é diminuição do valor do negócio.&lt;/p&gt;
&lt;p&gt;Em resumo, a infra (sysadmins) se preocupa em &lt;strong&gt;proteger o valor do négocio&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;42-devel-em-foco&#34;&gt;4.2 Devel em foco&lt;/h3&gt;
&lt;p&gt;O devel é composto em parte por desenvolvedores, estas moças e rapazes trabalham com lógica e criatividade, eles passam boa parte de seu tempo codificando soluções, e focam seu trabalho nos requisitos que o analista conseguiu mapear junto ao cliente.&lt;/p&gt;
&lt;p&gt;Os desenvolvedores estão constantemente criando e aprimorando suas aplicações, com isto novas versões são criadas e precisam ser disponibilizadas, assim seus clientes poderão usufruir dos recursos solicitados.&lt;/p&gt;
&lt;p&gt;Nova versão significa novo deploy, e caso ocorra algum problema, isto irá demandar um rollback, ambos procedimentos envolvem equipes de infra.&lt;/p&gt;
&lt;p&gt;Em resumo, podemos dizer que o devel se preocupa em &lt;strong&gt;aumentar o valor do negócio&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id=&#34;43-onde-está-o-conflito&#34;&gt;4.3 Onde está o conflito?&lt;/h3&gt;
&lt;figure&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/relacao-infra-devel.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Relação Infra e Devel]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Os desenvolvedores querem colocar suas aplicações no ar o mais rápido possível, no entanto os sysadmins querem ter certeza que a aplicação está
estável o suficiente para entrar em produção sem gerar incidentes.&lt;/p&gt;
&lt;p&gt;Nos últimos anos esse conflito foi latente no mundo de TI, algumas empresas tinham regras tão rígidas que só permitiam deploy uma vez por semana - em casos mais rígidos apenas uma vez por mês, tudo isto pensando em proteger o negócio.&lt;/p&gt;
&lt;p&gt;Com o devel mudando de metogologia, nem preciso dizer que esse método de deploy - uma vez por semana - não combina com desenvolvimento ágil, com isso a infra teve que evoluir a fórceps, e quem antes fazia deploy uma vez por semana, teve que aprender a fazer várias vezes por dia.&lt;/p&gt;
&lt;p&gt;É claro que a infra trabalhando com os métodos que estava acostumada (deploy 1 vez por semana e manual) não dava vazão as demandas, e também é óbvio que o devel não possuía uma infra adequada para fazer o desenvolvimento de forma contínua.&lt;/p&gt;
&lt;p&gt;Além de tudo isso, normalmente o devel não conhece e não tem como prever aspectos importantes relativos a infra que fica de cara para o cliente, portanto, quando a aplicação vai para produção, normalmente ocorrem - constantes - pequenos incidentes que geram uma enorme perda de valor no negócio. Traduzindo, são aqueles ajustes na aplicação que precisam ser feitos de última hora pois o ambiente devel é completamente diferente da produção.&lt;/p&gt;
&lt;p&gt;O cliente por sua vez reclama - com razão - e depois a gerência de TI ficava tentando encontrar o dono do problema (caça as bruxas), de um lado devel dizendo que infra é engessada, lenta e que não oferece um ambiente adequado para desenvolverem suas aplicações, do outro lado a infra dizendo que o devel faz código ruim e instável e que não é culpa deles se a aplicação não funciona.&lt;/p&gt;
&lt;p&gt;Eu sou de infra há muitos anos, mas tenho que dizer que a infra devido a culturas arcaicas de administração, heranças do tempo dos mainframes, tem mais culpa no cartório neste cenário, porém o devel também tem seus problemas, afinal, como estão começando a aplicar métodos ágeis, ainda estão criando a cultura de execução de testes e garantia de qualidade (QA).&lt;/p&gt;
&lt;h4 id=&#34;431-incidentes&#34;&gt;4.3.1 Incidentes&lt;/h4&gt;
&lt;p&gt;Quando ocorre algum incidente, você vai ouvir da infra falando para o devel que &lt;strong&gt;o problema não são as máquinas, é o código&lt;/strong&gt;, e certamente o devel vai falar para infra que &lt;strong&gt;o problema não é o código, são as máquinas&lt;/strong&gt;, e provavelmente ainda vão dizer que o sistema &lt;strong&gt;está funcionando no  notebook deles&lt;/strong&gt;, e infelizmente isso será algo cotidiano.&lt;/p&gt;
&lt;figure class=&#34;right&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/opsburn.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Ops Burn]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Espero que neste ponto você já esteja enxergando o problema.&lt;/p&gt;
&lt;p&gt;É preciso entender que infra e o devel trabalham em nichos, cada um no seu quadrado, cada um em sua realidade e nenhum deles está muito disposto a mudar sua cultura, nenhum deles está disposto a ceder. A infra não conhece o devel e não sabe como mudar para ajudá-los, o devel não conhece a infra e não sabe como pedir o que precisam.&lt;/p&gt;
&lt;p&gt;No final das contas, as pessoas não conseguem estabelecer uma forma sadia e eficiente de comunicação, e com isso, não existe trabalho colaborativo entre estas duas áreas.&lt;/p&gt;
&lt;h3 id=&#34;44-o-combustível-do-conflito&#34;&gt;4.4 O combustível do conflito&lt;/h3&gt;
&lt;figure&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/no.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Combustivel do Conflito No]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Acima eu apresentei o conflito comum entre as áreas, porém existe o combustível que o mantém acesso, e esse combustível é o comportamento do sysadmin, portanto, há de fato uma razão para se ter tanto ódio deles, vamos a elas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Eles falam não&lt;/li&gt;
&lt;li&gt;Eles falam não pela segunda vez&lt;/li&gt;
&lt;li&gt;Eles falam não pela terceira vez&lt;/li&gt;
&lt;li&gt;Eles falam não o tempo todo por diversas razões, para diversos pedidos&lt;/li&gt;
&lt;li&gt;Eles demoram, atrasam e perdem prazos de atendimento&lt;/li&gt;
&lt;li&gt;Eles se recusam a quebrar as coisas mesmo que seja para encontrar o problema&lt;/li&gt;
&lt;li&gt;Eles se preocupam com UPTIME e não com o negócio&lt;/li&gt;
&lt;li&gt;Eles acham que o devel só quer saber de perfumarias e coisas do gênero&lt;/li&gt;
&lt;li&gt;Eles não se esforçam para ajudar o devel a encontrar o problema&lt;/li&gt;
&lt;li&gt;Eles acham que o problema do devel não é problema deles&lt;/li&gt;
&lt;li&gt;Eles não conseguem enxergar o negócio e não enxergam que infra e devel são parte de um todo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;E isso tudo faz parte daquele comportamento arcaico que eu já mencionei, eu quis reforçar isto pois é bom mostrar as raizes de um problema para ajudar na reflexão do que é preciso mudar.&lt;/p&gt;
&lt;p&gt;Veja que tal comportamento é inaceitável e incompatível com o mundo de hoje, mesmo assim ainda é muito comum encontrar pessoas que possuem este
tipo de atitude e perfil.&lt;/p&gt;
&lt;h3 id=&#34;45-uma-pitada-de-realidade&#34;&gt;4.5 Uma pitada de realidade&lt;/h3&gt;
&lt;p&gt;Lembra que eu disse que a infra se preocupa em &lt;strong&gt;proteger o negócio&lt;/strong&gt; e o devel se preocupa com as &lt;strong&gt;formas de agregar valor ao negócio&lt;/strong&gt;?&lt;/p&gt;
&lt;p&gt;Esqueça o que eu disse, isso funcionava nos anos 70/80/90, mas hoje isso não é suficiente.&lt;/p&gt;
&lt;p&gt;A infra deve entender que sua obrigação é oferecer os meios para fazer o negócio fluir, e isso também é papel do devel.&lt;/p&gt;
&lt;p&gt;Ambas equipes precisam mudar a forma de pensar e de agir, porém é preciso ter consciência de que mudanças estão associadas a problemas, uma mudança pode quebrar seu produto e afetar o seu negócio.&lt;/p&gt;
&lt;p&gt;Então qual é a receita mágica?&lt;/p&gt;
&lt;p&gt;Como mudar sem afetar o negócio?&lt;/p&gt;
&lt;h3 id=&#34;46-mudanças-necessárias&#34;&gt;4.6 Mudanças necessárias&lt;/h3&gt;
&lt;p&gt;A infra previsa evoluir, e precisa fazer isto rapidamente.&lt;/p&gt;
&lt;p&gt;O devel predisa ter controle de todas as fases do deploy.&lt;/p&gt;
&lt;p&gt;A infra precisa começar a trabalhar de forma automatizada e dinâmica, precisa ser mais veloz para subir novos ambientes ou mesmo reconstruir/duplicar os ambientes existentes para suprir as necessidades do devel, não dá mais para trabalhar de forma manual e usar as mesmas metodologias da época dos mainframes.&lt;/p&gt;
&lt;p&gt;O devel precisa conseguir passar para infra suas necessidades de forma clara, e tem que se esforçar para fazer a infra entender isto - e eles não vão entender na primeira vez.&lt;/p&gt;
&lt;h3 id=&#34;461-busca-de-soluções&#34;&gt;4.6.1 Busca de soluções&lt;/h3&gt;
&lt;p&gt;E foi a busca de soluções para estas necessidades que motivou importantes discussões no mundo da TI, foi então que começaram a falar de &amp;lsquo;Infraesturura ágil&amp;rsquo; no ano de 2008, vamos agora entender o que é isso.&lt;/p&gt;
&lt;h2 id=&#34;5-infraestrutura-ágil&#34;&gt;5. Infraestrutura ágil&lt;/h2&gt;
&lt;h3 id=&#34;51-infraestrutua-como-código&#34;&gt;5.1 Infraestrutua como código&lt;/h3&gt;
&lt;p&gt;A discussão acerca de infraestrutura ágil ganhou força com o crescimento de duas tendências, são elas &lt;strong&gt;virtualization&lt;/strong&gt; e &lt;strong&gt;cloud computing&lt;/strong&gt;. Desde 2003 empresas começaram a conviver com ambientes virtualizados, logo um parque com poucas máquinas físicas poderia se tornar um parque com dezenas máquinas virtuais, e após o recente  advento da Cloud, dezenas de máquinas virtuais podem se tornar centenas ou milhares de instâncias a serem administradas na nuvem.&lt;/p&gt;
&lt;p&gt;Não havia mais espaço para se trabalhar infraestrutrua da forma tradicional, foi necessário dar um passo a diante e pensar em infraestrutura como código, principalmente quando paramos para analisar o recente boom das startups, empresas pequenas com produtos de enorme alcance, produtos que rodam em centenas de instâncias na nuvem, atendendo milhões de usuários, e tudo isso é administrado por equipes mínimas.&lt;/p&gt;
&lt;p&gt;O objetivo é fazer deploy não só de aplicações, mas deploy de infraestrutura de forma rápida e controlada.&lt;/p&gt;
&lt;p&gt;Isso significa que se você precisa subir um ambiente JBOSS você vai fazer isto em poucos minutos e não em dias.&lt;/p&gt;
&lt;h3 id=&#34;52-ferramentas-de-infraestrutura-ágil&#34;&gt;5.2 Ferramentas de infraestrutura ágil&lt;/h3&gt;
&lt;p&gt;Quando se fala em infraestrutura ágil o que vem a mente são ferramentas, e de fato elas são parte disto.&lt;/p&gt;
&lt;p&gt;Basicamente temos três tipos de ferramentas, são elas:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Orquestradores&lt;/li&gt;
&lt;li&gt;Ferramentas para gerenciamento de configurações&lt;/li&gt;
&lt;li&gt;Ferramentas para bootstrapping e provisionamento&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Orquestradores são ferramentas que nos permitem executar comandos e controlar nodes/instâncias de nosso parque em tempo real. Alguns destes são Fabric,
Capistano, Func e Mcollective.&lt;/p&gt;
&lt;p&gt;Ferramentas de gerência de configuração normalmente controlam estados de seu sistema, ajudam a centralizar toda as configurações e facilitam a administração e criação de novos ambientes. Algumas delas são Puppet, Chef, Cfegine e Salt.&lt;/p&gt;
&lt;p&gt;Ferramentas de bootstrapping são aquelas que nos ajudam a instalar um sistema operacional seja em uma máquina física, seja em um máquina virtual, seja em uma instância na nuvem, dentre elas temos alguns provedores de CLOUD como AWS e Rackspace que já oferecem isso nativamente, existem também ferramentas como o Kickstart e Cobbler que atuam neste segmento.&lt;/p&gt;
&lt;p&gt;A combinação destes três tipos de ferramentas nos permite ter o que chamamos de infraestrutura ágil.&lt;/p&gt;
&lt;p&gt;Mas apesar da qualidade e dos ganhos em utilizar tais tecnologias, a ferramenta sozinha não resolverá seus problemas, é preciso mudar a cultura e a forma de trabalhar a infraestrutura.&lt;/p&gt;
&lt;h3 id=&#34;53-equipe-de-infraestrutura-ágil&#34;&gt;5.3 Equipe de infraestrutura ágil&lt;/h3&gt;
&lt;p&gt;Equipes que trabalham com infraestrutura ágil também precisam de um método diferenciado de organização, normalmente estas equipes estão trabalhando seguindo estes eixos:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Versionamento do código e arquivos de configuração (git)&lt;/li&gt;
&lt;li&gt;Organização de atividades de forma visual (KANBAN BOARD)&lt;/li&gt;
&lt;li&gt;Trabalho em pares&lt;/li&gt;
&lt;li&gt;Divisão das atividades em sprints&lt;/li&gt;
&lt;li&gt;Reuniões ágeis diárias (standup meeting de 10 minutos - em pé)&lt;/li&gt;
&lt;li&gt;Reuniões ágeis periódicas (retrospectiva e planejamento de sprints).&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Parece com SCRUM mas não é, mas é fortemente inspirado nele e no Kanban.&lt;/p&gt;
&lt;h3 id=&#34;54-então-devops-e-infraestrutura-ágil-são-a-mesma-coisa&#34;&gt;5.4 Então DevOps e Infraestrutura ágil são a mesma coisa?&lt;/h3&gt;
&lt;p&gt;Não, infraestrutura ágil é parte da cultura DevOps.&lt;/p&gt;
&lt;p&gt;DevOps depende de infraestutura ágil, mas ainda tem muito mais.&lt;/p&gt;
&lt;p&gt;Apesar da evolução da infra, ainda falta algo que conecte as duas áreas, precisamos de um agente de mudanças principalmente
no meio corporativo.&lt;/p&gt;
&lt;h2 id=&#34;6-cultura-devops&#34;&gt;6. Cultura DevOps&lt;/h2&gt;
&lt;p&gt;Chegou a hora de entrar neste assunto, agora nós vamos aprofundar nossos estudos em relação a cultura DevOps.&lt;/p&gt;
&lt;h3 id=&#34;61-características-da-cultura-devops&#34;&gt;6.1 Características da cultura DevOps&lt;/h3&gt;
&lt;p&gt;Para entender a cultura devops sem fazer um texto muito longo, vou pontuar as suas principais características - em minha opinião.&lt;/p&gt;
&lt;h4 id=&#34;611-em-relação-as-características-da-cultura&#34;&gt;6.1.1 Em relação as características da cultura&lt;/h4&gt;
&lt;p&gt;Patrick Debois (foi quem cunhou o termo) diz que DevOPs essencialmente é uma cultura, e a descreve utilizando 4 eixos, são eles:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cultura
&lt;ul&gt;
&lt;li&gt;Colaboração&lt;/li&gt;
&lt;li&gt;Fim das divisões&lt;/li&gt;
&lt;li&gt;Relação saudável entre as áreas&lt;/li&gt;
&lt;li&gt;Mudança de comportamento&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Automação
&lt;ul&gt;
&lt;li&gt;Deploy&lt;/li&gt;
&lt;li&gt;Controle&lt;/li&gt;
&lt;li&gt;Monitoração&lt;/li&gt;
&lt;li&gt;Gerência de configuração&lt;/li&gt;
&lt;li&gt;Orquestração&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Avaliação
&lt;ul&gt;
&lt;li&gt;Métricas&lt;/li&gt;
&lt;li&gt;Medições&lt;/li&gt;
&lt;li&gt;Performance&lt;/li&gt;
&lt;li&gt;Logs e integração&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Compartilhamento
&lt;ul&gt;
&lt;li&gt;O feedback é tudo&lt;/li&gt;
&lt;li&gt;Boa comunicação entre a equipe&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Eu prentendo detalhar um pouco mais estes eixos, vamos lá.&lt;/p&gt;
&lt;h4 id=&#34;612-em-relação-as-características-técnicas&#34;&gt;6.1.2 Em relação as características técnicas&lt;/h4&gt;
&lt;p&gt;Um ambiente DevOps deve ter/possuir/oferecer/permitir:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Infraestrutura como código&lt;/li&gt;
&lt;li&gt;Orquestração de servidores&lt;/li&gt;
&lt;li&gt;Gerência de configurações&lt;/li&gt;
&lt;li&gt;Provisionamento dinâmico de ambientes&lt;/li&gt;
&lt;li&gt;Controle de versões compartilhado entre infra e devel&lt;/li&gt;
&lt;li&gt;Ambiente de desenvolvimento, teste e produção (no mínimo)&lt;/li&gt;
&lt;li&gt;O ambiente de devel deve possibilitar TDD&lt;/li&gt;
&lt;li&gt;Infra deve participar dos projetos desde o início [1]&lt;/li&gt;
&lt;li&gt;Infra deve participar das reuniões de devel [2]&lt;/li&gt;
&lt;li&gt;Devel deve participar das reuniões de infra [3]&lt;/li&gt;
&lt;li&gt;Ambiente de entrega contínua [4]&lt;/li&gt;
&lt;li&gt;Os desenvolvedores devem conseguir fazer o deploy sem interferência da infra [5]&lt;/li&gt;
&lt;li&gt;Monitoramento eficaz com processamento adequado dos eventos e métricas&lt;/li&gt;
&lt;li&gt;Capacidade de resposta rápida a incidentes e problemas&lt;/li&gt;
&lt;li&gt;Backup e restore confiável&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[1] O devel precisa envolver a infra nos projetos desde o início - isso significa participar das reuniões técnicas ou SCRUM, afinal sem a infra não há projeto, e além disto, quanto mais problemas foram resolvidos durante o projeto - com ajuda da infra, menos problemas serão expostos aos clientes.&lt;/p&gt;
&lt;p&gt;[2] A infra também precisa observar quais são as metas da empresa a longo prazo, principalmente aquelas ligadas ao devel, pois enxergando onde o devel quer chegar, ela pode se programar melhor para ter certeza que a infraestrutura tecnológica estará preparada para atendê-los quando esse momento chegar.&lt;/p&gt;
&lt;p&gt;[3] A infra precisa envolver o devel em suas reuniões técnicas para que o devel entenda e tenha ciência da realidade da infra, assim eles vão conseguir enxergar suas qualidades, atribuições, planos de melhorias, atualizações programadas, agendas de manutenção, eles vão conhecer os recursos disponíveis e também descobrir a limitações da equipe, sejam elas técnicas, sejam materiais. Além disto, o devel pode ser um grande aliado da infra na solução de problemas, afinal o conhecimento que o devel traz pode ajudá-los a melhorar a forma com que administram seu ambiente, tornando este processo mais eficiente.&lt;/p&gt;
&lt;p&gt;[4] O devel precisa adotar alguma metodologia de entrega ou desenvolvimento contínuo e a infra precisa entender esse processo para que juntos criem os ambientes com as ferramentas certas.&lt;/p&gt;
&lt;p&gt;[5] A infra precisa ceder um pouco e evoluir, precisa oferecer ao devel um ambiente adequado onde eles sejam o dono do produto, onde o devel consiga fazer todo o ciclo de desenvolvimento de forma direta, o devel precisa conseguir gerar e controlar o código, precisa fazer o commit com segurança, precisa fazer o build, testar o build, validar a aplicação e entregar a nova versão de forma transparente sem que para isso precise passar por um burocrático e engessado processo de mudança.&lt;/p&gt;
&lt;h4 id=&#34;613-em-relação-aos-valores-humanos&#34;&gt;6.1.3 Em relação aos valores humanos&lt;/h4&gt;
&lt;p&gt;Para a adoção da cultura funcionar, a equipe precisa observar e exercitar os seguintes valores:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Confiança no trabalho de sua equipe&lt;/li&gt;
&lt;li&gt;Respeito pessoal e profissional por todos da equipe&lt;/li&gt;
&lt;li&gt;Sinceridade sobre eventos e incidentes ocorridos&lt;/li&gt;
&lt;li&gt;Honestidade sobre as causas dos incidentes (não esconda nada da sua equipe)&lt;/li&gt;
&lt;li&gt;Entendimento de que o problema é responsabilidade de todos&lt;/li&gt;
&lt;li&gt;Entendimento de a solução é responsabilidade de todos&lt;/li&gt;
&lt;li&gt;Entendimento de que os resultados são o reflexo do trabalho de toda a equipe&lt;/li&gt;
&lt;li&gt;Comunicação efetiva e dinâmica&lt;/li&gt;
&lt;li&gt;Postura construtiva sempre&lt;/li&gt;
&lt;li&gt;Espírito de colaboração&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;614-em-relação-a-forma-de-trabalho&#34;&gt;6.1.4 Em relação a forma de trabalho&lt;/h4&gt;
&lt;p&gt;É recomendavél que a equipe:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Internalize e adapte métodos ágeis como KABAN e SCRUM para seu dia-a-dia&lt;/li&gt;
&lt;li&gt;Aprofunde estudos em entrega contínua&lt;/li&gt;
&lt;li&gt;Aprofunde estudos em gerência de configurações e orquestração&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Acho que é isso, características técnicas, valores humanos e forma de trabalhar, espero que tenha ficado claro para você.&lt;/p&gt;
&lt;h3 id=&#34;62-aplicando-a-cultura&#34;&gt;6.2 Aplicando a cultura&lt;/h3&gt;
&lt;p&gt;Após observar as principais características deste movimento, normalmente pensamos em como aplicar isto em nosso meio. Para
ajudar na reflexão vamos avaliar o meio startup e o meio corporativo.&lt;/p&gt;
&lt;h4 id=&#34;621-a-realidade-no-ambiente-startup&#34;&gt;6.2.1 A realidade no ambiente startup&lt;/h4&gt;
&lt;p&gt;A cultura DevOPs combina muito com startups, nestes locais normalmente já se trabalha desenvolvimento utilizando metologias
ágeis, foi inclusive neste nicho em que começaram a discutir infraestrutura ágil - a precursora do movimento devops,
portanto, as pessoas deste meio conseguem absorver os conceitos e a cultura DevOPs sem grandes dificuldades,
eles conseguem compreender os preceitos de colaboração e feedback pois já fazem isto em seu dia-a-dia.&lt;/p&gt;
&lt;p&gt;Quem está uma startup não tem as amarras e vícios da coporação, este é um grande facilitador e não é necessário
nenhum tipo de intervenção para internalizar a cultura, a partir do estímulo de um líder as pessoas começarão
a estudar e aplicar DevOPs naturalmente.&lt;/p&gt;
&lt;p&gt;Na startup normalmente não existe divisões, departamentos, todos trabalham juntos e isso também é um facilitador, afinal
não existem barreiras para se comunicar.&lt;/p&gt;
&lt;h4 id=&#34;622-a-realidade-no-ambiente-corporativo&#34;&gt;6.2.2 A realidade no ambiente corporativo&lt;/h4&gt;
&lt;p&gt;A corporação não funciona como a startup, lá existe burocracia e o uso vicioso de métodos ultrapassados, portanto
não bastará o estímulo da alta hieraquia para que equipes de infra e devel comecem a vivenciar a cultura DevOPs, neste tipo
de ambiente, em minha opinião pessoal e profissional, é necessário intervir cirurgicamente para conseguir internalizar
a cultura DevOps.&lt;/p&gt;
&lt;p&gt;Em resumo, você precisa trazer alguém - de fora - que conhece DevOP para que esta pessoa passe a contaminar os demais.&lt;/p&gt;
&lt;p&gt;Esse processo é lento, mas se o especialista tiver os meios e o apoio do alto escalão, mudanças fantásticas poderão ocorrer.&lt;/p&gt;
&lt;h3 id=&#34;63-o-especialista-devops-no-meio-corporativo&#34;&gt;6.3 O especialista DevOps no meio corporativo&lt;/h3&gt;
&lt;p&gt;Ele foi trazido para atuar como um agente de mudanças, ele precisa contaminar as áreas e mostrar que a cultura DevOps funciona.&lt;/p&gt;
&lt;h4 id=&#34;631-característica-gerais-de-um-especialista-devops-em-2013&#34;&gt;6.3.1 Característica gerais de um especialista DevOps em 2013&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Está na casa dos 30 anos ou mais&lt;/li&gt;
&lt;li&gt;É um profissional sênior em infraestrutura&lt;/li&gt;
&lt;li&gt;Tem um bom background em desenvolvimento&lt;/li&gt;
&lt;li&gt;Tem um bom background em metodologias ágeis&lt;/li&gt;
&lt;li&gt;Tem sólidos conhecimentos em soluções opensource e similares&lt;/li&gt;
&lt;li&gt;Trabalha intensamente com automação e infraestrutura como código&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;632-onde-esse-especialista-atua&#34;&gt;6.3.2 Onde esse especialista atua?&lt;/h4&gt;
&lt;p&gt;Este especialista em DevOps terá um pé na infra e outro no devel, em alguns casos também terá o pé na área de garantia de qualidade (QA).&lt;/p&gt;
&lt;figure&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/devops.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[DevOps]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Ele é a cola que faltava para unir infra, devel e qualidade.&lt;/p&gt;
&lt;h4 id=&#34;633-como-esse-especialista-atua&#34;&gt;6.3.3 Como esse especialista atua?&lt;/h4&gt;
&lt;p&gt;Ele será a ponte entre as áreas de infra e devel, ele conhece a infra a fundo e entede de forma ampla processos de desenvolvimento ágil.&lt;/p&gt;
&lt;h5 id=&#34;6331-pé-no-devel&#34;&gt;6.3.3.1 Pé no devel&lt;/h5&gt;
&lt;p&gt;Ele participa dos projetos de desenvolvimento desde o seu nascimento, seu foco é oferecer os recursos para os
desenvolvedores trabalhem da forma mais eficiente, além disto, com sua ótica de infra ele toma todas as precauções para que os aspectos de segurança, monitoramento, eficiência e escalabilidade sejam observados desde o início do projeto.&lt;/p&gt;
&lt;p&gt;O DevOps vai ainda estudar todo o processo de desenvolvimento e definir - em conjunto com o devel - as ferramentas que irão permitir um processo de desenvolvimento e entrega contínua. Após definir ele vai instalar e manter esse infra.&lt;/p&gt;
&lt;p&gt;Alguns DevOps conseguem até avaliar o código do produto e enxergar problemas de performance, esse tipo de visão sistêmica e raciocínio rápido são diferencias importantes para uma entrega com mais qualidade.&lt;/p&gt;
&lt;h5 id=&#34;6331-pé-na-infra&#34;&gt;6.3.3.1 Pé na infra&lt;/h5&gt;
&lt;p&gt;Na infra ele é o principal agente de mudanças, é ele que vai puxar a fila para iniciar a implantação de uma
infraestrutura ágil, ele domina as ferramentas de orquestração, gerência de configuração e provisionamento
e vai usar esse conhecimento para que a equipe passe a trabalhar a infraestrutura como código.&lt;/p&gt;
&lt;p&gt;Este profissional também vai ajudá-los a mudar seu comportamento e cultura, ele vai orientá-los nos métodos
ágeis de execução de atividades, aqueles inspirados no SCRUM e KANBAN.&lt;/p&gt;
&lt;h3 id=&#34;64-ele-fica-na-infra-ou-no-devel&#34;&gt;6.4 Ele fica na infra ou no devel?&lt;/h3&gt;
&lt;p&gt;Para internalizar DevOPs, normalmente estas barreiras não existem, infra e devel devem habitar o mesmo espaço, sem
paredes, sem divisórias, todos na mesma sala, isso é fundamental para extinguir os nichos e criar uma equipe mais unida e coesa.&lt;/p&gt;
&lt;p&gt;Respondendo a pergunta, ele deve ficar junto com as duas equipes se for possível, esse é o melhor dos mundos.&lt;/p&gt;
&lt;p&gt;Se não for possível ficarem todos juntos, o especialista deve se esforçar para interagir com as duas equipes diariamente.&lt;/p&gt;
&lt;p&gt;Ele vai ser o agente de mudanças até que infra e devel comecem a entender e adotar a cultura de forma natural.&lt;/p&gt;
&lt;h2 id=&#34;7-quais-os-ganhos-em-adotar-a-cultura-devops&#34;&gt;7. Quais os ganhos em adotar a cultura DevOPs?&lt;/h2&gt;
&lt;p&gt;Vamos avaliar dentro da ótica de cada área o que melhora com a adoção da cultura DevOPs.&lt;/p&gt;
&lt;h3 id=&#34;71-ganhos-para-a-infra&#34;&gt;7.1 Ganhos para a infra&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Infraestrutua como código (equipe para de administrar e passa a desenvolver a infra)&lt;/li&gt;
&lt;li&gt;Infra mais eficiente e rápida usando métodos ágeis&lt;/li&gt;
&lt;li&gt;Equipe de Infra mais organizada&lt;/li&gt;
&lt;li&gt;Equipe de Infra se comunicando melhor&lt;/li&gt;
&lt;li&gt;Infra fazendo mais em menos tempo com menos gente&lt;/li&gt;
&lt;li&gt;Ambientes de  gerência de configuração, orquestração e provisionamento implantados&lt;/li&gt;
&lt;li&gt;Deploys de infra (novos ambientes) mais rápidos e seguros =&amp;gt; entrega rápida&lt;/li&gt;
&lt;li&gt;Ambiente padronizado e sob-controle&lt;/li&gt;
&lt;li&gt;Feedback rápido em todas as atividades de infra&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;72-ganhos-para-o-devel&#34;&gt;7.2 Ganhos para o devel&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Devel tem ambiente mais adequado para trabalhar (dev/teste/prod)&lt;/li&gt;
&lt;li&gt;Devel passa a contar com ambiente de desenvolvimento contínuo&lt;/li&gt;
&lt;li&gt;Devel passa a contar com testes automatizados&lt;/li&gt;
&lt;li&gt;Deploys de apps (novas versões) mais rápidos e seguros =&amp;gt; entrega rápida&lt;/li&gt;
&lt;li&gt;Feedback rápido em todas as fases de desenvolvimento&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;73-ganhos-mútuos-infradevel&#34;&gt;7.3 Ganhos mútuos Infra/Devel&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Acaba a divisão Infra vs Devel (acaba a guerra)&lt;/li&gt;
&lt;li&gt;Infra participa dos projetos e acompanha de perto tudo o que acontece&lt;/li&gt;
&lt;li&gt;Infra participando resulta em melhor planejamento do ambiente de produção&lt;/li&gt;
&lt;li&gt;Infra participando resulta em monitoramento mais eficaz da aplicação&lt;/li&gt;
&lt;li&gt;Devel começa a compreender melhor a infra e isso resulta em um produto melhor&lt;/li&gt;
&lt;li&gt;Equipes trabalhando em conjunto para aumentar o valor do negócio&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;74-ganhos-para-a-empresa&#34;&gt;7.4 Ganhos para a empresa&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Melhor comunicação entre devel e infra (diminuição de conflitos)&lt;/li&gt;
&lt;li&gt;Soluções rodando com maior estabilidade e desempenho&lt;/li&gt;
&lt;li&gt;Entregas mais rápidas&lt;/li&gt;
&lt;li&gt;Menor tempo de paradas&lt;/li&gt;
&lt;li&gt;Diminuição de incidentes&lt;/li&gt;
&lt;li&gt;Diminuição de custos&lt;/li&gt;
&lt;li&gt;Diminuição de riscos&lt;/li&gt;
&lt;li&gt;Aumento do valor do negócio&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;8-amarrando-as-pontas&#34;&gt;8. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Vamos partir para perguntas e respostas no melhor estilo FAQ.&lt;/p&gt;
&lt;h3 id=&#34;81-indo-direto-ao-ponto-e-respondendo-as-perguntas-do-início&#34;&gt;8.1 Indo direto ao ponto (e respondendo as perguntas do início)&lt;/h3&gt;
&lt;p&gt;Respondendo sobre o termo DevOps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;DevOps está diretamente relacionado a um melhor feedback entre as áreas de TI.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps é um movimento, é um conceito, é uma cultura e uma filosofia, e não existe uma explicação fácil.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps possibilita diminuição dos riscos de mudanças através do uso de um ferramental adequado e adoção de uma cultura específica.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps busca entregar sistemas melhores, com menor custo, fazendo isto de forma mais rápida e com menor risco.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps envolve a área de Infra e Devel primáriamente.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps é pura metodologia ágil tando na Infra quanto no Devel.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps só funciona se as equipes de infra e devel estiverem dispostas a ceder, mudar sua cultura e método de trabalho.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOPs não é um cargo, tão pouco um setor ou departamento, é uma cultura.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps não está restrito ao ambiente das startups, é possível utilizar essa cultura no meio corporativo.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps não é algo novo, as boas práticas estão ai desde de sempre, logo esse &amp;lsquo;juntado&amp;rsquo; de práticas não é novidade para muita gente, mas para alguns serve como uma boa referência para aplicar mudanças necessárias.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Respondendo sobre o especialista em DevOps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;O especialista em DevOps de hoje é normalmente alguém que conhece muito de infra e tem uma base sólida de devel.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;O especialista em DevOps também pode ser alguém que veio do devel e que tem uma base sólida de infra (esse geralmente é mais completo).&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;82-quero-ser-um-devops-e-não-sei-por-onde-começar&#34;&gt;8.2 Quero ser um DevOps e não sei por onde começar&lt;/h3&gt;
&lt;p&gt;Não há um tutorial para isto, minha recomendação é que você estude desenvolvimento ágil e procure entender o processo
de desenvolvimento do local onde você trabalha, estude ferramentas para desenvolvimento contínuo, estude ferramentas
de gerência de configuração, orquestração e provisionamento, fazendo isto você poderá dar os primeiros passos como
entusiasta da cultura DevOps e estará apto a atuar em seu ambiente, você poderá agir como uma
ponte entre as áreas de devel e infra, e principalmente, poderá modernizar os processos e o ambiente de infra.&lt;/p&gt;
&lt;h3 id=&#34;83-eu-trabalho-com-infra-ágil-sou-um-devops&#34;&gt;8.3 Eu trabalho com infra ágil, sou um DevOps?&lt;/h3&gt;
&lt;p&gt;Não existe uma entidade certificadora, uma prova ou alguém que possa lhe conceder este título,
não existe um manual de conduta para dizer se você é um DevOps ou não, mas em 2013 é bastante comum encontrar
profissionais que estão estudando infraestruta ágil e se denominando DevOps.&lt;/p&gt;
&lt;p&gt;Se você está buscando melhorar seu ambiente, entregar mais rápido, entregar algo com mais qualidade,
algo que minimize custos, algo que diminua riscos, algo que envolva automatização pesada, se você trabalha infraestrutura como código, se
você está atuando como um agente de mudanças em sua equipe, penso que DevOps é um termo adequado para descrever o seu trabalho,
mesmo que não esteja diretamente envolvido com uma equipe de Devel.&lt;/p&gt;
&lt;h3 id=&#34;84-não-existe-receita-mágica-ou-caminho-rápido&#34;&gt;8.4 Não existe receita mágica ou caminho rápido&lt;/h3&gt;
&lt;p&gt;Como eu já mencionei não existe uma metodologia clara, DevOps ainda é um movimento em constante construção e definição, eu citei uma série de melhorias que fazem parte da cultura DevOps, cabe a cada empresa ou a cada gestor estudar e descobrir a melhor forma de combinar essas pequenas receitas técnicas e aplicar em seu ambiente.&lt;/p&gt;
&lt;p&gt;Espero que este artigo tenha te ajudado a entender melhor a cultura DevOPs.&lt;/p&gt;
&lt;h2 id=&#34;9-referências&#34;&gt;9. Referências&lt;/h2&gt;
&lt;p&gt;Sites&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.kartar.net/2010/02/what-devops-means-to-me/&#34;&gt;http://www.kartar.net/2010/02/what-devops-means-to-me/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://itrevolution.com/the-convergence-of-devops/&#34;&gt;http://itrevolution.com/the-convergence-of-devops/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://devopsdays.org/events/&#34;&gt;http://devopsdays.org/events/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://devopsweekly.com&#34;&gt;http://devopsweekly.com&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Slides&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.slideshare.net/jallspaw/10-deploys-per-day-dev-and-ops-cooperation-at-flickr&#34;&gt;http://www.slideshare.net/jallspaw/10-deploys-per-day-dev-and-ops-cooperation-at-flickr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.slideshare.net/KrisBuytaert/devops-the-future-is-here-its-just-not-evenly-distributed-yet&#34;&gt;http://www.slideshare.net/KrisBuytaert/devops-the-future-is-here-its-just-not-evenly-distributed-yet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.slideshare.net/jedi4ever/devops-is-a-verb-its-all-about-feedback-13174519&#34;&gt;http://www.slideshare.net/jedi4ever/devops-is-a-verb-its-all-about-feedback-13174519&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.slideshare.net/jedi4ever/devops-the-war-is-over-if-you-want-it&#34;&gt;http://www.slideshare.net/jedi4ever/devops-the-war-is-over-if-you-want-it&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.slideshare.net/jedi4ever/devops-tools-fools-and-other-smart-things&#34;&gt;http://www.slideshare.net/jedi4ever/devops-tools-fools-and-other-smart-things&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://lanyrd.com/2012/berlindevops-july/swzgt/#link-kryx&#34;&gt;http://lanyrd.com/2012/berlindevops-july/swzgt/#link-kryx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.slideshare.net/wickett/the-devops-way-of-delivering-results-in-the-enterprise&#34;&gt;http://www.slideshare.net/wickett/the-devops-way-of-delivering-results-in-the-enterprise&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fonte das imagens&lt;/p&gt;
&lt;p&gt;[1] Dev OPs: &lt;a href=&#34;https://devcentral.f5.com/blogs/us/devops-is-not-all-about-automation&#34;&gt;https://devcentral.f5.com/blogs/us/devops-is-not-all-about-automation&lt;/a&gt;&amp;lt;br
[2] Rugby: &lt;a href=&#34;http://imgfave.com&#34;&gt;http://imgfave.com&lt;/a&gt;  &lt;br&gt;
[3] Ops Burn: &lt;a href=&#34;http://devops.com&#34;&gt;http://devops.com&lt;/a&gt;&lt;br&gt;
[4] Combusível: &lt;a href=&#34;http://www.huffingtonpost.com&#34;&gt;www.huffingtonpost.com&lt;/a&gt;&lt;br&gt;
[5] DevOps Diagram: &lt;a href=&#34;http://www.skybotsoftware.com/skynews/2012/07/24/why-devops-more-trend&#34;&gt;http://www.skybotsoftware.com/skynews/2012/07/24/why-devops-more-trend&lt;/a&gt;&lt;br&gt;&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>HAPROXY balanceando JBOSS</title>
      <link>https://archives.gutocarvalho.net/post/2013-03-15-haproxy-balanceando-jboss/</link>
      <pubDate>Fri, 15 Mar 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-03-15-haproxy-balanceando-jboss/</guid>
      <description>&lt;p&gt;Este post estava encostado há algum tempo, finalmente consegui tempo para publicá-lo.&lt;/p&gt;
&lt;p&gt;Há alguns meses um leitor me pediu ajuda com o HAPROXY, ele disse que havia visto em minha wiki alguns exemplos de uso, mas queria algo mais focado no JBOSS, este leitor tinha uma necessidade específica e resolvi ajudá-lo, mesmo não sendo especialista e não conhecendo a fundo a ferramenta.&lt;/p&gt;
&lt;p&gt;Abaixo segue o roteiro completo de nossos estudos e descobertas.&lt;/p&gt;
&lt;h2 id=&#34;1-sobre-o-haproxy&#34;&gt;1. Sobre o HAPROXY&lt;/h2&gt;
&lt;p&gt;O &lt;a href=&#34;http://haproxy.1wt.eu/&#34;&gt;HAProxy&lt;/a&gt; é uma solução - opensource - que oferece recursos de High Availbility, Load Balance e PROXY para aplicações baseadas em TCP e HTTP. Ele foi particularmente desenhado e pensado para web sites com grande carga que necessitam de persistência ou processamentos específicos na camada de aplicação (layer7). Ele suporta milhares de conexões em hardwares muito modestos. É uma ferramenta fácil de instalar, configurar, operar e principalmente fácil de integrar aos ambientes e arquiteturas existentes.&lt;/p&gt;
&lt;p&gt;Existem casos documentados de ambientes HAPROXY atendendo demandas que geravam de 3 a 6 Gibabits de tráfego - por segundo. Existem &lt;a href=&#34;http://haproxy.1wt.eu/10g.html&#34;&gt;testes&lt;/a&gt; de laboratório feitos pelo criador da ferramenta demonstram que ele chegou a atender cerca de 106 mil requisições HTTP por segundo, e encaminhar (HTTP FORWARD) cerca de 40 mil requisições por segundo para backends internos.&lt;/p&gt;
&lt;p&gt;Mas quem usa o HAPROXY?&lt;/p&gt;
&lt;p&gt;AMAZON, TWITTER, REDDIT, FARMVILLE, GITHUB, TUMBLR, DISQUS, FEDORA, REDHAT CLOUD, STACKOVERFLOW.&lt;/p&gt;
&lt;p&gt;* Dados retirados de &lt;a href=&#34;http://haproxy.1wt.eu/they-use-it.html&#34;&gt;http://haproxy.1wt.eu/they-use-it.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-haproxy&#34;&gt;2. HAPROXY&lt;/h2&gt;
&lt;h3 id=&#34;21-instalando&#34;&gt;2.1 Instalando&lt;/h3&gt;
&lt;p&gt;A instalação é bastante simples, vou mostrar como instalar no Debian e CentOS.&lt;/p&gt;
&lt;p&gt;No Debian&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install haproxy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No CentOS&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;yum install haproxy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se preferir compile - recomendado - a última versão disponível, basta fazer o download dos sources no site do &lt;a href=&#34;http://haproxy.1wt.eu/download/1.4/src/&#34;&gt;haproxy&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&#34;22-cenário&#34;&gt;2.2 Cenário&lt;/h3&gt;
&lt;p&gt;O leitor queria balancear uma aplicação de ensino a distância, tipo moodle, porém a ferramenta foi escrita em Java. Em seu ambiente ele tinha dois servidores bem robustos rodando JBOSS, e um servidor mais modesto em standby, estes por sua vez, sustentavam a aplicação de EAD.&lt;/p&gt;
&lt;h3 id=&#34;23-configuração&#34;&gt;2.3 Configuração&lt;/h3&gt;
&lt;p&gt;O arquivo de configuração tem o nome de haproxy.cfg, ele normalmente está no diretório /etc/haproxy.&lt;/p&gt;
&lt;p&gt;A configuração proposta foi a seguinte:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;global
	log 127.0.0.1   local0
	log 127.0.0.1   local1 notice info
	maxconn 25000   # numero maximo de conexoes que ele vai atender
	user haproxy
	group haproxy
	daemon
	nbproc  2 # numero de processadores

defaults
     contimeout      5000
     clitimeout      50000
     srvtimeout      50000
     retries  3

listen  sistema    0.0.0.0:80
 
     log     global
     mode    http
     option httplog
     option dontlognull
     option redispatch
     option forwardfor
     option httpclose
     option forceclose
     option persist
     stats enable
     stats auth admin:proinfo
     stats uri /haproxy_stats
     stats realm HAProxy\ Statistics
     cookie  SERVERID insert indirect nocache
     balance roundrobin
     server  app01 10.1.1.1:8080 cookie A weight 1 maxconn 5000 inter 2s rise 2 fall 3 check
     server  app02 10.1.1.2:8080 cookie B weight 1 maxconn 5000 inter 2s rise 2 fall 3 check
     server  app03 10.1.1.3:8080 cookie B weight 1 maxconn 5000 inter 2s rise 2 fall 3 check backup
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;231-section-global&#34;&gt;2.3.1 section global&lt;/h4&gt;
&lt;p&gt;A seção global do arquivo de configurações define algumas configurações globais, são elas:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;log              =&amp;gt; configurações de log
maxconn          =&amp;gt; número máximo global de conexões que ele vai atender
user             =&amp;gt; usuário que vai rodar o serviço
group            =&amp;gt; grupo
daemon           =&amp;gt; forma de funcionamento, no caso standalone
nbproc           =&amp;gt; número de processadores
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;232-section-defaults&#34;&gt;2.3.2 section defaults&lt;/h4&gt;
&lt;p&gt;A seção defaults define algumas configurações padrão para os listeners e backends.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;contimeout       =&amp;gt; tempo máximo que o servidor aguarda para um conexão ser estabelecida
clitimeout       =&amp;gt; tempo máximo de inatividade no lado do cliente
srvtimeout       =&amp;gt; tempo máximo de inatividade no lado do servidor
retries          =&amp;gt; qts vezes o clt ainda deve tentar se conectar após uma falha
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;233-section-listen&#34;&gt;2.3.3 section listen&lt;/h4&gt;
&lt;p&gt;Está seção define as portas que o HAPROXY vai abrir e escutar, além disto é aqui que fazemos todas as configurações de balanceamento. Abaixo a explicação de cada parâmetro:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; log                                      =&amp;gt; confs de log, no caso confs do global

 mode    http                             =&amp;gt; modo de funcionamento (http ou tcp )

 option httplog                           =&amp;gt; habilita log http
 option dontlognull                       =&amp;gt; não loga conexões de checagem, ajuda a evitar log poluído
 option redispatch                        =&amp;gt; limpar o cookie caso o backend caia
 option forwardfor                        =&amp;gt; para empurrar o ip do cliente para o backend
 option httpclose                         =&amp;gt; ajuda a fechar conexões que já deveriam ter sido encerradas
 option forceclose                        =&amp;gt; ajuda a fechar conexões que já deveriam ter sido encerradas
 option persist                           =&amp;gt; habilitando persistentica

 stats enable                             =&amp;gt; habilita estatísticas
 stats auth admin:password                =&amp;gt; usuário/senha para acessar stats
 stats uri /haproxy_stats                 =&amp;gt; url das estatísticas
 stats realm HAProxy\ Statistics          =&amp;gt; realm de autenticação

 cookie  SERVERID insert indirect nocache =&amp;gt; injeta cookie na conexao
 
 balance roundrobin                       =&amp;gt; tipo de balanceamento
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2331-parâmetro-cookie&#34;&gt;2.3.3.1 parâmetro cookie&lt;/h5&gt;
&lt;pre&gt;&lt;code&gt;SERVERID   =&amp;gt; nome do cookie que será inserido, caso necessário
indirect   =&amp;gt; não insere cookie se o cliente já tiver um cookie válido
insert     =&amp;gt; insere um cookie para controle de persistência de sessão caso seja necessário
nocache    =&amp;gt; se cookie for inserido (insert) orienta a não fazer cache
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2332-parâmetro-balancer-e-server&#34;&gt;2.3.3.2 parâmetro balancer e server&lt;/h5&gt;
&lt;p&gt;Veja abaixo que a configuração de balanceamento possui três backends com diversos parâmetros definidos para eles.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; server  sistema_01 10.1.1.1:8080 cookie A weight 1 maxconn 5000 inter 2s rise 2 fall 3 check
 server  sistema_02 10.1.1.2:8080 cookie B weight 1 maxconn 5000 inter 2s rise 2 fall 3 check
 server  sistema_03 10.1.1.3:8080 cookie C weight 1 maxconn 5000 inter 2s rise 2 fall 3 check backup
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos entender agora para que serve cada parâmetro:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;check     =&amp;gt; verifica se a porta está aberta no servidor do pool
cookie    =&amp;gt; nome do cookie que será injetado no lado do cliente
backup    =&amp;gt; essa maquina só vai entrar se uma instância do pool estiver fora
inter     =&amp;gt; significa que ele fará checagens no backend a cada 2 segundos
rise      =&amp;gt; significa que a maquina só volta para o pool se tiver 2 checagens positivas
fall      =&amp;gt; significa que a maquina só sairá do pool se tiver pelo menos 3 checagens negativas
maxconn   =&amp;gt; número máximo de conexões que a instância deve receber
weight    =&amp;gt; peso que a instância terá no pool, quando maior mais conexões vão para ele
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;24-estatísticas&#34;&gt;2.4 Estatísticas&lt;/h4&gt;
&lt;p&gt;Para acessar as estatísticas habilitadas na configuração proposta, basta apontar seu navegador para o endereço abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://ip-do-servidor-haproxy/haproxy_stats
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Através desta ferramenta de estatística, você terá dados completos sobre o balanceamento.&lt;/p&gt;
&lt;p&gt;* Vai pedir o usuário e senha definidos na configuração.&lt;/p&gt;
&lt;h4 id=&#34;25-entendendo-a-configuração&#34;&gt;2.5 Entendendo a configuração&lt;/h4&gt;
&lt;p&gt;Abaixo explico em 6 passos rápidos a configuração criada.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;A configuração &lt;strong&gt;option persist&lt;/strong&gt; força o acesso a um servidor do balanceamento que esteja demorando a responder, em caso de servidores que atendem muitas requisições isso é importante, as vezes ele não está fora só está lento.&lt;/li&gt;
&lt;li&gt;Estamos injetando um cookie (&lt;strong&gt;cookie  SERVERID insert indirect nocache&lt;/strong&gt;) com nome SERVERID para organizar o balanceamento e manter a persistência de sessão. Quando um cliente chega, o haproxy injeta um cookie SERVERID=A/B/C para ele, assim quando ele voltar a conectar, vai trazer a informação do cookie (SERVERID=A) e a partir disto cair no mesmo servidor que ele iniciou a conexão, assim ele mantém a persistência na sessão.&lt;/li&gt;
&lt;li&gt;É muito bom ter a persistência configurada, porém se uma máquina do balanceamento sair do ar, alguns clientes não irão conseguir fazer flush no cookie, com isso eles ficarão perdidos, com o &lt;strong&gt;option REDISPATCH&lt;/strong&gt; isso é resolvido, o cookie é resetado caso o backend tenha sido removido do balanceamento e a partir daí a requisição vai para o próximo servidor disponível.&lt;/li&gt;
&lt;li&gt;O &lt;strong&gt;option forwardfor&lt;/strong&gt; é utilizado para empurrar o IP do cliente para o backend ao invés de empurrar o IP do HAPROXY, isso é bom quando queremos gerar estatísticas usando ferramentas como AWSTATS, estas ferramentas normalmente fazem leitura dos logs dos backends.&lt;/li&gt;
&lt;li&gt;O &lt;strong&gt;option httpclose&lt;/strong&gt; e &lt;strong&gt;option forceclose&lt;/strong&gt; são utilizados para fechar conexões. Algumas vezes alguns servidores ao receberem o &lt;strong&gt;httpclose&lt;/strong&gt;, mesmo assim ainda mantém a conexão aberta com o cliente, deixando ela cair por timeout, isso pode ocasionar centenas e as vezes milhares de conexões desnecessárias esperando timeout, esses dois parâmetros resolvem isto, fechando a conexão assim que o servidor terminar de responder.&lt;/li&gt;
&lt;li&gt;Configuramos 3 backends, 2 ativos e um em standby (backup), esse último só entrará no balanceamento caso um dos backends principais seja removido por alguma razão, essa máquina é mais modesta, por isto está em modo backup.&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;3-amarrando-as-pontas&#34;&gt;3. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Segundo o leitor, até hoje o balanceamento está funcionando redondinho, e ele por sinal está bastante feliz.&lt;/p&gt;
&lt;p&gt;Tive que ler bastante para ajudá-lo na configuração, isso me ajudou a desenferrujar no HAPROXY, e olha que havia um bom tempo em que eu não usava ele para algo, finalmente surgiu uma boa oportunidade.&lt;/p&gt;
&lt;p&gt;O HAPROXY ainda tem centenas de recursos para conhecer, alguns muito interessantes para PROXY e LOAD BALANCER, ele tem suporte a ACLs para redirecionamentos especiais, podemos construir regras fantásticas usando ACLs.&lt;/p&gt;
&lt;p&gt;Outra questão sensacional é o balanceamento TCP, posso virtualmente criar um balanceamento na camada 4 utilizando apenas esta ferramenta, com isso posso balancear IMAP, POP, SMTP e qualquer outra aplicação que atenda clientes utilizando uma porta TCP.&lt;/p&gt;
&lt;p&gt;Logo podemos dizer que com o HAPROXY você pode construir seu próprio SWITCH de conteúdo.&lt;/p&gt;
&lt;p&gt;Se quiser criar um ambiente com HA para seu HAPROXY recomendo o uso do KEEPALIVED. Acesse o site do &lt;a href=&#34;http://andyleonard.com/2011/02/01/haproxy-and-keepalived-example-configuration/&#34;&gt;Andy Leonard&lt;/a&gt; para ler um bom tutorial sobre esse assunto.&lt;/p&gt;
&lt;p&gt;Eu já vi casos de uso do NGINX para fazer proxy reverso e o HAPROXY para balanceamento, afinal ele é especializado nisto.&lt;/p&gt;
&lt;p&gt;Já vi cenários com NGINX + HAPROXY + VARNISH (PROXY =&amp;gt; BALANCEAMENTO =&amp;gt; CACHE).&lt;/p&gt;
&lt;p&gt;A grande vantagem do HAPROXY na minha opinião é que ele é uma ferramenta especializada em balanceamento, diferente de outras ferramentas que também fazem balanceamento, mas não são especializadas nisto. O HAPROXY é incrivelmente performatico e usa poucos recursos do servidor (MEM/PROC) para fazer seu trabalho.&lt;/p&gt;
&lt;p&gt;Eu particularmente gosto muito desta ferramenta e das possibilidades que ela me oferece, recomendo de olhos fechados.&lt;/p&gt;
&lt;p&gt;* Caso alguém que conheça melhor a ferramenta tenha visto algo errado, por favor nos avise e ajude melhorar este estudo, como eu já disse, sou um admirador da ferramenta mas não um grande conhecedor :)&lt;/p&gt;
&lt;h2 id=&#34;4-referências&#34;&gt;4. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://haproxy.1wt.eu/&#34;&gt;http://haproxy.1wt.eu/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://code.google.com/p/haproxy-docs&#34;&gt;https://code.google.com/p/haproxy-docs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/dokuwiki/doku.php/haproxy_exemplos&#34;&gt;http://gutocarvalho.net/dokuwiki/doku.php/haproxy_exemplos&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Mcollective Shell Agent</title>
      <link>https://archives.gutocarvalho.net/post/2013-03-09-mcollective-shell-agent/</link>
      <pubDate>Sat, 09 Mar 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-03-09-mcollective-shell-agent/</guid>
      <description>&lt;h2 id=&#34;1-sobre-o-marionette-collective&#34;&gt;1. Sobre o Marionette Collective&lt;/h2&gt;
&lt;p&gt;O Mcollective é um framework que te permite trabalhar com orquestração de servidores ou execução paralela de tarefas em seus nodes.&lt;/p&gt;
&lt;p&gt;Em essência, orquestração significa invocar ações em paralelo em todo o seu parque de servidores de uma forma direta, eficiente e além disto em tempo real.&lt;/p&gt;
&lt;h2 id=&#34;2-agente-shell&#34;&gt;2. Agente Shell&lt;/h2&gt;
&lt;p&gt;No post anterior, apresentei alguns agentes do Mcollective que executam ações pontuais, no entanto, não é possível através destes agentes rodar comandos arbitários em nossos nodes.&lt;/p&gt;
&lt;p&gt;O próprio criador do Mcollective (&lt;a href=&#34;http://www.devco.net/&#34;&gt;R.I.Pienaar&lt;/a&gt;) não recomenda que sejam escritos plugins para execução de comandos arbitrários, e ele tem razão, é perigoso e você não conseguirá prever a saída do comando no outro lado.&lt;/p&gt;
&lt;p&gt;Porém, eventualmente precisamos fazer isto, e neste caso existem alguns plugins disponíveis no GITHUB, aqui neste post vou mostrar como instalar um plugin que contém um agente para execução de comandos em ambiente shell.&lt;/p&gt;
&lt;h3 id=&#34;21-instalando-o-agente&#34;&gt;2.1 Instalando o agente&lt;/h3&gt;
&lt;p&gt;Partindo do pressuposto de que você já tem o Mcollective rodando, vamos apenas instalar o agente shell e ver como ele funciona. Aqui neste post vou usar o agente escrito por &lt;a href=&#34;https://github.com/phobos182/mcollective-plugins/&#34;&gt;Jeremy Caroll&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Faça download do arquivo shell.rb&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://raw.github.com/phobos182/mcollective-plugins/master/agent/shell/shell.rb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça download do arquivo shell.ddl&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://raw.github.com/phobos182/mcollective-plugins/master/agent/shell/shell.ddl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Mova os arquivos para o diretório agent do mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mv shell.rb shell.ddl /usr/share/mcollective/plugins/mcollective/agent
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora faça download do arquivo de aplicação shell.rb (é outro arquivo)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://raw.github.com/phobos182/mcollective-plugins/master/agent/shell/application/shell.rb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Mova o arquivo para o diretório application do mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mv shell.rb /usr/share/mcollective/plugins/mcollective/application
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora reinicie o agente.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/mcollective restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale os arquivos em todos os nodes que deseja utilizar o agente shell.&lt;/p&gt;
&lt;h3 id=&#34;22-utilizando-o-agente&#34;&gt;2.2 Utilizando o agente&lt;/h3&gt;
&lt;p&gt;A utilização é bastante simples, observe a sintaxe:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco shell &amp;lt;comando&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos a um exemplo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco shell uptime
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Do you really want to send this command unfiltered? (y/n): y
Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

[puppet.hacklab] exit=0:
[debian.hacklab] exit=0:
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que o comando foi executado em dois nodes, mas repare que apenas fomos informados disto, caso deseje ver a saída, será necessário adicionar um parâmetro.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco shell uptime --verbose
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Do you really want to send this command unfiltered? (y/n): y
Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

[puppet.hacklab] exit=0:  13:56:48 up 28 min,  2 users,  load average: 0.00, 0.00, 0.00
[debian.hacklab] exit=0:  13:56:44 up 28 min,  2 users,  load average: 0.00, 0.00, 0.00
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;23-exemplos-de-uso-do-agente&#34;&gt;2.3 Exemplos de uso do agente&lt;/h3&gt;
&lt;h4 id=&#34;231-lendo-arquivo-etcissue&#34;&gt;2.3.1 Lendo arquivo /etc/issue&lt;/h4&gt;
&lt;p&gt;Vamos usar o cat para ler o conteúdo do arquivo issue&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco shell &amp;quot;cat /etc/issue&amp;quot; --verbose
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Do you really want to send this command unfiltered? (y/n): y
Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

[debian.hacklab] exit=0: Debian GNU/Linux 6.0 \n \l

[puppet.hacklab] exit=0: Debian GNU/Linux 6.0 \n \l
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;232-rodando-comando-df&#34;&gt;2.3.2 Rodando comando df&lt;/h4&gt;
&lt;p&gt;Vamos rodar o comando df -h para ver dados de uso das partições e disco.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco shell &amp;quot;df -h&amp;quot; --verbose
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Do you really want to send this command unfiltered? (y/n): y
Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

[puppet.hacklab] exit=0: Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1             3.8G  2.1G  1.6G  57% /
tmpfs                 188M     0  188M   0% /lib/init/rw
udev                  184M  124K  184M   1% /dev
tmpfs                 188M     0  188M   0% /dev/shm

[debian.hacklab] exit=0: Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1             3.8G 1002M  2.6G  28% /
tmpfs                 125M     0  125M   0% /lib/init/rw
udev                  121M  124K  120M   1% /dev
tmpfs                 125M     0  125M   0% /dev/shm
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;3-amarrando-as-pontas&#34;&gt;3. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;O criador do Mcollective (&lt;a href=&#34;http://www.devco.net/&#34;&gt;R.I.Pienaar&lt;/a&gt;) recomenda que você escreva seus agentes usando simpleRPC, agentes que executem tarefas pontais, agentes no quais você tem controle, agentes nos quais você pode confiar, agentes nos quais você conhece o risco de utilizar em sua infra, e tenho que dizer que eu concordo com isto, portanto, use esse agente ssh por sua conta e risco ;)&lt;/p&gt;
&lt;p&gt;Eu assumo o risco pois o que preciso fazer com ele é bem simples, mas cada caso é um caso.&lt;/p&gt;
&lt;h3 id=&#34;31-exemplificando-os-riscos&#34;&gt;3.1 Exemplificando os riscos&lt;/h3&gt;
&lt;p&gt;Só para você ter uma ideia de tragédias possíveis, imagine o risco potencial de alguém rodar - sem querer - algo como abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco shell &amp;quot;rm -rf /&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Isto simplesmente apagaria todo o seu parque, é muito poder para pouca segurança. Espero que este exemplo tenha sido suficientemente claro :)&lt;/p&gt;
&lt;h3 id=&#34;31-facilitando-a-instalação&#34;&gt;3.1 Facilitando a instalação&lt;/h3&gt;
&lt;p&gt;Eu escrevi dois módulos para Puppet que facilitam a instalação do Mcollective e dos agentes, segue abaixo os links.&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/gutocarvalho/puppet-mcollective-debian&#34;&gt;https://github.com/gutocarvalho/puppet-mcollective-debian&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/gutocarvalho/puppet-rabbitmq-debian&#34;&gt;https://github.com/gutocarvalho/puppet-rabbitmq-debian&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;O agente SSH já está incluso no módulo.&lt;/p&gt;
&lt;h2 id=&#34;4-referências&#34;&gt;4. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.devco.net&#34;&gt;http://www.devco.net&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/phobos182/mcollective-plugins&#34;&gt;https://github.com/phobos182/mcollective-plugins&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppetlabs/mcollective-plugins&#34;&gt;https://github.com/puppetlabs/mcollective-plugins&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://puppetlabs.com/mcollective/introduction&#34;&gt;https://puppetlabs.com/mcollective/introduction&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando Mcollective em Debian Squeeze com Ambiente Puppet</title>
      <link>https://archives.gutocarvalho.net/post/2013-02-07-instalando-mcollective-em-debian-squeeze-com-ambiente-puppet/</link>
      <pubDate>Thu, 07 Feb 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-02-07-instalando-mcollective-em-debian-squeeze-com-ambiente-puppet/</guid>
      <description>&lt;h2 id=&#34;1-sobre-o-marionette-collective&#34;&gt;1. Sobre o Marionette Collective&lt;/h2&gt;
&lt;p&gt;O Mcollective é um framework que te permite trabalhar com orquestração de servidores ou execução paralela de tarefas em seus nodes.&lt;/p&gt;
&lt;p&gt;Em essência, orquestração significa invocar ações em paralelo em todo o seu parque de servidores de uma forma direta, eficiente e além disto em tempo real.&lt;/p&gt;
&lt;h2 id=&#34;2-entendendo-a-necessidade&#34;&gt;2. Entendendo a necessidade&lt;/h2&gt;
&lt;p&gt;Vamos supor que por alguma razão você precise rodar algum comando em todos os seus servidores, seja para atualizar um pacote, seja para desligar um serviço, seja para remover um usuário ou aplicar uma regra e firewall, enfim, por qualquer que seja a razão.&lt;/p&gt;
&lt;p&gt;Sabemos que o puppet permite esse tipo de abordagem, porém não te permite fazer isto em tempo real, com o puppet você precisar criar um manifest, declarar a classe de seu manifest para seus nodes e esperar que os agentes consultem o servidor, recebam o catálogo e iniciem a aplicação das mudanças declaradas no manifest. Isto pode levar minutos ou horas dependendo do tamanho do seu parque e de como os agentes estão configurados.&lt;/p&gt;
&lt;p&gt;Se sua necessidade é executar algo em tempo real, de forma paralela, o mcollective é a ferramenta certa para fazer isto em seu parque de servidores.&lt;/p&gt;
&lt;h2 id=&#34;3-objetivos-deste-artigo&#34;&gt;3. Objetivos deste artigo&lt;/h2&gt;
&lt;p&gt;Aqui pretendo abordar a instalação do Mcollective em ambiente Debian.&lt;/p&gt;
&lt;h2 id=&#34;4-ambiente&#34;&gt;4. Ambiente&lt;/h2&gt;
&lt;p&gt;2 VMs&#39; Virtualbox - Debian Squeeze - 64 Bits&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vm1: 192.168.56.50 puppet.hacklab (puppet master)
vm2: 192.168.56.51 debian.hacklab (puppet agent )
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-pre-reqs&#34;&gt;5 Pre-Reqs&lt;/h2&gt;
&lt;h3 id=&#34;51-repositório-debian&#34;&gt;5.1 Repositório debian&lt;/h3&gt;
&lt;p&gt;Nas duas VM&amp;rsquo;s adicione os repositórios abaixo ao seu sources.list&lt;/p&gt;
&lt;p&gt;Edite o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/apt/sources.list
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione as linhas ao final do arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;deb http://apt.puppetlabs.com squeeze main
deb http://www.rabbitmq.com/debian/ testing main
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Salve as alterações&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Atualize os índices&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude update
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, agora você poderá instalar o mcollective usando o aptitude.&lt;/p&gt;
&lt;h3 id=&#34;52-ambiente-puppet&#34;&gt;5.2 Ambiente Puppet&lt;/h3&gt;
&lt;p&gt;Nas duas VM&amp;rsquo;s é necessário que já exista um ambiente Puppet instalado e rodando em modo cliente/servidor, não vou entrar em detalhes pois já cobri esse processo de forma completa em minha &lt;a href=&#34;http://gutocarvalho.net/dokuwiki/doku.php/puppetmaster&#34;&gt;wiki&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vm1: puppet.hacklab (puppet master)
vm2: debian.hacklab (puppet agent )
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ressalto que é importante ter o puppet funcionando nas VM&amp;rsquo;s para podermos utilizar o agente puppet, package e service do Mcollective.&lt;/p&gt;
&lt;h2 id=&#34;6-configurando-vm1-puppet-master&#34;&gt;6. Configurando VM1 (puppet master)&lt;/h2&gt;
&lt;h3 id=&#34;61-instalando-rabbitmq&#34;&gt;6.1 Instalando RabbitMQ&lt;/h3&gt;
&lt;h4 id=&#34;611-sobre-o-rabbitmq&#34;&gt;6.1.1 Sobre o RabbitMQ&lt;/h4&gt;
&lt;p&gt;O Mcollective (MCO) depende de algum sistema de mensageria, é possível utilizar tanto o ApacheMQ quanto o RabbitMQ, ambos tem suporte ao protocolo STOMP, necessário para o funcionamento do MCO.&lt;/p&gt;
&lt;p&gt;Neste estudo vou utilizar o RabbitMQ, mas é possível - e até recomendado - utilizar o ActiveMQ.&lt;/p&gt;
&lt;h4 id=&#34;612-instalando-o-activemq&#34;&gt;6.1.2 Instalando o ActiveMQ&lt;/h4&gt;
&lt;p&gt;Instale o rabbitmq 3.0.2 (vigente neste momento)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install rabbitmq-server
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Edite o arquivo /etc/rabbitmq/rabbitmq.config e coloque apenas o conteúdo abaixo, limpe o resto&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[
  {rabbitmq_stomp, [{tcp_listeners, [{&amp;quot;0.0.0.0&amp;quot;, 6163},
                                     {&amp;quot;::1&amp;quot;,       6163}]}]}
].
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Edite o arquivo /etc/default/rabbitmq-server e descomente a linha abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ulimit -n 1024
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;reinicie o serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/rabbitmq-server restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Verfique o status do serviço&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/rabbitmq-server status
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Status of node rabbit@puppet ...
[{pid,7390},
 {running_applications,[{rabbit,&amp;quot;RabbitMQ&amp;quot;,&amp;quot;3.0.2&amp;quot;},
                        {mnesia,&amp;quot;MNESIA  CXC 138 12&amp;quot;,&amp;quot;4.4.14&amp;quot;},
                        {os_mon,&amp;quot;CPO  CXC 138 46&amp;quot;,&amp;quot;2.2.5&amp;quot;},
                        {sasl,&amp;quot;SASL  CXC 138 11&amp;quot;,&amp;quot;2.1.9.2&amp;quot;},
                        {stdlib,&amp;quot;ERTS  CXC 138 10&amp;quot;,&amp;quot;1.17&amp;quot;},
                        {kernel,&amp;quot;ERTS  CXC 138 10&amp;quot;,&amp;quot;2.14&amp;quot;}]},
 {os,{unix,linux}},
 {erlang_version,&amp;quot;Erlang R14A (erts-5.8) [source] [rq:1] [async-threads:30] [kernel-poll:true]\n&amp;quot;},
 {memory,[{total,12888616},
          {connection_procs,1344},
          {queue_procs,2688},
          {plugins,0},
          {other_proc,4592340},
          {mnesia,28704},
          {mgmt_db,0},
          {msg_index,7020},
          {other_ets,363324},
          {binary,3680},
          {code,6394787},
          {atom,796661},
          {other_system,698068}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,157546905},
 {disk_free_limit,1000000000},
 {disk_free,2638680064},
 {file_descriptors,[{total_limit,924},
                    {total_used,3},
                    {sockets_limit,829},
                    {sockets_used,1}]},
 {processes,[{limit,1048576},{used,121}]},
 {run_queue,0},
 {uptime,5}]
...done.
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Crie um usuário para o mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rabbitmqctl add_user mcollective senhapuppet
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Especifique as permissões para o usuário do mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rabbitmqctl set_permissions -p / mcollective &amp;quot;^amq.gen-.*&amp;quot; &amp;quot;.*&amp;quot; &amp;quot;.*&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Remova o usuário guest&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rabbitmqctl delete_user guest
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Habilite os plugins stomp e amqp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rabbitmq-plugins enable rabbitmq_stomp
rabbitmq-plugins enable amqp_client
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;62-instalando-mcollective&#34;&gt;6.2 Instalando MCollective&lt;/h3&gt;
&lt;p&gt;Instale a biblioteca stomp para ruby&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install libstomp-ruby
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale os pacotes mcollective da puppetlabs&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install mcollective mcollective-client
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Configure o arquivo /etc/mcollective/server.cfg conforme abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;topicprefix = /topic/
main_collective = mcollective
collectives = mcollective
libdir = /usr/share/mcollective/plugins
logfile = /var/log/mcollective.log
loglevel = info
daemonize = 1

# Plugins
securityprovider = psk
plugin.psk = hacklab

connector = stomp
plugin.stomp.host = 192.168.56.50
plugin.stomp.port = 6163
plugin.stomp.user = mcollective
plugin.stomp.password = senhapuppet

# Facts
factsource = yaml
plugin.yaml = /etc/mcollective/facts.yaml

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Configure o arquivo /etc/mcollective/client.cfg conforme abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;topicprefix = /topic/
main_collective = mcollective
collectives = mcollective
libdir = /usr/share/mcollective/plugins
logger_type = console
loglevel = warn

# Plugins
securityprovider = psk
plugin.psk = hacklab

connector = stomp
plugin.stomp.host = 192.168.56.50
plugin.stomp.port = 6163
plugin.stomp.user = mcollective
plugin.stomp.password = senhapuppet

# Facts
factsource = yaml
plugin.yaml = /etc/mcollective/facts.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Reinicie o mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/mcollective restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça o teste de ping em nodes ativos usando o mco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco ping
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet.hacklab                           time=89.34 ms
---- ping statistics ----
1 replies max: 89.34 min: 89.34 avg: 89.34
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça o teste de find em nodes ativos usando o mco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco find
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Podemos ver que o MCO está funcionando corretamente, por hora detectando apenas um node.&lt;/p&gt;
&lt;h2 id=&#34;7-configurando-vm2-puppet-agent&#34;&gt;7. Configurando VM2 (puppet agent)&lt;/h2&gt;
&lt;p&gt;Para instalar o Mcollective na VM2, siga as referências da seção 1.2 e tenha os repositórios devidamente configurados.&lt;/p&gt;
&lt;p&gt;Após a instalação e a configuração do mcollective, faça o teste de ping em nodes ativos com mco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco ping
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;debian.hacklab                           time=188.49 ms
puppet.hacklab                           time=191.91 ms
---- ping statistics ----
2 replies max: 191.91 min: 188.49 avg: 190.20 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Faça uma busca por nodes ativos com o mco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco find
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;puppet.hacklab
debian.hacklab
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Solicite o inventário de uma máquina&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco inventory debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Inventory for debian.hacklab:

   Server Statistics:
                      Version: 2.2.2
                   Start Time: Wed Feb 06 14:39:55 -0200 2013
                  Config File: /etc/mcollective/server.cfg
                  Collectives: mcollective
              Main Collective: mcollective
                   Process ID: 1744
               Total Messages: 19
      Messages Passed Filters: 18
            Messages Filtered: 1
             Expired Messages: 0
                 Replies Sent: 17
         Total Processor Time: 0.52 seconds
                  System Time: 0.27 seconds

   Agents:
      discovery       puppet          rpcutil        

   Data Plugins:
      agent           fstat           puppet         
      resource                                       

   Configuration Management Classes:
      apt                            apt::params                   
      debian.hacklab                 hostname                      
      hosts                          linux-server                  
      openssh-server                 puppet-agent                  
      repos                          resolv                        
      salt-minion                    settings                      
      usuarios                       utils                         

   Facts:
      mcollective =&amp;gt; 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Podemos ver que o MCO está funcionando corretamente e detectando os dois nodes.&lt;/p&gt;
&lt;h2 id=&#34;8-agentes-para-mcollective&#34;&gt;8. Agentes para Mcollective&lt;/h2&gt;
&lt;p&gt;O Mcollective possui vários agentes que nos ajudam a manipular os nodes de nosso parque de forma direta, aqui vou abordar a instalação e utilização de alguns destes agentes.&lt;/p&gt;
&lt;p&gt;Instale os pacotes em ambos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install mcollective-puppet-agent mcollective-puppet-client mcollective-package-agent mcollective-package-client mcollective-service-agent mcollective-service-client
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reinicie o mcollective em ambos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/mcollective restart
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;81-agente-puppet&#34;&gt;8.1 Agente puppet&lt;/h3&gt;
&lt;h4 id=&#34;811-runoncerunall&#34;&gt;8.1.1 runonce/runall&lt;/h4&gt;
&lt;p&gt;Após instalar, podemos mandar executar o puppet em um node&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet runonce -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;* [ ============================================================&amp;gt; ] 1 / 1

Finished processing 1 / 1 hosts in 112.56 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Podemos mandar executar o agente em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet runonce -v
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

puppet.hacklab                          : Puppet is currently applying a catalog, cannot run now
    {:summary=&amp;gt;&amp;quot;Puppet is currently applying a catalog, cannot run now&amp;quot;}

debian.hacklab                          : OK
    {:summary=&amp;gt;&amp;quot;Signalled the running Puppet Daemon&amp;quot;}

---- rpc stats ----
           Nodes: 2 / 2
     Pass / Fail: 1 / 1
      Start Time: Wed Feb 06 18:08:20 -0200 2013
  Discovery Time: 2013.47ms
      Agent Time: 43.72ms
      Total Time: 2057.18ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Existe ainda o parâmetro &lt;strong&gt;runall&lt;/strong&gt; onde você pode especificar a quantidade de ações simultâneas que serão executadas, ou seja, quantidade de agentes que serão executados de forma paralela.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet runall 10
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Neste caso ele vai executar o agente em todos os nodes, rodando de 10 em 10, essa pode ser um estratégia para evitar esgotamento dos recursos do servidor em parques muito grandes, desta forma, ao invés de deixar o agente ligado e consultando o servidor a cada N minutos, você pode usar o MCO para rodar o agente de forma controlada em todos os seus nodes.&lt;/p&gt;
&lt;h4 id=&#34;812-enabledisable&#34;&gt;8.1.2 enable/disable&lt;/h4&gt;
&lt;p&gt;Desabilitando puppet em um node&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet disable -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1

Summary of Enabled:

   disabled = 1

Finished processing 1 / 1 hosts in 126.27 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Habilitando puppet em um node&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet enable -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1

Summary of Enabled:

   enabled = 1

Finished processing 1 / 1 hosts in 91.71 ms    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Desabilitando puppet em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc puppet disable message=&amp;quot;doing some hand hacking&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Enabled:

   disabled = 2

Finished processing 2 / 2 hosts in 201.09 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Habilitando puppet em todos os nos nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc puppet enable
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Enabled:

   enabled = 2

Finished processing 2 / 2 hosts in 45.02 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;813-summary&#34;&gt;8.1.3 summary&lt;/h4&gt;
&lt;p&gt;Solicitando o relatório last run&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet summary
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Summary statistics for 2 nodes:

                  Total resources: ▇▁▁▇▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁  min: 62.0   max: 66.0  
            Out Of Sync resources: ▇▇▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁  min: 0.0    max: 2.0   
                 Failed resources: ▇▇▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁  min: 0.0    max: 2.0   
                Changed resources: ▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁  min: 0.0    max: 0.0   
  Config Retrieval time (seconds): ▇▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁  min: 0.7    max: 1.5   
         Total run-time (seconds): ▇▁▁▁▁▇▁▁▁▁▁▁▁▁▁▁▁▁▁▁  min: 4.4    max: 12.5  
    Time since last run (seconds): ▇▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▇  min: 791.0  max: 1.5k  
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;814-count&#34;&gt;8.1.4 count&lt;/h4&gt;
&lt;p&gt;Solicitando contagem dos nodes habilitados, desabiliados e em execução&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet count
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Total Puppet nodes: 2

          Nodes currently enabled: 2
         Nodes currently disabled: 0

Nodes currently doing puppet runs: 0
          Nodes currently stopped: 2

       Nodes with daemons started: 2
    Nodes without daemons started: 0
       Daemons started but idling: 2
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;815-stats&#34;&gt;8.1.5 stats&lt;/h4&gt;
&lt;p&gt;Solicitando status dos agentes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco puppet status
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 2 / 2

   debian.hacklab: Currently idling; last completed run 30 minutes 34 seconds ago
   puppet.hacklab: Currently applying a catalog; last completed run 6 hours 37 minutes 18 seconds ago

Summary of Applying:

    true = 1
   false = 1

Summary of Daemon Running:

   running = 2

Summary of Enabled:

   enabled = 2

Summary of Idling:

    true = 1
   false = 1

Summary of Status:

               idling = 1
   applying a catalog = 1


Finished processing 2 / 2 hosts in 67.61 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;82-agente-service&#34;&gt;8.2 Agente service&lt;/h3&gt;
&lt;h4 id=&#34;821-agente-service-stop&#34;&gt;8.2.1 agente service: stop&lt;/h4&gt;
&lt;p&gt;Parando um serviço em um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc service stop service=ssh -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1

Summary of Service Status:

   stopped = 1

Finished processing 1 / 1 hosts in 1166.06 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Parando um serviço em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet@root ~]# mco rpc service stop service=ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Service Status:

   stopped = 2

Finished processing 2 / 2 hosts in 2546.92 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;822-plugin-service-start&#34;&gt;8.2.2 plugin service: start&lt;/h4&gt;
&lt;p&gt;Iniciando o serviço em um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc service start service=ssh -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1

Summary of Service Status:

   running = 1

Finished processing 1 / 1 hosts in 1204.95 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Iniciando um serviço em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc service start service=ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Service Status:

   running = 2

Finished processing 2 / 2 hosts in 3271.52 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;823-plugin-service-restart&#34;&gt;8.2.3 plugin service: restart&lt;/h4&gt;
&lt;p&gt;Reiniciando um serviço em um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc service restart service=ssh -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1


Summary of Service Status:

   running = 1

Finished processing 1 / 1 hosts in 1015.66 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Reiniciando um serviço em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc service restart service=ssh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Service Status:

   running = 2

Finished processing 2 / 2 hosts in 5466.57 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;83-agente-package&#34;&gt;8.3 Agente package&lt;/h3&gt;
&lt;h4 id=&#34;831-agente-package-install&#34;&gt;8.3.1 agente package: install&lt;/h4&gt;
&lt;p&gt;Instalando o pacote em um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package install package=htop -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1

debian.hacklab                           Unknown Request Status
   Package is already installed

Summary of Ensure:

   0.8.3-1 = 1

Finished processing 1 / 1 hosts in 856.85 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Instalando um pacote em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package install package=htop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Ensure:

   0.8.3-1 = 2

Finished processing 2 / 2 hosts in 4972.04 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;832-plugin-package-uninstall&#34;&gt;8.3.2 plugin package: uninstall&lt;/h4&gt;
&lt;p&gt;Removendo um pacote de um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package uninstall package=htop -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1

Summary of Ensure:

   absent = 1

Finished processing 1 / 1 hosts in 7515.24 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Removendo um pacote em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package uninstall package=htop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Ensure:

   absent = 2

Finished processing 2 / 2 hosts in 4230.82 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;833-plugin-package-status&#34;&gt;8.3.3 plugin package: status&lt;/h4&gt;
&lt;p&gt;Verificando o status de um pacote em um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package status package=htop -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; * [ ============================================================&amp;gt; ] 1 / 1

debian.hacklab                           
       Arch: nil
    desired: install
     Ensure: 0.8.3-1
      Epoch: nil
      error: ok
       Name: htop
     Output: nil
   Provider: :apt
    Release: nil
     status: installed
    Version: nil

Summary of Arch:

     No aggregate summary could be computed

Summary of Ensure:

   0.8.3-1 = 1

Finished processing 1 / 1 hosts in 391.55 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Verificando o status de um pacote em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package status package=htop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

debian.hacklab                           
       Arch: nil
    desired: install
     Ensure: 0.8.3-1
      Epoch: nil
      error: ok
       Name: htop
     Output: nil
   Provider: :apt
    Release: nil
     status: installed
    Version: nil

puppet.hacklab                           
       Arch: nil
    desired: install
     Ensure: 0.8.3-1
      Epoch: nil
      error: ok
       Name: htop
     Output: nil
   Provider: :apt
    Release: nil
     status: installed
    Version: nil

Summary of Arch:

     No aggregate summary could be computed

Summary of Ensure:

   0.8.3-1 = 2

Finished processing 2 / 2 hosts in 174.41 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;834-plugin-package-update&#34;&gt;8.3.4 plugin package: update&lt;/h4&gt;
&lt;p&gt;Atualizando um pacote em um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package update package=facter -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
 * [ ============================================================&amp;gt; ] 1 / 1

Summary of Ensure:

   1.6.17-1puppetlabs1 = 1


Finished processing 1 / 1 hosts in 11307.56 ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Atualizando um pacote em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco rpc package update package=htop
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2

 * [ ============================================================&amp;gt; ] 2 / 2

Summary of Ensure:

   0.8.3-1 = 2

Finished processing 2 / 2 hosts in 2999.96 ms
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;84-agente-facter-facts&#34;&gt;8.4 Agente facter facts&lt;/h3&gt;
&lt;p&gt;O Mcollective possui suporte a mostrar certos fatos do sistema, mas se quisermos utilizar os fatos do facter, precisamos fazer alguns ajustes na configuração e adicionar um plugin manualmente, isto é necessário pois infelizmente o plugin &lt;strong&gt;facter facts&lt;/strong&gt; não está empacotado para o debian.&lt;/p&gt;
&lt;p&gt;Acesse do diretório tmp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /tmp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça o clone do repo mcollective-plugins&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/puppetlabs/mcollective-plugins.git
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Copie o plugin para o diretório do mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp mcollective-plugins/facts/facter/facter_facts.rb /usr/share/mcollective/plugins/mcollective/facts/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ajuste o arquivo client.cfg e server.cfg do mcollective, remova ou comente o trecho abaixo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Facts
factsource = yaml
plugin.yaml = /etc/mcollective/facts.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;E insira o seguinte no lugar&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Facts
factsource = facter
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Após alterar, reinicie o mcollective&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/mcollective restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Consulte o fato virtual em um node específico&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco facts virtual  -v -I debian.hacklab
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Report for fact: virtual

        virtualbox                              found 1 times

            debian.hacklab


---- rpc stats ----
           Nodes: 1 / 1
     Pass / Fail: 1 / 0
      Start Time: Wed Feb 06 20:57:39 -0200 2013
  Discovery Time: 0.00ms
      Agent Time: 136.37ms
      Total Time: 136.37ms    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Consulte o fato ipaddress do facter em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco facts ipaddress -v
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2
Report for fact: ipaddress

        192.168.56.50                           found 1 times

            puppet.hacklab

        192.168.56.51                           found 1 times

            debian.hacklab

---- rpc stats ----
           Nodes: 2 / 2
     Pass / Fail: 2 / 0
      Start Time: Wed Feb 06 20:52:29 -0200 2013
  Discovery Time: 2007.25ms
      Agent Time: 54.72ms
      Total Time: 2061.97ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Consulte o fato kernelversion do facter em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mco facts kernelversion -v
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Discovering hosts using the mc method for 2 second(s) .... 2
Report for fact: kernelversion

        2.6.32                                  found 2 times

            debian.hacklab
            puppet.hacklab


---- rpc stats ----
           Nodes: 2 / 2
     Pass / Fail: 2 / 0
      Start Time: Wed Feb 06 20:52:47 -0200 2013
  Discovery Time: 2008.67ms
      Agent Time: 59.92ms
      Total Time: 2068.59ms
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Podemos ver que o MCO está conseguindo trazer os fatos do facter corretamente.&lt;/p&gt;
&lt;h2 id=&#34;9-amarrando-as-pontas&#34;&gt;9. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Essa foi uma instalação básica do Mcollective em ambiente debian - usando RabbitMQ, além disto, apresentei alguns comandos iniciais usando o agente/client puppet criado pela Puppetlabs para o MCO.&lt;/p&gt;
&lt;p&gt;Mas não pense que é só isto, ele é muito mais poderoso, existem diversos outros agentes para utilizar e você pode construir seus próprios agentes usando RPC se achar necessário, e ainda existem os plugins em ruby, ele é muito extensível.&lt;/p&gt;
&lt;p&gt;Vale comentar que apesar de ter utilizado o RabbitMQ, o criador do MCO recomenda o uso do ActiveMQ a partir da versão 2.x.x, aparentemente alguns dos recursos desta versão só irão funcionar com o ActiveMQ. Em breve espero tratar o uso do ActiveMQ também.&lt;/p&gt;
&lt;p&gt;Preciso explicar que esse post apenas agrupa o que eu estudei até o momento, a partir daqui é hora de aprofundar ainda mais.&lt;/p&gt;
&lt;h2 id=&#34;10-referências&#34;&gt;10. Referências&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Plugins Github&lt;/strong&gt; &lt;br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppetlabs/mcollective-plugins&#34;&gt;https://github.com/puppetlabs/mcollective-plugins&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/puppetlabs/mcollective-puppet-agent#readme&#34;&gt;https://github.com/puppetlabs/mcollective-puppet-agent#readme&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Introdução ao MCO&lt;/strong&gt; &lt;br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://puppetlabs.com/mcollective/introduction/&#34;&gt;https://puppetlabs.com/mcollective/introduction/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/mcollective/reference/basic/gettingstarted_debian.html&#34;&gt;http://docs.puppetlabs.com/mcollective/reference/basic/gettingstarted_debian.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/mcollective/reference/basic/gettingstarted.html&#34;&gt;http://docs.puppetlabs.com/mcollective/reference/basic/gettingstarted.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/mcollective/reference/basic/configuration.html&#34;&gt;http://docs.puppetlabs.com/mcollective/reference/basic/configuration.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Construindo Agentes e Clientes com SimpleRPC&lt;/strong&gt; &lt;br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com/mcollective/simplerpc/&#34;&gt;http://docs.puppetlabs.com/mcollective/simplerpc/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Slides MCO&lt;/strong&gt; &lt;br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.slideshare.net/PuppetLabs/presentation-16281121&#34;&gt;http://www.slideshare.net/PuppetLabs/presentation-16281121&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;RabbitMQ&lt;/strong&gt; &lt;br&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.rabbitmq.com/stomp.html&#34;&gt;http://www.rabbitmq.com/stomp.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O livro &lt;strong&gt;Pro Puppet&lt;/strong&gt; da Puppetlabs também foi uma ótima referência de estudo.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Superman Unbound</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-31-superman-unbound/</link>
      <pubDate>Thu, 31 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-31-superman-unbound/</guid>
      <description>&lt;p&gt;Como de costume, antes do lançamento de um Filme da DC Comics - neste caso SuperMan Man of Steel, ocorre o lançamento de um longa de animação para abrir o caminho. Este ano teremos a animação SuperMan Unbound saindo em DVD e BluRay.&lt;/p&gt;
&lt;p&gt;Este longa é uma adaptação da graphic novel &lt;strong&gt;Superman: Brainiac&lt;/strong&gt; de Geoff Johns e Gary Frank. Como de costume o filho de krypton - com ajuda de sua prima kara - vai ter muito trabalho para salvar o mundo de uma invasão comandada por Brainiac.&lt;/p&gt;
&lt;p&gt;A voz do Superman ficará por conta de Matt Bomer (&amp;lsquo;White Collar&amp;rsquo;), Stana Katic e Molly Quinn de &amp;ldquo;Castle&amp;rdquo; farão respectivamente Lois Lane e a Supergirl. E o grande John Noble de &amp;ldquo;Fringe&amp;rdquo; dará vida ao Brainiac.&lt;/p&gt;
&lt;p&gt;Confira o trailer.&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;http://www.youtube.com/embed/EpnT__PBd6Q&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;Eu sou um fiel leitor da Marvel e DC há anos e acompanho todas os lançamentos das animações, eu inclusive prefiro as animações aos live actions.&lt;/p&gt;
&lt;p&gt;E esse ano ainda teremos o longa de animação &amp;ldquo;Justice League: Flashpoint&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Usando VIM com Powerline no Mountain Lion</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-28-usando-vim-com-powerline/</link>
      <pubDate>Mon, 28 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-28-usando-vim-com-powerline/</guid>
      <description>&lt;h2 id=&#34;sobre-a-powerline-para-o-vim&#34;&gt;Sobre a Powerline para o VIM&lt;/h2&gt;
&lt;p&gt;A Powerline é um daqueles plugins essenciais para o VIM, ele personaliza a statusline  deixando com um visual bem mais agradável e polido, facilitando a leitura e o entendimento dos modos de operação do VIM. A powerline foi criada pelo &lt;a href=&#34;https://github.com/Lokaltog&#34;&gt;Kim Silkebækken&lt;/a&gt; e está disponível no Github.&lt;/p&gt;
&lt;p&gt;Veja um exemplo retirado do site &lt;a href=&#34;http://www.spifftastic.net/&#34;&gt;spifftastic.net&lt;/a&gt;.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-01-28/powerline-ruby.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Powerline Normal Mode]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Conheci a Powerline através de um amigo (Magnun Leno) e desde então sempre uso esse plugin no VIM.&lt;/p&gt;
&lt;p&gt;Eu estou usando diretamente no VIM, a maioria das pessoas no mundo OSX prefere usá-la no MacVim, a configuração é muito similar por isso não vou entrar em detalhes do MacVim. Abaixo veja algumas screenshots do vim-powerlone em meu notebook pessoal.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-01-28/powerline-normal-mode.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Powerline Normal Mode]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-01-28/powerline-insert-mode.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Powerline Insert Mode]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-01-28/powerline-visual-mode.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Powerline Visual Mode]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2013-01-28/powerline-replace-mode.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Powerline Replace Mode]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Note que ele apresenta o modo do VIM (Normal, Inserção, Visual, Substituição, etc…), mostra o nome do arquivo que está sendo editado, o tipo do arquivo (unix), a codificação (utf-8), o filetype (puppet), o percentual lido, a linha e a posição do caracter na linha.&lt;/p&gt;
&lt;h2 id=&#34;prereqs&#34;&gt;PreReqs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;OSX Mountain Lion;&lt;/li&gt;
&lt;li&gt;Homebrew instalado em seu OSX;&lt;/li&gt;
&lt;li&gt;iTerm2 instalado e usando terminal em modo xterm-256color;&lt;/li&gt;
&lt;li&gt;Conhecimentos básicos sobre vim e vimrc;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;instalando-vundle&#34;&gt;Instalando Vundle&lt;/h2&gt;
&lt;p&gt;Para instalar o powerline vamos usar o vundle que é um gerenciador de pacotes para o vim, primeiro faça o clone do vundle com o comando abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois ajuste seu .vimrc para usar o vundle&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;quot;vundle
set nocompatible
filetype off

set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

&amp;quot; let Vundle manage Vundle
&amp;quot; required! 
Bundle &#39;gmarik/vundle&#39;

 &amp;quot; My Bundles here:
 &amp;quot;
Bundle &#39;Lokaltog/vim-powerline&#39;

 &amp;quot; original repos on github
 &amp;quot; Bundle &#39;tpope/vim-rails.git&#39;

 &amp;quot; non github repos
 &amp;quot; Bundle &#39;git://git.wincent.com/command-t.git&#39;
 
filetype plugin on
filetype plugin indent on
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Pronto, a configuração do vundle já foi adicionada, inclusive já mencionei que desejamos instalar o vim-powerline na lista de bundles, agora abra o vim e vamos pedir para o vundle instalar os plugins.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:BundleInstall
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;configurando-a-powerline&#34;&gt;Configurando a Powerline&lt;/h2&gt;
&lt;p&gt;Agora abra seu arquivo .vimrc e adicione as linhas abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;set laststatus=2
set encoding=utf-8
let g:Powerline_symbols = &#39;fancy&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Isso é suficiente para configurar e ativar a powerline, porém, ao abrir o Vim você verá que ela não está bonita como nas screenshost acima, isso acontece pois é necessário fazer um patch na fonte do OSX para ter aquele visual polido.&lt;/p&gt;
&lt;h2 id=&#34;instalando-fontes-no-osx&#34;&gt;Instalando fontes no OSX&lt;/h2&gt;
&lt;h3 id=&#34;fontes-que-já-receberam-patchs&#34;&gt;Fontes que já receberam patchs&lt;/h3&gt;
&lt;p&gt;Existem diversas fontes já preparadas para powerline, basta procurar no github.&lt;/p&gt;
&lt;p&gt;Para facilitar, escolha uma fonte com patch a partir do site abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://github.com/Lokaltog/powerline-fonts
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para este exemplo eu fiz o download da fonte Menlo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget https://github.com/Lokaltog/powerline-fonts/blob/master/Menlo/Menlo%20Regular%20for%20Powerline.otf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois de fazer download, rode o comando abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;open Menlo+Regular+for+Powerline.otf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Quando a fonte abrir, clique em instalar fonte.&lt;/p&gt;
&lt;p&gt;Configure a fonte nova como opção default em seu iTerm2, reinicie o iTerm2.&lt;/p&gt;
&lt;p&gt;Abra o Vim e veja se a powerline está funcionando com o visual correto.&lt;/p&gt;
&lt;h3 id=&#34;fontes-sem-patchs&#34;&gt;Fontes sem patchs&lt;/h3&gt;
&lt;p&gt;Caso deseje aplicar um patch em uma fonte específica, primeiro verifique se você tem o fontforge instalado rodando o comando abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ fontforge -version
Copyright (c) 2000-2011 by George Williams.
Executable based on sources from 13:48 GMT 22-Feb-2011-D.
Library based on sources from 13:48 GMT 22-Feb-2011.
fontforge 20110222
libfontforge 20110222
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Caso ele não esteja instalado, atualize os índices do homebrew&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew update
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o fontforge&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew install fontforge --use-clang
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Faça o patch da sua fonte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fontforge -script ~/.vim/bundle/vim-powerline/fontpatcher/fontpatcher CONSOLA.TTF 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Copyright (c) 2000-2012 by George Williams.
 Executable based on sources from 14:57 GMT 31-Jul-2012-D.
 Library based on sources from 14:57 GMT 31-Jul-2012.
The following table(s) in the font have been ignored by FontForge
  Ignoring &#39;DSIG&#39; digital signature table
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja a fonte criada&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;-rw-r--r--  1 gutocarvalho  staff  96584 28 Jan 19:40 CONSOLA-Powerline.TTF
-r--r--r--  1 gutocarvalho  staff  98520 28 Jan 19:39 CONSOLA.TTF
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após fazer o patch, clique duas vezes na fonte gerada e instale em seu OSX.&lt;/p&gt;
&lt;p&gt;Configure a fonte nova como opção default em seu iTerm2, reinicie o iTerm2.&lt;/p&gt;
&lt;p&gt;Abra o vim e veja se a powerline está funcionando com o visual correto.&lt;/p&gt;
&lt;h2 id=&#34;amarrando-as-pontas&#34;&gt;Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Esse plugin é um grande utilitário para o VIM ou MACVIM, recomendo para UNIX e LINUX.&lt;/p&gt;
&lt;p&gt;No Linux não é necessário aplicar patch nas fontes.&lt;/p&gt;
&lt;p&gt;O vim-powerline está congelado, seu criador está desenvolvendo um novo projeto para substituí-lo chamado apenas de &lt;a href=&#34;https://github.com/Lokaltog/powerline&#34;&gt;powerline&lt;/a&gt;, este foi todo escrito em python, no momento ainda é beta.&lt;/p&gt;
&lt;h2 id=&#34;referências&#34;&gt;Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Lokaltog/vim-powerline/blob/develop/doc/Powerline.txt&#34;&gt;https://github.com/Lokaltog/vim-powerline/blob/develop/doc/Powerline.txt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Lokaltog/vim-powerline&#34;&gt;https://github.com/Lokaltog/vim-powerline&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/gmarik/vundle&#34;&gt;https://github.com/gmarik/vundle&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress com alinhamento em listas</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-alinhamento-em-listas/</link>
      <pubDate>Fri, 25 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-alinhamento-em-listas/</guid>
      <description>&lt;p&gt;O Octopress vem com uma configuração de CSS em que as listas (UL/OL) vem com os itens desalinhados em relação ao texto, isso não deixa o post bonito, para resolver é bastante simples.&lt;/p&gt;
&lt;p&gt;Edite o arquivo sass/custom/_styles.scss&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim sass/custom/_styles.scss
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Insira o código abaixo no final do arquivo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;article {
  ol, ul {
    padding-left: 3em;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Gere novamente o conteúdo e ative o preview&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake generate &amp;amp;&amp;amp; rake preview
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse o site para verificar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://localhost:4000/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Referências&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://github.com/imathis/octopress/issues/417
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress com lista de categorias</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-lista-de-categorias/</link>
      <pubDate>Fri, 25 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-lista-de-categorias/</guid>
      <description>&lt;p&gt;O Octopress não vem com um plugin para fazer a lista de categorias de forma nativa, pesquisando encontrei várias soluções a que mais gostei foi a dotnetguy, acompanhe o que eu fiz.&lt;/p&gt;
&lt;h3 id=&#34;instalando&#34;&gt;Instalando&lt;/h3&gt;
&lt;p&gt;Primeiro criei um arquivo chamado category_list_tab.rb no diretório plugins do octopress&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim category_list_tab.rb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Coloque o conteúdo abaixo no arquivo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;module Jekyll
  class CategoryListTag &amp;lt; Liquid::Tag
    def render(context)
      html = &amp;quot;&amp;quot;
      categories = context.registers[:site].categories.keys
      categories.sort.each do |category|
        posts_in_category = context.registers[:site].categories[category].size
        category_dir = context.registers[:site].config[&#39;category_dir&#39;]
        category_url = File.join(category_dir, category.gsub(/_|\P{Word}/, &#39;-&#39;).gsub(/-{2,}/, &#39;-&#39;).downcase)
        html &amp;lt;&amp;lt; &amp;quot;&amp;lt;li class=&#39;category&#39;&amp;gt;&amp;lt;a href=&#39;https://archives.gutocarvalho.net/#{category_url}/&#39;&amp;gt;#{category} (#{posts_in_category})&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;\n&amp;quot;
      end
      html
    end
  end
end

Liquid::Template.register_tag(&#39;category_list&#39;, Jekyll::CategoryListTag)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Depois crie o arquivo category_list.html em source/_includes/custom/asides&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim sources/_includes/custom/asides/category_list.html
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Insira o conteúdo abaixo&lt;/p&gt;
&lt;p&gt;{% include_code category_list.html %}&lt;/p&gt;
&lt;p&gt;E para finalizar edite o arquivo _config.yml e insira uma referência para o category_list&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;asides/category_list.html
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja como ficou no meu arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;default_asides: [custom/asides/about.html, asides/twitter.html, asides/recent_posts.html, custom/asides/category_list.html, asides/github.html,  asides/delicious.html, asides/pinboard.html, asides/googleplus.html]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora basta acessar o blog e verificar se a lista de categorias apareceu.&lt;/p&gt;
&lt;h3 id=&#34;referências&#34;&gt;Referências&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;http://www.dotnetguy.co.uk/post/2012/06/25/octopress-category-list-plugin/
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress com tabelas personalizadas</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-tabelas-personalizadas/</link>
      <pubDate>Fri, 25 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-tabelas-personalizadas/</guid>
      <description>&lt;p&gt;Trabalhar com tabelas em markdown não é complicado, no octopress funciona da mesma forma que em qualquer editor markdown, porém, por alguma razão a configuração definida na folha de estilos (CSS) para tabelas no octopress não formata as bordas, tabela sem borda nem parece tabela.&lt;/p&gt;
&lt;p&gt;Para resolver o problema, novamente pesquisei e achei algumas referências, veja abaixo como resolvi em meu ambiente.&lt;/p&gt;
&lt;h3 id=&#34;ajustando-o-octopress&#34;&gt;Ajustando o Octopress&lt;/h3&gt;
&lt;p&gt;Primeiro passo, crie um arquivo chamado data-table.css em source/stylesheets com o conteúdo abaixo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:css %}&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;table {
border-style:solid;
border-width:1px;
border-color:#e7e3e7;
}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;table th, * + table td {
border-style:dashed;
border-width:1px;
border-color:#e7e3e7;
padding-left: 3px;
padding-right: 3px;
}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;table th {
border-style:solid;
font-weight:bold;
}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;table th[align=&amp;ldquo;left&amp;rdquo;], * + table td[align=&amp;ldquo;left&amp;rdquo;] {
text-align:left;
}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;table th[align=&amp;ldquo;right&amp;rdquo;], * + table td[align=&amp;ldquo;right&amp;rdquo;] {
text-align:right;
}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;
&lt;li&gt;table th[align=&amp;ldquo;center&amp;rdquo;], * + table td[align=&amp;ldquo;center&amp;rdquo;] {
text-align:center;
}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Segundo passo, adicione a linha abaixo ao arquivo source/_includes/head.html&lt;/p&gt;
&lt;p&gt;{% codeblock lang:html %}&lt;/p&gt;
&lt;link href=&#34;https://archives.gutocarvalho.net/stylesheets/data-table.css&#34; media=&#34;screen, projection&#34; rel=&#34;stylesheet&#34; type=&#34;text/css&#34; /&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;A partir deste momento a tabelas que você criar via markdown&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Nome                    | Twitter      
----------------------- | --------------
Guto Carvalho           | @gutocarvalho
Jose Augusto Carvalho   | @joseaugustocc

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Vão ter bordas, o resultado final é este abaixo&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Nome&lt;/th&gt;
&lt;th&gt;Twitter&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Guto Carvalho&lt;/td&gt;
&lt;td&gt;@gutocarvalho&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Jose Augusto Carvalho&lt;/td&gt;
&lt;td&gt;@joseaugustocc&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;br&gt;
&lt;p&gt;Viram como foi fácil, e via CSS você pode personalizar ainda mais o estilo de suas tabelas.&lt;/p&gt;
&lt;p&gt;No site &lt;a href=&#34;http://coding.smashingmagazine.com/2008/08/13/top-10-css-table-designs/&#34;&gt;smashingmagazine&lt;/a&gt; tem vários exemplos de CSS para tabelas.&lt;/p&gt;
&lt;h3 id=&#34;referências&#34;&gt;Referências&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://samwize.com/2012/09/24/octopress-table-stylesheet/&#34;&gt;http://samwize.com/2012/09/24/octopress-table-stylesheet/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://programus.github.com/blog/2012/03/07/add-table-data-css-for-octopress&#34;&gt;http://programus.github.com/blog/2012/03/07/add-table-data-css-for-octopress&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress com textos justificados</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-textos-justificados/</link>
      <pubDate>Fri, 25 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-25-octopress-com-textos-justificados/</guid>
      <description>&lt;p&gt;Por padrão o Octopress não justifica os posts e páginas, vou mostrar como resolver isto.&lt;/p&gt;
&lt;p&gt;Edite o arquivo sass/custom/_styles.scss&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim sass/custom/_styles.scss 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E insira o código abaixo no final do arquivo&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;article p{
    text-align:justify;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Gere novamente o conteúdo e ative o preview&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake generate &amp;amp;&amp;amp; rake preview
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse seu blog para verificar se os textos estão justificados&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://localhost:4000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Referências&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;https://github.com/imathis/octopress/issues/409
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Octopress e novas fontes</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-25-octopress-e-novas-fontes/</link>
      <pubDate>Fri, 25 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-25-octopress-e-novas-fontes/</guid>
      <description>&lt;p&gt;Eu não gosto da fonte padrão do Octopresss, já havia lido que ele usa fontes do Google, pesquisando no repositório &lt;a href=&#34;http://www.google.com/webfonts&#34;&gt;google webfonts&lt;/a&gt;, encontrei uma fonte mais interessante - Oxygen, após alguma pesquisa descobri que é bem fácil alterar as fontes, vamos ao procedimento que eu executei.&lt;/p&gt;
&lt;h2 id=&#34;modificando-a-fonte&#34;&gt;Modificando a fonte&lt;/h2&gt;
&lt;p&gt;Primeiro edite o arquivo sass/custom/_fonts.scss e insira&lt;/p&gt;
&lt;p&gt;{% codeblock lang:css %}
$sans: &amp;ldquo;Oxygen&amp;rdquo;, sans-serif;
$serif: &amp;ldquo;Oxygen&amp;rdquo;, sans-serif;
$heading-font-family: &amp;lsquo;Oxygen&amp;rsquo;, sans-serif;
$header-title-font-family: &amp;ldquo;Oxygen&amp;rdquo;, Helvetica, Arial, sans-serif;
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Depois edite o arquivo source/_includes/custom/head.html e modifique o nome da fonte&lt;/p&gt;
&lt;p&gt;{% codeblock lang:html %}&lt;/p&gt;
&lt;link href=&#34;http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic&#34; rel=&#34;stylesheet&#34; type=&#34;text/css&#34;&gt;
&lt;link href=&#34;http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic&#34; rel=&#34;stylesheet&#34; type=&#34;text/cs
{% endcodeblock %}
&lt;p&gt;para Oxygen&lt;/p&gt;
&lt;p&gt;{% codeblock lang:html %}
link href=&amp;ldquo;&lt;a href=&#34;http://fonts.googleapis.com/css?family=Oyxgen:regular,italic,bold,bolditalic%22&#34;&gt;http://fonts.googleapis.com/css?family=Oyxgen:regular,italic,bold,bolditalic&amp;quot;&lt;/a&gt; rel=&amp;ldquo;stylesheet&amp;rdquo; type=&amp;ldquo;text/css&amp;rdquo;&amp;gt;&lt;/p&gt;
&lt;link href=&#34;http://fonts.googleapis.com/css?family=Oxygen:regular,italic,bold,bolditalic&#34; rel=&#34;stylesheet&#34; type=&#34;text/cs
{% endcodeblock %}
&lt;p&gt;Rode o generate e preview&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake generate &amp;amp;&amp;amp; rake preview
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse seu site localmente e verifique se a fonte mudou&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://localhost:4000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois de confirmar o mudança, faça o deploy&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake deploy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, fontes novas.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Resource Type File e Múltiplos Sources</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-25-puppet-e-o-resource-type-file/</link>
      <pubDate>Fri, 25 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-25-puppet-e-o-resource-type-file/</guid>
      <description>&lt;p&gt;Há alguns dias um amigo (Elcimar Freitas) me disse que havia criado uma classe usando o modelo em trio, porém ele queria que certas máquinas recebessem arquivos personalizados, em um primeiro momento ele estava pensando em usar condicionais ou case para resolver o problema, o que é realmente possível, porém, não é muito prático, acabei dando uma dica que aprendi com o mago @dscobral - vulgo gandalf. Aqui neste post vamos resolver o problema dentro do recurso File, acompanhe a explicação e a solução.&lt;/p&gt;
&lt;h3 id=&#34;estudando-o-problema&#34;&gt;Estudando o problema&lt;/h3&gt;
&lt;p&gt;Veja abaixo um exemplo típico de configuração em trio:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;class ntp {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package { &#39;ntp&#39;:
	ensure =&amp;gt; present
}

file { &#39;/etc/ntp.conf&#39;:
	ensure  =&amp;gt; present,
	mode    =&amp;gt; 644,
	owner   =&amp;gt; root,
	group   =&amp;gt; root,
	require =&amp;gt; Package[&#39;ntp&#39;],
	notify  =&amp;gt; Service[&#39;ntp&#39;],
	source  =&amp;gt; &amp;quot;puppet:///files/ntp/ntp.conf&amp;quot;
}

service { &#39;ntp&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;/etc/ntp.conf&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Poderíamos utilizar tratamento condicional para enviar diferentes arquivos para diferentes nodes, veja um exemplo abaixo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ntp {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if $fqdn == &#39;servidor1.hacklab&#39; {
	$ntpfile = &amp;quot;ntp.conf.servidor1&amp;quot;
}
elsif $fqdn == &amp;quot;servidor2.hacklab&amp;quot; {
	$ntpfile = &amp;quot;ntp.conf.servidor2&amp;quot;
}
else {
	$ntpfile = &amp;quot;ntp.conf&amp;quot;
}

package { &#39;ntp&#39;:
	ensure =&amp;gt; present
}

file { &#39;/etc/ntp.conf&#39;:
	ensure  =&amp;gt; present,
	mode    =&amp;gt; 644,
	owner   =&amp;gt; root,
	group   =&amp;gt; root,
	require =&amp;gt; Package[&#39;ntp&#39;],
	notify  =&amp;gt; Service[&#39;ntp&#39;],
	source  =&amp;gt; &amp;quot;puppet:///files/ntp/${ntpfile}&amp;quot;
}

service { &#39;ntp&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;/etc/ntp.conf&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Ou então poderíamos utilizar o case para tratar a mesma questão de forma diferente, veja o exemplo abaixo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ntp {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;case $fdqn {
	servidor1.hacklab: { $ntpfile = &amp;quot;ntp.conf.servidor1&amp;quot; }
	servidor2.hacklab: { $ntpfile = &amp;quot;ntp.conf.servidor2&amp;quot; }
	default:	   { $ntpfile = &amp;quot;ntp.conf&amp;quot; }
}

package { &#39;ntp&#39;:
	ensure =&amp;gt; present
}

file { &#39;/etc/ntp.conf&#39;:
	ensure  =&amp;gt; present,
	mode    =&amp;gt; 644,
	owner   =&amp;gt; root,
	group   =&amp;gt; root,
	require =&amp;gt; Package[&#39;ntp&#39;],
	notify  =&amp;gt; Service[&#39;ntp&#39;],
	source  =&amp;gt; &amp;quot;puppet:///files/ntp/${ntpfile}&amp;quot;
}

service { &#39;ntp&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;/etc/ntp.conf&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Daria até para usar seletores, abaixo mais um exemplo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ntp {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package { &#39;ntp&#39;:
	ensure =&amp;gt; present
}

file { &#39;ntp.conf&#39;:
	ensure  =&amp;gt; present,
	mode    =&amp;gt; 644,
	owner   =&amp;gt; root,
	group   =&amp;gt; root,
	require =&amp;gt; Package[&#39;ntp&#39;],
	notify  =&amp;gt; Service[&#39;ntp&#39;],
	source    =&amp;gt; $fqdn ? {
		&#39;sevidor1.hacklab&#39;   =&amp;gt; &#39;puppet:///files/ntp/ntp.conf.servidor1&#39;,
		&#39;servidor2.hacklab&#39;  =&amp;gt; &#39;puppet:///files/ntp/ntp.conf.servidor1&#39;,
		 default             =&amp;gt; &#39;puppet:///files/ntp/ntp.conf&#39;,
	},

}

service { &#39;ntp&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;ntp.conf&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;solucionando-o-problema&#34;&gt;Solucionando o problema&lt;/h3&gt;
&lt;p&gt;Porém nos três casos teríamos que escrever muitas linhas caso fosse necessário ter arquivos diferentes para vários servidores, seria repetitivo e cansativo, e nós utilizamos o puppet justamente para evitar o trabalho repetitivo.&lt;/p&gt;
&lt;p&gt;Se lermos com cuidado o manual de resource types, ou se você tiver a sorte de ter um gandalf (@dcsobral) fazendo mentoria de puppet contigo, você poderá encontrar a solução dentro do resource type file, veja como fica a solução mais elegante - na minha opinião.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ntp {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;package { &#39;ntp&#39;:
	ensure =&amp;gt; present
}

file { &#39;ntp.conf&#39;:
	ensure  =&amp;gt; present,
	mode    =&amp;gt; 644,
	owner   =&amp;gt; root,
	group   =&amp;gt; root,
	require =&amp;gt; Package[&#39;ntp&#39;],
	notify  =&amp;gt; Service[&#39;ntp&#39;],
	source  =&amp;gt; [
               &amp;quot;puppet:///files/ntp/ntp.conf.${fqdn}&amp;quot;,
               &amp;quot;puppet:///files/ntp/ntp.conf&amp;quot;,
               ],
}

service { &#39;ntp&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;ntp.conf&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Observe que dentro de source eu declarei que se houver um arquivo chamado ntp.conf.nomedamaquina.dominio, ele vai usar esse arquivo, do contrário, se não existir algum arquivo com $fqdn no nome, ele passa para a próxima opção que seria o arquivo ntp.conf padrão.&lt;/p&gt;
&lt;p&gt;Com este tipo de configuração podemos ter dezenas de arquivos de configuração no diretório /etc/puppet/files/ntp, cada um terminando com o nome da máquina a que se destina, isso seria entendido pelo source e processado na ordem determinada.&lt;/p&gt;
&lt;p&gt;Eu chamo isso de múltiplos sources, veja mais um exemplo retirado do site da puppetlabs:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;file { &amp;ldquo;/etc/nfs.conf&amp;rdquo;:
source =&amp;gt; [
&amp;ldquo;puppet:///modules/nfs/conf.$host&amp;rdquo;,
&amp;ldquo;puppet:///modules/nfs/conf.$operatingsystem&amp;rdquo;,
&amp;ldquo;puppet:///modules/nfs/conf&amp;rdquo;
]
}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;No exemplo acima podem existir arquivos terminando com o nome da máquina, sistema operacional ou então a opção final é o arquivo padrão.&lt;/p&gt;
&lt;p&gt;Dá para ver que existem muitas formas de se fazer a mesma coisa, o desafio é encontrar a mais eficiente para sua necessidade.&lt;/p&gt;
&lt;p&gt;Eu normalmente uso CASE e SELETORES quando tenho que tratar nomes - diferentes - de pacotes em distros linux distintas, ou mesmo PATH para um arquivo de configuração que é diferente no Debian e no CENTOS, nestes casos são muito úteis de fato.&lt;/p&gt;
&lt;h3 id=&#34;referências&#34;&gt;Referências&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.puppetlabs.com&#34;&gt;http://docs.puppetlabs.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://gutocarvalho.net/dokuwiki/doku.php?id=puppet_serverless#case&#34;&gt;http://gutocarvalho.net/dokuwiki/doku.php?id=puppet_serverless#case&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando Octopress no Mountain Lion</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-23-instalando-octopress-no-mountain-lion/</link>
      <pubDate>Wed, 23 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-23-instalando-octopress-no-mountain-lion/</guid>
      <description>&lt;h2 id=&#34;1-sobre-octopress&#34;&gt;1. Sobre octopress&lt;/h2&gt;
&lt;p&gt;O Octopress é um framework para o Jekyll. O Jekyl por sua vez é um gerador de sistes estáticos. Quando usamos o Jekyll diretamente precisamos criar toda a estrutura HTML, CSS, Javascript e configurá-la, com o octopress isso tudo já vem pronto.&lt;/p&gt;
&lt;p&gt;Tanto o Octopress quanto o Jekyll foram escritos em Ruby.&lt;/p&gt;
&lt;p&gt;Podemos instalar o Octopress diretamente em nosso notebook, podemos utilizar git para manter seus arquivos e empurrar estes para um servidor na internet via git ou rsync, simples assim.&lt;/p&gt;
&lt;p&gt;No octopress utilizamos a linguagem markdown para escrever os posts, e tudo é feito pela linha de comando, veja alguns exemplos de manipulação do Octopress.&lt;/p&gt;
&lt;p&gt;Criar um post&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake new_post[&#39;Post sobre Octopress&#39;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Editar um novo post&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim sources/_posts/2013-01-23-post-sobre-octoprress.markdown
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Criar uma página&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake new_page[&#39;howtos&#39;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Editar uma nova página&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim sources/howtos/index.markdown        
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Gerar o site após mudanças em configurações/posts/páginas/tema.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake generate
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ver um preview do site no seu notebook&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake preview
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após rodar o preview acesse&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://localhost:4000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para publicar uma mudança em seu site de produção&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake deploy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Existem duas formas de fazer o deploy, uma via RSYNC e outra via GIT, normalmente o deploy via GIT é utilizado para alimentar o GITHUB PAGES e o RSYNC para enviar para algum outro host, no meu caso dreamhost.&lt;/p&gt;
&lt;h2 id=&#34;2-minhas-necessidades&#34;&gt;2. Minhas necessidades&lt;/h2&gt;
&lt;p&gt;Recentemente eu reinstalei o meu OSX e precisei preparar todo o ambiente para rodar o octopress novamente, abaixo segue meu roteiro para resolver isto usando o homebrew e RVM.&lt;/p&gt;
&lt;h2 id=&#34;3-pré-requisitos&#34;&gt;3. Pré-requisitos&lt;/h2&gt;
&lt;p&gt;O octopresss roda em virtualmente qualquer sistema operacional que tenha suporte ruby, porém no meu caso estou usando OSX Mountain Lion.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;instale o último xcode&lt;/li&gt;
&lt;li&gt;instale console tools do xcode&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Partindo do pressuposto de que você já tem o xcode e xcode console tools, vamos prosseguir.&lt;/p&gt;
&lt;h2 id=&#34;4-homebrew&#34;&gt;4. Homebrew&lt;/h2&gt;
&lt;p&gt;O homebrew é um gerenciador de pacotes para OSX, tal como fink ou macports, porém no momento acho o homebrew mais interessante e com mais opções do que os demais, vale lembrar que se for usar o homebrew, remova antes o fink ou macports para evitar conflitos.&lt;/p&gt;
&lt;h3 id=&#34;41-instalando-homebrew&#34;&gt;4.1 instalando homebrew&lt;/h3&gt;
&lt;p&gt;Instale o homebrew&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ruby -e &amp;quot;$(curl -fsSkL raw.github.com/mxcl/homebrew/go)&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-rvm&#34;&gt;5. RVM&lt;/h2&gt;
&lt;p&gt;O rvm é uma ferramenta que te permite selecionar a versão do ruby para aquela aplicação que você deseja utilizar, no meu caso eu uso puppet que necessita de um ruby mais antigo, porém também uso o octopress que precisa do ruby mais novo, portando o rvm é uma excelente alternativa para gerenciar este tipo de coisa.&lt;/p&gt;
&lt;h3 id=&#34;51-instalando-rvm&#34;&gt;5.1 instalando rvm&lt;/h3&gt;
&lt;p&gt;Atualize os índices do homebew&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew update
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o git&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew install git
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ative o uso de fórmulas externas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew tap homebrew/dupes
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale pacotes necessarios para compilação do ruby&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;brew install autoconf automake apple-gcc42
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ajuste seu path no arquivo .bash_profile ou .profile&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;export PATH=&amp;quot;/usr/local/sbin:/usr/local/bin:$PATH&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o rvm e a última versão do ruby&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl -L https://get.rvm.io | bash -s stable --ruby
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale as dependências para o ruby (recomendando pelo rvm)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rvm pkg install openssl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se quiser, instale o ruby 1.8.7&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rvm install 1.8.7 --with-gcc=clang --without-tcl --without-tk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se quiser, instale o ruby 1.9.2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rvm install 1.9.2 --with-gcc=clang --without-tcl --without-tk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Defina que o ruby 1.9.3 é o default&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rvm use 1.9.3 --default
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;6-octopress&#34;&gt;6. Octopress&lt;/h2&gt;
&lt;h3 id=&#34;61-octopress-minha-primeira-instalação&#34;&gt;6.1 octopress, minha primeira instalação&lt;/h3&gt;
&lt;p&gt;Siga estes passos se você deseja instalar o octopress pela primeira vez.&lt;/p&gt;
&lt;p&gt;Faça o clone do octopress via git&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git clone git://github.com/imathis/octopress.git 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acesse o diretório octopress&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd octopress
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o bundler&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gem install bundler
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rode o bundle para instalar todas as dependências do octopress&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;blunde install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o tema default do octopress&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rake install
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;62-octopress-reinstalei-meu-osx-e-agora&#34;&gt;6.2 octopress, reinstalei meu OSX e agora?&lt;/h3&gt;
&lt;p&gt;Se você reinstalou seu OSX e quer fazer seu octopress funcionar novamente, faça o seguinte:&lt;/p&gt;
&lt;p&gt;Acesse seu diretório do octopress&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /caminho/para/octopress
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o bundler&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;gem install bundler
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Rode o bundle para instalar as dependências do octopress&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bundle install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Está tudo pronto para voltar a utilizar seu octopress, é só sair blogando.&lt;/p&gt;
&lt;h3 id=&#34;63-utilizando-o-octopress&#34;&gt;6.3 utilizando o octopress&lt;/h3&gt;
&lt;p&gt;Como configurar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://octopress.org/docs/configuring/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O básico para blogar&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://octopress.org/docs/blogging
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Posts com trechos de código&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://octopress.org/docs/blogging/code/    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Sobre plugins nativos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://octopress.org/docs/blogging/plugins/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tema e personalização deste&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://octopress.org/docs/theme/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Mais informações em&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://octopress.org/docs/
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;7-dicas-soltas&#34;&gt;7. Dicas Soltas&lt;/h2&gt;
&lt;p&gt;Eu uso o Mou como editor Markdown para Octopress, é possível alterar o código do octopress para ele abrir o Mou após a criação de um post ou página.&lt;/p&gt;
&lt;p&gt;É perfeitamente possível blogar através do VIM, eventualmente faço isto, porém acho o MOU mais confortável.&lt;/p&gt;
&lt;p&gt;Para comentários eu uso o Disqus.&lt;/p&gt;
&lt;p&gt;Eu uso muito o plugin nativo Codeblock.&lt;/p&gt;
&lt;p&gt;O restante é o padrão do Octopress.&lt;/p&gt;
&lt;p&gt;Eu comecei a migrar os post do Wordpress - quase 500 posts, mas achei cansativo e chato arrumar post a post devido aos problemas de sintaxe markdown do script exitwp, acabei deixando o wordpress no ar e quando estiver com tempo volto a pensar nessa migração.&lt;/p&gt;
&lt;h2 id=&#34;8-referências&#34;&gt;8. Referências&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://stackoverflow.com/questions/11664835/mountain-lion-rvm-install-1-8-7-x11-error&#34;&gt;http://stackoverflow.com/questions/11664835/mountain-lion-rvm-install-1-8-7-x11-error&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.webdevotion.be/blog/2012/06/05/ruby-rvm-homebrew-xcode43/&#34;&gt;http://www.webdevotion.be/blog/2012/06/05/ruby-rvm-homebrew-xcode43/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://amaras-tech.co.uk/article/182/Mountain_Lion_Setup,_Part_2_Homebrew_%26_RVM&#34;&gt;http://amaras-tech.co.uk/article/182/Mountain_Lion_Setup,_Part_2_Homebrew_%26_RVM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.dojimmy.com/blog/2012/12/07/como-instalar-o-octopress-no-mac-osx-moutain-lion/&#34;&gt;http://blog.dojimmy.com/blog/2012/12/07/como-instalar-o-octopress-no-mac-osx-moutain-lion/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>PuppetDay em Brasília</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-16-puppetday-em-brasilia/</link>
      <pubDate>Wed, 16 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-16-puppetday-em-brasilia/</guid>
      <description>&lt;p&gt;Em 2013 estou com muita vontade de organizar um Puppet Day em Brasília, algo para o mês de Maio ou Junho, por isso aproveito para fazer o convite aqui no Blog.&lt;/p&gt;
&lt;p&gt;Peço que os interessados em ajudar entrem em contato para que possamos avaliar se é uma ideia viável.&lt;/p&gt;
&lt;p&gt;Temos vários cases interessantes na esfera federal em Brasília e acho que é um bom lugar para começar a difundir o puppet.&lt;/p&gt;
&lt;p&gt;Quem sabe esse pode ser um pequeno passo para um Puppet Camp no Brasil.&lt;/p&gt;
&lt;p&gt;Já fiz esse convite na lista puppet-users-br do googlegroups e grupo puppet-br no linkedin.&lt;/p&gt;
&lt;p&gt;Att.
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Instalando Zabbix 2.0.x Server, Proxy, Frontend, JMX e Agent em Debian</title>
      <link>https://archives.gutocarvalho.net/post/2013-01-14-instalando-zabbix-2x-em-debian/</link>
      <pubDate>Mon, 14 Jan 2013 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2013-01-14-instalando-zabbix-2x-em-debian/</guid>
      <description>&lt;p&gt;Neste post vou mostrar uma das muitas formas de instalar o Zabbix 2.0.6 em modo Server, Agent, Proxy e JMX Gateway.&lt;/p&gt;
&lt;h2 id=&#34;1-entendendo-alguns-conceitos-básicos&#34;&gt;1. Entendendo alguns conceitos básicos&lt;/h2&gt;
&lt;h3 id=&#34;11-zabbix&#34;&gt;1.1 Zabbix&lt;/h3&gt;
&lt;p&gt;O Zabbix é uma suite de monitoramento open-source extretamente eficiente, flexível e poderosa, e um dos seus principais diferenciais é utilizar mínimos recursos dos hosts para fazer o monitoramento.&lt;/p&gt;
&lt;p&gt;O Zabbix Atualmente se encontra na versão 2.0.6.&lt;/p&gt;
&lt;p&gt;O Zabbix é uma solução composta por Zabbix Server, Zabbix Agent, Zabbix Proxy e a partir da versão 2.0.x oferece monitoramento de aplicações java via JMX Gateway.&lt;/p&gt;
&lt;h3 id=&#34;12-zabbix-server&#34;&gt;1.2 Zabbix Server&lt;/h3&gt;
&lt;p&gt;O Zabbix Server é o &amp;lsquo;sistema nervoso&amp;rsquo; da suite de monitoramento Zabbix, é ele que coleta os dados, é ele que calcula e executa as triggers, é ele que envia notificações aos usuários. É o componente central da suite de monitoramento, é a ele que o Zabbix Agent e Zabbix Proxy se reportam e enviam dados para processamento, análise e arquivamento.&lt;/p&gt;
&lt;p&gt;Todas as configurações e informações estatísticas, todos os dados operacionais são armazenados no Zabbix Server.&lt;/p&gt;
&lt;p&gt;O Zabbix Server é composto pelo server, frontend PHP e backend SQL que pode ser o PostgreSQL, MySQL ou SQLite.&lt;/p&gt;
&lt;h3 id=&#34;13-zabbix-agent&#34;&gt;1.3 Zabbix Agent&lt;/h3&gt;
&lt;p&gt;O Agent é quem monitora os hosts, é ele que extrai os dados e envia para o Zabbix Server processar (modo ativo) ou disponibiliza para o Zabbix Server quando ele o cosulta (modo passivo).&lt;/p&gt;
&lt;p&gt;O Agent pode funcionar de forma passiva ou ativa.&lt;/p&gt;
&lt;p&gt;Na forma passiva, o servidor Zabbix Server solicita dados ao Agente que verifica, extrai e devolve os dados para o Server processar.&lt;/p&gt;
&lt;p&gt;Na forma ativa, o agente verifica com o sevidor a lista de itens que precisa checar, a partir daí ele extrai e envia periódicamente para o servidor.&lt;/p&gt;
&lt;p&gt;A forma mais comum de uso do agente é o modo passivo.&lt;/p&gt;
&lt;h3 id=&#34;14-zabbix-proxy&#34;&gt;1.4 Zabbix Proxy&lt;/h3&gt;
&lt;p&gt;O Zabbix Proxy pode coletar informações de um ou mais hosts e enviá-las para o Zabbix Server processar.&lt;/p&gt;
&lt;p&gt;O Zabbix Proxy é uma solução que foi desenhada para dividir a carga do Zabbix Server, uma vez que o proxy pode coletar os dados de forma direta, logo pode-se ter vários proxys coletando dados de vários ambientes e enviando para o Zabbix Server processar.&lt;/p&gt;
&lt;p&gt;A coleta de dados é um procedimento que consome muitos recursos do servidor, passar isso para o proxy pode ser uma boa ideia para diminuir a carga no master.&lt;/p&gt;
&lt;p&gt;Ele também pode ser muito útil para redes muito segmentadas ou para coletar dados em pontos remotos da rede onde a conexão não é muito boa, assim ele centraliza todos os dados e envia de uma vez só para o Zabbix Server processar.&lt;/p&gt;
&lt;h3 id=&#34;15-zabbix-get&#34;&gt;1.5 Zabbix GET&lt;/h3&gt;
&lt;p&gt;O Zabbix GET é um comando utilizado para consultar informações em agentes Zabbix, é como o Zabbix Server se comunica com os agentes, contudo ele pode ser instalado separadamente do server para fazer testes e consultas em agentes diretamente.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;zabbix_get -s ip-do-host-monitorado -p 10050 -k agent.version
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;16-zabbi-sender&#34;&gt;1.6 Zabbi SENDER&lt;/h3&gt;
&lt;p&gt;O Zabbix SENDER é um comando utilizado para enviar informações ao Zabbix Server diretamente, sem uso de agente. No Zabbix server você precisa criar itens
chamados Zabbix TRAP para receber e processar informações enviadas via SENDER. Normalmente o SENDER está associado a scripts que geram determinadas métricas e usam depois o SENDER para enviar estes dados coletados ao Zabbix Server.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;zabbix_sender -z zabbix -s &amp;quot;Apache Conexoes Estabelecidas&amp;quot; -k httpd.established.connections -o 178
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;141-cenários-de-zabbix-proxy&#34;&gt;1.4.1 Cenários de Zabbix Proxy&lt;/h4&gt;
&lt;p&gt;Imagine que o servidor zabbix precise consultar informações em cerca de 1000 agentes e depois, precisa processar os dados recebidos de todo eles, certamente esta tarefa irá consumir boa parte da memória e processamento disponíveis, e fará isto tanto na coleta quanto no processamento. Agora imagine 4 Proxys conectados ao Server, coletando, armazenando e enviando dados ao zabbix server de forma ordenada, e neste caso, cada proxy poderia coletar dados de cerca de 250, diminuindo a carga de consulta aos agentes, esse cenário certamente ofereceria uma melhor performance para toda a suite Zabbix.&lt;/p&gt;
&lt;h3 id=&#34;15-zabbix-jmx-gateway&#34;&gt;1.5 Zabbix JMX Gateway&lt;/h3&gt;
&lt;p&gt;O Zabbix JMX Gateway é um daemon escrito em JAVA que consegue monitorar JMX Counters de aplicações JAVA. Quando o Zabbix Server quer saber alguma informação de um ambiente JMX, ele pergunta ao JMX GATEWAY que por sua vez se conecta via API de gerenciamento JMX na aplicação, assim ele extrai o dado e devolve para o Zabbix Server processá-lo.&lt;/p&gt;
&lt;p&gt;Este recurso só está disponível a partir do Zabbix 2.0.x.&lt;/p&gt;
&lt;p&gt;Na versão 1.8.x era necessário usar aplicações externas como o ZAPCAT ou TWEEDLE para fazer tal monitoramento.&lt;/p&gt;
&lt;h2 id=&#34;2-mão-na-massa&#34;&gt;2. Mão na Massa&lt;/h2&gt;
&lt;h3 id=&#34;21-ambiente&#34;&gt;2.1 Ambiente&lt;/h3&gt;
&lt;p&gt;Para este projeto eu criei quatro VMs no virtualbox com duas interfaces de rede em cada.&lt;/p&gt;
&lt;p&gt;A primeira interface NAT para baixar pacotes, a segunda interface em modo HostOnly ou Internal usando IP&amp;rsquo;s da faixa 192.168.56.xx&lt;/p&gt;
&lt;p&gt;O sistema operacional escolhido foi o Debian Wheezy - 64 bits.&lt;/p&gt;
&lt;h4 id=&#34;211-orientações&#34;&gt;2.1.1 Orientações&lt;/h4&gt;
&lt;p&gt;Se possível, deixe uma partição maior para /opt, é lá que o zabbix e seus arquivos ficarão após a compilação.&lt;/p&gt;
&lt;h4 id=&#34;212-disposição-das-vms-utilizadas&#34;&gt;2.1.2 Disposição das VM&amp;rsquo;s utilizadas&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;VM1 - IP 192.168.56.80 zabbix server/jmx/agent            - 512 MB RAM - 1 processador
VM2 - IP 192.168.56.81 zabbix database/agent              - 512 MB RAM - 1 processador
VM3 - IP 192.168.56.82 zabbix frontend/agent              - 128 MB RAM - 1 processador
VM4 - IP 192.168.56.83 zabbix proxy/database/agent        - 128 MB RAM - 1 processador
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Prepare este ambiente antes de prosseguir.&lt;/p&gt;
&lt;p&gt;Fixe o IP nas interfaces para evitar problemas ao reiniciar as VMs.&lt;/p&gt;
&lt;h3 id=&#34;22-zabbix-server&#34;&gt;2.2. Zabbix Server&lt;/h3&gt;
&lt;p&gt;Acesse a VM reservada para o Zabbix Server (192.168.56.80).&lt;/p&gt;
&lt;p&gt;A configuração de repositório APT é a padrão.&lt;/p&gt;
&lt;h4 id=&#34;221-pacotes&#34;&gt;2.2.1 Pacotes&lt;/h4&gt;
&lt;p&gt;instale ferramentas de compilação&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install build-essential
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacotes dev do postgresql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install postgresql-server-dev-9.1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacotes dev da libcurl&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install libcurl3-gnutls-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacotes dev para jabber&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install libiksemel-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacote dev para odbc&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install unixodbc-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacote dev para snmp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install libsnmp-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacote dev para libssh&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install libssh2-1-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacote dev para openipmi&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install libopenipmi-dev
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale pacote java jdk&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install openjdk-6-jdk
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale o fping&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install fping
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;juntando tudo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install build-essential postgresql-server-dev-9.1 libcurl3-gnutls-dev libiksemel-dev libjabberd2-dev unixodbc-dev libsnmp-dev libssh2-1-dev libopenipmi-dev openjdk-6-jdk fping
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;222-usuário-e-grupo&#34;&gt;2.2.2 Usuário e Grupo&lt;/h4&gt;
&lt;p&gt;crie o grupo zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;groupadd zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o usuário zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;useradd -g zabbix zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;223-compilando&#34;&gt;2.2.3 Compilando&lt;/h4&gt;
&lt;p&gt;faça download dos sources do zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget http://ufpr.dl.sourceforge.net/project/zabbix/ZABBIX%20Latest%20Stable/2.0.6/zabbix-2.0.6.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;descompacte o tarball&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar zxvf zabbix-2.0.6.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;acesse o diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd zabbix-2.0.6
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;configure a compilação&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;./configure --prefix=/opt/zabbix --enable-server --enable-agent --enable-java --enable-ipv6 --with-ldap --with-ssh2 --with-net-snmp --with-jabber --with-postgresql --with-libcurl --with-unixodbc --with-openipmi
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;compile o zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale os arquivos compilados&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie um diretório para os scripts de init&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /opt/zabbix/init
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste as permissões&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chown -R zabbix. /opt/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie os scripts de init default para o diretório criado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /root/zabbix-2.0.6/misc/init.d/debian/zabbix-agent /opt/zabbix/init
cp /root/zabbix-2.0.6/misc/init.d/debian/zabbix-server /opt/zabbix/init
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;corrija o path dentro dos scripts para /opt/zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sed -i &#39;s/\/usr\/local\/sbin/\/opt\/zabbix\/sbin/&#39; /opt/zabbix/init/zabbix-*
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o script de init para o jmx gateway em /opt/zabbix/init/zabbix-java&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#!/bin/sh
NAME=zabbix-java
DAEMON=/opt/zabbix/sbin/zabbix_java/startup.sh
DOWN=/opt/zabbix/sbin/zabbix_java/shutdown.sh
DESC=&amp;quot;Zabbix Java Gateway daemon&amp;quot;
PID=/opt/zabbix/run/zabbix_java.pid

test -f $DAEMON || exit 0
set -e

case &amp;quot;$1&amp;quot; in
  start)
        echo &amp;quot;Starting $DESC&amp;quot;
        $DAEMON
        ;;
  stop)
        echo &amp;quot;Stopping $DESC&amp;quot;
        $DOWN
        ;;
  *)
        echo &amp;quot;Usage: $NAME {start|stop}&amp;quot;
        exit 1
        ;;
esac
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ajuste a permissão do arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chmod 755 /opt/zabbix/init/zabbix-java
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;após ajustar os scripts, copie para /etc/init.d/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /opt/zabbix/init/* /etc/init.d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie os diretórios run e log&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /opt/zabbix/run/
mkdir /opt/zabbix/log/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste as permissões do diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chown zabbix. /opt/zabbix/log -R
chown zabbix. /opt/zabbix/run -R
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie links simbólicos para facilitar a administração&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -s /opt/zabbix/log /var/log/zabbix
ln -s /opt/zabbix/etc /etc/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;apague os arquivos desnecessários&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /opt/zabbix/etc
rm -rf zabbix_agent.conf zabbix_agent.conf.d
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;224-configurando&#34;&gt;2.2.4 Configurando&lt;/h4&gt;
&lt;h5 id=&#34;2241-configurando-server&#34;&gt;2.2.4.1 Configurando server&lt;/h5&gt;
&lt;p&gt;modifique as seguintes linhas no arquivo /opt/zabbix/etc/zabbix_server.conf&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;    PidFile=/opt/zabbix/run/zabbix_server.pid
    LogFile=/opt/zabbix/log/zabbix_server.log
    LogFileSize=10

    DBHost=192.168.56.81
    DBName=zabbixdb
    DBUser=zabbixuser
    DBPassword=zabbixpassword
    DBPort=5432

    StartPollers=8
    StartPollersUnreachable=8
    StartTrappers=8
    StartPingers=4
    StartDiscoverers=2
    StartHTTPPollers=2

    JavaGateway=127.0.0.1
    JavaGatewayPort=10052
    StartJavaPollers=5

    HousekeepingFrequency=24
    MaxHousekeeperDelete=10000

    CacheSize=32M

    StartDBSyncers=5

    HistoryCacheSize=32M
    TrendCacheSize=32M
    HistoryTextCacheSize=64M
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;2242-configurando-zabbix-agent&#34;&gt;2.2.4.2 Configurando zabbix agent&lt;/h5&gt;
&lt;p&gt;modifique as seguintes linhas no arquivo /opt/zabbix/etc/zabbix_agentd.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;PidFile=/opt/zabbix/run/zabbix_agentd.pid
LogFile=/opt/zabbix/log/zabbix_agentd.log
LogFileSize=10
Server=127.0.0.1
DebugLevel=3
StartAgents=4
Hostname=nomedamaquina
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;225-configurando-jmx-gateway&#34;&gt;2.2.5. Configurando jmx gateway&lt;/h4&gt;
&lt;p&gt;Com o JMX rodando, só precisamos configurar a monitoração no HOST via FRONTEND.&lt;/p&gt;
&lt;h4 id=&#34;226-zabbix-database&#34;&gt;2.2.6. Zabbix Database&lt;/h4&gt;
&lt;p&gt;Acesse a VM reservada para o Zabbix Database (192.168.56.81).&lt;/p&gt;
&lt;p&gt;O ideal é ficar em uma VM separada, e de preferência em um outro HYPERVISOR para não ter muita concorrência de I/O com as VM&amp;rsquo;s já criadas.&lt;/p&gt;
&lt;p&gt;Abaixo segue o processo de instalação e configuração do PostgreSQL como backend do Zabbix.&lt;/p&gt;
&lt;p&gt;instale os pacotes do postgresql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install postgresql-9.1 postgresql-client-9.1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste o postgresql.conf alterando listen_address para o valor abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;listen_addresses = &#39;*&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste o pg_hba.conf adiciona a linha abaixo ao final do arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;host    zabbixdb       zabbixuser       192.168.56.80/32        md5
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;reinicie o postgresql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/postgresql restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;acesse o banco via psql&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;su postgres
psql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o usuário zabbixuser&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;postgres=# create user zabbixuser with password &#39;zabbixpassword&#39;;
CREATE ROLE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o banco zabbixdb&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;postgres=# create database zabbixdb;
CREATE DATABASE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;defina permissão para o usuário acessar o banco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;postgres=# grant all privileges on database zabbixdb to zabbixuser;
GRANT
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;altere o owner do banco zabbixdb para zabbixuser&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;postgres=# alter database zabbixdb owner to zabbixuser;
ALTER DATABASE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;teste a conexão com o banco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;psql -U zabbixuser -h 127.0.0.1 zabbixdb

psql (9.1.9)
conexao SSL (cifra: DHE-RSA-AES256-SHA, bits: 256)
Digite &amp;quot;help&amp;quot; para ajuda.
zabbix=&amp;gt; \q
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;se a conexão for bem sucedida vá para o próximo passo, do contrário revise os passos anteriores.&lt;/p&gt;
&lt;h5 id=&#34;2261-instalação-limpa---sem-migração&#34;&gt;2.2.6.1 Instalação limpa - sem migração.&lt;/h5&gt;
&lt;p&gt;Se não é seu caso, passe para o procedimento 1.4.2, se for seu caso siga os passos abaixo:&lt;/p&gt;
&lt;p&gt;acesse o diretório database nos sources do zabbix no seu servidor zabbix server (192.168.56.80)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /root/zabbix-2.0.6/database/postgresql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale o postgresql-client&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install postgresql-client-9.1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;rode os scripts&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;psql -U zabbixuser -h 192.168.56.81 -W zabbixdb &amp;lt; schema.sql
psql -U zabbixuser -h 192.168.56.81 -W zabbixdb &amp;lt; images.sql
psql -U zabbixuser -h 192.168.56.81 -W zabbixdb &amp;lt; data.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2262-migração-de-base-do-zabbix-18x-para-zabbix-20x&#34;&gt;2.2.6.2 Migração de base do zabbix 1.8.x para zabbix 2.0.x&lt;/h5&gt;
&lt;p&gt;faça o dump da base de produção&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pg_dump -U zabbixuser -h ip-de-producao zabbixdb &amp;gt; /tmp/zabbix-2013-01-07.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;faça o restore da base no banco criado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;psql -U zabbixuser -h 192.168.56.81 -f /tmp/zabbix-2013-01-07.sql zabbixdb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;acesse o diretório de upgrades&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /root/zabbix-2.0.6/upgrades/dbpatches/2.0/postgresql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;rode o patch para atualizar a estrutura do banco&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pgsql -U zabbixuser -h 192.168.56.81 zabbixdb &amp;lt; patch.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;insira as novas imagens de mapas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;psql -U zabbixuser -h 192.168.56.81 -W zabbixdb &amp;lt; images.sql
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;227-serviços-zabbix&#34;&gt;2.2.7 Serviços Zabbix&lt;/h4&gt;
&lt;p&gt;inicie o server&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/zabbix-server start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;inicie o agent&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/zabbix-agent start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;inicie o jmx gateway&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/zabbix-java start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;verifique as portas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ntpl|grep 1005
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;observe a saída do netstat&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      5030/zabbix_agentd
tcp        0      0 0.0.0.0:10051           0.0.0.0:*               LISTEN      4972/zabbix_server
tcp6       0      0 :::10050                :::*                    LISTEN      5030/zabbix_agentd
tcp6       0      0 :::10051                :::*                    LISTEN      4972/zabbix_server
tcp6       0      0 :::10052                :::*                    LISTEN      5040/java    
   
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ative a inicialização dos serviços no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;insserv zabbix-agent
insserv zabbix-server
insserv zabbix-java
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;228-frontend-zabbix&#34;&gt;2.2.8 Frontend Zabbix&lt;/h4&gt;
&lt;p&gt;Acesse a VM 192.168.56.82&lt;/p&gt;
&lt;p&gt;instale os pacote do apache e php5&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install apache2-mpm-prefork php5 php5-pgsql php5-gd
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o diretório /var/www/zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /var/www/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;acesse o diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /var/www/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie os arquivos do frontend a partir do source que está no servidor zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;scp -r root@192.168.56.80:/root/zabbix-2.0.6/frontends/php/* .
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;corrija as permissões dos arquivos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chown www-data. /var/www/zabbix -R
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajustes os seguintes parâmetros do arquivo /etc/php5/apache2/php.ini&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;memory_limit = 128M
post_max_size = 16M
upload_max_filesize = 16M
max_execution_time = 300
max_input_time = 300
date.timezone = America/Sao_Paulo
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;o memory_limit deve ser ajustado de acordo com a memória disponível, após os ajustes reinicie o apache2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/apache2 restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;adicione a seguinte linha ao pg_hba.conf do servidor de banco de dados (192.168.56.81)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;host    zabbixdb       zabbixuser       192.168.56.82/32        md5
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;reinicie o banco de dados (192.168.56.81)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/postgres restart
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2281-acesso-ao-frontend&#34;&gt;2.2.8.1 Acesso ao frontend&lt;/h5&gt;
&lt;p&gt;O frontend foi acessado pelo endereço abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://192.168.56.80/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Siga os passos da configuração (next-next-finish), preencha os dados conforme abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Database type	PostgreSQL
Database server	192.168.56.81
Database port	5432
Database name	zabbixdb
Database user	zabbixuser
Database password	zabbixpassword

Zabbix server	192.168.56.80
Zabbix server port	10051
Zabbix server name	zabbixserver
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Depois de configurar é possível acessar o dashboard web com o usuário Admin e senha zabbix.&lt;/p&gt;
&lt;h3 id=&#34;23-zabbix-proxy&#34;&gt;2.3. Zabbix Proxy&lt;/h3&gt;
&lt;p&gt;Acesse a VM destinada ao proxy (192.168.56.83).&lt;/p&gt;
&lt;h4 id=&#34;231-pacotes&#34;&gt;2.3.1 pacotes&lt;/h4&gt;
&lt;p&gt;instale os pacotes necessários para compilação&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install build-essentials libcurl3-gnutls-dev unixodbc-dev libsnmp-dev libssh2-1-dev libopenipmi-dev sun-java6-jdk fping libsqlite3-dev sqlite3
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;232-compilação&#34;&gt;2.3.2 compilação&lt;/h4&gt;
&lt;p&gt;entre no diretório root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie os sources do zabbix server&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;scp -r root@192.168.56.80:/root/zabbix-2.0.6.tar.gz .
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;descompacte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar zxvf zabbix-2.0.6.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd zabbix-2.0.6
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;configure os parâmetros de compilação&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./configure --prefix=/opt/zabbix --enable-proxy --enable-agent --enable-java --enable-ipv6 --with-ssh2 --with-ldap --with-net-snmp --with-libcurl --with-unixodbc --with-openipmi --with-sqlite3
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;faça a compilação&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale os binários compilados&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make install	
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;233-usuário-e-grupo&#34;&gt;2.3.3 Usuário e grupo&lt;/h4&gt;
&lt;p&gt;crie o grupo zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;groupadd zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o usuário zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;useradd -g zabbix zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;234-configurações&#34;&gt;2.3.4 Configurações&lt;/h4&gt;
&lt;p&gt;ajuste as configurações do arquivo /opt/zabbix/etc/zabbix_proxy.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Server=192.168.56.80
Hostname=zabbixproxy
LogFile=/opt/zabbix/log/zabbix_proxy.log
DBName=/opt/zabbix/sqlite/zabbixprx.db
PidFile=/opt/zabbix/run/zabbix_proxy.pid
DebugLevel=3
ProxyOfflineBuffer=3
StartPollers=8
StartPollersUnreachable=8
StartTrappers=8
StartPingers=4
StartDiscoverers=2
StartHTTPPollers=2
JavaGateway=127.0.0.1
JavaGatewayPort=10052
StartJavaPollers=2   
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste as configurações do arquivo /opt/zabbix/etc/zabbix_agentd.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;PidFile=/opt/zabbix/run/zabbix_agentd.pid
LogFile=/opt/zabbix/log/zabbix_agentd.log
Server=ip-do-servidor-zabbix
DebugLevel=3
StartAgents=4
Hostname=nomedamaquina  
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie os diretórios run, log, init e sqlite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /opt/zabbix/{run,log,init,sqlite}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste as permissões dos diretórios criados&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chown zabbix.zabbix /opt/zabbix/{run,log,init,sqlite}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie os links simbólicos para /var/log/zabbix e /etc/zabbix/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -s /opt/zabbix/log /var/log/zabbix
ln -s /opt/zabbix/log /var/log/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;apague os arquivos desnecessários&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /opt/zabbix/etc
rm -rf zabbix_agent.conf zabbix_agent.conf.d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie um arquivo init para o proxy&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /root/zabbix-2.0.6/misc/init.d/debian/zabbix-server /opt/zabbix/init/zabbix-proxy
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;altere as seguintes linhas do script init zabbix-proxy&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;NAME=zabbix_proxy
DAEMON=/opt/zabbix/sbin/${NAME}
DESC=&amp;quot;Zabbix proxy daemon&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie o arquivo init do agent&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /root/zabbix-2.0.6/misc/init.d/debian/zabbix-agent /opt/zabbix/init/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste o path dentro dos arquivos&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sed -i &#39;s/\/usr\/local\/sbin/\/opt\/zabbix\/sbin/&#39; /opt/zabbix/init/zabbix-*
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie os arquivos init para /etc/init.d/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /opt/zabbix/init/zabbix-* /etc/init.d/
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ative os serviços zabbix no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;insserv -d zabbix-proxy
insserv -d zabbix-agent    
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;235-serviços&#34;&gt;2.3.5 Serviços&lt;/h4&gt;
&lt;p&gt;execute os serviços&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/zabbix-proxy start
/etc/init.d/zabbix-agent start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;verifique as portas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ntpl|grep 1005
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;observe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      1852/zabbix_agentd
tcp        0      0 0.0.0.0:10051           0.0.0.0:*               LISTEN      1385/zabbix_proxy
tcp6       0      0 :::10050                :::*                    LISTEN      1852/zabbix_agentd
tcp6       0      0 :::10051                :::*                    LISTEN      1385/zabbix_proxy
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;24-zabbix-agente&#34;&gt;2.4 Zabbix Agente&lt;/h3&gt;
&lt;p&gt;Agora vamos instalar o agente nas VMs FrontEnd (192.168.56.82) e Database (192.168.56.81)&lt;/p&gt;
&lt;h4 id=&#34;241-instalando-agente-na-database&#34;&gt;2.4.1 Instalando agente na Database&lt;/h4&gt;
&lt;p&gt;Vamos utilizar o frontend para compilar o agente e gerar um tarball para usarmos no Database, ela será nossa máquina referência em relação ao agente.&lt;/p&gt;
&lt;h5 id=&#34;2411-pacotes&#34;&gt;2.4.1.1 pacotes&lt;/h5&gt;
&lt;p&gt;instale os pacotes necessários para compilação e funcionamento do agente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;aptitude install build-essential libcurl4-gnutls-dev libssh2-1-dev libldap-2.4-2 
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2412-compilação&#34;&gt;2.4.1.2 compilação&lt;/h5&gt;
&lt;p&gt;entre no diretório root&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /root
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie os sources do zabbix server&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;scp -r root@192.168.56.80:/root/zabbix-2.0.6.tar.gz .
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;descompacte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar zxvf zabbix-2.0.6.tar.gz
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd zabbix-2.0.6
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie o tarball do server e descompacte, após descompactar configure&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./configure --prefix=/opt/zabbix --enable-agent --enable-ipv6 --with-ldap --with-ssh2 --with-libcurl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;compile&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;instale&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;make install
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2413-usuário-e-grupo&#34;&gt;2.4.1.3 Usuário e grupo&lt;/h5&gt;
&lt;p&gt;crie o usuário e grupo zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;groupadd zabbix
useradd -g zabbix zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2414-configurações&#34;&gt;2.4.1.4 Configurações&lt;/h5&gt;
&lt;h6 id=&#34;24141-enviando-dados-para-servidor-zabbix-server&#34;&gt;2.4.1.4.1 Enviando dados para servidor zabbix server&lt;/h6&gt;
&lt;p&gt;crie os diretórios run, init e log no /opt/zabbix e ajuste as permissões&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir /opt/zabbix/{run,log,init}
chown zabbix.zabbix /opt/zabbix/{run,log,init}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie os links simbólicos para /var/log/zabbix e /etc/zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -s /opt/zabbix/log /var/log/zabbix
ln -s /opt/zabbix/etc /etc/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;apague os arquivos desnecessários&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /opt/zabbix/etc
rm -rf zabbix_agent.conf zabbix_agent.conf.d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie os arquivos default de init&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /root/zabbix-2.0.6/misc/init.d/debian/zabbix-agent /opt/zabbix/init
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;altere o path no arquivo /etc/init.d/zabbix-agent&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sed -i &#39;s/\/usr\/local\/sbin/\/opt\/zabbix\/sbin/&#39; /opt/zabbix/init/zabbix-agent
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie o arquivo para o diretório /etc/init.d/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /opt/zabbix/init/* /etc/init.d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste as linhas abaixo no arquivo /opt/zabbix/etc/zabbix_agentd.conf &lt;br&gt;
PidFile=/opt/zabbix/run/zabbix_agentd.pid
LogFile=/opt/zabbix/log/zabbix_agentd.log
Server=192.168.56.80
DebugLevel=3
StartAgents=4
Hostname=nomedamaquina&lt;/p&gt;
&lt;p&gt;ative o zabbix-agent no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;insserv -d zabbix-agent
&lt;/code&gt;&lt;/pre&gt;
&lt;h6 id=&#34;24142-enviando-dados-para-servidor-zabbix-proxy&#34;&gt;2.4.1.4.2 Enviando dados para servidor zabbix proxy&lt;/h6&gt;
&lt;p&gt;Os procedimentos são os mesmos do item 9.3.1, com exceção da seguinte linha que precisa modificada no arquivo /opt/zabbix/etc/zabbix_agentd.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Server=192.168.56.83
&lt;/code&gt;&lt;/pre&gt;
&lt;h5 id=&#34;2415-serviço&#34;&gt;2.4.1.5 Serviço&lt;/h5&gt;
&lt;p&gt;inicie o agente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/zabbix-agent start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;verifique se está rodando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ntpl|grep 1005
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;observe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      3335/zabbix_agentd
tcp6       0      0 :::10050                :::*                    LISTEN      3335/zabbix_agentd
&lt;/code&gt;&lt;/pre&gt;&lt;h5 id=&#34;2416-gerando-tarball&#34;&gt;2.4.1.6 Gerando tarball&lt;/h5&gt;
&lt;p&gt;Acesse o diretório opt&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /opt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Compacte o diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar jcvf zabbix-2.0.6-vV-AAAA-MM-DD.tar.bz2 zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Exemplo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar jcvf zabbix-2.0.6-v1-2013-05-17.tar.bz2 zabbix    
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora o targall está pronto para ser utilizado na database.&lt;/p&gt;
&lt;h4 id=&#34;242-instalando-agente-no-frontend&#34;&gt;2.4.2 Instalando agente no frontend&lt;/h4&gt;
&lt;p&gt;copie o tarball da database&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd /opt
cp -r root@192.168.56.81:/opt/zabbix-2.0.6-v1-2013-05-17.tar.bz2 .
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;descompacte&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tar jxvf zabbix-2.0.6-v1-2013-05-17.tar.bz2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd zabbix-2.0.6
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ajuste o arquivo zabbix_agentd.conf&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;PidFile=/opt/zabbix/run/zabbix_agentd.pid
LogFile=/opt/zabbix/log/zabbix_agentd.log
Server=192.168.56.80
DebugLevel=3
StartAgents=4
Hostname=zabbixfrontend
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;crie os links simbólicos para /var/log/zabbix e /etc/zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ln -s /opt/zabbix/log /var/log/zabbix
ln -s /opt/zabbix/etc /etc/zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;copie o arquivo para o diretório /etc/init.d/&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cp /opt/zabbix/init/* /etc/init.d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ative o zabbix-agent no boot&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;insserv -d zabbix-agent
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o usuário e grupo zabbix&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;groupadd zabbix
useradd -g zabbix zabbix
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;inicie o agente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/etc/init.d/zabbix-agent start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;verifique se está rodando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;netstat -ntpl|grep 1005
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;observe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      3335/zabbix_agentd
tcp6       0      0 :::10050                :::*                    LISTEN      3335/zabbix_agentd
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;pronto.&lt;/p&gt;
&lt;h3 id=&#34;25-zabbix-frontend--proxy&#34;&gt;2.5. Zabbix Frontend &amp;amp; Proxy&lt;/h3&gt;
&lt;p&gt;No Frontend adicione o proxy em Administration/DM e associe a máquina 81 (database) e 82 (frontend) ao proxy, adicione o proxy com o mesmo nome da diretiva Hostname em zabbix_proxy.conf.&lt;/p&gt;
&lt;p&gt;Você também pode criar o proxy em Administration/DM e depois associar o HOST ao PROXY pelas configurações do HOST se preferir.&lt;/p&gt;
&lt;h2 id=&#34;3-amarrando-as-pontas&#34;&gt;3. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Neste post foi possível aprender a instalar o Zabbix 2.0.6 separando os serviços em várias VMs. Abordei também como migrar a base do 1.8.x para 2.0.x através de alguns passos rápidos e já deixamos o JMX Gateway instalado e rodando.&lt;/p&gt;
&lt;p&gt;Nos próximos posts pretendo abordar o processo de criação de templates SNMP para monitorar Switchs, Roteadores e Appliances.&lt;/p&gt;
&lt;p&gt;Outra coisa interessante que devo mostrar é a monitoração de aplicações JAVA usando o Zabbix JMX Gateway.&lt;/p&gt;
&lt;p&gt;Parece que devo continuar na trilha do Zabbix por mais uns dias aqui em BSB, confesso que estou aprendendo muita coisa nova, isto tem sido muito divertido, portanto, nada melhor do que compartilhar o que eu venho aprendendo aqui neste blog para ficar ainda melhor.&lt;/p&gt;
&lt;h2 id=&#34;4-referências&#34;&gt;4. Referências&lt;/h2&gt;
&lt;p&gt;Durante meus estudos passei por muitos links, segue a lista abaixo:&lt;/p&gt;
&lt;h3 id=&#34;41-zabbixorg&#34;&gt;4.1 Zabbix.org&lt;/h3&gt;
&lt;p&gt;Configurações Server/Proxy/Agent/java&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_server&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_proxy&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_agent&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_agent&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_java&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_java&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Conceitos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/concepts/definitions&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/concepts/definitions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/concepts/server&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/concepts/server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/concepts/agent&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/concepts/agent&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/concepts/proxy&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/concepts/proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/concepts/java&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/concepts/java&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/concepts/sender&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/concepts/sender&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/concepts/get&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/concepts/get&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bancos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/install/db_scripts&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/install/db_scripts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Templates&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/templates/template&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/templates/template&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Triggers&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/triggers/trigger&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/triggers/trigger&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/triggers/expression&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/triggers/expression&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/triggers/severity&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/triggers/severity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/triggers/dependencies&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/triggers/dependencies&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Usuários/Grupos/Permissões&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/users_and_usergroups/permissions&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/users_and_usergroups/permissions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Interface Web&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/installation/install#installing_zabbix_web_interface&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/installation/install#installing_zabbix_web_interface&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Gráficos, Mapas, Telas&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/maps&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/maps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/graphs&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/graphs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/screens&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/screens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/slides&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/visualisation/slides&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Monitoração Distribuída&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/distributed_monitoring/proxies&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/distributed_monitoring/proxies&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/distributed_monitoring/nodes&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/distributed_monitoring/nodes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;JMX Gateway&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/config/items/itemtypes/jmx_monitoring&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/config/items/itemtypes/jmx_monitoring&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_java&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/config/zabbix_java&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tuning&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/performance_tuning&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/performance_tuning&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;API&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.zabbix.com/documentation/2.0/manual/appendix/api/api&#34;&gt;https://www.zabbix.com/documentation/2.0/manual/appendix/api/api&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;42-zabbixbrasil&#34;&gt;4.2 ZabbixBrasil&lt;/h3&gt;
&lt;p&gt;O material desses caras é muito fera.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://zabbixbrasil.org/files/criando_um_template_zabbix.pdf&#34;&gt;http://zabbixbrasil.org/files/criando_um_template_zabbix.pdf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zabbixbrasil.org/wiki/tiki-index.php?page=Usando+Zabbix+para+Monitorar+Clientes+SNMP+v1+e+v2c&#34;&gt;http://zabbixbrasil.org/wiki/tiki-index.php?page=Usando+Zabbix+para+Monitorar+Clientes+SNMP+v1+e+v2c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://zabbixbrasil.org/?page_id=7&#34;&gt;http://zabbixbrasil.org/?page_id=7&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para quem deseja monitorar GlassFish com JMX do Zabbix:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://zabbixbrasil.org/files/Monitorando_Glassfish2.1_com-Zabbix_2.0.pdf&#34;&gt;http://zabbixbrasil.org/files/Monitorando_Glassfish2.1_com-Zabbix_2.0.pdf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;43-outros&#34;&gt;4.3 Outros&lt;/h3&gt;
&lt;p&gt;Peformance do Zabbix&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.zabbix.com/monitoring-how-busy-zabbix-processes-are/&#34;&gt;http://blog.zabbix.com/monitoring-how-busy-zabbix-processes-are/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://openingyourmind.wordpress.com/2012/12/19/melhor-performance-com-o-zabbix-trapper/&#34;&gt;http://openingyourmind.wordpress.com/2012/12/19/melhor-performance-com-o-zabbix-trapper/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;SNMP e Afins&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.hjort.co/2010/09/monitorando-servicos-com-snmp-e-zabbix.html&#34;&gt;http://www.hjort.co/2010/09/monitorando-servicos-com-snmp-e-zabbix.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://pierky.wordpress.com/2012/04/24/zabbix-a-lightweight-dynamic-template-for-snmp-routers/&#34;&gt;http://pierky.wordpress.com/2012/04/24/zabbix-a-lightweight-dynamic-template-for-snmp-routers/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://linuxtechres.blogspot.com.br/2012/05/setup-snmp-and-snmptrap-monitoring.html&#34;&gt;http://linuxtechres.blogspot.com.br/2012/05/setup-snmp-and-snmptrap-monitoring.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.oidview.com/mibs/1916/md-1916-1.html&#34;&gt;http://www.oidview.com/mibs/1916/md-1916-1.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.iana.org/assignments/enterprise-numbers&#34;&gt;http://www.iana.org/assignments/enterprise-numbers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para quem deseja monitorar JBOSS com JMX do Zabbix:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://janssenlima.blogspot.com/2012/07/monitorando-servidor-jboss-no-zabbix.html&#34;&gt;http://janssenlima.blogspot.com/2012/07/monitorando-servidor-jboss-no-zabbix.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Balanceando links de internet no linux</title>
      <link>https://archives.gutocarvalho.net/post/2012-12-24-balanceando-saida-de-internet-no-linux/</link>
      <pubDate>Mon, 24 Dec 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-12-24-balanceando-saida-de-internet-no-linux/</guid>
      <description>&lt;p&gt;Em um projeto recente precisei fazer o balanceamento de links no linux, o cliente possuía saída por dois provedores, sendo o primeiro NET/Virtua e o segundo Embratel, seu link Embratel estava ocioso e ele queria acabar com essa ociosidade.&lt;/p&gt;
&lt;p&gt;A solução foi usar o iproute2 para criar uma tabela com balanceamento de links para alguns pacotes, em conjunto
usei o iptables para marcar os pacotes que deveriam sair
por essa tabela.&lt;/p&gt;
&lt;p&gt;Além disto o cliente usava o Embratel para alguns serviços, logo existia um redirecionamento DNAT para rede interna e isso precisava ser levado em conta.&lt;/p&gt;
&lt;p&gt;Vamos a solução para essa necessidade.&lt;/p&gt;
&lt;h2 id=&#34;ambiente&#34;&gt;Ambiente&lt;/h2&gt;
&lt;p&gt;Vamos descrever as configurações de rede do ambiente&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Interface eth0 está com rede interna (10.1.x.x/xx)
Interface eth1 está conectado ao modem virtua (189.x.x.x)
Interface eth2 está conectado ao modem embratel (200.x.x.x)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se isto está entendido, vamos continuar.&lt;/p&gt;
&lt;h2 id=&#34;procedimento-manual&#34;&gt;Procedimento manual&lt;/h2&gt;
&lt;h3 id=&#34;1-criando-tabelas-no-rt_tables&#34;&gt;1. Criando tabelas no rt_tables&lt;/h3&gt;
&lt;p&gt;Primeiro edite o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/iproute2/rt_tables
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E adicione as seguintes tabelas ao final do arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;20 VIRTUA
30 EMBRATEL
40 BALANCEAMENTO
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ótimo, isso é suficiente, elas precisam existir para que possamos criar regras em cada uma destas tabelas.&lt;/p&gt;
&lt;h3 id=&#34;2-criando-regras-no-iproute2&#34;&gt;2. Criando regras no iproute2&lt;/h3&gt;
&lt;h4 id=&#34;21-configurando-tabela-virtua&#34;&gt;2.1 configurando tabela virtua&lt;/h4&gt;
&lt;p&gt;Antes de começar, vou colocar nomes ao invés de endereços IPs para facilitar o entendimento, veja o que significa cada coisa.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;VIRTUA_NET é o endereço de rede
VIRTUA_NIC é a placa de rede (eth1)
VIRTUA_GAT é o endereço do GW virtua
VIRTUA_IPA é o ip da VIRTUA_NIC
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos a configuração básica da tabela virtua&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip route add VIRTUA_NET dev VIRTUA_NIC src VIRTUA_IPA table VIRTUA
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos especificar quem é o defautl gateway da virtua&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip route add default via VIRTUA_GAT table VIRTUA
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;22-configurando-tabela-embratel&#34;&gt;2.2 configurando tabela embratel&lt;/h4&gt;
&lt;p&gt;Novamente eu vou colocar nomes ao invés de endereços IPs para facilitar o entendimento, veja o que significa cada coisa.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;EMBRATEL_NET é o endereço de rede
EMBRATEL_NIC é a placa de rede (eth1)
EMBRATEL_GAT é o endereço do GW
EMBRATEL_IPA é o ip da EMBRATEL_NIC
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Agora vamos configurar a tabela EMBRATEL&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip route add EMBRATEL_NET dev EMBRATEL_NIC src EMBRATEL_IPA table EMBRATEL
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Defina o gateway padrão da tabela EMBRATEL&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip route add default via EMBRATEL_GAT table EMBRATEL
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;23-configurando-tabela-balanceamento&#34;&gt;2.3 configurando tabela balanceamento&lt;/h4&gt;
&lt;p&gt;Agora vamos criar a tabela que fará o balanceamento entre os dois links&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip route add default scope global table BALANCEAMENTO nexthop via VIRTUA_GAT dev VIRTUA_NIC weight 2 nexthop via EMBRATEL_GAT dev EMBRATEL_NIC weight 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, configuramos a tabela BALANCEAMENTO.&lt;/p&gt;
&lt;p&gt;Veja que o peso do VIRTUA é maior que o EMBRATEL, fiz isso pois o link VIRTUA é mais parrudo e por isso seu peso no balanceamento será maior (analogia: 2 conexões vão para o virtua e 1 para a Embratel).&lt;/p&gt;
&lt;h4 id=&#34;24-definido-regras-de-roteamento&#34;&gt;2.4 Definido regras de roteamento&lt;/h4&gt;
&lt;p&gt;Definindo que pacotes vindos do IP do VIRTUAL usarão a tabela VIRTUA&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip rule add from VIRTUA_IPA table VIRTUA
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Definindo que pacotes vindos do IP da EMBRATEL usarão a tabela embratel&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip rule add from EMBRATEL_IPA table EMBRATEL
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Definindo que pacotes com a marca 2 usarão a tabela de balanceamento&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip rule add fwmark 2 table BALANCEAMENTO
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Definindo que pacotes coma marca 1 usarão a tabela Embratel&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip rule add fwmark 1 table EMBRATEL
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Essa última regra estou criando pois existe um redirect para para rede interna, e portanto preciso tratar a ida e a volta para que não saia pelo balanceamento, e sim pela interface
de origem do redirect que é a EMBRATEL.&lt;/p&gt;
&lt;h4 id=&#34;25-configurando-rota-padrao&#34;&gt;2.5 Configurando rota padrao&lt;/h4&gt;
&lt;p&gt;Preciso configurar qual será a rota padrão&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip route add default via EMBRATEL_GAT
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É possível fazer o balanceamento usando a tabela default, no final darei um exemplo disto.&lt;/p&gt;
&lt;h4 id=&#34;26-limpando-cache-de-tabelas&#34;&gt;2.6 Limpando cache de tabelas&lt;/h4&gt;
&lt;p&gt;Necessário para fazer a limpeza de informação que não é útil, como por exemplo tabelas que foram deletadas.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; ip route flush cache
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;3-criando-regras-no-netfilteriptables&#34;&gt;3. Criando regras no netfilter/iptables&lt;/h3&gt;
&lt;h4 id=&#34;31-regras-de-redirecionamento&#34;&gt;3.1 Regras de redirecionamento&lt;/h4&gt;
&lt;p&gt;Primeiro redireciono para rede interna&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;iptables -t nat -A PREROUTING -i eth2 -d 200.252.xx.xxx -p tcp -m tcp --dport 80 -j DNAT --to-destination 10.1.0.xxx:80
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Depois marco o pacote de retorno para ele usar a tabela embratel.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;iptables -t mangle -A PREROUTING -i eth0 -s 10.1.xx.xx -p tcp --sport 22 -j MARK --set-mark 1
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;32-regras-para-balanceamento&#34;&gt;3.2 Regras para balanceamento&lt;/h4&gt;
&lt;p&gt;Aqui eu marco os pacotes que desejo que usem a tabela de balanceamento.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; iptables -t mangle -A PREROUTING -s 10.1.x.x/24 -d 0/0 -j MARK --set-mark 2
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;33-mascarando-pacotes&#34;&gt;3.3 Mascarando pacotes&lt;/h4&gt;
&lt;p&gt;Aqui vamos mascarar os pacotes da rede interna, necessário para que as máquinas consigam sair para internet e para o redirect.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; iptables -t nat -A POSTROUTING -s 10.1.x.x/24 -j MASQUERADE
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&#34;34-ativando-ip-forward&#34;&gt;3.4 Ativando ip forward&lt;/h4&gt;
&lt;p&gt;Precisamos ativar o encaminhamento de pacotes para que tudo funcione.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;echo 1 &amp;gt; /proc/sys/net/ipv4/ip_forward
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, balanceamento feito, você pode usar o comando IPTRAF no servidor para avaliar se os dois links estão sendo utilizados.&lt;/p&gt;
&lt;p&gt;Nas estações recomendo que use o mtr-tiny para ver por onde seus pacotes estão saindo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; mtr terra.com.br
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se preferir use o traceroute&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; traceroute uol.com.br
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;automatizado&#34;&gt;Automatizado&lt;/h2&gt;
&lt;p&gt;Não dá para executar todas as regras toda a vez que a máquina inciar, seria cansativo e poderíamos esquecer
algo, logo criei um script para me ajudar com isto.&lt;/p&gt;
&lt;h3 id=&#34;4-script-de-roteamento&#34;&gt;4. Script de roteamento&lt;/h3&gt;
&lt;p&gt;{% codeblock lang:bash %}
#!/bin/bash&lt;/p&gt;
&lt;h1 id=&#34;variaveisconstantes&#34;&gt;variaveis/constantes&lt;/h1&gt;
&lt;p&gt;VIRTUA_IPA=&amp;ldquo;192.168.xxx.xxx&amp;rdquo;
VIRTUA_NET=&amp;ldquo;192.168.xxx.xxx/24&amp;rdquo;
VIRTUA_GAT=&amp;ldquo;192.168.xxx.xxx&amp;rdquo;
VIRTUA_NIC=&amp;ldquo;eth1&amp;rdquo;&lt;/p&gt;
&lt;p&gt;EMBRATEL_IPA=&amp;ldquo;200.252.xx.xxx&amp;rdquo;
EMBRATEL_NET=&amp;ldquo;200.252.xx.xxx/26&amp;rdquo;
EMBRATEL_GAT=&amp;ldquo;200.252.xx.xxx&amp;rdquo;
EMBRATEL_NIC=&amp;ldquo;eth2&amp;rdquo;&lt;/p&gt;
&lt;h1 id=&#34;limpando-tabelas&#34;&gt;limpando tabelas&lt;/h1&gt;
&lt;p&gt;ip route flush table VIRTUA
ip route flush table EMBRATEL
ip route flush table BALANCEAMENTO&lt;/p&gt;
&lt;h1 id=&#34;limpando-regras&#34;&gt;limpando regras&lt;/h1&gt;
&lt;p&gt;ip rule del from 200.252.xxx.xxx table EMBRATEL
ip rule del from 192.168.xxx.xxx table VIRTUA
ip rule del fwmark 0x2 table BALANCEAMENTO
ip rule del fwmark 0x1 table EMBRATEL
ip route del default&lt;/p&gt;
&lt;h1 id=&#34;configuracoes-tabela-virtua&#34;&gt;configuracoes tabela VIRTUA&lt;/h1&gt;
&lt;p&gt;ip route add $VIRTUA_NET dev $VIRTUA_NIC src $VIRTUA_IPA table VIRTUA
ip route add default via $VIRTUA_GAT table VIRTUA&lt;/p&gt;
&lt;h1 id=&#34;configuracoes-tabela-embratel&#34;&gt;configuracoes tabela EMBRATEL&lt;/h1&gt;
&lt;p&gt;ip route add $EMBRATEL_NET dev $EMBRATEL_NIC src $EMBRATEL_IPA table EMBRATEL
ip route add default via $EMBRATEL_GAT table EMBRATEL&lt;/p&gt;
&lt;h1 id=&#34;trafico-da-eth1-sai-pela-tabela-virtua&#34;&gt;trafico da eth1 sai pela tabela VIRTUA&lt;/h1&gt;
&lt;p&gt;ip rule add from $VIRTUA_IPA table VIRTUA&lt;/p&gt;
&lt;h1 id=&#34;trafico-da-eth2-sai-pela-tabela-embratel&#34;&gt;trafico da eth2 sai pela tabela EMBRATEL&lt;/h1&gt;
&lt;p&gt;ip rule add from $EMBRATEL_IPA table EMBRATEL&lt;/p&gt;
&lt;h1 id=&#34;definindo-regra-para-marcacao-de-pacotes-da-intranet-sairem-pelo-balanceamento&#34;&gt;definindo regra para marcacao de pacotes da intranet sairem pelo BALANCEAMENTO&lt;/h1&gt;
&lt;p&gt;ip rule add fwmark 2 table BALANCEAMENTO&lt;/p&gt;
&lt;h1 id=&#34;definindo-regra-para-pacotes-marcados-sairem-pela-embratel&#34;&gt;definindo regra para pacotes marcados sairem pela EMBRATEL&lt;/h1&gt;
&lt;p&gt;ip rule add fwmark 1 table EMBRATEL&lt;/p&gt;
&lt;h1 id=&#34;criando-balanceamento-multilink-para-tabela-balanceamento&#34;&gt;Criando balanceamento multilink para tabela BALANCEAMENTO&lt;/h1&gt;
&lt;p&gt;ip route add default scope global table BALANCAMENTO nexthop via $VIRTUA_GAT dev $VIRTUA_NIC weight 1 nexthop via $EMBRATEL_GAT dev $EMBRATEL_NIC weight 1&lt;/p&gt;
&lt;h1 id=&#34;definindo-rota-padrao&#34;&gt;definindo rota padrao&lt;/h1&gt;
&lt;p&gt;ip route add default via $EMBRATEL_GAT&lt;/p&gt;
&lt;h1 id=&#34;fazendo-flush-no-cache-de-rotas-que-foram-deletadas&#34;&gt;fazendo flush no cache de rotas que foram deletadas&lt;/h1&gt;
&lt;p&gt;ip route flush cache
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;5-script-de-firewall&#34;&gt;5. Script de firewall&lt;/h3&gt;
&lt;p&gt;{% codeblock lang:bash %}
#!/bin/bash&lt;/p&gt;
&lt;h1 id=&#34;variaveisconstantes-1&#34;&gt;variaveis/constantes&lt;/h1&gt;
&lt;p&gt;IPTABLES=&amp;quot;/sbin/iptables&amp;quot;&lt;/p&gt;
&lt;h3 id=&#34;limpando-tabela-filter&#34;&gt;limpando tabela filter&lt;/h3&gt;
&lt;p&gt;$IPTABLES -t filter -F
$IPTABLES -t filter -P INPUT ACCEPT
$IPTABLES -t filter -P OUTPUT ACCEPT
$IPTABLES -t filter -P FORWARD ACCEPT
$IPTABLES -t filter -X&lt;/p&gt;
&lt;h3 id=&#34;limpando-tabela-nat&#34;&gt;limpando tabela nat&lt;/h3&gt;
&lt;p&gt;$IPTABLES -t nat -F
$IPTABLES -t nat -P PREROUTING ACCEPT
$IPTABLES -t nat -P OUTPUT ACCEPT
$IPTABLES -t nat -P POSTROUTING ACCEPT
$IPTABLES -t nat -X&lt;/p&gt;
&lt;h3 id=&#34;limpando-tabela-mangle&#34;&gt;limpando tabela mangle&lt;/h3&gt;
&lt;p&gt;$IPTABLES -t mangle -F
$IPTABLES -t mangle -P PREROUTING ACCEPT
$IPTABLES -t mangle -P INPUT ACCEPT
$IPTABLES -t mangle -P FORWARD ACCEPT
$IPTABLES -t mangle -P OUTPUT ACCEPT
$IPTABLES -t mangle -P POSTROUTING ACCEPT
$IPTABLES -t mangle -X&lt;/p&gt;
&lt;h3 id=&#34;ativando-ip-forward&#34;&gt;ativando ip forward&lt;/h3&gt;
&lt;p&gt;echo 1 &amp;gt; /proc/sys/net/ipv4/ip_forward&lt;/p&gt;
&lt;h3 id=&#34;fazendo-redirecionamento-para-servidores-na-rede-interna&#34;&gt;Fazendo redirecionamento para servidores na rede interna&lt;/h3&gt;
&lt;h1 id=&#34;tratando-a-ida&#34;&gt;tratando a ida&lt;/h1&gt;
&lt;p&gt;$IPTABLES -t nat -A PREROUTING -i eth2 -d 200.252.xxx.xxx -p tcp -m tcp &amp;ndash;dport 80 -j DNAT &amp;ndash;to-destination 10.1.0.20:80&lt;/p&gt;
&lt;h1 id=&#34;tratando-a-volta&#34;&gt;tratando a volta&lt;/h1&gt;
&lt;p&gt;$IPTABLES -t mangle -A PREROUTING -i eth0 -s 10.1.0.20 -p tcp &amp;ndash;sport 80 -j MARK &amp;ndash;set-mark 1&lt;/p&gt;
&lt;h3 id=&#34;marcando-pacotes-que-serao-direcionados-para-tabela-balanceamento&#34;&gt;Marcando pacotes que serao direcionados para tabela BALANCEAMENTO&lt;/h3&gt;
&lt;h1 id=&#34;especificando-uma-maquina-da-rede-para-usar-balanceamento&#34;&gt;especificando uma maquina da rede para usar balanceamento&lt;/h1&gt;
&lt;p&gt;$IPTABLES -A PREROUTING -t mangle -s 10.1.0.100/32 -d 0/0 -j MARK &amp;ndash;set-mark 2&lt;/p&gt;
&lt;h1 id=&#34;mascarando-conexoes&#34;&gt;Mascarando conexoes&lt;/h1&gt;
&lt;p&gt;$IPTABLES -t nat -A POSTROUTING -s 10.1.0.20/24 -j MASQUERADE
$IPTABLES -t nat -A POSTROUTING -s 10.1.0.100/24 -j MASQUERADE
{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;6-colocando-scripts-para-rodar-durante-a-inicialização&#34;&gt;6. Colocando scripts para rodar durante a inicialização&lt;/h3&gt;
&lt;p&gt;Você pode simplesmente chamar os scripts no arquivo /etc/rc.local, vamos supor que os scripts estejam dentro de /root/rules e tenham o nome de rc.routes e rc.firewall.&lt;/p&gt;
&lt;p&gt;Edite o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim /etc/rc.local
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Adicione&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/root/rules/rc.routes
/root/rules/rc.firewall
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Salve&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pronto, desde que eles tenham permissão de execução tudo está pronto para funcionar, se quiser testar para valer dê um reboot.&lt;/p&gt;
&lt;h2 id=&#34;outras-dicas&#34;&gt;Outras dicas&lt;/h2&gt;
&lt;h3 id=&#34;7-usando-proxy-transparente-na-mesma-máquina&#34;&gt;7. Usando Proxy Transparente na mesma máquina&lt;/h3&gt;
&lt;p&gt;Se quiser configurar um proxy transparente a regra abaixo resolve.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$IPTABLES -t nat -A PREROUTING -i eth0 -p tcp -s $LAN_NET --dport 80 -j REDIRECT --to-port 3128
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Você precisa ter o SQUID na mesma máquina.&lt;/p&gt;
&lt;h3 id=&#34;8-saída-por-link-específico-para-destino-específico&#34;&gt;8. Saída por link específico para destino específico&lt;/h3&gt;
&lt;p&gt;Se quiser acessar um site sempre por uma das saídas, por exemplo embratel, basta marcar assim:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; $IPTABLES -A PREROUTING -t mangle -s 10.1.xxx.xxx/xx -d 186.202.xxx.xxx -j MARK --set-mark 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Como estou marcando com 2, ele sairia para embratel toda a vez que o destino fosse 186.202.xxx.xxx&lt;/p&gt;
&lt;h4 id=&#34;81-serviço-específico-saindo-por-link-específico&#34;&gt;8.1 Serviço específico saindo por link específico&lt;/h4&gt;
&lt;p&gt;Podemos especificar que toda o envio de e-mail (SMTP) será feito pelo link EMBRATEL que é mais estável, seguro e tem menos chances se estar em um lista de bloqueio.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$IPTABLES -A PREROUTING -t mangle -s 10.1.xxx.xxx/xx -d 0/0 --dport 25 -j MARK --set-mark 1
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;9-squid-usando-balanceamento&#34;&gt;9. SQUID usando Balanceamento&lt;/h3&gt;
&lt;p&gt;Se tiver um squid na mesma máquina e desejar que ele use a tabela de balanceamento ao invés da rota padrão, defina a configuração abaixo no squid.conf&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;tcp_outgoing_tos 0x2 redelocal
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;0x1 é referente a marcação no iptables para saída pela tabela de balanceamento e rede local seria relativa a uma ACL que tem como conteúdo o endereço da rede local.&lt;/p&gt;
&lt;h4 id=&#34;71-exemplo-de-squidconf&#34;&gt;7.1 Exemplo de squid.conf&lt;/h4&gt;
&lt;p&gt;Aqui um exemplo de conf de squid3 que só faz cache na porta 80.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;#### porta #################################
 
http_port 3128
 
### hostname ###################
 
visible_hostname fw01
 
### dns servers #################
 
dns_nameservers xxx.xxx.xxx.xxx
 
### configuracoes de cache ############
# referencia: http://www.visolve.com/squid/squid24s1/cache_size.php
# referencia: http://www.visolve.com/squid/squid24s1/cache_size.php#cache_replacement_policy
 
# setando para 2 gigas, os outros 2 gigas vamos deixar 1 giga para sistema e
# 1 giga para operação do cache em disco
 
cache_mem 2048 MB
 
# tamanho de objetos em memoria e disco
 
maximum_object_size_in_memory 512 KB
maximum_object_size 64 MB
minimum_object_size 0 KB
 
# quais o rate para objetos devem serem swapados
cache_swap_low 90
cache_swap_high 95
 
# heap GDSF: otimiza o &amp;quot;hit rate&amp;quot; por manter objetos pequenos e
# e populares no cache, guardando assim um numero maior de objetos
# ao inves de buscar no disco ja esta na memoria, maior velocidade
# na resposta ao usuario
 
memory_replacement_policy heap GDSF
 
# heap LFUDA: otimiza o &amp;quot;byte hit rate&amp;quot; por manter objetos populares
# no cache sem levar em conta o tamanho. Se for utilizado este, o
# maximum_object_size devera ser aumentado para otimizar o LFUDA.
 
cache_replacement_policy heap LFUDA
 
# Lembrando que cada 10GB de cache o squid consome 100MB de ram para gerenciar isto
# colocando 100GB de STORAGE o squid vai usar 1 Giga da RAM para gerenciar o cache do disco
# estou reservando entao 3 gigas para o squid, 2 para cache_mem e 1 para cuidar do cache em disco, sobrando 1 GB para o sistema usar.
# Em relacao ao metodo de gerenciamento do cache, aufs é + rapido que ufs
 
cache_dir aufs /var/spool/squid3 4096 16 256
 
# user/group/manager
 
cache_mgr infraestrutura@empresa.com.br
cache_effective_user proxy
cache_effective_group proxy
 
### ttl de objetos no cache ###########################
# http://www.squid-cache.org/Doc/config/refresh_pattern/
 
refresh_pattern ^ftp:                1440        20%        10080
refresh_pattern ^gopher:        1440        0%        1440
refresh_pattern -i (/cgi-bin/|\?) 0        0%        0
refresh_pattern (Release|Package(.gz)*)$        0        20%        2880
refresh_pattern .                0        20%        4320
 
 
###
### listas de controle #######################
###
 
hierarchy_stoplist cgi-bin ?
 
# acl ligada a autenticacao
 
# acesso padrao daemon squid
acl all src all
acl manager proto cache_object
acl localhost src 127.0.0.1/32
acl to_localhost dst 127.0.0.0/8
 
# redes para icp (proxy filho)
acl localnet src 10.1.xxx.xxx/24
 
# portas seguras
acl SSL_ports port 443                # https
acl SSL_ports port 465                # https
acl SSL_ports port 587                # https
acl SSL_ports port 993                # https
acl SSL_ports port 997                # https
 
# portas comuns
acl Safe_ports port 80                 # http
acl Safe_ports port 8080               # http
acl Safe_ports port 21                 # ftp
acl Safe_ports port 25                 # smtp
acl Safe_ports port 110                # pop
 
# acl que especifica metodos de conectividade
acl purge method PURGE
acl CONNECT method CONNECT
 
# acl que especifica tipo de consulta QUERY em cgi-bin
acl QUERY urlpath_regex cgi-bin \?
 
###
### controle de acesso #############################################
###
 
# liberacoes padrao daemon/localhost
http_access allow manager localhost
http_access deny manager
http_access allow purge localhost
http_access deny purge
 
# nao libera portas diferentes de Safe_ports e SSL_ports
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
 
# nao cacheia cgi-bin
cache deny QUERY
 
# libera rede local
http_access allow localnet

# bloqueia qualquer acesso que nao tenha casado com as regras acima
http_access deny all

### especificando uso da tabela BALANCEAMENTO (roteamento) 

tcp_outgoing_tos 0x1 localnet
 
###
### processando em paralelo ###########
###
 
# http://www.visolve.com/squid/squid24s1/delaypool.php
 
pipeline_prefetch on
 
### reiniciando rapidamente #######
 
shutdown_lifetime 1 second
 
### estatisticas de conexao #######
 
# If enabled, squid will keep statistics on each client.
# This can become a memory hog after a while, so it’s best to keep it disabled.
 
client_db off
 
### conexoes #################
 
# Sends a connection-close to clients
# that leave a half open connection to the squid server.
 
half_closed_clients off
 
### snmp ####################
 
acl snmpcommunity snmp_community empresa
snmp_port 3401
snmp_access allow snmpcommunity localhost
snmp_access deny all
 
### logs #################
 
access_log /var/log/squid3/access.log squid
cache_log /var/log/squid3/cache.log
 
# Log de objetos guardados. Pode ser desativado para melhorar a performance

cache_store_log none
 
### idioma das mensagens do squid para usuarios ################
 
error_directory /usr/share/squid3/errors/Portuguese
 
### arquivos ###################
 
hosts_file /etc/hosts
coredump_dir /var/spool/squid3

&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;72-exemplo-de-balanceamento-usando-tabela-default&#34;&gt;7.2 Exemplo de balanceamento usando tabela default&lt;/h3&gt;
&lt;p&gt;Ao invés de criar uma tabela específica para balanceamento, podemos definir o balanceamento na tabela default.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ip route add default scope global nexthop via 189.xxx.xxx.xxx \
dev eth1 weight 1 nexthop via 200.xxx.xxx.xxx dev eth2 weight 1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;É apenas uma outra forma de fazê-lo, mais direta.&lt;/p&gt;
&lt;h2 id=&#34;amarrando-as-pontas&#34;&gt;Amarrando as pontas&lt;/h2&gt;
&lt;h3 id=&#34;8-conclusão&#34;&gt;8. Conclusão&lt;/h3&gt;
&lt;p&gt;O Netfilter/iptables e Iproute2 possuem juntos um universo de funcionalidades e comandos para te ajudar a resolver os mais diversos problemas.&lt;/p&gt;
&lt;p&gt;O exemplo deste post é bem básico e simples, espero que sirva de referência para aqueles que necessitem balancear dois ou mais links.&lt;/p&gt;
&lt;h3 id=&#34;82-cuidado-com-testes-meuip&#34;&gt;8.2 Cuidado com testes MEUIP&lt;/h3&gt;
&lt;p&gt;Se estiver tentando ver se o balanceamento funciona usando sites MEUIP, você está fazendo errado. O balanceamento possui um cache, e no caso do mesmo site ele vai analisar por
qual link voce acessou aquele site e vai sair sempre por ele, isso ocorre para
evitar problemas ao acessar sites que precisam de persistência de sessão.&lt;/p&gt;
&lt;p&gt;O balanceamento vai funcionar, mas acesse sites diferentes para testar e use o MTR no console para avaliar por onde você está saindo, isso será mais eficiente.&lt;/p&gt;
&lt;h3 id=&#34;9-referências-de-pesquisa&#34;&gt;9. Referências de pesquisa&lt;/h3&gt;
&lt;h3 id=&#34;91-principais&#34;&gt;9.1 Principais&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.policyrouting.org/iproute2.doc.html&#34;&gt;http://www.policyrouting.org/iproute2.doc.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://netfilter.org/documentation/&#34;&gt;http://netfilter.org/documentation/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;92-secundários&#34;&gt;9.2 Secundários&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://lartc.org/howto/lartc.rpdb.multiple-links.html&#34;&gt;http://lartc.org/howto/lartc.rpdb.multiple-links.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.debian-administration.org/articles/377&#34;&gt;http://www.debian-administration.org/articles/377&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.enterprisenetworkingplanet.com/netos/article.php/3512836/Tunnels-Routes-and-Rules-Theyre-Easier-with-iproute2.htm&#34;&gt;http://www.enterprisenetworkingplanet.com/netos/article.php/3512836/Tunnels-Routes-and-Rules-Theyre-Easier-with-iproute2.htm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.nielshorn.net/2008/09/load-balancing-two-isps/&#34;&gt;http://blog.nielshorn.net/2008/09/load-balancing-two-isps/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Att.&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Entendendo o HSTS</title>
      <link>https://archives.gutocarvalho.net/post/2012-11-29-entendendo-o-hsts/</link>
      <pubDate>Thu, 29 Nov 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-11-29-entendendo-o-hsts/</guid>
      <description>&lt;h2 id=&#34;1-hsts&#34;&gt;1. HSTS&lt;/h2&gt;
&lt;p&gt;No dia 19 de Novembro de 2012 a IETF publicou um novo padrão chamado HSTS via &lt;a href=&#34;http://tools.ietf.org/html/rfc6797&#34;&gt;RFC6797&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;HSTS significa &lt;strong&gt;HTTP Strick Transport Security&lt;/strong&gt;, essa tecnologia não é nova, ela já vem sendo desenvolvida desde 2010. O HSTS foi criado para permitir que sites possam se declarar acessíveis apenas de forma segura utilizando o protocolo HTTPS, isto ajuda a minimizar problemas que ocorrem nos sites mistos que oferecem tanto acesso HTTP quanto HTTPS. Neste tipo de site, normalmente ocorre um redirect para HTTPS no primeiro acesso do usuário.&lt;/p&gt;
&lt;p&gt;Sites mistos sofrem devido a falhas de implementação do HTTPS ou dos desenvolvedores, este tipo de coisa ocorre primeiro pois o HTTPS é protocolo antigo, já tem mais de 18 anos, e claro que não previu em sua criação a maioria dos cenários de internet que temos hoje. O outro problema são os desenvolvedores que nem sempre seguem as boas práticas de desenvolvimento e segurança.&lt;/p&gt;
&lt;p&gt;Devido ao uso misto de HTTP e HTTPS em alguns sites, atacantes podem explorar brechas de implementação e tentar então comprometer estes sites.&lt;/p&gt;
&lt;h2 id=&#34;11-entendendo-o-problema&#34;&gt;1.1 Entendendo o problema&lt;/h2&gt;
&lt;p&gt;Imagine que você digitou no navegador dominio.com.br, normalmente fazemos isto, não especificamos http ou https no início, com isto o navegador vai tentar primeiro acessar a parte insegura do site &lt;a href=&#34;http://dominio.com.br&#34;&gt;http://dominio.com.br&lt;/a&gt;, e caso exista um redirect o servidor de aplicação vai lhe forcar a carregar a página de forma segura (HTTPS), porém você já fez um contato não seguro com o website.&lt;/p&gt;
&lt;p&gt;Atacantes podem se aproveitar desse tipo de situação e explorar falhas com métodos conhecidos como man-in-the-middle.&lt;/p&gt;
&lt;h2 id=&#34;12-solução-proposta&#34;&gt;1.2 Solução proposta&lt;/h2&gt;
&lt;p&gt;Para resolver isto, a IETF reuniu um grupo de especialistas com o objetivo de desenvolver um mecanismo que previna este tipo de problema. Dentre os membros deste seleto grupo podemos citar Jeff Hodge (PayPal), Collin Jackson (Carnegie Mellon University) e Adam Barth (Google).&lt;/p&gt;
&lt;p&gt;O objeto principal do projeto era desenvolver algum mecanismo que force que o site seja visitado apenas via HTTPS, convertendo então qualquer url &lt;strong&gt;&lt;a href=&#34;http://dominio.com.br/xxx&#34;&gt;http://dominio.com.br/xxx&lt;/a&gt;&lt;/strong&gt; para &lt;strong&gt;htps://dominio.com.br&lt;/strong&gt;, fazendo isto sem nem mesmo se comunicar com o website, tudo ocorre no lado do cliente (navegador).&lt;/p&gt;
&lt;p&gt;O mecanismo foi criado e chamado de HSTS e o resultado do trabalho destas pessoas está publicado na &lt;a href=&#34;http://tools.ietf.org/html/rfc6797&#34;&gt;RFC6797&lt;/a&gt;, portando podemos dizer que o conteúdo desta RFC é um consenso de toda a comunidade científica (IETF), interessados e colaboradores.&lt;/p&gt;
&lt;p&gt;Já temos grandes empresas como Google, Twitter e Paypal que disponibilizam a tecnologia HSTS em seus sites. Isso significa que se você tiver um navegador com suporte HSTS, ele vai saber se o site tem suporte ao HSTS, se tiver já vai tentar estabelecer uma conexão segura, ignorando as formas inseguras de acesso.&lt;/p&gt;
&lt;h2 id=&#34;2-exemplos-de-uso-em-apache-httpd&#34;&gt;2. Exemplos de uso em Apache HTTPD&lt;/h2&gt;
&lt;h2 id=&#34;21-rhelcentos&#34;&gt;2.1 RHEL/CENTOS&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; # carregando modulo headers

LoadModule headers_module modules/mod_headers.so
 
 # HTTPS-Host-Configuration

&amp;lt;VirtualHost 10.0.0.1:443&amp;gt;
      # Usando HTTP Strict Transport Security para forçar conexao segura
      Header always set Strict-Transport-Security &amp;quot;max-age=31536000; includeSubDomains&amp;quot;
      # O restante da configuração segue abaixo
      [...]
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;22-debian&#34;&gt;2.2 Debian&lt;/h2&gt;
&lt;p&gt;Primeiro devemos carregar o módulo do apache2&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# a2enmod headers
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E depois a configuração no vhost&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;&amp;lt;VirtualHost 10.0.0.1:443&amp;gt;
      # Usando HTTP Strict Transport Security para forçar conexao segura
      Header always set Strict-Transport-Security &amp;quot;max-age=31536000; includeSubDomains&amp;quot;
      # O restante da configuração segue abaixo
      [...]
&amp;lt;/VirtualHost&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;3-exemplos-de-uso-em-nginx&#34;&gt;3. Exemplos de uso em NGINX&lt;/h2&gt;
&lt;p&gt;No Nginx você deve especificar o HSTS na diretiva server que configura o acesso seguro.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;server {
    listen 443 default_server ssl;
    ssl_certificate /etc/nginx/ssl/example.com_chain.pem;
    ssl_certificate_key /etc/nginx/ssl/example.com.key;
    add_header Strict-Transport-Security max-age=31536000;
}
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;4-outros-exemplos-de-uso&#34;&gt;4. Outros exemplos de uso&lt;/h2&gt;
&lt;p&gt;Você pode ainda declarar HSTS no código de sua aplicação, na página HSTS da &lt;a href=&#34;http://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security&#34;&gt;wikipedia&lt;/a&gt; existem vários exemplos, recomendo.&lt;/p&gt;
&lt;h2 id=&#34;5-entendendo-a-configuação&#34;&gt;5. Entendendo a configuação&lt;/h2&gt;
&lt;h2 id=&#34;51-apache&#34;&gt;5.1 Apache&lt;/h2&gt;
&lt;p&gt;Com a linha abaixo ativamos o HSTS no VHOST do Apache&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Header always set Strict-Transport-Security
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Com o parâmetro abaixo definimos o tempo em que o navegador deve lembrar dessa configuração, no caso do exemplo são 365 dias.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;max-age=31536000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E para definirmos que a configuração deve se estender aos subdomínios podemos utilizar a diretiva abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;includeSubDomains
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;52-nginx&#34;&gt;5.2 NGINX&lt;/h2&gt;
&lt;p&gt;Para ativar o HSTS na diretiva server devemos usar:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;add_header Strict-Transport-Security 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;E para definirmos o tempo em que o navegador deve se lembrar disto, neste caso 365 dias.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;max-age=31536000
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;4conclusão&#34;&gt;4.Conclusão&lt;/h2&gt;
&lt;p&gt;Essa tecnologia é aliada do usuário e aumenta consideravelmente a segurança em sua navegação, mas para funcionar seu navegador tem de ter suporte ao HSTS. O Firefox e Chrome já suportam HSTS e já avisaram que em suas próximas versões devem trazer uma lista de sistes HSTS pré-carregados.&lt;/p&gt;
&lt;p&gt;;)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Bash Hacks Histórico de comandos</title>
      <link>https://archives.gutocarvalho.net/post/2012-11-28-bash-hacks-historico-de-comandos/</link>
      <pubDate>Wed, 28 Nov 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-11-28-bash-hacks-historico-de-comandos/</guid>
      <description>&lt;h2 id=&#34;1-entendendo-o-history&#34;&gt;1. Entendendo o history&lt;/h2&gt;
&lt;p&gt;O history é um comando muito utilizado por sysadmins, no entanto, existem algumas funcionalidades muito interessantes e pouco exploradas nesta ferramenta.&lt;/p&gt;
&lt;p&gt;Vamos rodar o comando history:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# history
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe a saída:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
492  reboot
493  ps aux
494  df -h
495  vim /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A informação  que estamos vendo é armazenada em memória e também em disco. Todo o usuário possui em seu diretório pessoal um arquivo com seu histórico de comandos, se este estiver utilizando o interpretador de comandos bash, por default, o arquivo com estes dados tem o nome .bash_history, esse arquivo armazena os comandos digitados em sua última sessão ativa, isto significa que no momento do logoff esse arquivo recebe todo o fluxo de comandos digitados por aquele usuário em sua última sessão.&lt;/p&gt;
&lt;p&gt;O nome e o path para este arquivo é definido através da variável HISTFILE, por default a variável tem o valor abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;HISTFILE=/root/.bash_history
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para verificar o valor desta variável para um usuário, use um dos comandos abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# echo $HISTFILE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ou utilize o comando set, veja o exemplo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# set |grep HISTFILE
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se desejar mudar o local de armazenamento do arquivo e o nome do arquivo, você pode especificar isto manualmente, veja o exemplo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# export HISTFILE=/home/usuario/logs/.commands_history
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se modificarmos o valor da variável isto vai valer para sessão em que estamos logados, para que esta configuração se torne permanente, esta linha pode ser inserida no seu arquivo .bashrc ou no arquivo .bash_profile, com isso durante o logon a variável será carregada e ao fazer logoff o arquivo receberá os comandos digitados pelo usuário.&lt;/p&gt;
&lt;p&gt;Apesar do .bash_history conter todo o histórico de comandos das últimas sessões, o comando history também traz o histórico de comandos da sessão atual, combinando estes comandos com o conteúdo do arquivo. A diferença é que os dados mais recentes ainda estão em memória e serão descarregados no arquivo durante o logoff do usuário.&lt;/p&gt;
&lt;h3 id=&#34;11-history-time-format&#34;&gt;1.1 History time format&lt;/h3&gt;
&lt;p&gt;É possível personalizar as informações de histórico, inserindo data e hora em que o comando foi executado, para isto basta configurar a variável HISTTIMEFORMAT, veja o exemplo abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# export HISTTIMEFORMAT=&amp;quot;%F %T &amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ao configurar esta variável a saída do history ficará assim:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;...
547 2012-11-25 12:08:27 cd /etc/puppet/
548 2012-11-25 12:08:28 ls -al
549 2012-11-25 12:08:31 cd manifests/classes/ 550 2012-11-25 12:08:31 ls
551 2012-11-25 12:08:37 vim linux-server.pp 552 2012-11-25 12:08:42 vim users.pp
553 2012-11-25 12:08:57 openssl passwd -1 ...
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;12-history-file-size&#34;&gt;1.2 History file size&lt;/h3&gt;
&lt;p&gt;Você pode também especificar quantas linhas o arquivo .bash_history deve ter, isto é controlado através da variável HISTFILESIZE, para setá-la use o comando abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# export HISTFILESIZE=1500
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Neste exemplo estamos especificando que o arquivo .bash_history deve possuir até no máximo 1500 linhas. O history sabe manipular o arquivo e apagar as entradas mais antigas para manter os 1500 comandos recentes.&lt;/p&gt;
&lt;h3 id=&#34;13-history-size&#34;&gt;1.3 History size&lt;/h3&gt;
&lt;p&gt;Existe também a variável HISTSIZE que determina quantos comandos serão
retornados ao usar o comando HISTORY, veja o exemplo a abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# export HISTSIZE=100
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Neste exemplo eu digo ao comando history que ele deve me retornar os últimos 100 comandos.&lt;/p&gt;
&lt;h3 id=&#34;14-history-control&#34;&gt;1.4 History control&lt;/h3&gt;
&lt;p&gt;Existe uma variável chamada HISTCONTROL que nos permite especificar alguns filtros no histórico de comandos do usuário, vamos conhecer esses filtros.&lt;/p&gt;
&lt;h4 id=&#34;141-ignoredups&#34;&gt;1.4.1 ignoredups&lt;/h4&gt;
&lt;p&gt;Se quiser ignorar os comandos idênticos repetidos em sequência no histórico, podemos utilizar o filtro ignoredumps, acompanhe o teste:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# w
# w
# w
# history | tail -4
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Acompanhe a saída do history:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;44  w
45  w
46  w
47  history | tail -4
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe que o comando w apareceu 3 vezes em sequência, se quisermos ignorar as repetirções durante a auditoria, podemos especificar o ignoredups para os usuários de nossos servidores, com isto, não teríamos repetições durante as pesquisas, veja o exemplo abaixo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# export HISTCONTROL=ignoredups
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Acompanhe o teste:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# uname -a
# uname -a
# uname -a
# history | tail -3￼￼
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Acompanhe a saída do history:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;56  export HISTCONTROL=ignoredups
57  uname -a
58  history | tail -3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que apesar de termos digitado três vezes o comando &lt;strong&gt;uname -a&lt;/strong&gt;, o histórico apresentou apenas uma entrada, essa é a função do ignoredups.&lt;/p&gt;
&lt;h4 id=&#34;142-erasedups&#34;&gt;1.4.2 erasedups&lt;/h4&gt;
&lt;p&gt;O filtro erasedups remove entradas repetidas em todo o histórico, mesmo que elas não estejam em sequência, veja o exemplo abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# export HISTCONTROL=erasedups
# pwd
# /etc/init.d/puppet stop
# history | tail -3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Acompanhe a saída do history:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;38  pwd
39  /etc/init.d/puppet s top
40  history | tail -3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Agora vamos repetir alguns comandos:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# ls -ler
# /etc/init.d/puppet stop
# history | tail -6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Acompanhe a saída do history:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;35  export HISTCONTROL=erasedups
36  pwd
37  history | tail -3
38  ls -ltr
39  /etc/init.d/puppet stop
40  history | tail -6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Note que que o comando &lt;strong&gt;/etc/init.d/puppet stop&lt;/strong&gt; não foi repetido no histórico, essa é a função do erasedups.&lt;/p&gt;
&lt;h4 id=&#34;143-ignorespace&#34;&gt;1.4.3 ignorespace&lt;/h4&gt;
&lt;p&gt;O filtro ignorespace nos ajuda a evitar que alguns comandos digitados entrem no history, com ele se começarmos o comando com um espaço, este será ignorado, veja o exemplo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# export HISTCONTROL=ignorespace
# ls -ltr
# pwd
#  puppet agent --test
# history | tail -3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;67  ls -ltr
68  pwd
69  history | tail -3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Observe que o comando &lt;strong&gt;puppet agent &amp;ndash;test&lt;/strong&gt; não apareceu no histórico pois antes do comando eu dei um espaço.&lt;/p&gt;
&lt;h4 id=&#34;15-history-ignore&#34;&gt;1.5 History ignore&lt;/h4&gt;
&lt;p&gt;Ao setar a variável HISTIGNORE estamos orientando o history a ignorar alguns comandos, evitando inseri-los no histórico, acompanhe o exemplo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# export HISTIGNORE=&amp;quot;pwd:ls:ls -ltr:&amp;quot;
# pwd
# ls
# ls -ltr
# service httpd stop
# history | tail -3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Acomopanhe a saída do history:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;79  export HISTIGNORE=&amp;quot;pwd:ls:ls -ltr:&amp;quot;
80  service httpd stop
81  history
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Veja que os comandos pwd, ls e lst -ltr não foram mencionados pois estão declarados como valor do HISTIGNORE.&lt;/p&gt;
&lt;h4 id=&#34;16-fixando-configurações-de-history&#34;&gt;1.6 Fixando configurações de history&lt;/h4&gt;
&lt;p&gt;Quando especificamos um valor para uma variável, mesmo se essa variável for exportada, esse procedimento só valerá para aquela sessão de login e seus processos filhos, ao deslogar perderemos todas as configurações de history.&lt;/p&gt;
&lt;p&gt;Para fixar essas configurações e fazer com que elas sejam carregadas durante o logon, devemos inseri-las no arquivo .bashrc ou no arquivo .bash_profile, desta forma estaremos garantindo que as configurações sejam permanentes para nosso usuário.&lt;/p&gt;
&lt;h4 id=&#34;17-pesquisando-e-executando-comandos-no-history&#34;&gt;1.7 Pesquisando e executando comandos no history&lt;/h4&gt;
&lt;p&gt;Existem diversas formas de fazer pesquisa no histórico de comandos de usuários, vamos conhecer algumas delas:&lt;/p&gt;
&lt;p&gt;Para fazer a paginação do resultado podemos usar o more ou less:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# history|more
# history|less
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se quiser ver os últimos 100 comandos do history use:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# history 100
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se quiser pesquisar um padrão específico use:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# history|grep comando
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para ver o último comando digitado você pode usar a seta para cima, combinar as teclas CTRL+P ou ainda concatenar a saída com o tail, veja o exemplo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# history|tail -1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Se quiser repetir o último comando digitado use:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# !!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ou&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# !-1
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Onde -1 é o último comando, -2 o penúltimo e assim por diante.&lt;/p&gt;
&lt;p&gt;Se você quiser executar algum comando do history, por exemplo o comando 510, basta chamá-lo desta forma:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# !510
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Outras duas dicas importantes, se por alguma razão desejar rodar o último
comando com um padrão específico, mesmo que você não se lembre exatamente
do comando e parâmetros, faça o seguinte:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#!?un?
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;No caso acima, o último comando recente como o padrão digitado era o
&amp;lsquo;uname -a&amp;rsquo;, e ele foi executado, agora caso saiba exatamente o comando,
use o formato abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#!uname
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Quando desejar fazer uma pesquisa ativa, pode ainda usar a combinação de teclas CTRL+R, após digitar a combinação de teclas você precisa especificar um padrão de pesquisa, após digitar o padrão vá pressionando a combinação para continuar a busca, quando encontrar o comando desejado pressione ESC para que ele vá para o prompt ou RETURN caso deseje executá-lo.&lt;/p&gt;
&lt;h2 id=&#34;2-amarrando-as-pontas&#34;&gt;2. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;O history é um comando importante, é fundamental saber utilizá-lo de forma ágil e eficiente, as principais informações do history estão no manual do BASH, basta pesquisar para encontrar o que precisa.&lt;/p&gt;
&lt;p&gt;[s] &lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Flux para OSX</title>
      <link>https://archives.gutocarvalho.net/post/2012-11-26-flux-para-osx/</link>
      <pubDate>Mon, 26 Nov 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-11-26-flux-para-osx/</guid>
      <description>&lt;p&gt;Recentemente descobri um excelente programa para controlar a luminosidade da tela do meu macbook pro, o nome do programa é f.lux, ele foi criado para oferecer mais conforto para o usuário ajustando a luminiosidade de acordo com a hora do dia ou da noite. No meu caso ele é mais prático a noite e de madrugada, o flux diminui a luminosidade oferecendo mais conforto para os olhos, recomendo.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/2012-11-26/flux_preferences.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Flux Preferences]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Site do projeto &lt;a href=&#34;http://stereopsis.com/flux/&#34;&gt;flux&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Configuração em Trio</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-29-puppet-configuracao-em-trio/</link>
      <pubDate>Mon, 29 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-29-puppet-configuracao-em-trio/</guid>
      <description>&lt;p&gt;Existe uma estrutura que gosto de chamar de &amp;lsquo;configuração em trio&amp;rsquo; que é a base para automatizar vários tipos de serviços comuns em ambientes linux/unix, eu costumo utilizar esse modelo em classes que crio dentro e fora de módulos, é eficiente e prático, basta combinar três resource types (trio) e dois meta-parâmetros, são eles:&lt;/p&gt;
&lt;p&gt;Resource Types&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;package&lt;/li&gt;
&lt;li&gt;service&lt;/li&gt;
&lt;li&gt;file&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MetaParameters&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;require&lt;/li&gt;
&lt;li&gt;notify&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;1-exemplo-conceitual&#34;&gt;1. Exemplo Conceitual&lt;/h3&gt;
&lt;p&gt;Antes de um exemplo real, vamos primeiro entender um modelo conceitual.&lt;/p&gt;
&lt;h4 id=&#34;11-requisitos-do-modelo-conceitual&#34;&gt;1.1 Requisitos do modelo conceitual&lt;/h4&gt;
&lt;p&gt;Se formos traduzir o código em requisitos teríamos uma lista como esta abaixo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Um pacote deve ser declarado como presente/instalado&lt;/li&gt;
&lt;li&gt;O serviço relacionado ao pacote deve estar habilitado&lt;/li&gt;
&lt;li&gt;O serviço relacionado ao pacote deve estar rodando&lt;/li&gt;
&lt;li&gt;O serviço relacionado ao pacote aceita comando restart em seu init script&lt;/li&gt;
&lt;li&gt;O serviço relacionado ao pacote aceita comando status em seu init script&lt;/li&gt;
&lt;li&gt;O serviço depende do objeto que declara o arquivo de configuração&lt;/li&gt;
&lt;li&gt;Um arquivo de configuração do serviço deve ser declarado como presente&lt;/li&gt;
&lt;li&gt;O arquivo de configuração depende do objeto que instala o pacote&lt;/li&gt;
&lt;li&gt;O arquivo deve pertencer ao usuário root&lt;/li&gt;
&lt;li&gt;O arquivo deve pertecer ao grupo root&lt;/li&gt;
&lt;li&gt;O arquivo deve ter permissão 644&lt;/li&gt;
&lt;li&gt;O arquivo de configuração deve notificar o serviço caso ocorra mudança na origem&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;É uma lista densa e complicada, vamos traduzir isto para código puppet.&lt;/p&gt;
&lt;h4 id=&#34;12-solução-para-modelo-conceitual&#34;&gt;1.2 Solução para modelo conceitual&lt;/h4&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# declarando pacote

package { &#39;pacote&#39;:
    	ensure =&amp;gt; installed,
}
  
# declarando arquivo de configuracao
 
file { &#39;pacote.conf&#39;:
	ensure  =&amp;gt; present,
	path    =&amp;gt; &amp;quot;/etc/pacote/pacote.conf&amp;quot;,
	source  =&amp;gt; &amp;quot;/root/puppet/pacote.conf&amp;quot;,
	owner   =&amp;gt; &#39;root&#39;,
	group   =&amp;gt; &#39;root&#39;,
	mode    =&amp;gt; 644,
	require =&amp;gt; Package[&#39;pacote&#39;],
	notify  =&amp;gt; Service[&#39;servico&#39;],
}       	

# declarando servico
 
service { &#39;servico&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;pacote.conf&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Veja que a tradução dos requisitos em código oferece uma visualização e um entendimento bem mais claro.&lt;/p&gt;
&lt;h3 id=&#34;2-exemplo-real&#34;&gt;2. Exemplo Real&lt;/h3&gt;
&lt;p&gt;Agora vamos para dois exemplos do mundo real, o primeiro acerca do serviço Postfix e o segundo acerca do serviço NTP. Perceba que a base é a mesma, fiz só alguns pequenos ajustes.&lt;/p&gt;
&lt;h4 id=&#34;21-postfix&#34;&gt;2.1 Postfix&lt;/h4&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# declarando pacote

package { &#39;postfix&#39;:
	ensure =&amp;gt; present,
}

# declarando serviço
 
service { &#39;postfix&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;/etc/postfix/main.cf&#39;],
}

# declarando arquivo de configuração
 
file { &#39;/etc/postfix/main.cf&#39;:
	source  =&amp;gt; &#39;/root/puppet/main.cf&#39;,
	owner   =&amp;gt; &#39;root&#39;,
	group   =&amp;gt; &#39;root&#39;,
	mode    =&amp;gt; 644,
	require =&amp;gt; Package[&#39;postfix&#39;],
	notify  =&amp;gt; Service[&#39;postfix&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h4 id=&#34;21-ntp&#34;&gt;2.1 NTP&lt;/h4&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# declarando pacote

package { &#39;ntp&#39;:
    	ensure =&amp;gt; present,
}

# declarando serviço
 
service { &#39;ntp&#39;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; File[&#39;/etc/ntp.conf&#39;],
}
 
# declarando arquivo de configuração
 
file { &#39;/etc/ntp.conf&#39;:
	source  =&amp;gt; &#39;/root/puppet/ntp.conf&#39;,
	owner   =&amp;gt; &#39;root&#39;,
	group   =&amp;gt; &#39;root&#39;,
	mode    =&amp;gt; 644,
	require =&amp;gt; Package[&#39;ntp&#39;],
	notify  =&amp;gt; Service[&#39;ntp&#39;],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;3-conclusão&#34;&gt;3. Conclusão&lt;/h3&gt;
&lt;p&gt;O modelo aplica-se a muitas demandas de automatização de serviços, e a partir dele podemos evoluir o código até atender todas das necessidades e requisitos.&lt;/p&gt;
&lt;p&gt;Em caso de uso de puppet &lt;strong&gt;cliente/servidor&lt;/strong&gt; haveria uma pequena mudança no parâmetro source do resource type &lt;strong&gt;file&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Mudaríamos de&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;source  =&amp;gt; &#39;/root/puppet/ntp.conf&#39;,
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;para&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;source  =&amp;gt; &#39;puppet:///files/ntp/ntp.conf&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;se estivermos criando uma classe simples com arquivos armazenados em /etc/puppet/files, agora se fosse um módulo, seria algo como&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;source  =&amp;gt; &#39;puppet:///modules/ntp/ntp.conf&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;e o arquivo estaria provavelmente em /etc/puppet/modules/ntp/files.&lt;/p&gt;
&lt;p&gt;Fica a dica para puppetizar suas configurações ;)&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Slides Oficina Latinoware 2012</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-26-puppet-slides-oficina-latinoware-2012/</link>
      <pubDate>Fri, 26 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-26-puppet-slides-oficina-latinoware-2012/</guid>
      <description>&lt;p&gt;Como combinado estou colocando o slides do Oficina Puppet que ministrei no dia 19/Outubro no Latinoware 2012.&lt;/p&gt;
&lt;iframe src=&#34;http://www.slideshare.net/slideshow/embed_code/14891194?rel=0&#34; width=&#34;597&#34; height=&#34;486&#34; frameborder=&#34;0&#34; marginwidth=&#34;0&#34; marginheight=&#34;0&#34; scrolling=&#34;no&#34; style=&#34;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px&#34; allowfullscreen&gt; &lt;/iframe&gt; &lt;div style=&#34;margin-bottom:5px&#34;&gt; &lt;strong&gt; &lt;a href=&#34;http://www.slideshare.net/GutoCarvalho/oficina-puppet-latinoware&#34; title=&#34;Oficina Puppet latinoware&#34; target=&#34;_blank&#34;&gt;Oficina Puppet latinoware&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&#34;http://www.slideshare.net/GutoCarvalho&#34; target=&#34;_blank&#34;&gt;Guto Carvalho&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;
&lt;p&gt;Qualquer dúvida é só entrar em contato.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>A Beatriz Chegou</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-09-a-beatriz-chegou/</link>
      <pubDate>Tue, 09 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-09-a-beatriz-chegou/</guid>
      <description>&lt;p&gt;Nos próximos dias estarei ausente no BLOG e WIKI por um motivo muito especial, a Beatriz nasceu. Eu e minha esposa estamos
cuidando dela com todo o carinho e atenção que são necessários nestes primeiros dias, a Beatriz é a nossa prioridade.  Na segunda - 15/Oct - retomarei
as atividades no trabalho, blog e wiki.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/beatriz.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Beatriz Macedo Carvalho]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;A Beatriz nasceu em Brasília no dia 06/Oct/12 no Hospital Santa Helena às 13:10 com 50 cm e 3.450 Kg - saúde plena.&lt;/p&gt;
&lt;figure class=&#34;center&#34;&gt;&lt;img src=&#34;https://archives.gutocarvalho.net/images/posts/beatriz2.png&#34;/&gt;&lt;figcaption&gt;
            &lt;h4&gt;[Beatriz Macedo Carvalho]&lt;/h4&gt;
        &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Caso precise falar comigo, envie um e-mail, essa é a forma mais eficaz de fazer contato neste momento.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet para desenvolvedores java</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-03-puppet-para-desenvolvedores-java/</link>
      <pubDate>Wed, 03 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-03-puppet-para-desenvolvedores-java/</guid>
      <description>&lt;p&gt;Meu bom amigo &lt;code&gt;Lucius Curado&lt;/code&gt; me mandou esse vídeo muito interessante da #JAVAZONE que aborda como o puppet pode ajudar os desenvolvedores java em seus projetos.&lt;/p&gt;
&lt;h3 id=&#34;confira-o-vídeo&#34;&gt;Confira o vídeo&lt;/h3&gt;
&lt;iframe src=&#34;http://player.vimeo.com/video/49483627&#34; width=&#34;500&#34; height=&#34;281&#34; frameborder=&#34;0&#34; webkitAllowFullScreen mozallowfullscreen allowFullScreen&gt;&lt;/iframe&gt; &lt;p&gt;&lt;a href=&#34;http://vimeo.com/49483627&#34;&gt;Puppet for Java developers&lt;/a&gt; from &lt;a href=&#34;http://vimeo.com/javazone&#34;&gt;JavaZone&lt;/a&gt; on &lt;a href=&#34;http://vimeo.com&#34;&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Relatos de uso V3</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-03-puppet-relatos-de-uso-v3/</link>
      <pubDate>Wed, 03 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-03-puppet-relatos-de-uso-v3/</guid>
      <description>&lt;p&gt;Os usuários de puppet estão concentrando as informações relativas a dificuldades encontradas no upgrade para a versão 3.0. Se você identificou algum problema de fucionamento em seu ambiente após a atualização, por gentileza informe nesta &lt;a href=&#34;http://projects.puppetlabs.com/projects/puppet/wiki/Telly_Upgrade_Issues&#34;&gt;wiki&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Hoje ministrei um workshop de puppet já usando a v3, percebi - pelo menos no debian - que o ralsh não vem mais no pacote do puppet.&lt;/p&gt;
&lt;p&gt;Na introdução de puppet no workshop eu usava o RAL para demonstrar a abstração no uso de recuros.&lt;/p&gt;
&lt;p&gt;RALSH significava &lt;code&gt;ral shell&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;exemplos-de-uso-do-ralsh-até-a-versão-27&#34;&gt;Exemplos de uso do RALSH até a versão 2.7&lt;/h3&gt;
&lt;p&gt;testando resource type &lt;strong&gt;user&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# ralsh user guto ensure=present
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;testando resource type &lt;strong&gt;package&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# ralsh package htop ensure=installed
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;testando resource type &lt;strong&gt;service&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# ralsh service ssh ensure=running
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;adaptando-para-a-versão-30&#34;&gt;Adaptando para a versão 3.0&lt;/h3&gt;
&lt;p&gt;testando resource type &lt;strong&gt;user&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# puppet resource user guto ensure=present
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;testando resource type &lt;strong&gt;package&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# puppet resource package htop ensure=installed
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;testando resource type &lt;strong&gt;service&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# puppet resource service ssh ensure=running
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Até o momento eu só peguei isso, ainda estou confirmado no changelog se esta mudança foi devidamente informada.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Wiki com mudanças da V3</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-03-puppet-wiki-com-lista-de-mudancas-da-v3/</link>
      <pubDate>Wed, 03 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-03-puppet-wiki-com-lista-de-mudancas-da-v3/</guid>
      <description>&lt;p&gt;A wikipage &lt;a href=&#34;http://projects.puppetlabs.com/projects/puppet/wiki/BreakingChangesInTelly&#34;&gt;BreakingChangesInTelly&lt;/a&gt; traz uma lista de mudanças importantes no puppet v3 em um formato mais amigável.&lt;/p&gt;
&lt;p&gt;Dentre as novidades, acredito que uma das questões mais relevantes é a remoção dos comandos stand-alone, estes agora são chamados via comando puppet, veja na tabela abaixo como executar os comandos na versão nova.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Comandos pré 2.6&lt;/th&gt;
&lt;th&gt;Comandos pós 2.6-3.0&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;filebucket&lt;/td&gt;
&lt;td&gt;puppet filebucket&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pi&lt;/td&gt;
&lt;td&gt;puppet describe&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;puppetdoc&lt;/td&gt;
&lt;td&gt;puppet doc&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ralsh&lt;/td&gt;
&lt;td&gt;puppet resource&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pupetca&lt;/td&gt;
&lt;td&gt;puppet ca&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;puppetd&lt;/td&gt;
&lt;td&gt;puppet agent&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;puppetmasterd&lt;/td&gt;
&lt;td&gt;puppet master&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;pupptqd&lt;/td&gt;
&lt;td&gt;puppet queue&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;puppetrun&lt;/td&gt;
&lt;td&gt;puppet kick&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;br&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Fica a dica.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Limpando Node Reports</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-02-puppet-limpando-node-reports/</link>
      <pubDate>Tue, 02 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-02-puppet-limpando-node-reports/</guid>
      <description>&lt;h3 id=&#34;node-reports&#34;&gt;Node Reports&lt;/h3&gt;
&lt;p&gt;Quando usamos o puppet-dashboard, precisamos habilitar em cada agente o parâmetro &lt;code&gt;report = true&lt;/code&gt;. Com isso, a cada execução do puppet em um node, um relatório é enviado para o puppetmaster, este por sua vez empurra os dados recebidos para o puppet-dashboard.&lt;/p&gt;
&lt;p&gt;Se quiseremos, podemos gravar esses &lt;strong&gt;relatórios&lt;/strong&gt; em disco, um arquivo YAML será gerado no servidor puppetmaster no diretório /var/lib/puppet/reports a cada execução do puppet em nossos nodes.&lt;/p&gt;
&lt;p&gt;{% blockquote %}
Mas qual seria a finalidade de manter esses arquivos?
{% endblockquote %}&lt;/p&gt;
&lt;p&gt;É muito simples, você pode popular a base do puppet-dashboard utilizando esses arquivos no caso de um corrompimento de sua base (mysql) de produção.&lt;/p&gt;
&lt;p&gt;No caso de um desastre, para importar esses arquivos bastaria rodar o comando abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet-dashboard rake RAILS_ENV=production reports:import
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Eu mantenho por segurança cerca de 2 semanas de arquivos, assim caso ocorra alguma coisa eu posso re-popular os dados do dashboard dos últimos 14 dias.&lt;/p&gt;
&lt;h3 id=&#34;1-transtornos-ocasionais&#34;&gt;1. Transtornos ocasionais&lt;/h3&gt;
&lt;p&gt;O problema de armazenar esses arquivos é que o disco vai enchendo e pode acontecer o famoso DISK FULL, fazendo seu puppetmaster parar de funcionar.&lt;/p&gt;
&lt;h3 id=&#34;2-limpando-diretório&#34;&gt;2. Limpando diretório&lt;/h3&gt;
&lt;p&gt;Precisamos evitar esse tipo de transtorno, vou mostrar algumas formas de limpar o disco, deixando apenas os relatórios das duas últimas semanas.&lt;/p&gt;
&lt;h4 id=&#34;21-usando-find&#34;&gt;2.1 Usando Find&lt;/h4&gt;
&lt;p&gt;Podemos fazer isto usando simplesmente o comando abaixo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;find /var/lib/puppet/reports -name *.yaml -mtime +14 -exec rm -rf {} \;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Esse comando vai apagar todos os arquivos com extensão &lt;code&gt;yaml&lt;/code&gt; do diretório &lt;code&gt;reports&lt;/code&gt; com idade maior ou igual a &lt;code&gt;14&lt;/code&gt; dias.&lt;/p&gt;
&lt;h4 id=&#34;22-usando-find-dentro-de-cron-no-puppet&#34;&gt;2.2 Usando Find dentro de Cron no Puppet&lt;/h4&gt;
&lt;p&gt;Podemos ainda criar no puppet um cron para executar isto diariamente, veja o exemplo abaixo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class cleanreports {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cron { &amp;quot;clean reports&amp;quot;:
	command =&amp;gt; &amp;quot;find /var/lib/puppet/reports -name *.yaml -mtime +14 -exec rm -rf {} \;&amp;quot;,
	user =&amp;gt; root, 
	hour =&amp;gt; 01, 
	minute =&amp;gt; 00,  
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Neste exemplo estou orientando que o comando seja executado diariamente às 01:00 da manhã.&lt;/p&gt;
&lt;h4 id=&#34;23-usando-o-recurso-tidy-do-puppet&#34;&gt;2.3 Usando o recurso Tidy do Puppet&lt;/h4&gt;
&lt;p&gt;Ou podemos ainda usar o tidy que é um recurso nativo do puppet para limpeza de arquivos em diretórios com base em um critério pré-definido.&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class cleanreports {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    tidy { &amp;quot;/var/lib/puppet/reports/&amp;quot;:
            age     =&amp;gt; &amp;quot;2w&amp;quot;,
            matches =&amp;gt; &amp;quot;*.yaml&amp;quot;,
            recurse =&amp;gt; true ,
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Veja que estou dizendo ao Tidy que ele deve limpar arquivos com extensão &lt;code&gt;yaml&lt;/code&gt; , com idade igual ou maior a &lt;code&gt;2 semanas&lt;/code&gt;, de forma recursiva.&lt;/p&gt;
&lt;p&gt;O único inconveniente desta alternativa é que ele vai rodar o tidy a cada execução do puppet no master, e caso sua janela seja curta (10 min) isso pode ser um problema, causando um aumento excessivo do load de seu puppetmaster de forma regular.&lt;/p&gt;
&lt;h4 id=&#34;24-usando-exec--schedule&#34;&gt;2.4 Usando Exec + Schedule&lt;/h4&gt;
&lt;p&gt;Podemos combinar o resource type exec com o resource type schedule, veja um exemplo:&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class cleanreports {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;    schedule { &#39;daily&#39;:
           range  =&amp;gt; &amp;quot;01:00 - 02:00&amp;quot;,
           period =&amp;gt; daily,
           repeat =&amp;gt; 1,
    }

    exec { &#39;cleanrepors&#39;:
           command  =&amp;gt; &amp;quot;/usr/bin/find /var/lib/puppet/reports -name *.yaml -mtime +14 -exec rm -rf {} \;&amp;quot;,
           schedule =&amp;gt; &#39;daily&#39;,
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;No exemplo acima o exec vai rodar 1 vez ao dia entre 01 e 02 da manhã.&lt;/p&gt;
&lt;h3 id=&#34;3-amarrando-as-pontas&#34;&gt;3. Amarrando as pontas&lt;/h3&gt;
&lt;p&gt;Existem diferentes formas de evitar um disk full, podemos fazer a limpeza de arquivos usando comandos do linux (find), podemos usar recursos nativos do puppet (tidy), podemos combinar comandos do sistema (find) com recursos do puppet (cron), isso vai depender de sua criatividade e necessidade.&lt;/p&gt;
&lt;p&gt;Eu apresentei apenas quatro exemplos que podem resolver problemas deste tipo,
porém cada cenário normalmente pede uma solução específica.&lt;/p&gt;
&lt;p&gt;É sempre bacana ler a documentação do puppet para entender e encontrar recursos que possam nos ajudar a resolver um problema, eu não conhecia o TIDY, mas vi que ele pode ser muito útil nesta situação.&lt;/p&gt;
&lt;p&gt;Ainda há muito a ler e aprender, sigo compartilhando o que descubro.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Criando módulo NTP</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-01-puppet-criando-modulo-ntp/</link>
      <pubDate>Mon, 01 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-01-puppet-criando-modulo-ntp/</guid>
      <description>&lt;p&gt;Hoje trago um exemplo de criação de módulo no Puppet com tratamento de condicionais e fatos, espero que os novos entusiastas consigam enxergar com mais
clareza como fazer esse tipo de tratamento.&lt;/p&gt;
&lt;h2 id=&#34;1-requisitos&#34;&gt;1. requisitos&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Verificar se a distribuição é Debian, Ubuntu, RHEL ou CENTOS&lt;/li&gt;
&lt;li&gt;Declarar as variáveis $package_name, $service_name e $conf_file de acordo com o SO&lt;/li&gt;
&lt;li&gt;Instalar o pacote NTP&lt;/li&gt;
&lt;li&gt;Empurrar o arquivo de configuração NTP
&lt;ul&gt;
&lt;li&gt;Só fazer isto se o pacote estiver instalado&lt;/li&gt;
&lt;li&gt;O arquivo deve pertencer ao usuário root, grupo root e ter permissão 644&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Declarar que o serviço NTP deve estar rodando e habilitado no boot
&lt;ul&gt;
&lt;li&gt;Só fazer isso se o pacote estiver instalado e se o arquivo de configuração estiver presente&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mão-na-massa&#34;&gt;mão-na-massa&lt;/h3&gt;
&lt;p&gt;crie o diretório ntp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir ntp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ntp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o subdir files&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir files
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o subdir manifests&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir manifests
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no subdir manifests&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd manifests
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o subdir classes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir classes
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no subdir classes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd classes
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o arquivo ntp.pp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim ntp.pp 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;insira os seguinte conteúdo&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}
class ntp {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# tratando distribuições

case $operatingsystem {
    	CentOS,RedHat: { 
		$package_name = &#39;ntp&#39;
        	$service_name = &#39;ntpd&#39;
        	$conf_file    = &#39;ntp.conf.el&#39;
	}
	Debian,Ubuntu: { 
		$package_name = &#39;ntp&#39;
		$service_name = &#39;ntp&#39;
		$conf_file    = &#39;ntp.conf.debian&#39;
	}
}

# declarando o pacote

package { &amp;quot;$package_name&amp;quot;:
	ensure =&amp;gt; present,
}

# declarando o arquivo de configuração

file { &#39;/etc/ntp.conf&#39;:
	ensure  =&amp;gt; present,
	source  =&amp;gt; &amp;quot;puppet:///ntp/${conf_file}&amp;quot;,
	notify  =&amp;gt; Service[&amp;quot;$service_name&amp;quot;],
	require =&amp;gt; Package[&amp;quot;$package_name&amp;quot;],
}

# declarando o serviço

service { &amp;quot;$service_name&amp;quot;:
	ensure     =&amp;gt; running,
	enable     =&amp;gt; true,
	hasrestart =&amp;gt; true,
	hasstatus  =&amp;gt; true,
	require    =&amp;gt; [ Package[&#39;ntp&#39;], File[&#39;/etc/ntp.conf&#39; ], ],
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}
{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;salve o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;retorne ao diretório manifests&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ..
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o arquivo init.pp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim init.pp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;edite arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim init.pp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;insira a linha abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import &amp;quot;classes/*.pp&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;salve o arquivo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;:wq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie os arquivos &lt;strong&gt;ntp.conf.el&lt;/strong&gt; e &lt;strong&gt;ntp.conf.debian&lt;/strong&gt; no diretório files. Fazendo isto, nosso módulo estará pronto para testarmos.&lt;/p&gt;
&lt;h2 id=&#34;2-testando-módulo&#34;&gt;2. testando módulo&lt;/h2&gt;
&lt;p&gt;partindo do pressuposto de que o módulo já foi carregado no arquivo site.pp, siga e declare esse módulo em algum node, veja o exemplo abaixo:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;node xpto {
    include ntp
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;no node, execute o puppet&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;puppet agent --test
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;acompanhe a saída&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;info: Caching catalog for puppetmaster.hacklab
info: Applying configuration version &#39;1349105440&#39;
notice: /Stage[main]/Ntp/Package[ntp]/ensure: ensure changed &#39;purged&#39; to &#39;present&#39;
notice: /Stage[main]/Ntp/File[/etc/ntp.conf]/content: 
--- /etc/ntp.conf	2010-10-17 11:35:26.000000000 -0200
+++ /tmp/puppet-file20121001-2558-1l2emqx-0	2012-10-01 12:33:20.000000000 -0300
@@ -1,55 +1,16 @@
-# /etc/ntp.conf, configuration for ntpd; see ntp.conf(5) for help
-
 driftfile /var/lib/ntp/ntp.drift
-
-
-# Enable this if you want statistics to be logged.
-#statsdir /var/log/ntpstats/
-
 statistics loopstats peerstats clockstats
+
 filegen loopstats file loopstats type day enable
 filegen peerstats file peerstats type day enable
 filegen clockstats file clockstats type day enable
 
+server ntp.dominio iburst dynamic
 
-# You do need to talk to an NTP server or two (or three).
-#server ntp.your-provider.example
-
-# pool.ntp.org maps to about 1000 low-stratum NTP servers.  Your server will
-# pick a different set every time it starts up.  Please consider joining the
-# pool: &amp;lt;http://www.pool.ntp.org/join.html&amp;gt;
-server 0.debian.pool.ntp.org iburst
-server 1.debian.pool.ntp.org iburst
-server 2.debian.pool.ntp.org iburst
-server 3.debian.pool.ntp.org iburst
-
-
-# Access control configuration; see /usr/share/doc/ntp-doc/html/accopt.html for
-# details.  The web page &amp;lt;http://support.ntp.org/bin/view/Support/AccessRestrictions&amp;gt;
-# might also be helpful.
-#
-# Note that &amp;quot;restrict&amp;quot; applies to both servers and clients, so a configuration
-# that might be intended to block requests from certain clients could also end
-# up blocking replies from your own upstream servers.
-
-# By default, exchange time with everybody, but don&#39;t allow configuration.
 restrict -4 default kod notrap nomodify nopeer noquery
 restrict -6 default kod notrap nomodify nopeer noquery
-
-# Local users may interrogate the ntp server more closely.
 restrict 127.0.0.1
 restrict ::1
 
-# Clients from this (example!) subnet have unlimited access, but only if
-# cryptographically authenticated.
-#restrict 192.168.123.0 mask 255.255.255.0 notrust
-
-
-# If you want to provide time to your local subnet, change the next line.
-# (Again, the address is an example only.)
-#broadcast 192.168.123.255
-
-# If you want to listen to time broadcasts on your local subnet, de-comment the
-# next lines.  Please do this only if you trust everybody on the network!
-#disable auth
-#broadcastclient
+disable kernel
+logfile   /var/log/ntp.log

info: /Stage[main]/Ntp/File[/etc/ntp.conf]: Filebucketed /etc/ntp.conf to main with sum 3e250ecaf470e1d3a2b68edd5de46bfd
notice: /Stage[main]/Ntp/File[/etc/ntp.conf]/content: content changed &#39;{md5}3e250ecaf470e1d3a2b68edd5de46bfd&#39; to &#39;{md5}b54a36abe675e96723eb2e5562195c91&#39;
info: /Stage[main]/Ntp/File[/etc/ntp.conf]: Scheduling refresh of Service[ntp]
notice: /Stage[main]/Ntp/Service[ntp]: Triggered &#39;refresh&#39; from 1 events
notice: Finished catalog run in 16.80 seconds

&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;vamos conferir se o pacote está instalado&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@puppetmaster:~# dpkg --list|grep ntp
ii  ntp                                 1:4.2.6.p2+dfsg-1+b1         Network Time Protocol daemon and utility programs
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;vamos conferir se o arquivo está com as permissões declaradas&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@puppetmaster:~# ls -la /etc/ntp.conf 
-rw-r--r-- 1 root root 446 Oct  1 12:33 /etc/ntp.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;vamos conferir se o serviço está rodando&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@puppetmaster:~# /etc/init.d/ntp status
NTP server is running.
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;bacana, fez tudo que o foi declarado, com isto o módulo atendeu a todos os requisitos.&lt;/p&gt;
&lt;h2 id=&#34;3-amarrando-as-pontas&#34;&gt;3. Amarrando as pontas&lt;/h2&gt;
&lt;p&gt;Espero que o exemplo lhe ajude a compreender melhor o tratamento de codicionais e o uso de fatos em um manifest.&lt;/p&gt;
&lt;p&gt;Esse módulo está disponível no Github =&amp;gt; &lt;a href=&#34;http://github.com/gutocarvalho/puppet-ntp&#34;&gt;https://github.com/gutocarvalho/puppet-ntp&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Lançada versão 3.0</title>
      <link>https://archives.gutocarvalho.net/post/2012-10-01-puppet-lancada-versao-3/</link>
      <pubDate>Mon, 01 Oct 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-10-01-puppet-lancada-versao-3/</guid>
      <description>&lt;p&gt;Foi lançado no dia 28/Set/12 a versão &lt;a href=&#34;http://docs.puppetlabs.com/puppet/3/reference/release_notes.html&#34;&gt;3.0&lt;/a&gt; do Puppet&lt;/p&gt;
&lt;h2 id=&#34;instruções-para-instalação&#34;&gt;Instruções para instalação&lt;/h2&gt;
&lt;p&gt;Você pode fazer o download do código fonte em&lt;br&gt;
&lt;a href=&#34;http://downloads.puppetlabs.com/puppet/puppet-3.0.0.tar.gz&#34;&gt;http://downloads.puppetlabs.com/puppet/puppet-3.0.0.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Instruções para instalar via repositórios puppetlabs (yum/apt)&lt;br&gt;
&lt;a href=&#34;http://docs.puppetlabs.com/guides/puppetlabs_package_repositories.html&#34;&gt;http://docs.puppetlabs.com/guides/puppetlabs_package_repositories.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Você poder fazer o download da gem no rubygem&lt;br&gt;
&lt;a href=&#34;https://rubygems.org/downloads/puppet-3.0.0.gem&#34;&gt;https://rubygems.org/downloads/puppet-3.0.0.gem&lt;/a&gt;&lt;br&gt;
ou se preferir pode instalar usando o comando: &lt;code&gt;gem install puppet&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Você pode fazer o download do pacote para OSX:&lt;br&gt;
&lt;a href=&#34;http://downloads.puppetlabs.com/mac/puppet-3.0.0.dmg&#34;&gt;http://downloads.puppetlabs.com/mac/puppet-3.0.0.dmg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Você pode fazer o download do pacote para Windows:&lt;br&gt;
&lt;a href=&#34;http://downloads.puppetlabs.com/windows/puppet-3.0.0.msi&#34;&gt;http://downloads.puppetlabs.com/windows/puppet-3.0.0.msi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Se você usa &lt;code&gt;ensure =&amp;gt; latest&lt;/code&gt; para o pacote do puppet, a partir do dia 01 de Outubro ele já estará nos repositórios oficiais e será então instalado automaticamente.&lt;/p&gt;
&lt;h2 id=&#34;novidades&#34;&gt;Novidades&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Performance Improvements - substantial improvements to performance,
particularly around catalog compilation. Agent now uses JSON for
catalog cache, which can be dramatically faster for large catalogs
(#16058, #2892)&lt;/li&gt;
&lt;li&gt;Data Bindings - hiera will be automatically consulted for values of
parameterized classes so you don&amp;rsquo;t need the parser functions. (#11608)&lt;/li&gt;
&lt;li&gt;Improved OS/Platform Support - Full Ruby 1.9 support; vastly
improved Windows package support; yumrepo now supports ssl options
(#3324); better upstart support; better Solaris zone, package and
service support;&lt;/li&gt;
&lt;li&gt;Loading Plugins from Rubygems - you can now install and use puppet
extension code (faces, types, providers) via rubygems. (#7788)&lt;/li&gt;
&lt;li&gt;Server Auto-Discovery - Puppet agents can use SRV records in DNS to
find CA, master, report, and file servers (#3669)&lt;/li&gt;
&lt;li&gt;Semantic Versioning - With 3.0.0, Puppet Labs makes a commitment to
follow the Semantic Versioning guidelines outlined on semver.org.
Public, documented APIs won&amp;rsquo;t break until 4.0; minor-version 3.x
releases will add new features while retaining compatibility, and
tiny-version 3.0.x releases will be bugfix-only.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;mudanças-em-dslconfig&#34;&gt;Mudanças em DSL/Config&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Variable Scoping - Dynamic scoping has been removed.
&lt;a href=&#34;http://docs.puppetlabs.com/guides/scope_and_puppet.html&#34;&gt;http://docs.puppetlabs.com/guides/scope_and_puppet.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Auth.conf differentiates between names and IPs - There&amp;rsquo;s a new
&lt;code&gt;allow_ip&lt;/code&gt; keyword in auth.conf if you want to permit IP addresses.
(PR991)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unless&lt;/code&gt; is available as a synonym for &lt;code&gt;if !&lt;/code&gt; (#7762)&lt;/li&gt;
&lt;li&gt;Pluginsync now defaults to true - Yep, it&amp;rsquo;s true. (#5521)&lt;/li&gt;
&lt;li&gt;Updated &lt;code&gt;config.ru&lt;/code&gt; syntax &amp;ndash; When running the master under Rack,
make sure you update your config.ru to follow the example from
ext/rack/files/config.ru in the source distribution. (#15337)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;changelog&#34;&gt;Changelog&lt;/h2&gt;
&lt;p&gt;Para saber mais informações sobre o lançamento, acesse a mensagem de divulgação na lista &lt;a href=&#34;https://groups.google.com/group/puppet-announce/browse_thread/thread/96a993057f570edc&#34;&gt;puppet-announce&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Comparando a sintaxe com Salt</title>
      <link>https://archives.gutocarvalho.net/post/2012-09-28-puppet-salt-analisando-a-sintaxe/</link>
      <pubDate>Fri, 28 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-09-28-puppet-salt-analisando-a-sintaxe/</guid>
      <description>&lt;p&gt;Estive estudando a sintaxe do Salt, abaixo mostro como declarar um pacote, um serviço e um arquivo na DSL do Puppet e na SLS (YAML) do Salt, apenas com objetivo de comparar suas diferenças.&lt;/p&gt;
&lt;h3 id=&#34;declarando-no-puppet&#34;&gt;Declarando no Puppet&lt;/h3&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;package { &amp;ldquo;openssh-server&amp;rdquo;:
ensure  =&amp;gt; installed
}&lt;/p&gt;
&lt;p&gt;service { &amp;ldquo;ssh&amp;rdquo;:
ensure  =&amp;gt; running,
enable  =&amp;gt; true,
require =&amp;gt; Package[&amp;ldquo;openssh-sever&amp;rdquo;]
}&lt;/p&gt;
&lt;p&gt;file { &amp;ldquo;/etc/ssh/sshd_config&amp;rdquo;:
mode    =&amp;gt; 644,
owner   =&amp;gt; root,
group   =&amp;gt; root,
source  =&amp;gt; &amp;ldquo;puppet:///files/httpd.conf&amp;rdquo;,
require =&amp;gt; Package[&amp;ldquo;openssh-server&amp;rdquo;]
notify  =&amp;gt; Service[&amp;ldquo;ssh&amp;rdquo;]
}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h3 id=&#34;declarando-no-salt&#34;&gt;Declarando no Salt&lt;/h3&gt;
&lt;p&gt;{% codeblock lang:python %}&lt;/p&gt;
&lt;p&gt;openssh-server:
pkg.installed&lt;/p&gt;
&lt;p&gt;sshd:
service.running:
- require:
- pkg: openssh-client
- pkg: openssh-server
- file: /etc/ssh/sshd_config&lt;/p&gt;
&lt;p&gt;/etc/ssh/sshd_config:
file.managed:
- user: root
- group: root
- mode: 644
- source: salt://ssh/sshd_config
- require:
- pkg: openssh-server
- watch:
- file: /etc/ssh/sshd_config&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Veja que é bem parecido, o watch do salt faz a mesma coisa que o notify do puppet, caso o arquivo sofra alguma modificação ele faz um resfresh no serviço.&lt;/p&gt;
&lt;p&gt;E sigo estudando.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Puppet Criando módulo Saltstack</title>
      <link>https://archives.gutocarvalho.net/post/2012-09-28-puppet-criando-modulo-saltstack/</link>
      <pubDate>Fri, 28 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-09-28-puppet-criando-modulo-saltstack/</guid>
      <description>&lt;p&gt;Eu já mostrei como instalar o Salt manualmente, agora vou compartilhar com vocês o módulo que criei para instalá-lo via puppet em todo o nosso parque de servidores.&lt;/p&gt;
&lt;h3 id=&#34;criando-o-módulo&#34;&gt;Criando o módulo&lt;/h3&gt;
&lt;p&gt;crie o diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir saltstack
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no diretório&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd saltstack
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o subdir files&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir files
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o subdir manifests&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir manifests
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no subdir manifests&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd manifests
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o subdir classes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;mkdir classes
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;entre no subdir classes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd classes
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o arquivo salt-master.pp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim salt-master.pp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;insira os seguinte conteúdo&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;class salt-master {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if $lsbdistcodename == &#39;squeeze&#39; {

	package { &amp;quot;salt-master&amp;quot;:
		ensure =&amp;gt; present,
	}

	file { &amp;quot;/etc/salt/master&amp;quot;:
		ensure  =&amp;gt; present,
		mode    =&amp;gt; 644,
		owner   =&amp;gt; root,
		group   =&amp;gt; root,
		source  =&amp;gt; &amp;quot;puppet:///salt/master&amp;quot;,
		require =&amp;gt; Package[&#39;salt-master&#39;],
		notify  =&amp;gt; Service[&#39;salt-master&#39;],
	}

	service { &amp;quot;salt-master&amp;quot;:
		ensure     =&amp;gt; running,
		enable     =&amp;gt; true,
		hasstatus  =&amp;gt; true,
		hasrestart =&amp;gt; true,
		require    =&amp;gt; [ Package[&#39;salt-master&#39;], File[&amp;quot;/etc/salt/master&amp;quot;] ],
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;crie o arquivo salt-minion.pp com o conteúdo abaixo&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;class salt-minion {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;if $lsbdistcodename == &#39;squeeze&#39; {

	package { &amp;quot;salt-minion&amp;quot;:
		ensure =&amp;gt; present,
	}

	file { &amp;quot;/etc/salt/minion&amp;quot;:
		ensure  =&amp;gt; present,
		mode    =&amp;gt; 644,
		owner   =&amp;gt; root,
		group   =&amp;gt; root,
		source  =&amp;gt; &amp;quot;puppet:///salt/minion&amp;quot;,
		require =&amp;gt; Package[&#39;salt-minion&#39;],
		notify  =&amp;gt; Service[&#39;salt-minion&#39;],
	}

	service { &amp;quot;salt-minion&amp;quot;:
		ensure     =&amp;gt; running,
		enable     =&amp;gt; true,
		hasstatus  =&amp;gt; true,
		hasrestart =&amp;gt; true,
		require    =&amp;gt; [ Package[&#39;salt-minion&#39;], File[&amp;quot;/etc/salt/minion&amp;quot;] ],
	}
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;suba um nível&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd ..
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;crie o arquivo init.pp&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;vim init.pp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;insira o conteúdo abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import &amp;quot;classes/*.pp&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;coloque os arquivos de configuração master e minion no diretório files.&lt;/p&gt;
&lt;h3 id=&#34;declarando-módulo-no-sitepp&#34;&gt;Declarando módulo no site.pp&lt;/h3&gt;
&lt;p&gt;Após a construção do módulo precisamos de alguma forma carregá-lo, após isto poderemos incluir suas classes nas configurações dos nodes.&lt;/p&gt;
&lt;p&gt;O arquivo /etc/puppet/manifests/site.pp é o arquivo em que você precisa carregar os módulos, neste arquivo você poderá colocar uma linha como a abaixo:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import &amp;quot;saltstack&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Isso será suficiente para o carregamento do módulo.&lt;/p&gt;
&lt;h4 id=&#34;declarando-classes-em-nodes&#34;&gt;Declarando classes em nodes&lt;/h4&gt;
&lt;p&gt;Declarando a classe salt-master ao node master&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;node &amp;ldquo;master&amp;rdquo; {
include salt-master
}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;p&gt;Declarando a classe salt-minion ao node minion&lt;/p&gt;
&lt;p&gt;{% codeblock lang:puppet %}&lt;/p&gt;
&lt;p&gt;node &amp;ldquo;master&amp;rdquo; {
include salt-master
}&lt;/p&gt;
&lt;p&gt;{% endcodeblock %}&lt;/p&gt;
&lt;h4 id=&#34;amarrando-as-pontas&#34;&gt;Amarrando as pontas&lt;/h4&gt;
&lt;p&gt;Este módulo é simples, porém é o suficiente para instalarmos o servidor salt-master e também o salt-minion em nossos nodes, com isso poderemos executar comandos nos nodes em tempo real, algo que faz muita falta no puppet.&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>PuppetConf Live</title>
      <link>https://archives.gutocarvalho.net/post/2012-09-28-puppetconf-live/</link>
      <pubDate>Fri, 28 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-09-28-puppetconf-live/</guid>
      <description>&lt;p&gt;No dia 27 começou a PuppetConf, você pode assistir através do site da &lt;a href=&#34;http://puppetlabs.com/puppetconf-live/&#34;&gt;puppetlabs.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Aproveito para embutir o feed aqui neste blog.&lt;/p&gt;
&lt;p&gt;Sala Robertson&lt;/p&gt;
&lt;script src=&#34;http://player.ooyala.com/player.js?height=480&amp;deepLinkEmbedCode=xnOG55NTpgAhHRJicgB4vejcFFsXFVeQ&amp;embedCode=xnOG55NTpgAhHRJicgB4vejcFFsXFVeQ&amp;width=650&amp;video_pcode=luaTIxOo0RP8pBPofOr-NQxIriPX&#34;&gt;&lt;/script&gt;
&lt;br&gt;
Sala Fisher
&lt;script src=&#34;http://player.ooyala.com/player.js?height=480&amp;deepLinkEmbedCode=E0Nm55NTpnT1r0ulKJ-uExolSOmV4Ymc&amp;embedCode=E0Nm55NTpnT1r0ulKJ-uExolSOmV4Ymc&amp;width=650&amp;video_pcode=luaTIxOo0RP8pBPofOr-NQxIriPX&#34;&gt;&lt;/script&gt;
&lt;p&gt;Após o evento os vídeos estarão disponíveis no canal &lt;a href=&#34;http://www.youtube.com/user/puppetlabsinc&#34;&gt;puppet&lt;/a&gt; do youtube.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Salt Instalando master e minion em debian squeeze</title>
      <link>https://archives.gutocarvalho.net/post/2012-09-28-salt-instalando-master-e-minion-em-debian-squeeze/</link>
      <pubDate>Fri, 28 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-09-28-salt-instalando-master-e-minion-em-debian-squeeze/</guid>
      <description>&lt;p&gt;Vou abordar como instalar rapidamente o salt-master e o salt-minion em debian squeeze, em seguida vou mostrar como executar comandos remotamente.&lt;/p&gt;
&lt;h3 id=&#34;instalando-salt-master-em-debian-squeeze&#34;&gt;Instalando salt-master em debian squeeze&lt;/h3&gt;
&lt;p&gt;Habilite o repositório backports e atualize os índices&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# aptitude update
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Instale o salt-master&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# aptitude install salt-master
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja o seu endereço IPv4&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;root@puppetmaster:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:0c:29:12:bb:0f  
          inet addr:192.168.17.130  Bcast:192.168.17.255  Mask:255.255.255.0
          inet6 addr: fe80::20c:29ff:fe12:bb0f/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:38987 errors:0 dropped:0 overruns:0 frame:0
          TX packets:20024 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:28844823 (27.5 MiB)  TX bytes:2181661 (2.0 MiB)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Edite o aquivo /etc/salt/master e vá até a linha abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#interface 0.0.0.0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Modifique a linha descomentando e inserindo o IP de sua interface&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;interface: 192.168.17.130
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reinicie o salt master&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# /etc/init.d/salt-master restart
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ótimo, master pronto e instalado, agora vamos para o minion.&lt;/p&gt;
&lt;h3 id=&#34;instalando-salt-minion-em-debian-squeeze&#34;&gt;Instalando salt-minion em debian squeeze&lt;/h3&gt;
&lt;p&gt;No minion que será gerenciado pelo salt-master, habilite o repositório backports e instale o pacote através do comando abaixo.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltminion:~# aptitude install salt-minion
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Após instalar edite o arquivo /etc/salt/minion vá aré a linha abaixo&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#master: salt
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Modifique a linha descomentando e inserindo o IP do master&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;master: 192.168.17.130
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Reinicie o salt&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltminion:~# /etc/init.d/salt-minion restart
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;autorizando-o-minion-a-usar-o-master&#34;&gt;Autorizando o minion a usar o master&lt;/h3&gt;
&lt;p&gt;Agora vá ao salt master e digite&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# salt-key -L
Unaccepted Keys:
saltminion.hacklab
Accepted Keys:
Rejected:
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja que o minion saltminion precisa ser autorizado, use o comando abaixo para autorizar o uso do salt-master.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# salt-key -a saltminion.hacklab
Key for salminion.hacklab accepted.
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;executando-comandos-remotamente-a-partir-do-master&#34;&gt;Executando comandos remotamente a partir do master&lt;/h3&gt;
&lt;p&gt;Vamos pedir para o salt testar se os minions estão ligados&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# salt &#39;*&#39; test.ping
 saltminion.hacklab: True
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja que usamos * para orientar o teste em todos os minions&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Para executar em minions de um domínio use: &#39;*.dominio&#39;
Para executar em um minion específico use: &#39;minion.dominio&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Vamos executar o comando uname em todos os nodes&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# salt &#39;*&#39; cmd.run &#39;uname -a&#39;
saltminion.hacklab: Linux saltminion.hacklab 2.6.32-5-amd64 #1 SMP Sat May 5     01:12:59 UTC 2012 x86_64 GNU/Linux
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Executando comando free&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# salt &#39;*&#39; cmd.run &#39;free&#39;
saltminion.hacklab:              total       used       free     shared    buffers     cached
saltminion.hacklab: Mem:        114048     110828       3220          0       1500      62180
saltminion.hacklab: -/+ buffers/cache:      47148      66900
saltminion.hacklab: Swap:       217080       9608     207472
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Executando comando vmstat&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# salt &#39;*&#39; cmd.run &#39;vmstat&#39;
saltminion.hacklab: procs -----------memory---------- ---swap-- -----io---- -system-- ----cpu----
saltminion.hacklab:  r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa
saltminion.hacklab:  0  0   9608   3288   1500  62192    1    1    11     5    9    8  0  0 100  0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Executando código em python&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~#salt &#39;*&#39; cmd.exec_code python &#39;import sys; print sys.version&#39;
{&#39;saltminion.hacklab&#39;: &#39;2.6.6 (r266:84292, Dec 26 2010, 22:31:48) \n[GCC 4.4.5]&#39;}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Executando código em bash&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;root@saltmaster:~# salt &#39;*&#39; cmd.exec_code bash &#39;if [ -e /etc/resolv.conf ];then echo true;else echo false;fi&#39;
{&#39;saltminion.hacklab&#39;: &#39;true&#39;}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Veja que seu funcionamento é bastante simples e eficiente, eu gostei particularmente dos recursos &lt;strong&gt;cmd.exec_code&lt;/strong&gt; e &lt;strong&gt;cmd.run&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Sigo estudando e compartilhando o que for aprendendo.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Saltstack</title>
      <link>https://archives.gutocarvalho.net/post/2012-09-27-saltstack/</link>
      <pubDate>Thu, 27 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-09-27-saltstack/</guid>
      <description>&lt;p&gt;Há algum tempo venho compartilhando no blog meus estudos sobre gerência de configurações, e nestes estudos venho apresentando o Puppet como uma excelente ferramenta para implantar esse tipo de controle, porém ele não é a única opção, já mencionei o CHEF como uma ferramenta  alternativa e recentemente meu bom amigo @douglasandrade me apresentou o SaltStack.&lt;/p&gt;
&lt;p&gt;O Salt como o puppet é uma ferramenta para gerenciar sua infraestrutura, ele tem condições de controlar o estado das configurações dos sistemas sob sua gerência e também tem recursos nativos para executar comandos remotamente em centenas ou milhares de nodes.&lt;/p&gt;
&lt;p&gt;Veja abaixo a definição do propio site.&lt;/p&gt;
&lt;p&gt;{% blockquote %}
Salt is an open source tool to manage your infrastructure. Easy enough to get running in minutes and fast enough to manage tens of thousands of servers (and still get a response back in seconds).
{% endblockquote %}&lt;/p&gt;
&lt;p&gt;Eu recentemente instalei o salt em um dos clientes que também estamos usando o puppet, pelo puppet, mas o foco nesse caso foi a execução remota de comandos, a instalação do SALT foi muito rápida e simples, em poucos minutos ele estava instalado e eu já havia conseguido executar comandos em nodes remotos.&lt;/p&gt;
&lt;p&gt;É uma ferramenta interessante, recomendo conhecê-la se estiver pensando em implementar gerência de configurações.&lt;/p&gt;
&lt;p&gt;Eu particularmente ainda prefiro o puppet para controlar o estado das configurações, acho sua sintaxe mais clara, elegante, porém o SALT provou seu valor na execução remota de comandos de forma rápida e simplificada.&lt;/p&gt;
&lt;p&gt;Abaixo um screencast do SALT.&lt;/p&gt;
&lt;iframe src=&#34;http://blip.tv/play/AYLc3HMC.html?p=1&#34; width=&#34;550&#34; height=&#34;443&#34; frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;&lt;embed type=&#34;application/x-shockwave-flash&#34; src=&#34;http://a.blip.tv/api.swf#AYLc3HMC&#34; style=&#34;display:none&#34;&gt;&lt;/embed&gt;
&lt;p&gt;Em breve falarei mais do Salt.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
    
    <item>
      <title>Primeiro post</title>
      <link>https://archives.gutocarvalho.net/post/2012-09-26-primeiro-post/</link>
      <pubDate>Wed, 26 Sep 2012 00:00:00 +0000</pubDate>
      
      <guid>https://archives.gutocarvalho.net/post/2012-09-26-primeiro-post/</guid>
      <description>&lt;p&gt;Este é meu primeiro post no Octopress, estou de mudança do Wordpress para cá, em breve vou trazer os posts mais interessantes.&lt;/p&gt;
&lt;h3 id=&#34;1-por-que-estou-de-mudança&#34;&gt;1. Por que estou de mudança?&lt;/h3&gt;
&lt;p&gt;Eu queria algo mais simples para blogar, principalmente algo mais rápido.&lt;/p&gt;
&lt;h3 id=&#34;2-minha-história-com-o-wp&#34;&gt;2. Minha história com o WP&lt;/h3&gt;
&lt;p&gt;O Wordpress me atendeu por muitos e muitos anos, construí diversos projetos nele, porém nos últimos tempos eu tenho tido uma sensação de que a cada versão ele fica mais lento e mais vulnerável a medida que surgem novas funcionalidades.&lt;/p&gt;
&lt;p&gt;Além disto, não consigo enxergar a necessidade de ter um banco de dados relacional para armazenar posts de um blog.&lt;/p&gt;
&lt;p&gt;Tive recentes experiências com ferramentas sem banco que me provaram que é possível ter qualidade sem ter que usar algum banco SQL.&lt;/p&gt;
&lt;p&gt;A experiência que tive com o DOKUWIKI foi realmente esclarecedora, esta ferramenta funciona de forma maravilhosa, armazena tudo em arquivos, é rápido e simples de usar, tem centenas de plugins, foi escrita em PHP e fazer backup é uma maravilha, basta compactar um diretório e acabou o drama.&lt;/p&gt;
&lt;p&gt;Perseguindo essa ideia de simplificar, dei uma olhada no Flatpress, Pixie, PivotX, gpEasy e GetSimple, em sua maioria são CMS que não usam banco de dados, começava então uma longa pesquisa para substituir o WP.&lt;/p&gt;
&lt;h3 id=&#34;3-mas-afinal-o-que-vinha-me-desagradando-no-wp&#34;&gt;3. Mas afinal o que vinha me desagradando no WP?&lt;/h3&gt;
&lt;p&gt;Eventualmente quando eu ministrava alguma palestra ou quando meu blog era mencionado em algum outro blog grande, o Wordpress claramente não escalava - a.k.a - sentava bonito.&lt;/p&gt;
&lt;p&gt;Nos últimos tempos, percebi que havia diminuído o fluxo de minhas postagens, em parte devido a insatisfação com a ferramenta de blog, só o tempo que eu demorava para logar, criar um novo post e começar a escrever me desanimava profundamente, não tinha vontade de prosseguir e acaba fechando o navegador.&lt;/p&gt;
&lt;p&gt;Além disto, havia a necessidade de realizar regularmente desagradáveis manutenções, era backup de banco, backup do WP, atualizações de segurança constantes no core do WP, atualizações de plugin - quase diárias, tudo isso já estava me cansando, as vezes eu logava para blogar e quando percebia já estava fuçando e atualizando plugins e o própio WP.&lt;/p&gt;
&lt;p&gt;A combinação plugins + banco é uma âncora, para melhorar algo que já é lento, precisa-se usar mais plugins de cache ou colocar sistemas como varnish ou nginx na frente do WP fazendo o cacheamento pesado pra que ele escale.&lt;/p&gt;
&lt;p&gt;O editor rico (WYSIWYG) me deixava louco as vezes, copiar e colar algo era penoso e isso gerava muito retrabalho.&lt;/p&gt;
&lt;h3 id=&#34;4-o-que-eu-queria&#34;&gt;4. O que eu queria?&lt;/h3&gt;
&lt;p&gt;Eu &lt;strong&gt;não&lt;/strong&gt; queria uma ferramenta que usasse banco de dados relacional.&lt;/p&gt;
&lt;p&gt;Eu queria que a ferramenta gerasse HTML Puro.&lt;/p&gt;
&lt;p&gt;Eu queria escrever meus posts usando Markdown.&lt;/p&gt;
&lt;p&gt;Eu queria algo que pudesse controlar via GIT.&lt;/p&gt;
&lt;p&gt;Eu queria algo em Ruby, Python ou Perl - usei muito PHP, era hora de experimentar outras coisas.&lt;/p&gt;
&lt;p&gt;Eu queria sair do mainstream e ver as novidades recentes.&lt;/p&gt;
&lt;h3 id=&#34;5-octopress&#34;&gt;5. Octopress&lt;/h3&gt;
&lt;p&gt;Após muita pesquisa ainda não me via satisfeito, achei muitas ferramentas interessantes, porém a maioria havia sido feita usando PHP, e como disse, queria algo que não fosse PHP, eu queria algo mais simples e eficiente.&lt;/p&gt;
&lt;p&gt;Nessa linha de pesquisa, encontrei a engine Jekill, o framework Octopress (ruby) e um outro framework inspirado neste chamado Hyde (python), me identifiquei mais com o Octopress, testei, gostei e resolvi mudar.&lt;/p&gt;
&lt;h3 id=&#34;6-posts-antigos&#34;&gt;6. Posts antigos&lt;/h3&gt;
&lt;p&gt;Se vou migar os posts antigos? Provavelmente, ainda estou testando isso, existe um script chamado exitwp que migra os posts exportados do wordpress em formato XML para o formato Markdown, assim que eu tiver mais tempo termino esse teste.&lt;/p&gt;
&lt;h3 id=&#34;7-o-octopress-me-atende&#34;&gt;7. O Octopress me atende?&lt;/h3&gt;
&lt;p&gt;No meu caso sim, para boa fatia dos blogueiros que usam WP, provavelmente não.&lt;/p&gt;
&lt;p&gt;O conceito dele é bem diferente, para você ter uma ideia eu uso o MOU para escrever os posts (editor markdown) em meu OSX, uso o git para versionar meus arquivos, e posso via git ou rsync, publicar meus posts e páginas.&lt;/p&gt;
&lt;p&gt;A principal vantagem é que eu tenho o blog localmente no meu notebook, com isso posso trabalhar nele e empurrar para meu provedor quando houver conectividade.&lt;/p&gt;
&lt;h3 id=&#34;7-o-que-espero-obter-usando-o-octopress&#34;&gt;7. O que espero obter usando o Octopress?&lt;/h3&gt;
&lt;p&gt;Agilidade na publicação de meus posts.&lt;/p&gt;
&lt;p&gt;Agilidade na formatação dos meus posts (markdown).&lt;/p&gt;
&lt;p&gt;Conseguir aumentar a frequência de posts.&lt;/p&gt;
&lt;p&gt;Oferecer um site mais rápido para visitantes.&lt;/p&gt;
&lt;p&gt;Usar quase a mesma sintaxe que uso no dokuwiki.&lt;/p&gt;
&lt;p&gt;Blogar diretamente do meu note.&lt;/p&gt;
&lt;h3 id=&#34;8-já-foi-o-tempo-do-wordpress&#34;&gt;8. Já foi o tempo do Wordpress?&lt;/h3&gt;
&lt;p&gt;Na minha opinião, o Wordpress é uma ótima ferramenta, mas hoje temos uma gama de tecnologias surgindo, coisas muito interessantes, mais rápidas, mais eficientes, novas abordagens para gerenciar conteúdo e armazenar informações, soluções que merecem nossa atenção, portanto, acho que é hora de inovar, o wordpress é sempre uma alternativa, mas eu sou da turma que gosta de novas experiências, logo, na minha opinião o tempo do WP já passou e em meus novos projetos certamente vou escolher outro tipo de ferramenta.&lt;/p&gt;
&lt;p&gt;[s]&lt;br&gt;
Guto&lt;/p&gt;
</description>
    </item>
    
    
  </channel>
</rss>
