<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>yum on Guto Carvalho Archives</title><link>http://archive.gutocarvalho.net/categories/yum/</link><description>Recent content in yum on Guto Carvalho Archives</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 22 Jun 2013 00:00:00 +0000</lastBuildDate><atom:link href="http://archive.gutocarvalho.net/categories/yum/index.xml" rel="self" type="application/rss+xml"/><item><title>Mirror Yum CentOS</title><link>http://archive.gutocarvalho.net/post/2013-06-22-mirror-yum-centos/</link><pubDate>Sat, 22 Jun 2013 00:00:00 +0000</pubDate><guid>http://archive.gutocarvalho.net/post/2013-06-22-mirror-yum-centos/</guid><description>Em um cliente me foi solicitado criar um mirror local para pacotes CentOS 5 e 6, abaixo compartilho os scripts que foram criados, vai que te ajuda ;)
Os scripts utilizam rsync para pegar os pacotes.
1. Scripts 1.1. CentOS Base/Updates/Extras/Media Este baixa pacotes oficiais CentOS para CentOS 5 e 6.
#!/bin/bash LOCKFILE=&amp;quot;/var/lock/subsys/rsync_centos_updates&amp;quot; CENTOSDIR=&amp;quot;/srv/mirror/centos&amp;quot; MIRROR6=&amp;quot;rsync://mirror.steadfast.net/centos/6.4&amp;quot; MIRROR5=&amp;quot;rsync://mirror.steadfast.net/centos/5.9&amp;quot; if [ -f $LOCKFILE ]; then echo &amp;quot;Updates via rsync already running.&amp;quot; exit 0 else if [ -d $CENTOSDIR ] ; then touch $LOCKFILE rsync -avSHP $MIRROR6 --delete --exclude 'local*' --exclude isos --exclude SRPMS $CENTOSDIR rsync -avSHP $MIRROR5 --delete --exclude 'local*' --exclude isos --exclude SRPMS $CENTOSDIR rm -f $LOCKFILE else echo &amp;quot;Target directory $CENTOSDIR not present.</description></item></channel></rss>